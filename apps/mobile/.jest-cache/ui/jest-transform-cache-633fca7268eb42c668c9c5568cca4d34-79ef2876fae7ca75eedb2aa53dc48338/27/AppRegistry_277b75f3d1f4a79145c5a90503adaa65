24848674d0c662a40ea7aac1068f9f1d
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _BatchedBridge = _interopRequireDefault(require("../BatchedBridge/BatchedBridge"));
var _BugReporting = _interopRequireDefault(require("../BugReporting/BugReporting"));
var _createPerformanceLogger = _interopRequireDefault(require("../Utilities/createPerformanceLogger"));
var _infoLog = _interopRequireDefault(require("../Utilities/infoLog"));
var _SceneTracker = _interopRequireDefault(require("../Utilities/SceneTracker"));
var _DisplayMode = require("./DisplayMode");
var _HeadlessJsTaskError = _interopRequireDefault(require("./HeadlessJsTaskError"));
var _NativeHeadlessJsTaskSupport = _interopRequireDefault(require("./NativeHeadlessJsTaskSupport"));
var _renderApplication = _interopRequireDefault(require("./renderApplication"));
var _RendererProxy = require("./RendererProxy");
var _invariant = _interopRequireDefault(require("invariant"));
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var runnables = {};
var runCount = 1;
var sections = {};
var taskProviders = new Map();
var taskCancelProviders = new Map();
var componentProviderInstrumentationHook = function componentProviderInstrumentationHook(component) {
  return component();
};
var wrapperComponentProvider;
var showArchitectureIndicator = false;
var AppRegistry = {
  setWrapperComponentProvider: function setWrapperComponentProvider(provider) {
    wrapperComponentProvider = provider;
  },
  enableArchitectureIndicator: function enableArchitectureIndicator(enabled) {
    showArchitectureIndicator = enabled;
  },
  registerConfig: function registerConfig(config) {
    config.forEach(function (appConfig) {
      if (appConfig.run) {
        AppRegistry.registerRunnable(appConfig.appKey, appConfig.run);
      } else {
        (0, _invariant.default)(appConfig.component != null, 'AppRegistry.registerConfig(...): Every config is expected to set ' + 'either `run` or `component`, but `%s` has neither.', appConfig.appKey);
        AppRegistry.registerComponent(appConfig.appKey, appConfig.component, appConfig.section);
      }
    });
  },
  registerComponent: function registerComponent(appKey, componentProvider, section) {
    var scopedPerformanceLogger = (0, _createPerformanceLogger.default)();
    runnables[appKey] = {
      componentProvider: componentProvider,
      run: function run(appParameters, displayMode) {
        var _appParameters$initia;
        var concurrentRootEnabled = ((_appParameters$initia = appParameters.initialProps) == null ? void 0 : _appParameters$initia.concurrentRoot) || appParameters.concurrentRoot;
        (0, _renderApplication.default)(componentProviderInstrumentationHook(componentProvider, scopedPerformanceLogger), appParameters.initialProps, appParameters.rootTag, wrapperComponentProvider && wrapperComponentProvider(appParameters), appParameters.fabric, showArchitectureIndicator, scopedPerformanceLogger, appKey === 'LogBox', appKey, (0, _DisplayMode.coerceDisplayMode)(displayMode), concurrentRootEnabled);
      }
    };
    if (section) {
      sections[appKey] = runnables[appKey];
    }
    return appKey;
  },
  registerRunnable: function registerRunnable(appKey, run) {
    runnables[appKey] = {
      run: run
    };
    return appKey;
  },
  registerSection: function registerSection(appKey, component) {
    AppRegistry.registerComponent(appKey, component, true);
  },
  getAppKeys: function getAppKeys() {
    return Object.keys(runnables);
  },
  getSectionKeys: function getSectionKeys() {
    return Object.keys(sections);
  },
  getSections: function getSections() {
    return _objectSpread({}, sections);
  },
  getRunnable: function getRunnable(appKey) {
    return runnables[appKey];
  },
  getRegistry: function getRegistry() {
    return {
      sections: AppRegistry.getSectionKeys(),
      runnables: _objectSpread({}, runnables)
    };
  },
  setComponentProviderInstrumentationHook: function setComponentProviderInstrumentationHook(hook) {
    componentProviderInstrumentationHook = hook;
  },
  runApplication: function runApplication(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var logParams = __DEV__ ? '" with ' + JSON.stringify(appParameters) : '';
      var msg = 'Running "' + appKey + logParams;
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.runApplication' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey] && runnables[appKey].run, `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    _SceneTracker.default.setActiveScene({
      name: appKey
    });
    runnables[appKey].run(appParameters, displayMode);
  },
  setSurfaceProps: function setSurfaceProps(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var msg = 'Updating props for Surface "' + appKey + '" with ' + JSON.stringify(appParameters);
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.setSurfaceProps' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey] && runnables[appKey].run, `"${appKey}" has not been registered. This can happen if:\n` + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    runnables[appKey].run(appParameters, displayMode);
  },
  unmountApplicationComponentAtRootTag: function unmountApplicationComponentAtRootTag(rootTag) {
    (0, _RendererProxy.unmountComponentAtNodeAndRemoveContainer)(rootTag);
  },
  registerHeadlessTask: function registerHeadlessTask(taskKey, taskProvider) {
    this.registerCancellableHeadlessTask(taskKey, taskProvider, function () {
      return function () {};
    });
  },
  registerCancellableHeadlessTask: function registerCancellableHeadlessTask(taskKey, taskProvider, taskCancelProvider) {
    if (taskProviders.has(taskKey)) {
      console.warn(`registerHeadlessTask or registerCancellableHeadlessTask called multiple times for same key '${taskKey}'`);
    }
    taskProviders.set(taskKey, taskProvider);
    taskCancelProviders.set(taskKey, taskCancelProvider);
  },
  startHeadlessTask: function startHeadlessTask(taskId, taskKey, data) {
    var taskProvider = taskProviders.get(taskKey);
    if (!taskProvider) {
      console.warn(`No task registered for key ${taskKey}`);
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
      return;
    }
    taskProvider()(data).then(function () {
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
    }).catch(function (reason) {
      console.error(reason);
      if (_NativeHeadlessJsTaskSupport.default && reason instanceof _HeadlessJsTaskError.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskRetry(taskId).then(function (retryPosted) {
          if (!retryPosted) {
            _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
          }
        });
      }
    });
  },
  cancelHeadlessTask: function cancelHeadlessTask(taskId, taskKey) {
    var taskCancelProvider = taskCancelProviders.get(taskKey);
    if (!taskCancelProvider) {
      throw new Error(`No task canceller registered for key '${taskKey}'`);
    }
    taskCancelProvider()();
  }
};
if (!(global.RN$Bridgeless === true)) {
  _BatchedBridge.default.registerCallableModule('AppRegistry', AppRegistry);
  AppRegistry.registerComponent('LogBox', function () {
    if (__DEV__) {
      return require("../LogBox/LogBoxInspectorContainer").default;
    } else {
      return function NoOp() {
        return null;
      };
    }
  });
}
module.exports = AppRegistry;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQmF0Y2hlZEJyaWRnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX0J1Z1JlcG9ydGluZyIsIl9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlciIsIl9pbmZvTG9nIiwiX1NjZW5lVHJhY2tlciIsIl9EaXNwbGF5TW9kZSIsIl9IZWFkbGVzc0pzVGFza0Vycm9yIiwiX05hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCIsIl9yZW5kZXJBcHBsaWNhdGlvbiIsIl9SZW5kZXJlclByb3h5IiwiX2ludmFyaWFudCIsIm93bktleXMiLCJlIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJkZWZhdWx0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsInJ1bm5hYmxlcyIsInJ1bkNvdW50Iiwic2VjdGlvbnMiLCJ0YXNrUHJvdmlkZXJzIiwiTWFwIiwidGFza0NhbmNlbFByb3ZpZGVycyIsImNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayIsImNvbXBvbmVudCIsIndyYXBwZXJDb21wb25lbnRQcm92aWRlciIsInNob3dBcmNoaXRlY3R1cmVJbmRpY2F0b3IiLCJBcHBSZWdpc3RyeSIsInNldFdyYXBwZXJDb21wb25lbnRQcm92aWRlciIsInByb3ZpZGVyIiwiZW5hYmxlQXJjaGl0ZWN0dXJlSW5kaWNhdG9yIiwiZW5hYmxlZCIsInJlZ2lzdGVyQ29uZmlnIiwiY29uZmlnIiwiYXBwQ29uZmlnIiwicnVuIiwicmVnaXN0ZXJSdW5uYWJsZSIsImFwcEtleSIsImludmFyaWFudCIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2VjdGlvbiIsImNvbXBvbmVudFByb3ZpZGVyIiwic2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIiLCJjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlciIsImFwcFBhcmFtZXRlcnMiLCJkaXNwbGF5TW9kZSIsIl9hcHBQYXJhbWV0ZXJzJGluaXRpYSIsImNvbmN1cnJlbnRSb290RW5hYmxlZCIsImluaXRpYWxQcm9wcyIsImNvbmN1cnJlbnRSb290IiwicmVuZGVyQXBwbGljYXRpb24iLCJyb290VGFnIiwiZmFicmljIiwiY29lcmNlRGlzcGxheU1vZGUiLCJyZWdpc3RlclNlY3Rpb24iLCJnZXRBcHBLZXlzIiwiZ2V0U2VjdGlvbktleXMiLCJnZXRTZWN0aW9ucyIsImdldFJ1bm5hYmxlIiwiZ2V0UmVnaXN0cnkiLCJzZXRDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2siLCJob29rIiwicnVuQXBwbGljYXRpb24iLCJsb2dQYXJhbXMiLCJfX0RFVl9fIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1zZyIsImluZm9Mb2ciLCJCdWdSZXBvcnRpbmciLCJhZGRTb3VyY2UiLCJTY2VuZVRyYWNrZXIiLCJzZXRBY3RpdmVTY2VuZSIsIm5hbWUiLCJzZXRTdXJmYWNlUHJvcHMiLCJ1bm1vdW50QXBwbGljYXRpb25Db21wb25lbnRBdFJvb3RUYWciLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlQW5kUmVtb3ZlQ29udGFpbmVyIiwicmVnaXN0ZXJIZWFkbGVzc1Rhc2siLCJ0YXNrS2V5IiwidGFza1Byb3ZpZGVyIiwicmVnaXN0ZXJDYW5jZWxsYWJsZUhlYWRsZXNzVGFzayIsInRhc2tDYW5jZWxQcm92aWRlciIsImhhcyIsImNvbnNvbGUiLCJ3YXJuIiwic2V0Iiwic3RhcnRIZWFkbGVzc1Rhc2siLCJ0YXNrSWQiLCJkYXRhIiwiZ2V0IiwiTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Iiwibm90aWZ5VGFza0ZpbmlzaGVkIiwidGhlbiIsImNhdGNoIiwicmVhc29uIiwiZXJyb3IiLCJIZWFkbGVzc0pzVGFza0Vycm9yIiwibm90aWZ5VGFza1JldHJ5IiwicmV0cnlQb3N0ZWQiLCJjYW5jZWxIZWFkbGVzc1Rhc2siLCJFcnJvciIsImdsb2JhbCIsIlJOJEJyaWRnZWxlc3MiLCJCYXRjaGVkQnJpZGdlIiwicmVnaXN0ZXJDYWxsYWJsZU1vZHVsZSIsIk5vT3AiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQXBwUmVnaXN0cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1Jvb3RUYWd9IGZyb20gJy4uL1R5cGVzL1Jvb3RUYWdUeXBlcyc7XG5pbXBvcnQgdHlwZSB7SVBlcmZvcm1hbmNlTG9nZ2VyfSBmcm9tICcuLi9VdGlsaXRpZXMvY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXInO1xuXG5pbXBvcnQgQmF0Y2hlZEJyaWRnZSBmcm9tICcuLi9CYXRjaGVkQnJpZGdlL0JhdGNoZWRCcmlkZ2UnO1xuaW1wb3J0IEJ1Z1JlcG9ydGluZyBmcm9tICcuLi9CdWdSZXBvcnRpbmcvQnVnUmVwb3J0aW5nJztcbmltcG9ydCBjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlciBmcm9tICcuLi9VdGlsaXRpZXMvY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXInO1xuaW1wb3J0IGluZm9Mb2cgZnJvbSAnLi4vVXRpbGl0aWVzL2luZm9Mb2cnO1xuaW1wb3J0IFNjZW5lVHJhY2tlciBmcm9tICcuLi9VdGlsaXRpZXMvU2NlbmVUcmFja2VyJztcbmltcG9ydCB7Y29lcmNlRGlzcGxheU1vZGV9IGZyb20gJy4vRGlzcGxheU1vZGUnO1xuaW1wb3J0IEhlYWRsZXNzSnNUYXNrRXJyb3IgZnJvbSAnLi9IZWFkbGVzc0pzVGFza0Vycm9yJztcbmltcG9ydCBOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQgZnJvbSAnLi9OYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQnO1xuaW1wb3J0IHJlbmRlckFwcGxpY2F0aW9uIGZyb20gJy4vcmVuZGVyQXBwbGljYXRpb24nO1xuaW1wb3J0IHt1bm1vdW50Q29tcG9uZW50QXROb2RlQW5kUmVtb3ZlQ29udGFpbmVyfSBmcm9tICcuL1JlbmRlcmVyUHJveHknO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuXG50eXBlIFRhc2sgPSAodGFza0RhdGE6IGFueSkgPT4gUHJvbWlzZTx2b2lkPjtcbmV4cG9ydCB0eXBlIFRhc2tQcm92aWRlciA9ICgpID0+IFRhc2s7XG50eXBlIFRhc2tDYW5jZWxsZXIgPSAoKSA9PiB2b2lkO1xudHlwZSBUYXNrQ2FuY2VsUHJvdmlkZXIgPSAoKSA9PiBUYXNrQ2FuY2VsbGVyO1xuXG5leHBvcnQgdHlwZSBDb21wb25lbnRQcm92aWRlciA9ICgpID0+IFJlYWN0JENvbXBvbmVudFR5cGU8YW55PjtcbmV4cG9ydCB0eXBlIENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayA9IChcbiAgY29tcG9uZW50OiBDb21wb25lbnRQcm92aWRlcixcbiAgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXI6IElQZXJmb3JtYW5jZUxvZ2dlcixcbikgPT4gUmVhY3QkQ29tcG9uZW50VHlwZTxhbnk+O1xuZXhwb3J0IHR5cGUgQXBwQ29uZmlnID0ge1xuICBhcHBLZXk6IHN0cmluZyxcbiAgY29tcG9uZW50PzogQ29tcG9uZW50UHJvdmlkZXIsXG4gIHJ1bj86IEZ1bmN0aW9uLFxuICBzZWN0aW9uPzogYm9vbGVhbixcbiAgLi4uXG59O1xuZXhwb3J0IHR5cGUgUnVubmFibGUgPSB7XG4gIGNvbXBvbmVudD86IENvbXBvbmVudFByb3ZpZGVyLFxuICBydW46IEZ1bmN0aW9uLFxuICAuLi5cbn07XG5leHBvcnQgdHlwZSBSdW5uYWJsZXMgPSB7W2FwcEtleTogc3RyaW5nXTogUnVubmFibGUsIC4uLn07XG5leHBvcnQgdHlwZSBSZWdpc3RyeSA9IHtcbiAgc2VjdGlvbnM6IEFycmF5PHN0cmluZz4sXG4gIHJ1bm5hYmxlczogUnVubmFibGVzLFxuICAuLi5cbn07XG5leHBvcnQgdHlwZSBXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIgPSAoXG4gIGFwcFBhcmFtZXRlcnM6IGFueSxcbikgPT4gUmVhY3QkQ29tcG9uZW50VHlwZTxhbnk+O1xuXG5jb25zdCBydW5uYWJsZXM6IFJ1bm5hYmxlcyA9IHt9O1xubGV0IHJ1bkNvdW50ID0gMTtcbmNvbnN0IHNlY3Rpb25zOiBSdW5uYWJsZXMgPSB7fTtcbmNvbnN0IHRhc2tQcm92aWRlcnM6IE1hcDxzdHJpbmcsIFRhc2tQcm92aWRlcj4gPSBuZXcgTWFwKCk7XG5jb25zdCB0YXNrQ2FuY2VsUHJvdmlkZXJzOiBNYXA8c3RyaW5nLCBUYXNrQ2FuY2VsUHJvdmlkZXI+ID0gbmV3IE1hcCgpO1xubGV0IGNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vazogQ29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rID1cbiAgKGNvbXBvbmVudDogQ29tcG9uZW50UHJvdmlkZXIpID0+IGNvbXBvbmVudCgpO1xuXG5sZXQgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyOiA/V3JhcHBlckNvbXBvbmVudFByb3ZpZGVyO1xubGV0IHNob3dBcmNoaXRlY3R1cmVJbmRpY2F0b3IgPSBmYWxzZTtcblxuLyoqXG4gKiBgQXBwUmVnaXN0cnlgIGlzIHRoZSBKYXZhU2NyaXB0IGVudHJ5IHBvaW50IHRvIHJ1bm5pbmcgYWxsIFJlYWN0IE5hdGl2ZSBhcHBzLlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5XG4gKi9cbmNvbnN0IEFwcFJlZ2lzdHJ5ID0ge1xuICBzZXRXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIocHJvdmlkZXI6IFdyYXBwZXJDb21wb25lbnRQcm92aWRlcikge1xuICAgIHdyYXBwZXJDb21wb25lbnRQcm92aWRlciA9IHByb3ZpZGVyO1xuICB9LFxuXG4gIGVuYWJsZUFyY2hpdGVjdHVyZUluZGljYXRvcihlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgc2hvd0FyY2hpdGVjdHVyZUluZGljYXRvciA9IGVuYWJsZWQ7XG4gIH0sXG5cbiAgcmVnaXN0ZXJDb25maWcoY29uZmlnOiBBcnJheTxBcHBDb25maWc+KTogdm9pZCB7XG4gICAgY29uZmlnLmZvckVhY2goYXBwQ29uZmlnID0+IHtcbiAgICAgIGlmIChhcHBDb25maWcucnVuKSB7XG4gICAgICAgIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyUnVubmFibGUoYXBwQ29uZmlnLmFwcEtleSwgYXBwQ29uZmlnLnJ1bik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgYXBwQ29uZmlnLmNvbXBvbmVudCAhPSBudWxsLFxuICAgICAgICAgICdBcHBSZWdpc3RyeS5yZWdpc3RlckNvbmZpZyguLi4pOiBFdmVyeSBjb25maWcgaXMgZXhwZWN0ZWQgdG8gc2V0ICcgK1xuICAgICAgICAgICAgJ2VpdGhlciBgcnVuYCBvciBgY29tcG9uZW50YCwgYnV0IGAlc2AgaGFzIG5laXRoZXIuJyxcbiAgICAgICAgICBhcHBDb25maWcuYXBwS2V5LFxuICAgICAgICApO1xuICAgICAgICBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudChcbiAgICAgICAgICBhcHBDb25maWcuYXBwS2V5LFxuICAgICAgICAgIGFwcENvbmZpZy5jb21wb25lbnQsXG4gICAgICAgICAgYXBwQ29uZmlnLnNlY3Rpb24sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhbiBhcHAncyByb290IGNvbXBvbmVudC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjcmVnaXN0ZXJjb21wb25lbnRcbiAgICovXG4gIHJlZ2lzdGVyQ29tcG9uZW50KFxuICAgIGFwcEtleTogc3RyaW5nLFxuICAgIGNvbXBvbmVudFByb3ZpZGVyOiBDb21wb25lbnRQcm92aWRlcixcbiAgICBzZWN0aW9uPzogYm9vbGVhbixcbiAgKTogc3RyaW5nIHtcbiAgICBsZXQgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIgPSBjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcigpO1xuICAgIHJ1bm5hYmxlc1thcHBLZXldID0ge1xuICAgICAgY29tcG9uZW50UHJvdmlkZXIsXG4gICAgICBydW46IChhcHBQYXJhbWV0ZXJzLCBkaXNwbGF5TW9kZSkgPT4ge1xuICAgICAgICBjb25zdCBjb25jdXJyZW50Um9vdEVuYWJsZWQgPVxuICAgICAgICAgIGFwcFBhcmFtZXRlcnMuaW5pdGlhbFByb3BzPy5jb25jdXJyZW50Um9vdCB8fFxuICAgICAgICAgIGFwcFBhcmFtZXRlcnMuY29uY3VycmVudFJvb3Q7XG4gICAgICAgIHJlbmRlckFwcGxpY2F0aW9uKFxuICAgICAgICAgIGNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayhcbiAgICAgICAgICAgIGNvbXBvbmVudFByb3ZpZGVyLFxuICAgICAgICAgICAgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIsXG4gICAgICAgICAgKSxcbiAgICAgICAgICBhcHBQYXJhbWV0ZXJzLmluaXRpYWxQcm9wcyxcbiAgICAgICAgICBhcHBQYXJhbWV0ZXJzLnJvb3RUYWcsXG4gICAgICAgICAgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyICYmIHdyYXBwZXJDb21wb25lbnRQcm92aWRlcihhcHBQYXJhbWV0ZXJzKSxcbiAgICAgICAgICBhcHBQYXJhbWV0ZXJzLmZhYnJpYyxcbiAgICAgICAgICBzaG93QXJjaGl0ZWN0dXJlSW5kaWNhdG9yLFxuICAgICAgICAgIHNjb3BlZFBlcmZvcm1hbmNlTG9nZ2VyLFxuICAgICAgICAgIGFwcEtleSA9PT0gJ0xvZ0JveCcsXG4gICAgICAgICAgYXBwS2V5LFxuICAgICAgICAgIGNvZXJjZURpc3BsYXlNb2RlKGRpc3BsYXlNb2RlKSxcbiAgICAgICAgICBjb25jdXJyZW50Um9vdEVuYWJsZWQsXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgIH07XG4gICAgaWYgKHNlY3Rpb24pIHtcbiAgICAgIHNlY3Rpb25zW2FwcEtleV0gPSBydW5uYWJsZXNbYXBwS2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcEtleTtcbiAgfSxcblxuICByZWdpc3RlclJ1bm5hYmxlKGFwcEtleTogc3RyaW5nLCBydW46IEZ1bmN0aW9uKTogc3RyaW5nIHtcbiAgICBydW5uYWJsZXNbYXBwS2V5XSA9IHtydW59O1xuICAgIHJldHVybiBhcHBLZXk7XG4gIH0sXG5cbiAgcmVnaXN0ZXJTZWN0aW9uKGFwcEtleTogc3RyaW5nLCBjb21wb25lbnQ6IENvbXBvbmVudFByb3ZpZGVyKTogdm9pZCB7XG4gICAgQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoYXBwS2V5LCBjb21wb25lbnQsIHRydWUpO1xuICB9LFxuXG4gIGdldEFwcEtleXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHJ1bm5hYmxlcyk7XG4gIH0sXG5cbiAgZ2V0U2VjdGlvbktleXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNlY3Rpb25zKTtcbiAgfSxcblxuICBnZXRTZWN0aW9ucygpOiBSdW5uYWJsZXMge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zZWN0aW9ucyxcbiAgICB9O1xuICB9LFxuXG4gIGdldFJ1bm5hYmxlKGFwcEtleTogc3RyaW5nKTogP1J1bm5hYmxlIHtcbiAgICByZXR1cm4gcnVubmFibGVzW2FwcEtleV07XG4gIH0sXG5cbiAgZ2V0UmVnaXN0cnkoKTogUmVnaXN0cnkge1xuICAgIHJldHVybiB7XG4gICAgICBzZWN0aW9uczogQXBwUmVnaXN0cnkuZ2V0U2VjdGlvbktleXMoKSxcbiAgICAgIHJ1bm5hYmxlczogey4uLnJ1bm5hYmxlc30sXG4gICAgfTtcbiAgfSxcblxuICBzZXRDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2soXG4gICAgaG9vazogQ29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rLFxuICApIHtcbiAgICBjb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2sgPSBob29rO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMb2FkcyB0aGUgSmF2YVNjcmlwdCBidW5kbGUgYW5kIHJ1bnMgdGhlIGFwcC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjcnVuYXBwbGljYXRpb25cbiAgICovXG4gIHJ1bkFwcGxpY2F0aW9uKFxuICAgIGFwcEtleTogc3RyaW5nLFxuICAgIGFwcFBhcmFtZXRlcnM6IGFueSxcbiAgICBkaXNwbGF5TW9kZT86IG51bWJlcixcbiAgKTogdm9pZCB7XG4gICAgaWYgKGFwcEtleSAhPT0gJ0xvZ0JveCcpIHtcbiAgICAgIGNvbnN0IGxvZ1BhcmFtcyA9IF9fREVWX19cbiAgICAgICAgPyAnXCIgd2l0aCAnICsgSlNPTi5zdHJpbmdpZnkoYXBwUGFyYW1ldGVycylcbiAgICAgICAgOiAnJztcbiAgICAgIGNvbnN0IG1zZyA9ICdSdW5uaW5nIFwiJyArIGFwcEtleSArIGxvZ1BhcmFtcztcbiAgICAgIGluZm9Mb2cobXNnKTtcbiAgICAgIEJ1Z1JlcG9ydGluZy5hZGRTb3VyY2UoXG4gICAgICAgICdBcHBSZWdpc3RyeS5ydW5BcHBsaWNhdGlvbicgKyBydW5Db3VudCsrLFxuICAgICAgICAoKSA9PiBtc2csXG4gICAgICApO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoXG4gICAgICBydW5uYWJsZXNbYXBwS2V5XSAmJiBydW5uYWJsZXNbYXBwS2V5XS5ydW4sXG4gICAgICBgXCIke2FwcEtleX1cIiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC4gVGhpcyBjYW4gaGFwcGVuIGlmOlxcbmAgK1xuICAgICAgICAnKiBNZXRybyAodGhlIGxvY2FsIGRldiBzZXJ2ZXIpIGlzIHJ1biBmcm9tIHRoZSB3cm9uZyBmb2xkZXIuICcgK1xuICAgICAgICAnQ2hlY2sgaWYgTWV0cm8gaXMgcnVubmluZywgc3RvcCBpdCBhbmQgcmVzdGFydCBpdCBpbiB0aGUgY3VycmVudCBwcm9qZWN0LlxcbicgK1xuICAgICAgICBcIiogQSBtb2R1bGUgZmFpbGVkIHRvIGxvYWQgZHVlIHRvIGFuIGVycm9yIGFuZCBgQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnRgIHdhc24ndCBjYWxsZWQuXCIsXG4gICAgKTtcblxuICAgIFNjZW5lVHJhY2tlci5zZXRBY3RpdmVTY2VuZSh7bmFtZTogYXBwS2V5fSk7XG4gICAgcnVubmFibGVzW2FwcEtleV0ucnVuKGFwcFBhcmFtZXRlcnMsIGRpc3BsYXlNb2RlKTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIGluaXRpYWwgcHJvcHMgZm9yIGEgc3VyZmFjZSB0aGF0J3MgYWxyZWFkeSByZW5kZXJlZFxuICAgKi9cbiAgc2V0U3VyZmFjZVByb3BzKFxuICAgIGFwcEtleTogc3RyaW5nLFxuICAgIGFwcFBhcmFtZXRlcnM6IGFueSxcbiAgICBkaXNwbGF5TW9kZT86IG51bWJlcixcbiAgKTogdm9pZCB7XG4gICAgaWYgKGFwcEtleSAhPT0gJ0xvZ0JveCcpIHtcbiAgICAgIGNvbnN0IG1zZyA9XG4gICAgICAgICdVcGRhdGluZyBwcm9wcyBmb3IgU3VyZmFjZSBcIicgK1xuICAgICAgICBhcHBLZXkgK1xuICAgICAgICAnXCIgd2l0aCAnICtcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYXBwUGFyYW1ldGVycyk7XG4gICAgICBpbmZvTG9nKG1zZyk7XG4gICAgICBCdWdSZXBvcnRpbmcuYWRkU291cmNlKFxuICAgICAgICAnQXBwUmVnaXN0cnkuc2V0U3VyZmFjZVByb3BzJyArIHJ1bkNvdW50KyssXG4gICAgICAgICgpID0+IG1zZyxcbiAgICAgICk7XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIHJ1bm5hYmxlc1thcHBLZXldICYmIHJ1bm5hYmxlc1thcHBLZXldLnJ1bixcbiAgICAgIGBcIiR7YXBwS2V5fVwiIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLiBUaGlzIGNhbiBoYXBwZW4gaWY6XFxuYCArXG4gICAgICAgICcqIE1ldHJvICh0aGUgbG9jYWwgZGV2IHNlcnZlcikgaXMgcnVuIGZyb20gdGhlIHdyb25nIGZvbGRlci4gJyArXG4gICAgICAgICdDaGVjayBpZiBNZXRybyBpcyBydW5uaW5nLCBzdG9wIGl0IGFuZCByZXN0YXJ0IGl0IGluIHRoZSBjdXJyZW50IHByb2plY3QuXFxuJyArXG4gICAgICAgIFwiKiBBIG1vZHVsZSBmYWlsZWQgdG8gbG9hZCBkdWUgdG8gYW4gZXJyb3IgYW5kIGBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudGAgd2Fzbid0IGNhbGxlZC5cIixcbiAgICApO1xuXG4gICAgcnVubmFibGVzW2FwcEtleV0ucnVuKGFwcFBhcmFtZXRlcnMsIGRpc3BsYXlNb2RlKTtcbiAgfSxcblxuICAvKipcbiAgICogU3RvcHMgYW4gYXBwbGljYXRpb24gd2hlbiBhIHZpZXcgc2hvdWxkIGJlIGRlc3Ryb3llZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjdW5tb3VudGFwcGxpY2F0aW9uY29tcG9uZW50YXRyb290dGFnXG4gICAqL1xuICB1bm1vdW50QXBwbGljYXRpb25Db21wb25lbnRBdFJvb3RUYWcocm9vdFRhZzogUm9vdFRhZyk6IHZvaWQge1xuICAgIHVubW91bnRDb21wb25lbnRBdE5vZGVBbmRSZW1vdmVDb250YWluZXIocm9vdFRhZyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgaGVhZGxlc3MgdGFzay4gQSBoZWFkbGVzcyB0YXNrIGlzIGEgYml0IG9mIGNvZGUgdGhhdCBydW5zIHdpdGhvdXQgYSBVSS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjcmVnaXN0ZXJoZWFkbGVzc3Rhc2tcbiAgICovXG4gIHJlZ2lzdGVySGVhZGxlc3NUYXNrKHRhc2tLZXk6IHN0cmluZywgdGFza1Byb3ZpZGVyOiBUYXNrUHJvdmlkZXIpOiB2b2lkIHtcbiAgICAvLyAkRmxvd0ZpeE1lW29iamVjdC10aGlzLXJlZmVyZW5jZV1cbiAgICB0aGlzLnJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2sodGFza0tleSwgdGFza1Byb3ZpZGVyLCAoKSA9PiAoKSA9PiB7XG4gICAgICAvKiBDYW5jZWwgaXMgbm8tb3AgKi9cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjYW5jZWxsYWJsZSBoZWFkbGVzcyB0YXNrLiBBIGhlYWRsZXNzIHRhc2sgaXMgYSBiaXQgb2YgY29kZSB0aGF0IHJ1bnMgd2l0aG91dCBhIFVJLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNyZWdpc3RlcmNhbmNlbGxhYmxlaGVhZGxlc3N0YXNrXG4gICAqL1xuICByZWdpc3RlckNhbmNlbGxhYmxlSGVhZGxlc3NUYXNrKFxuICAgIHRhc2tLZXk6IHN0cmluZyxcbiAgICB0YXNrUHJvdmlkZXI6IFRhc2tQcm92aWRlcixcbiAgICB0YXNrQ2FuY2VsUHJvdmlkZXI6IFRhc2tDYW5jZWxQcm92aWRlcixcbiAgKTogdm9pZCB7XG4gICAgaWYgKHRhc2tQcm92aWRlcnMuaGFzKHRhc2tLZXkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGByZWdpc3RlckhlYWRsZXNzVGFzayBvciByZWdpc3RlckNhbmNlbGxhYmxlSGVhZGxlc3NUYXNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBmb3Igc2FtZSBrZXkgJyR7dGFza0tleX0nYCxcbiAgICAgICk7XG4gICAgfVxuICAgIHRhc2tQcm92aWRlcnMuc2V0KHRhc2tLZXksIHRhc2tQcm92aWRlcik7XG4gICAgdGFza0NhbmNlbFByb3ZpZGVycy5zZXQodGFza0tleSwgdGFza0NhbmNlbFByb3ZpZGVyKTtcbiAgfSxcblxuICAvKipcbiAgICogT25seSBjYWxsZWQgZnJvbSBuYXRpdmUgY29kZS4gU3RhcnRzIGEgaGVhZGxlc3MgdGFzay5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjc3RhcnRoZWFkbGVzc3Rhc2tcbiAgICovXG4gIHN0YXJ0SGVhZGxlc3NUYXNrKHRhc2tJZDogbnVtYmVyLCB0YXNrS2V5OiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tQcm92aWRlciA9IHRhc2tQcm92aWRlcnMuZ2V0KHRhc2tLZXkpO1xuICAgIGlmICghdGFza1Byb3ZpZGVyKSB7XG4gICAgICBjb25zb2xlLndhcm4oYE5vIHRhc2sgcmVnaXN0ZXJlZCBmb3Iga2V5ICR7dGFza0tleX1gKTtcbiAgICAgIGlmIChOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQpIHtcbiAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0YXNrUHJvdmlkZXIoKShkYXRhKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAoTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0KSB7XG4gICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0ICYmXG4gICAgICAgICAgcmVhc29uIGluc3RhbmNlb2YgSGVhZGxlc3NKc1Rhc2tFcnJvclxuICAgICAgICApIHtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lW3VudXNlZC1wcm9taXNlXVxuICAgICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrUmV0cnkodGFza0lkKS50aGVuKFxuICAgICAgICAgICAgcmV0cnlQb3N0ZWQgPT4ge1xuICAgICAgICAgICAgICBpZiAoIXJldHJ5UG9zdGVkKSB7XG4gICAgICAgICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCBmcm9tIG5hdGl2ZSBjb2RlLiBDYW5jZWxzIGEgaGVhZGxlc3MgdGFzay5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjY2FuY2VsaGVhZGxlc3N0YXNrXG4gICAqL1xuICBjYW5jZWxIZWFkbGVzc1Rhc2sodGFza0lkOiBudW1iZXIsIHRhc2tLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tDYW5jZWxQcm92aWRlciA9IHRhc2tDYW5jZWxQcm92aWRlcnMuZ2V0KHRhc2tLZXkpO1xuICAgIGlmICghdGFza0NhbmNlbFByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHRhc2sgY2FuY2VsbGVyIHJlZ2lzdGVyZWQgZm9yIGtleSAnJHt0YXNrS2V5fSdgKTtcbiAgICB9XG4gICAgdGFza0NhbmNlbFByb3ZpZGVyKCkoKTtcbiAgfSxcbn07XG5cbmlmICghKGdsb2JhbC5STiRCcmlkZ2VsZXNzID09PSB0cnVlKSkge1xuICBCYXRjaGVkQnJpZGdlLnJlZ2lzdGVyQ2FsbGFibGVNb2R1bGUoJ0FwcFJlZ2lzdHJ5JywgQXBwUmVnaXN0cnkpO1xuXG4gIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KCdMb2dCb3gnLCAoKSA9PiB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIHJldHVybiByZXF1aXJlKCcuLi9Mb2dCb3gvTG9nQm94SW5zcGVjdG9yQ29udGFpbmVyJykuZGVmYXVsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIE5vT3AoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEFwcFJlZ2lzdHJ5O1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBYUEsSUFBQUEsY0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsd0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGFBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFLLFlBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLG9CQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyw0QkFBQSxHQUFBUixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQVEsa0JBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFTLGNBQUEsR0FBQVQsT0FBQTtBQUNBLElBQUFVLFVBQUEsR0FBQVgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFrQyxTQUFBVyxRQUFBQyxDQUFBLEVBQUFDLENBQUEsUUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLElBQUEsQ0FBQUosQ0FBQSxPQUFBRyxNQUFBLENBQUFFLHFCQUFBLFFBQUFD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