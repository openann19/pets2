65e3a8baf83db13daad09a8bbd8b0224
"use strict";

_getJestObj().mock("../../components/calling/CallManager");
_getJestObj().mock("@pawfectmatch/core");
_getJestObj().mock("expo-linear-gradient", function () {
  return {
    LinearGradient: "LinearGradient"
  };
});
_getJestObj().mock("react-native", function () {
  return {
    Alert: {
      alert: jest.fn()
    },
    View: "View",
    Text: "Text",
    TouchableOpacity: "TouchableOpacity",
    ScrollView: "ScrollView",
    StyleSheet: {
      create: jest.fn(function (styles) {
        return styles;
      })
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _core = require("@pawfectmatch/core");
var _reactNative = require("@testing-library/react-native");
var _react = _interopRequireDefault(require("react"));
var _reactNative2 = require("react-native");
var _CallManager = require("../../components/calling/CallManager");
var _MatchesScreen = _interopRequireDefault(require("../MatchesScreen"));
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockUseCallManager = _CallManager.useCallManager;
var mockUseAuthStore = _core.useAuthStore;
var mockNavigation = {
  navigate: jest.fn(),
  goBack: jest.fn()
};
var mockMatches = [{
  _id: "match-1",
  petId: "pet-1",
  petName: "Buddy",
  petPhoto: "https://example.com/buddy.jpg",
  ownerName: "John Doe",
  lastMessage: {
    content: "Hello!",
    timestamp: new Date().toISOString(),
    senderId: "other"
  },
  isOnline: true,
  matchedAt: new Date().toISOString(),
  unreadCount: 1
}, {
  _id: "match-2",
  petId: "pet-2",
  petName: "Luna",
  petPhoto: "https://example.com/luna.jpg",
  ownerName: "Jane Smith",
  lastMessage: {
    content: "How are you?",
    timestamp: new Date().toISOString(),
    senderId: "me"
  },
  isOnline: false,
  matchedAt: new Date().toISOString(),
  unreadCount: 0
}];
describe("MatchesScreen - Calling Features", function () {
  var mockStartCall = jest.fn();
  var mockIsCallActive = jest.fn();
  beforeEach(function () {
    jest.clearAllMocks();
    mockUseCallManager.mockReturnValue({
      startCall: mockStartCall,
      endCall: jest.fn(),
      isCallActive: mockIsCallActive,
      getCallState: jest.fn()
    });
    mockUseAuthStore.mockReturnValue({
      user: {
        id: "test-user-id",
        firstName: "Test",
        lastName: "User"
      }
    });
    mockIsCallActive.mockReturnValue(false);
  });
  it("should render call buttons for each match", (0, _asyncToGenerator2.default)(function* () {
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      var videoButtons = getAllByTestId("video-call-button");
      expect(voiceButtons).toHaveLength(mockMatches.length);
      expect(videoButtons).toHaveLength(mockMatches.length);
    });
  }));
  it("should start voice call when voice button is pressed", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(true);
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render2.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[0]);
    });
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Voice Call", "Start a voice call with Buddy?", expect.arrayContaining([expect.objectContaining({
      text: "Cancel"
    }), expect.objectContaining({
      text: "Call"
    })]));
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(mockStartCall).toHaveBeenCalledWith("match-1", "voice");
  }));
  it("should start video call when video button is pressed", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(true);
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render3.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var videoButtons = getAllByTestId("video-call-button");
      _reactNative.fireEvent.press(videoButtons[0]);
    });
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Video Call", "Start a video call with Buddy?", expect.arrayContaining([expect.objectContaining({
      text: "Cancel"
    }), expect.objectContaining({
      text: "Call"
    })]));
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(mockStartCall).toHaveBeenCalledWith("match-1", "video");
  }));
  it("should prevent call button from triggering match navigation", (0, _asyncToGenerator2.default)(function* () {
    var _render4 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render4.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[0]);
    });
    expect(mockNavigation.navigate).not.toHaveBeenCalledWith("Chat", expect.any(Object));
  }));
  it("should show error when call fails to start", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(false);
    var _render5 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render5.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[0]);
    });
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Error", "Failed to start call. Please check your permissions and try again.");
  }));
  it("should prevent starting call when another call is active", (0, _asyncToGenerator2.default)(function* () {
    mockIsCallActive.mockReturnValue(true);
    var _render6 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render6.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[0]);
    });
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Call in Progress", "You already have an active call.");
    expect(mockStartCall).not.toHaveBeenCalled();
  }));
  it("should handle different matches correctly", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(true);
    var _render7 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render7.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[1]);
    });
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Voice Call", "Start a voice call with Luna?", expect.any(Array));
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(mockStartCall).toHaveBeenCalledWith("match-2", "voice");
  }));
  it("should style call buttons correctly", (0, _asyncToGenerator2.default)(function* () {
    var _render8 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render8.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      var videoButtons = getAllByTestId("video-call-button");
      voiceButtons.forEach(function (button) {
        expect(button).toHaveStyle({
          width: 36,
          height: 36,
          borderRadius: 18,
          backgroundColor: "#f8f9fa"
        });
      });
      videoButtons.forEach(function (button) {
        expect(button).toHaveStyle({
          width: 36,
          height: 36,
          borderRadius: 18,
          backgroundColor: "#f8f9fa"
        });
      });
    });
  }));
  it("should show correct icons for call buttons", (0, _asyncToGenerator2.default)(function* () {
    var _render9 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render9.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      var videoButtons = getAllByTestId("video-call-button");
      voiceButtons.forEach(function (button) {
        expect(button).toBeTruthy();
      });
      videoButtons.forEach(function (button) {
        expect(button).toBeTruthy();
      });
    });
  }));
  it("should handle match card press correctly (not call buttons)", (0, _asyncToGenerator2.default)(function* () {
    var _render0 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getByTestId = _render0.getByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var matchCard = getByTestId("match-card-0");
      _reactNative.fireEvent.press(matchCard);
    });
    expect(mockNavigation.navigate).toHaveBeenCalledWith("Chat", {
      matchId: "match-1",
      petName: "Buddy"
    });
  }));
  it("should cancel call when user presses cancel", (0, _asyncToGenerator2.default)(function* () {
    var _render1 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render1.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[0]);
    });
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var cancelButton = alertCall[2].find(function (button) {
      return button.text === "Cancel";
    });
    if (cancelButton.onPress) {
      cancelButton.onPress();
    }
    expect(mockStartCall).not.toHaveBeenCalled();
  }));
  it("should handle empty matches list", function () {
    jest.spyOn(_react.default, "useState").mockImplementationOnce(function () {
      return [[], jest.fn()];
    }).mockImplementationOnce(function () {
      return [false, jest.fn()];
    }).mockImplementationOnce(function () {
      return [false, jest.fn()];
    }).mockImplementationOnce(function () {
      return ["matches", jest.fn()];
    });
    var _render10 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      queryAllByTestId = _render10.queryAllByTestId;
    expect(queryAllByTestId("voice-call-button")).toHaveLength(0);
    expect(queryAllByTestId("video-call-button")).toHaveLength(0);
  });
  it("should handle call manager errors gracefully", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockRejectedValue(new Error("Call manager error"));
    var _render11 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getAllByTestId = _render11.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      var voiceButtons = getAllByTestId("voice-call-button");
      _reactNative.fireEvent.press(voiceButtons[0]);
    });
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Error", "Failed to start call. Please check your permissions and try again.");
  }));
  it("should maintain match list functionality with call buttons", (0, _asyncToGenerator2.default)(function* () {
    var _render12 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_MatchesScreen.default, {
        navigation: mockNavigation
      })),
      getByTestId = _render12.getByTestId,
      getAllByTestId = _render12.getAllByTestId;
    yield (0, _reactNative.waitFor)(function () {
      expect(getByTestId("match-name-0")).toHaveTextContent("Buddy");
      expect(getByTestId("match-owner-0")).toHaveTextContent("with John Doe");
      expect(getAllByTestId("voice-call-button")).toHaveLength(2);
      expect(getAllByTestId("video-call-button")).toHaveLength(2);
      expect(getByTestId("match-chevron-0")).toBeTruthy();
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJMaW5lYXJHcmFkaWVudCIsIkFsZXJ0IiwiYWxlcnQiLCJqZXN0IiwiZm4iLCJWaWV3IiwiVGV4dCIsIlRvdWNoYWJsZU9wYWNpdHkiLCJTY3JvbGxWaWV3IiwiU3R5bGVTaGVldCIsImNyZWF0ZSIsInN0eWxlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2NvcmUiLCJfcmVhY3ROYXRpdmUiLCJfcmVhY3QiLCJfcmVhY3ROYXRpdmUyIiwiX0NhbGxNYW5hZ2VyIiwiX01hdGNoZXNTY3JlZW4iLCJfanN4UnVudGltZSIsIl9yZXF1aXJlIiwibW9ja1VzZUNhbGxNYW5hZ2VyIiwidXNlQ2FsbE1hbmFnZXIiLCJtb2NrVXNlQXV0aFN0b3JlIiwidXNlQXV0aFN0b3JlIiwibW9ja05hdmlnYXRpb24iLCJuYXZpZ2F0ZSIsImdvQmFjayIsIm1vY2tNYXRjaGVzIiwiX2lkIiwicGV0SWQiLCJwZXROYW1lIiwicGV0UGhvdG8iLCJvd25lck5hbWUiLCJsYXN0TWVzc2FnZSIsImNvbnRlbnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzZW5kZXJJZCIsImlzT25saW5lIiwibWF0Y2hlZEF0IiwidW5yZWFkQ291bnQiLCJkZXNjcmliZSIsIm1vY2tTdGFydENhbGwiLCJtb2NrSXNDYWxsQWN0aXZlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJzdGFydENhbGwiLCJlbmRDYWxsIiwiaXNDYWxsQWN0aXZlIiwiZ2V0Q2FsbFN0YXRlIiwidXNlciIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJpdCIsImRlZmF1bHQiLCJfcmVuZGVyIiwicmVuZGVyIiwianN4IiwibmF2aWdhdGlvbiIsImdldEFsbEJ5VGVzdElkIiwid2FpdEZvciIsInZvaWNlQnV0dG9ucyIsInZpZGVvQnV0dG9ucyIsImV4cGVjdCIsInRvSGF2ZUxlbmd0aCIsImxlbmd0aCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiX3JlbmRlcjIiLCJmaXJlRXZlbnQiLCJwcmVzcyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYXJyYXlDb250YWluaW5nIiwib2JqZWN0Q29udGFpbmluZyIsInRleHQiLCJhbGVydENhbGwiLCJjYWxscyIsImNvbmZpcm1CdXR0b24iLCJmaW5kIiwiYnV0dG9uIiwib25QcmVzcyIsIl9yZW5kZXIzIiwiX3JlbmRlcjQiLCJub3QiLCJhbnkiLCJPYmplY3QiLCJfcmVuZGVyNSIsIl9yZW5kZXI2IiwidG9IYXZlQmVlbkNhbGxlZCIsIl9yZW5kZXI3IiwiQXJyYXkiLCJfcmVuZGVyOCIsImZvckVhY2giLCJ0b0hhdmVTdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiYm9yZGVyUmFkaXVzIiwiYmFja2dyb3VuZENvbG9yIiwiX3JlbmRlcjkiLCJ0b0JlVHJ1dGh5IiwiX3JlbmRlcjAiLCJnZXRCeVRlc3RJZCIsIm1hdGNoQ2FyZCIsIm1hdGNoSWQiLCJfcmVuZGVyMSIsImNhbmNlbEJ1dHRvbiIsInNweU9uIiwiUmVhY3QiLCJtb2NrSW1wbGVtZW50YXRpb25PbmNlIiwiX3JlbmRlcjEwIiwicXVlcnlBbGxCeVRlc3RJZCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJfcmVuZGVyMTEiLCJfcmVuZGVyMTIiLCJ0b0hhdmVUZXh0Q29udGVudCJdLCJzb3VyY2VzIjpbIk1hdGNoZXNTY3JlZW4uY2FsbGluZy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoU3RvcmUgfSBmcm9tIFwiQHBhd2ZlY3RtYXRjaC9jb3JlXCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQsIHJlbmRlciwgd2FpdEZvciB9IGZyb20gXCJAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQWxlcnQgfSBmcm9tIFwicmVhY3QtbmF0aXZlXCI7XG5cbmltcG9ydCB7IHVzZUNhbGxNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvY2FsbGluZy9DYWxsTWFuYWdlclwiO1xuaW1wb3J0IE1hdGNoZXNTY3JlZW4gZnJvbSBcIi4uL01hdGNoZXNTY3JlZW5cIjtcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jayhcIi4uLy4uL2NvbXBvbmVudHMvY2FsbGluZy9DYWxsTWFuYWdlclwiKTtcbmplc3QubW9jayhcIkBwYXdmZWN0bWF0Y2gvY29yZVwiKTtcbmplc3QubW9jayhcImV4cG8tbGluZWFyLWdyYWRpZW50XCIsICgpID0+ICh7XG4gIExpbmVhckdyYWRpZW50OiBcIkxpbmVhckdyYWRpZW50XCIsXG59KSk7XG5cbmplc3QubW9jayhcInJlYWN0LW5hdGl2ZVwiLCAoKSA9PiAoe1xuICBBbGVydDoge1xuICAgIGFsZXJ0OiBqZXN0LmZuKCksXG4gIH0sXG4gIFZpZXc6IFwiVmlld1wiLFxuICBUZXh0OiBcIlRleHRcIixcbiAgVG91Y2hhYmxlT3BhY2l0eTogXCJUb3VjaGFibGVPcGFjaXR5XCIsXG4gIFNjcm9sbFZpZXc6IFwiU2Nyb2xsVmlld1wiLFxuICBTdHlsZVNoZWV0OiB7XG4gICAgY3JlYXRlOiBqZXN0LmZuKChzdHlsZXMpID0+IHN0eWxlcyksXG4gIH0sXG59KSk7XG5cbmNvbnN0IG1vY2tVc2VDYWxsTWFuYWdlciA9IHVzZUNhbGxNYW5hZ2VyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248XG4gIHR5cGVvZiB1c2VDYWxsTWFuYWdlclxuPjtcbmNvbnN0IG1vY2tVc2VBdXRoU3RvcmUgPSB1c2VBdXRoU3RvcmUgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgdHlwZW9mIHVzZUF1dGhTdG9yZVxuPjtcblxuY29uc3QgbW9ja05hdmlnYXRpb24gPSB7XG4gIG5hdmlnYXRlOiBqZXN0LmZuKCksXG4gIGdvQmFjazogamVzdC5mbigpLFxufTtcblxuY29uc3QgbW9ja01hdGNoZXMgPSBbXG4gIHtcbiAgICBfaWQ6IFwibWF0Y2gtMVwiLFxuICAgIHBldElkOiBcInBldC0xXCIsXG4gICAgcGV0TmFtZTogXCJCdWRkeVwiLFxuICAgIHBldFBob3RvOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vYnVkZHkuanBnXCIsXG4gICAgb3duZXJOYW1lOiBcIkpvaG4gRG9lXCIsXG4gICAgbGFzdE1lc3NhZ2U6IHtcbiAgICAgIGNvbnRlbnQ6IFwiSGVsbG8hXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHNlbmRlcklkOiBcIm90aGVyXCIsXG4gICAgfSxcbiAgICBpc09ubGluZTogdHJ1ZSxcbiAgICBtYXRjaGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB1bnJlYWRDb3VudDogMSxcbiAgfSxcbiAge1xuICAgIF9pZDogXCJtYXRjaC0yXCIsXG4gICAgcGV0SWQ6IFwicGV0LTJcIixcbiAgICBwZXROYW1lOiBcIkx1bmFcIixcbiAgICBwZXRQaG90bzogXCJodHRwczovL2V4YW1wbGUuY29tL2x1bmEuanBnXCIsXG4gICAgb3duZXJOYW1lOiBcIkphbmUgU21pdGhcIixcbiAgICBsYXN0TWVzc2FnZToge1xuICAgICAgY29udGVudDogXCJIb3cgYXJlIHlvdT9cIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc2VuZGVySWQ6IFwibWVcIixcbiAgICB9LFxuICAgIGlzT25saW5lOiBmYWxzZSxcbiAgICBtYXRjaGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB1bnJlYWRDb3VudDogMCxcbiAgfSxcbl07XG5cbmRlc2NyaWJlKFwiTWF0Y2hlc1NjcmVlbiAtIENhbGxpbmcgRmVhdHVyZXNcIiwgKCkgPT4ge1xuICBjb25zdCBtb2NrU3RhcnRDYWxsID0gamVzdC5mbigpO1xuICBjb25zdCBtb2NrSXNDYWxsQWN0aXZlID0gamVzdC5mbigpO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgbW9ja1VzZUNhbGxNYW5hZ2VyLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBzdGFydENhbGw6IG1vY2tTdGFydENhbGwsXG4gICAgICBlbmRDYWxsOiBqZXN0LmZuKCksXG4gICAgICBpc0NhbGxBY3RpdmU6IG1vY2tJc0NhbGxBY3RpdmUsXG4gICAgICBnZXRDYWxsU3RhdGU6IGplc3QuZm4oKSxcbiAgICB9KTtcblxuICAgIG1vY2tVc2VBdXRoU3RvcmUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IFwidGVzdC11c2VyLWlkXCIsXG4gICAgICAgIGZpcnN0TmFtZTogXCJUZXN0XCIsXG4gICAgICAgIGxhc3ROYW1lOiBcIlVzZXJcIixcbiAgICAgIH0sXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgbW9ja0lzQ2FsbEFjdGl2ZS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuICB9KTtcblxuICBpdChcInNob3VsZCByZW5kZXIgY2FsbCBidXR0b25zIGZvciBlYWNoIG1hdGNoXCIsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGdldEFsbEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8TWF0Y2hlc1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4sXG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3Qgdm9pY2VCdXR0b25zID0gZ2V0QWxsQnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICAgIGNvbnN0IHZpZGVvQnV0dG9ucyA9IGdldEFsbEJ5VGVzdElkKFwidmlkZW8tY2FsbC1idXR0b25cIik7XG5cbiAgICAgIGV4cGVjdCh2b2ljZUJ1dHRvbnMpLnRvSGF2ZUxlbmd0aChtb2NrTWF0Y2hlcy5sZW5ndGgpO1xuICAgICAgZXhwZWN0KHZpZGVvQnV0dG9ucykudG9IYXZlTGVuZ3RoKG1vY2tNYXRjaGVzLmxlbmd0aCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHN0YXJ0IHZvaWNlIGNhbGwgd2hlbiB2b2ljZSBidXR0b24gaXMgcHJlc3NlZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N0YXJ0Q2FsbC5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgIGNvbnN0IHsgZ2V0QWxsQnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxNYXRjaGVzU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPixcbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbnMgPSBnZXRBbGxCeVRlc3RJZChcInZvaWNlLWNhbGwtYnV0dG9uXCIpO1xuICAgICAgZmlyZUV2ZW50LnByZXNzKHZvaWNlQnV0dG9uc1swXSk7XG4gICAgfSk7XG5cbiAgICAvLyBTaG91bGQgc2hvdyBjb25maXJtYXRpb24gYWxlcnRcbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJWb2ljZSBDYWxsXCIsXG4gICAgICBcIlN0YXJ0IGEgdm9pY2UgY2FsbCB3aXRoIEJ1ZGR5P1wiLFxuICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgdGV4dDogXCJDYW5jZWxcIiB9KSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0ZXh0OiBcIkNhbGxcIiB9KSxcbiAgICAgIF0pLFxuICAgICk7XG5cbiAgICAvLyBTaW11bGF0ZSB1c2VyIGNvbmZpcm1pbmcgdGhlIGNhbGxcbiAgICBjb25zdCBhbGVydENhbGwgPSAoQWxlcnQuYWxlcnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBhbGVydENhbGxbMl0uZmluZChcbiAgICAgIChidXR0b246IGFueSkgPT4gYnV0dG9uLnRleHQgPT09IFwiQ2FsbFwiLFxuICAgICk7XG5cbiAgICBhd2FpdCBjb25maXJtQnV0dG9uLm9uUHJlc3MoKTtcblxuICAgIGV4cGVjdChtb2NrU3RhcnRDYWxsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIm1hdGNoLTFcIiwgXCJ2b2ljZVwiKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc3RhcnQgdmlkZW8gY2FsbCB3aGVuIHZpZGVvIGJ1dHRvbiBpcyBwcmVzc2VkXCIsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrU3RhcnRDYWxsLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgY29uc3QgeyBnZXRBbGxCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPE1hdGNoZXNTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+LFxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IHZpZGVvQnV0dG9ucyA9IGdldEFsbEJ5VGVzdElkKFwidmlkZW8tY2FsbC1idXR0b25cIik7XG4gICAgICBmaXJlRXZlbnQucHJlc3ModmlkZW9CdXR0b25zWzBdKTtcbiAgICB9KTtcblxuICAgIC8vIFNob3VsZCBzaG93IGNvbmZpcm1hdGlvbiBhbGVydFxuICAgIGV4cGVjdChBbGVydC5hbGVydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcIlZpZGVvIENhbGxcIixcbiAgICAgIFwiU3RhcnQgYSB2aWRlbyBjYWxsIHdpdGggQnVkZHk/XCIsXG4gICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IHRleHQ6IFwiQ2FsbFwiIH0pLFxuICAgICAgXSksXG4gICAgKTtcblxuICAgIC8vIFNpbXVsYXRlIHVzZXIgY29uZmlybWluZyB0aGUgY2FsbFxuICAgIGNvbnN0IGFsZXJ0Q2FsbCA9IChBbGVydC5hbGVydCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHNbMF07XG4gICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGFsZXJ0Q2FsbFsyXS5maW5kKFxuICAgICAgKGJ1dHRvbjogYW55KSA9PiBidXR0b24udGV4dCA9PT0gXCJDYWxsXCIsXG4gICAgKTtcblxuICAgIGF3YWl0IGNvbmZpcm1CdXR0b24ub25QcmVzcygpO1xuXG4gICAgZXhwZWN0KG1vY2tTdGFydENhbGwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwibWF0Y2gtMVwiLCBcInZpZGVvXCIpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBwcmV2ZW50IGNhbGwgYnV0dG9uIGZyb20gdHJpZ2dlcmluZyBtYXRjaCBuYXZpZ2F0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGdldEFsbEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8TWF0Y2hlc1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4sXG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3Qgdm9pY2VCdXR0b25zID0gZ2V0QWxsQnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICAgIGZpcmVFdmVudC5wcmVzcyh2b2ljZUJ1dHRvbnNbMF0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2hvdWxkIG5vdCBuYXZpZ2F0ZSB0byBjaGF0IHNjcmVlbiB3aGVuIGNhbGwgYnV0dG9uIGlzIHByZXNzZWRcbiAgICBleHBlY3QobW9ja05hdmlnYXRpb24ubmF2aWdhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiQ2hhdFwiLFxuICAgICAgZXhwZWN0LmFueShPYmplY3QpLFxuICAgICk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHNob3cgZXJyb3Igd2hlbiBjYWxsIGZhaWxzIHRvIHN0YXJ0XCIsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrU3RhcnRDYWxsLm1vY2tSZXNvbHZlZFZhbHVlKGZhbHNlKTtcblxuICAgIGNvbnN0IHsgZ2V0QWxsQnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxNYXRjaGVzU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPixcbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbnMgPSBnZXRBbGxCeVRlc3RJZChcInZvaWNlLWNhbGwtYnV0dG9uXCIpO1xuICAgICAgZmlyZUV2ZW50LnByZXNzKHZvaWNlQnV0dG9uc1swXSk7XG4gICAgfSk7XG5cbiAgICAvLyBDb25maXJtIHRoZSBjYWxsXG4gICAgY29uc3QgYWxlcnRDYWxsID0gKEFsZXJ0LmFsZXJ0IGFzIGplc3QuTW9jaykubW9jay5jYWxsc1swXTtcbiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYWxlcnRDYWxsWzJdLmZpbmQoXG4gICAgICAoYnV0dG9uOiBhbnkpID0+IGJ1dHRvbi50ZXh0ID09PSBcIkNhbGxcIixcbiAgICApO1xuXG4gICAgYXdhaXQgY29uZmlybUJ1dHRvbi5vblByZXNzKCk7XG5cbiAgICAvLyBTaG91bGQgc2hvdyBlcnJvciBhbGVydFxuICAgIGV4cGVjdChBbGVydC5hbGVydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcIkVycm9yXCIsXG4gICAgICBcIkZhaWxlZCB0byBzdGFydCBjYWxsLiBQbGVhc2UgY2hlY2sgeW91ciBwZXJtaXNzaW9ucyBhbmQgdHJ5IGFnYWluLlwiLFxuICAgICk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHByZXZlbnQgc3RhcnRpbmcgY2FsbCB3aGVuIGFub3RoZXIgY2FsbCBpcyBhY3RpdmVcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tJc0NhbGxBY3RpdmUubW9ja1JldHVyblZhbHVlKHRydWUpO1xuXG4gICAgY29uc3QgeyBnZXRBbGxCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPE1hdGNoZXNTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+LFxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IHZvaWNlQnV0dG9ucyA9IGdldEFsbEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIik7XG4gICAgICBmaXJlRXZlbnQucHJlc3Modm9pY2VCdXR0b25zWzBdKTtcbiAgICB9KTtcblxuICAgIC8vIFNob3VsZCBzaG93IGNhbGwgaW4gcHJvZ3Jlc3MgYWxlcnRcbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJDYWxsIGluIFByb2dyZXNzXCIsXG4gICAgICBcIllvdSBhbHJlYWR5IGhhdmUgYW4gYWN0aXZlIGNhbGwuXCIsXG4gICAgKTtcblxuICAgIC8vIFNob3VsZCBub3Qgc2hvdyBjYWxsIGNvbmZpcm1hdGlvblxuICAgIGV4cGVjdChtb2NrU3RhcnRDYWxsKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBoYW5kbGUgZGlmZmVyZW50IG1hdGNoZXMgY29ycmVjdGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrU3RhcnRDYWxsLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgY29uc3QgeyBnZXRBbGxCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPE1hdGNoZXNTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+LFxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IHZvaWNlQnV0dG9ucyA9IGdldEFsbEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIik7XG4gICAgICBmaXJlRXZlbnQucHJlc3Modm9pY2VCdXR0b25zWzFdKTsgLy8gU2Vjb25kIG1hdGNoIChMdW5hKVxuICAgIH0pO1xuXG4gICAgLy8gU2hvdWxkIHNob3cgY29uZmlybWF0aW9uIGZvciBMdW5hXG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiVm9pY2UgQ2FsbFwiLFxuICAgICAgXCJTdGFydCBhIHZvaWNlIGNhbGwgd2l0aCBMdW5hP1wiLFxuICAgICAgZXhwZWN0LmFueShBcnJheSksXG4gICAgKTtcblxuICAgIC8vIENvbmZpcm0gdGhlIGNhbGxcbiAgICBjb25zdCBhbGVydENhbGwgPSAoQWxlcnQuYWxlcnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBhbGVydENhbGxbMl0uZmluZChcbiAgICAgIChidXR0b246IGFueSkgPT4gYnV0dG9uLnRleHQgPT09IFwiQ2FsbFwiLFxuICAgICk7XG5cbiAgICBhd2FpdCBjb25maXJtQnV0dG9uLm9uUHJlc3MoKTtcblxuICAgIGV4cGVjdChtb2NrU3RhcnRDYWxsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIm1hdGNoLTJcIiwgXCJ2b2ljZVwiKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc3R5bGUgY2FsbCBidXR0b25zIGNvcnJlY3RseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRBbGxCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPE1hdGNoZXNTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+LFxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IHZvaWNlQnV0dG9ucyA9IGdldEFsbEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIik7XG4gICAgICBjb25zdCB2aWRlb0J1dHRvbnMgPSBnZXRBbGxCeVRlc3RJZChcInZpZGVvLWNhbGwtYnV0dG9uXCIpO1xuXG4gICAgICB2b2ljZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZVN0eWxlKHtcbiAgICAgICAgICB3aWR0aDogMzYsXG4gICAgICAgICAgaGVpZ2h0OiAzNixcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IDE4LFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZjhmOWZhXCIsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHZpZGVvQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgZXhwZWN0KGJ1dHRvbikudG9IYXZlU3R5bGUoe1xuICAgICAgICAgIHdpZHRoOiAzNixcbiAgICAgICAgICBoZWlnaHQ6IDM2LFxuICAgICAgICAgIGJvcmRlclJhZGl1czogMTgsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmOGY5ZmFcIixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc2hvdyBjb3JyZWN0IGljb25zIGZvciBjYWxsIGJ1dHRvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QWxsQnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxNYXRjaGVzU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPixcbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbnMgPSBnZXRBbGxCeVRlc3RJZChcInZvaWNlLWNhbGwtYnV0dG9uXCIpO1xuICAgICAgY29uc3QgdmlkZW9CdXR0b25zID0gZ2V0QWxsQnlUZXN0SWQoXCJ2aWRlby1jYWxsLWJ1dHRvblwiKTtcblxuICAgICAgLy8gVm9pY2UgYnV0dG9ucyBzaG91bGQgY29udGFpbiBjYWxsIGljb25cbiAgICAgIHZvaWNlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgICAgZXhwZWN0KGJ1dHRvbikudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZpZGVvIGJ1dHRvbnMgc2hvdWxkIGNvbnRhaW4gdmlkZW9jYW0gaWNvblxuICAgICAgdmlkZW9CdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICBleHBlY3QoYnV0dG9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgaGFuZGxlIG1hdGNoIGNhcmQgcHJlc3MgY29ycmVjdGx5IChub3QgY2FsbCBidXR0b25zKVwiLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPE1hdGNoZXNTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+LFxuICAgICk7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGNvbnN0IG1hdGNoQ2FyZCA9IGdldEJ5VGVzdElkKFwibWF0Y2gtY2FyZC0wXCIpO1xuICAgICAgZmlyZUV2ZW50LnByZXNzKG1hdGNoQ2FyZCk7XG4gICAgfSk7XG5cbiAgICAvLyBTaG91bGQgbmF2aWdhdGUgdG8gY2hhdCBzY3JlZW4gd2hlbiBtYXRjaCBjYXJkIGlzIHByZXNzZWRcbiAgICBleHBlY3QobW9ja05hdmlnYXRpb24ubmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiQ2hhdFwiLCB7XG4gICAgICBtYXRjaElkOiBcIm1hdGNoLTFcIixcbiAgICAgIHBldE5hbWU6IFwiQnVkZHlcIixcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgY2FuY2VsIGNhbGwgd2hlbiB1c2VyIHByZXNzZXMgY2FuY2VsXCIsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IGdldEFsbEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8TWF0Y2hlc1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4sXG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgY29uc3Qgdm9pY2VCdXR0b25zID0gZ2V0QWxsQnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICAgIGZpcmVFdmVudC5wcmVzcyh2b2ljZUJ1dHRvbnNbMF0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2ltdWxhdGUgdXNlciBjYW5jZWxpbmcgdGhlIGNhbGxcbiAgICBjb25zdCBhbGVydENhbGwgPSAoQWxlcnQuYWxlcnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGFsZXJ0Q2FsbFsyXS5maW5kKFxuICAgICAgKGJ1dHRvbjogYW55KSA9PiBidXR0b24udGV4dCA9PT0gXCJDYW5jZWxcIixcbiAgICApO1xuXG4gICAgaWYgKGNhbmNlbEJ1dHRvbi5vblByZXNzKSB7XG4gICAgICBjYW5jZWxCdXR0b24ub25QcmVzcygpO1xuICAgIH1cblxuICAgIGV4cGVjdChtb2NrU3RhcnRDYWxsKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBoYW5kbGUgZW1wdHkgbWF0Y2hlcyBsaXN0XCIsICgpID0+IHtcbiAgICAvLyBNb2NrIGVtcHR5IG1hdGNoZXNcbiAgICBqZXN0XG4gICAgICAuc3B5T24oUmVhY3QsIFwidXNlU3RhdGVcIilcbiAgICAgIC5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IFtbXSwgamVzdC5mbigpXSkgLy8gbWF0Y2hlc1xuICAgICAgLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4gW2ZhbHNlLCBqZXN0LmZuKCldKSAvLyBpc0xvYWRpbmdcbiAgICAgIC5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IFtmYWxzZSwgamVzdC5mbigpXSkgLy8gcmVmcmVzaGluZ1xuICAgICAgLm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4gW1wibWF0Y2hlc1wiLCBqZXN0LmZuKCldKTsgLy8gc2VsZWN0ZWRUYWJcblxuICAgIGNvbnN0IHsgcXVlcnlBbGxCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPE1hdGNoZXNTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IC8+LFxuICAgICk7XG5cbiAgICAvLyBTaG91bGQgbm90IHJlbmRlciBhbnkgY2FsbCBidXR0b25zIHdoZW4gbm8gbWF0Y2hlc1xuICAgIGV4cGVjdChxdWVyeUFsbEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIikpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICBleHBlY3QocXVlcnlBbGxCeVRlc3RJZChcInZpZGVvLWNhbGwtYnV0dG9uXCIpKS50b0hhdmVMZW5ndGgoMCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGhhbmRsZSBjYWxsIG1hbmFnZXIgZXJyb3JzIGdyYWNlZnVsbHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tTdGFydENhbGwubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKFwiQ2FsbCBtYW5hZ2VyIGVycm9yXCIpKTtcblxuICAgIGNvbnN0IHsgZ2V0QWxsQnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxNYXRjaGVzU2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSAvPixcbiAgICApO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBjb25zdCB2b2ljZUJ1dHRvbnMgPSBnZXRBbGxCeVRlc3RJZChcInZvaWNlLWNhbGwtYnV0dG9uXCIpO1xuICAgICAgZmlyZUV2ZW50LnByZXNzKHZvaWNlQnV0dG9uc1swXSk7XG4gICAgfSk7XG5cbiAgICAvLyBDb25maXJtIHRoZSBjYWxsXG4gICAgY29uc3QgYWxlcnRDYWxsID0gKEFsZXJ0LmFsZXJ0IGFzIGplc3QuTW9jaykubW9jay5jYWxsc1swXTtcbiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYWxlcnRDYWxsWzJdLmZpbmQoXG4gICAgICAoYnV0dG9uOiBhbnkpID0+IGJ1dHRvbi50ZXh0ID09PSBcIkNhbGxcIixcbiAgICApO1xuXG4gICAgYXdhaXQgY29uZmlybUJ1dHRvbi5vblByZXNzKCk7XG5cbiAgICAvLyBTaG91bGQgc2hvdyBlcnJvciBhbGVydCBmb3IgZmFpbGVkIGNhbGxcbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJFcnJvclwiLFxuICAgICAgXCJGYWlsZWQgdG8gc3RhcnQgY2FsbC4gUGxlYXNlIGNoZWNrIHlvdXIgcGVybWlzc2lvbnMgYW5kIHRyeSBhZ2Fpbi5cIixcbiAgICApO1xuICB9KTtcblxuICBpdChcInNob3VsZCBtYWludGFpbiBtYXRjaCBsaXN0IGZ1bmN0aW9uYWxpdHkgd2l0aCBjYWxsIGJ1dHRvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQsIGdldEFsbEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8TWF0Y2hlc1NjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gLz4sXG4gICAgKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgLy8gU2hvdWxkIHJlbmRlciBtYXRjaCBpbmZvcm1hdGlvblxuICAgICAgZXhwZWN0KGdldEJ5VGVzdElkKFwibWF0Y2gtbmFtZS0wXCIpKS50b0hhdmVUZXh0Q29udGVudChcIkJ1ZGR5XCIpO1xuICAgICAgZXhwZWN0KGdldEJ5VGVzdElkKFwibWF0Y2gtb3duZXItMFwiKSkudG9IYXZlVGV4dENvbnRlbnQoXCJ3aXRoIEpvaG4gRG9lXCIpO1xuXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIGNhbGwgYnV0dG9ucyBhbG9uZ3NpZGUgb3RoZXIgbWF0Y2ggaW5mb1xuICAgICAgZXhwZWN0KGdldEFsbEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIikpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChnZXRBbGxCeVRlc3RJZChcInZpZGVvLWNhbGwtYnV0dG9uXCIpKS50b0hhdmVMZW5ndGgoMik7XG5cbiAgICAgIC8vIFNob3VsZCBzdGlsbCBzaG93IGNoZXZyb24gZm9yIG5hdmlnYXRpb25cbiAgICAgIGV4cGVjdChnZXRCeVRlc3RJZChcIm1hdGNoLWNoZXZyb24tMFwiKSkudG9CZVRydXRoeSgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQVNBQSxXQUFBLEdBQUtDLElBQUksdUNBQXVDLENBQUM7QUFDakRELFdBQUEsR0FBS0MsSUFBSSxDQUFDLG9CQUFvQixDQUFDO0FBQy9CRCxXQUFBLEdBQUtDLElBQUksQ0FBQyxzQkFBc0IsRUFBRTtFQUFBLE9BQU87SUFDdkNDLGNBQWMsRUFBRTtFQUNsQixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBRUhGLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGNBQWMsRUFBRTtFQUFBLE9BQU87SUFDL0JFLEtBQUssRUFBRTtNQUNMQyxLQUFLLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFDREMsSUFBSSxFQUFFLE1BQU07SUFDWkMsSUFBSSxFQUFFLE1BQU07SUFDWkMsZ0JBQWdCLEVBQUUsa0JBQWtCO0lBQ3BDQyxVQUFVLEVBQUUsWUFBWTtJQUN4QkMsVUFBVSxFQUFFO01BQ1ZDLE1BQU0sRUFBRVAsSUFBSSxDQUFDQyxFQUFFLENBQUMsVUFBQ08sTUFBTTtRQUFBLE9BQUtBLE1BQU07TUFBQTtJQUNwQztFQUNGLENBQUM7QUFBQSxDQUFDLENBQUM7QUFBQyxJQUFBQyxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsa0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQTFCSixJQUFBRSxLQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxNQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFFQSxJQUFBTSxZQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxjQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFBNkMsSUFBQVEsV0FBQSxHQUFBUixPQUFBO0FBQUEsU0FBQWYsWUFBQTtFQUFBLElBQUF3QixRQUFBLEdBQUFULE9BQUE7SUFBQVYsSUFBQSxHQUFBbUIsUUFBQSxDQUFBbkIsSUFBQTtFQUFBTCxXQUFBLFlBQUFBLFlBQUE7SUFBQSxPQUFBSyxJQUFBO0VBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFzQjdDLElBQU1vQixrQkFBa0IsR0FBR0MsMkJBRTFCO0FBQ0QsSUFBTUMsZ0JBQWdCLEdBQUdDLGtCQUV4QjtBQUVELElBQU1DLGNBQWMsR0FBRztFQUNyQkMsUUFBUSxFQUFFekIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUNuQnlCLE1BQU0sRUFBRTFCLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0FBQ2xCLENBQUM7QUFFRCxJQUFNMEIsV0FBVyxHQUFHLENBQ2xCO0VBQ0VDLEdBQUcsRUFBRSxTQUFTO0VBQ2RDLEtBQUssRUFBRSxPQUFPO0VBQ2RDLE9BQU8sRUFBRSxPQUFPO0VBQ2hCQyxRQUFRLEVBQUUsK0JBQStCO0VBQ3pDQyxTQUFTLEVBQUUsVUFBVTtFQUNyQkMsV0FBVyxFQUFFO0lBQ1hDLE9BQU8sRUFBRSxRQUFRO0lBQ2pCQyxTQUFTLEVBQUUsSUFBSUMsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7SUFDbkNDLFFBQVEsRUFBRTtFQUNaLENBQUM7RUFDREMsUUFBUSxFQUFFLElBQUk7RUFDZEMsU0FBUyxFQUFFLElBQUlKLElBQUksQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQ25DSSxXQUFXLEVBQUU7QUFDZixDQUFDLEVBQ0Q7RUFDRWIsR0FBRyxFQUFFLFNBQVM7RUFDZEMsS0FBSyxFQUFFLE9BQU87RUFDZEMsT0FBTyxFQUFFLE1BQU07RUFDZkMsUUFBUSxFQUFFLDhCQUE4QjtFQUN4Q0MsU0FBUyxFQUFFLFlBQVk7RUFDdkJDLFdBQVcsRUFBRTtJQUNYQyxPQUFPLEVBQUUsY0FBYztJQUN2QkMsU0FBUyxFQUFFLElBQUlDLElBQUksQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQ25DQyxRQUFRLEVBQUU7RUFDWixDQUFDO0VBQ0RDLFFBQVEsRUFBRSxLQUFLO0VBQ2ZDLFNBQVMsRUFBRSxJQUFJSixJQUFJLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztFQUNuQ0ksV0FBVyxFQUFFO0FBQ2YsQ0FBQyxDQUNGO0FBRURDLFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFNO0VBQ2pELElBQU1DLGFBQWEsR0FBRzNDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDL0IsSUFBTTJDLGdCQUFnQixHQUFHNUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUVsQzRDLFVBQVUsQ0FBQyxZQUFNO0lBQ2Y3QyxJQUFJLENBQUM4QyxhQUFhLENBQUMsQ0FBQztJQUVwQjFCLGtCQUFrQixDQUFDMkIsZUFBZSxDQUFDO01BQ2pDQyxTQUFTLEVBQUVMLGFBQWE7TUFDeEJNLE9BQU8sRUFBRWpELElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDbEJpRCxZQUFZLEVBQUVOLGdCQUFnQjtNQUM5Qk8sWUFBWSxFQUFFbkQsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDeEIsQ0FBQyxDQUFDO0lBRUZxQixnQkFBZ0IsQ0FBQ3lCLGVBQWUsQ0FBQztNQUMvQkssSUFBSSxFQUFFO1FBQ0pDLEVBQUUsRUFBRSxjQUFjO1FBQ2xCQyxTQUFTLEVBQUUsTUFBTTtRQUNqQkMsUUFBUSxFQUFFO01BQ1o7SUFDRixDQUFRLENBQUM7SUFFVFgsZ0JBQWdCLENBQUNHLGVBQWUsQ0FBQyxLQUFLLENBQUM7RUFDekMsQ0FBQyxDQUFDO0VBRUZTLEVBQUUsQ0FBQywyQ0FBMkMsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUMxRCxJQUFBQyxPQUFBLEdBQTJCLElBQUFDLG1CQUFNLEVBQy9CLElBQUF6QyxXQUFBLENBQUEwQyxHQUFBLEVBQUMzQyxjQUFBLENBQUF3QyxPQUFhO1FBQUNJLFVBQVUsRUFBRXJDO01BQWUsQ0FBRSxDQUM5QyxDQUFDO01BRk9zQyxjQUFjLEdBQUFKLE9BQUEsQ0FBZEksY0FBYztJQUl0QixNQUFNLElBQUFDLG9CQUFPLEVBQUMsWUFBTTtNQUNsQixJQUFNQyxZQUFZLEdBQUdGLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQztNQUN4RCxJQUFNRyxZQUFZLEdBQUdILGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQztNQUV4REksTUFBTSxDQUFDRixZQUFZLENBQUMsQ0FBQ0csWUFBWSxDQUFDeEMsV0FBVyxDQUFDeUMsTUFBTSxDQUFDO01BQ3JERixNQUFNLENBQUNELFlBQVksQ0FBQyxDQUFDRSxZQUFZLENBQUN4QyxXQUFXLENBQUN5QyxNQUFNLENBQUM7SUFDdkQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxFQUFDO0VBRUZaLEVBQUUsQ0FBQyxzREFBc0QsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUNyRWQsYUFBYSxDQUFDMEIsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBRXJDLElBQUFDLFFBQUEsR0FBMkIsSUFBQVgsbUJBQU0sRUFDL0IsSUFBQXpDLFdBQUEsQ0FBQTBDLEdBQUEsRUFBQzNDLGNBQUEsQ0FBQXdDLE9BQWE7UUFBQ0ksVUFBVSxFQUFFckM7TUFBZSxDQUFFLENBQzlDLENBQUM7TUFGT3NDLGNBQWMsR0FBQVEsUUFBQSxDQUFkUixjQUFjO0lBSXRCLE1BQU0sSUFBQUMsb0JBQU8sRUFBQyxZQUFNO01BQ2xCLElBQU1DLFlBQVksR0FBR0YsY0FBYyxDQUFDLG1CQUFtQixDQUFDO01BQ3hEUyxzQkFBUyxDQUFDQyxLQUFLLENBQUNSLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUM7SUFHRkUsTUFBTSxDQUFDcEUsbUJBQUssQ0FBQ0MsS0FBSyxDQUFDLENBQUMwRSxvQkFBb0IsQ0FDdEMsWUFBWSxFQUNaLGdDQUFnQyxFQUNoQ1AsTUFBTSxDQUFDUSxlQUFlLENBQUMsQ0FDckJSLE1BQU0sQ0FBQ1MsZ0JBQWdCLENBQUM7TUFBRUMsSUFBSSxFQUFFO0lBQVMsQ0FBQyxDQUFDLEVBQzNDVixNQUFNLENBQUNTLGdCQUFnQixDQUFDO01BQUVDLElBQUksRUFBRTtJQUFPLENBQUMsQ0FBQyxDQUMxQyxDQUNILENBQUM7SUFHRCxJQUFNQyxTQUFTLEdBQUkvRSxtQkFBSyxDQUFDQyxLQUFLLENBQWVILElBQUksQ0FBQ2tGLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsSUFBTUMsYUFBYSxHQUFHRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FDckMsVUFBQ0MsTUFBVztNQUFBLE9BQUtBLE1BQU0sQ0FBQ0wsSUFBSSxLQUFLLE1BQU07SUFBQSxDQUN6QyxDQUFDO0lBRUQsTUFBTUcsYUFBYSxDQUFDRyxPQUFPLENBQUMsQ0FBQztJQUU3QmhCLE1BQU0sQ0FBQ3ZCLGFBQWEsQ0FBQyxDQUFDOEIsb0JBQW9CLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztFQUNoRSxDQUFDLEVBQUM7RUFFRmpCLEVBQUUsQ0FBQyxzREFBc0QsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUNyRWQsYUFBYSxDQUFDMEIsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBRXJDLElBQUFjLFFBQUEsR0FBMkIsSUFBQXhCLG1CQUFNLEVBQy9CLElBQUF6QyxXQUFBLENBQUEwQyxHQUFBLEVBQUMzQyxjQUFBLENBQUF3QyxPQUFhO1FBQUNJLFVBQVUsRUFBRXJDO01BQWUsQ0FBRSxDQUM5QyxDQUFDO01BRk9zQyxjQUFjLEdBQUFxQixRQUFBLENBQWRyQixjQUFjO0lBSXRCLE1BQU0sSUFBQUMsb0JBQU8sRUFBQyxZQUFNO01BQ2xCLElBQU1FLFlBQVksR0FBR0gsY0FBYyxDQUFDLG1CQUFtQixDQUFDO01BQ3hEUyxzQkFBUyxDQUFDQyxLQUFLLENBQUNQLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUM7SUFHRkMsTUFBTSxDQUFDcEUsbUJBQUssQ0FBQ0MsS0FBSyxDQUFDLENBQUMwRSxvQkFBb0IsQ0FDdEMsWUFBWSxFQUNaLGdDQUFnQyxFQUNoQ1AsTUFBTSxDQUFDUSxlQUFlLENBQUMsQ0FDckJSLE1BQU0sQ0FBQ1MsZ0JBQWdCLENBQUM7TUFBRUMsSUFBSSxFQUFFO0lBQVMsQ0FBQyxDQUFDLEVBQzNDVixNQUFNLENBQUNTLGdCQUFnQixDQUFDO01BQUVDLElBQUksRUFBRTtJQUFPLENBQUMsQ0FBQyxDQUMxQyxDQUNILENBQUM7SUFHRCxJQUFNQyxTQUFTLEdBQUkvRSxtQkFBSyxDQUFDQyxLQUFLLENBQWVILElBQUksQ0FBQ2tGLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsSUFBTUMsYUFBYSxHQUFHRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FDckMsVUFBQ0MsTUFBVztNQUFBLE9BQUtBLE1BQU0sQ0FBQ0wsSUFBSSxLQUFLLE1BQU07SUFBQSxDQUN6QyxDQUFDO0lBRUQsTUFBTUcsYUFBYSxDQUFDRyxPQUFPLENBQUMsQ0FBQztJQUU3QmhCLE1BQU0sQ0FBQ3ZCLGFBQWEsQ0FBQyxDQUFDOEIsb0JBQW9CLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztFQUNoRSxDQUFDLEVBQUM7RUFFRmpCLEVBQUUsQ0FBQyw2REFBNkQsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUM1RSxJQUFBMkIsUUFBQSxHQUEyQixJQUFBekIsbUJBQU0sRUFDL0IsSUFBQXpDLFdBQUEsQ0FBQTBDLEdBQUEsRUFBQzNDLGNBQUEsQ0FBQXdDLE9BQWE7UUFBQ0ksVUFBVSxFQUFFckM7TUFBZSxDQUFFLENBQzlDLENBQUM7TUFGT3NDLGNBQWMsR0FBQXNCLFFBQUEsQ0FBZHRCLGNBQWM7SUFJdEIsTUFBTSxJQUFBQyxvQkFBTyxFQUFDLFlBQU07TUFDbEIsSUFBTUMsWUFBWSxHQUFHRixjQUFjLENBQUMsbUJBQW1CLENBQUM7TUFDeERTLHNCQUFTLENBQUNDLEtBQUssQ0FBQ1IsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUMsQ0FBQztJQUdGRSxNQUFNLENBQUMxQyxjQUFjLENBQUNDLFFBQVEsQ0FBQyxDQUFDNEQsR0FBRyxDQUFDWixvQkFBb0IsQ0FDdEQsTUFBTSxFQUNOUCxNQUFNLENBQUNvQixHQUFHLENBQUNDLE1BQU0sQ0FDbkIsQ0FBQztFQUNILENBQUMsRUFBQztFQUVGL0IsRUFBRSxDQUFDLDRDQUE0QyxNQUFBN0Msa0JBQUEsQ0FBQThDLE9BQUEsRUFBRSxhQUFZO0lBQzNEZCxhQUFhLENBQUMwQixpQkFBaUIsQ0FBQyxLQUFLLENBQUM7SUFFdEMsSUFBQW1CLFFBQUEsR0FBMkIsSUFBQTdCLG1CQUFNLEVBQy9CLElBQUF6QyxXQUFBLENBQUEwQyxHQUFBLEVBQUMzQyxjQUFBLENBQUF3QyxPQUFhO1FBQUNJLFVBQVUsRUFBRXJDO01BQWUsQ0FBRSxDQUM5QyxDQUFDO01BRk9zQyxjQUFjLEdBQUEwQixRQUFBLENBQWQxQixjQUFjO0lBSXRCLE1BQU0sSUFBQUMsb0JBQU8sRUFBQyxZQUFNO01BQ2xCLElBQU1DLFlBQVksR0FBR0YsY0FBYyxDQUFDLG1CQUFtQixDQUFDO01BQ3hEUyxzQkFBUyxDQUFDQyxLQUFLLENBQUNSLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUM7SUFHRixJQUFNYSxTQUFTLEdBQUkvRSxtQkFBSyxDQUFDQyxLQUFLLENBQWVILElBQUksQ0FBQ2tGLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsSUFBTUMsYUFBYSxHQUFHRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FDckMsVUFBQ0MsTUFBVztNQUFBLE9BQUtBLE1BQU0sQ0FBQ0wsSUFBSSxLQUFLLE1BQU07SUFBQSxDQUN6QyxDQUFDO0lBRUQsTUFBTUcsYUFBYSxDQUFDRyxPQUFPLENBQUMsQ0FBQztJQUc3QmhCLE1BQU0sQ0FBQ3BFLG1CQUFLLENBQUNDLEtBQUssQ0FBQyxDQUFDMEUsb0JBQW9CLENBQ3RDLE9BQU8sRUFDUCxvRUFDRixDQUFDO0VBQ0gsQ0FBQyxFQUFDO0VBRUZqQixFQUFFLENBQUMsMERBQTBELE1BQUE3QyxrQkFBQSxDQUFBOEMsT0FBQSxFQUFFLGFBQVk7SUFDekViLGdCQUFnQixDQUFDRyxlQUFlLENBQUMsSUFBSSxDQUFDO0lBRXRDLElBQUEwQyxRQUFBLEdBQTJCLElBQUE5QixtQkFBTSxFQUMvQixJQUFBekMsV0FBQSxDQUFBMEMsR0FBQSxFQUFDM0MsY0FBQSxDQUFBd0MsT0FBYTtRQUFDSSxVQUFVLEVBQUVyQztNQUFlLENBQUUsQ0FDOUMsQ0FBQztNQUZPc0MsY0FBYyxHQUFBMkIsUUFBQSxDQUFkM0IsY0FBYztJQUl0QixNQUFNLElBQUFDLG9CQUFPLEVBQUMsWUFBTTtNQUNsQixJQUFNQyxZQUFZLEdBQUdGLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQztNQUN4RFMsc0JBQVMsQ0FBQ0MsS0FBSyxDQUFDUixZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQyxDQUFDO0lBR0ZFLE1BQU0sQ0FBQ3BFLG1CQUFLLENBQUNDLEtBQUssQ0FBQyxDQUFDMEUsb0JBQW9CLENBQ3RDLGtCQUFrQixFQUNsQixrQ0FDRixDQUFDO0lBR0RQLE1BQU0sQ0FBQ3ZCLGFBQWEsQ0FBQyxDQUFDMEMsR0FBRyxDQUFDSyxnQkFBZ0IsQ0FBQyxDQUFDO0VBQzlDLENBQUMsRUFBQztFQUVGbEMsRUFBRSxDQUFDLDJDQUEyQyxNQUFBN0Msa0JBQUEsQ0FBQThDLE9BQUEsRUFBRSxhQUFZO0lBQzFEZCxhQUFhLENBQUMwQixpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFFckMsSUFBQXNCLFFBQUEsR0FBMkIsSUFBQWhDLG1CQUFNLEVBQy9CLElBQUF6QyxXQUFBLENBQUEwQyxHQUFBLEVBQUMzQyxjQUFBLENBQUF3QyxPQUFhO1FBQUNJLFVBQVUsRUFBRXJDO01BQWUsQ0FBRSxDQUM5QyxDQUFDO01BRk9zQyxjQUFjLEdBQUE2QixRQUFBLENBQWQ3QixjQUFjO0lBSXRCLE1BQU0sSUFBQUMsb0JBQU8sRUFBQyxZQUFNO01BQ2xCLElBQU1DLFlBQVksR0FBR0YsY0FBYyxDQUFDLG1CQUFtQixDQUFDO01BQ3hEUyxzQkFBUyxDQUFDQyxLQUFLLENBQUNSLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUM7SUFHRkUsTUFBTSxDQUFDcEUsbUJBQUssQ0FBQ0MsS0FBSyxDQUFDLENBQUMwRSxvQkFBb0IsQ0FDdEMsWUFBWSxFQUNaLCtCQUErQixFQUMvQlAsTUFBTSxDQUFDb0IsR0FBRyxDQUFDTSxLQUFLLENBQ2xCLENBQUM7SUFHRCxJQUFNZixTQUFTLEdBQUkvRSxtQkFBSyxDQUFDQyxLQUFLLENBQWVILElBQUksQ0FBQ2tGLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsSUFBTUMsYUFBYSxHQUFHRixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FDckMsVUFBQ0MsTUFBVztNQUFBLE9BQUtBLE1BQU0sQ0FBQ0wsSUFBSSxLQUFLLE1BQU07SUFBQSxDQUN6QyxDQUFDO0lBRUQsTUFBTUcsYUFBYSxDQUFDRyxPQUFPLENBQUMsQ0FBQztJQUU3QmhCLE1BQU0sQ0FBQ3ZCLGFBQWEsQ0FBQyxDQUFDOEIsb0JBQW9CLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztFQUNoRSxDQUFDLEVBQUM7RUFFRmpCLEVBQUUsQ0FBQyxxQ0FBcUMsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUNwRCxJQUFBb0MsUUFBQSxHQUEyQixJQUFBbEMsbUJBQU0sRUFDL0IsSUFBQXpDLFdBQUEsQ0FBQTBDLEdBQUEsRUFBQzNDLGNBQUEsQ0FBQXdDLE9BQWE7UUFBQ0ksVUFBVSxFQUFFckM7TUFBZSxDQUFFLENBQzlDLENBQUM7TUFGT3NDLGNBQWMsR0FBQStCLFFBQUEsQ0FBZC9CLGNBQWM7SUFJdEIsTUFBTSxJQUFBQyxvQkFBTyxFQUFDLFlBQU07TUFDbEIsSUFBTUMsWUFBWSxHQUFHRixjQUFjLENBQUMsbUJBQW1CLENBQUM7TUFDeEQsSUFBTUcsWUFBWSxHQUFHSCxjQUFjLENBQUMsbUJBQW1CLENBQUM7TUFFeERFLFlBQVksQ0FBQzhCLE9BQU8sQ0FBQyxVQUFDYixNQUFNLEVBQUs7UUFDL0JmLE1BQU0sQ0FBQ2UsTUFBTSxDQUFDLENBQUNjLFdBQVcsQ0FBQztVQUN6QkMsS0FBSyxFQUFFLEVBQUU7VUFDVEMsTUFBTSxFQUFFLEVBQUU7VUFDVkMsWUFBWSxFQUFFLEVBQUU7VUFDaEJDLGVBQWUsRUFBRTtRQUNuQixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7TUFFRmxDLFlBQVksQ0FBQzZCLE9BQU8sQ0FBQyxVQUFDYixNQUFNLEVBQUs7UUFDL0JmLE1BQU0sQ0FBQ2UsTUFBTSxDQUFDLENBQUNjLFdBQVcsQ0FBQztVQUN6QkMsS0FBSyxFQUFFLEVBQUU7VUFDVEMsTUFBTSxFQUFFLEVBQUU7VUFDVkMsWUFBWSxFQUFFLEVBQUU7VUFDaEJDLGVBQWUsRUFBRTtRQUNuQixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLEVBQUM7RUFFRjNDLEVBQUUsQ0FBQyw0Q0FBNEMsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUMzRCxJQUFBMkMsUUFBQSxHQUEyQixJQUFBekMsbUJBQU0sRUFDL0IsSUFBQXpDLFdBQUEsQ0FBQTBDLEdBQUEsRUFBQzNDLGNBQUEsQ0FBQXdDLE9BQWE7UUFBQ0ksVUFBVSxFQUFFckM7TUFBZSxDQUFFLENBQzlDLENBQUM7TUFGT3NDLGNBQWMsR0FBQXNDLFFBQUEsQ0FBZHRDLGNBQWM7SUFJdEIsTUFBTSxJQUFBQyxvQkFBTyxFQUFDLFlBQU07TUFDbEIsSUFBTUMsWUFBWSxHQUFHRixjQUFjLENBQUMsbUJBQW1CLENBQUM7TUFDeEQsSUFBTUcsWUFBWSxHQUFHSCxjQUFjLENBQUMsbUJBQW1CLENBQUM7TUFHeERFLFlBQVksQ0FBQzhCLE9BQU8sQ0FBQyxVQUFDYixNQUFNLEVBQUs7UUFDL0JmLE1BQU0sQ0FBQ2UsTUFBTSxDQUFDLENBQUNvQixVQUFVLENBQUMsQ0FBQztNQUM3QixDQUFDLENBQUM7TUFHRnBDLFlBQVksQ0FBQzZCLE9BQU8sQ0FBQyxVQUFDYixNQUFNLEVBQUs7UUFDL0JmLE1BQU0sQ0FBQ2UsTUFBTSxDQUFDLENBQUNvQixVQUFVLENBQUMsQ0FBQztNQUM3QixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLEVBQUM7RUFFRjdDLEVBQUUsQ0FBQyw2REFBNkQsTUFBQTdDLGtCQUFBLENBQUE4QyxPQUFBLEVBQUUsYUFBWTtJQUM1RSxJQUFBNkMsUUFBQSxHQUF3QixJQUFBM0MsbUJBQU0sRUFDNUIsSUFBQXpDLFdBQUEsQ0FBQTBDLEdBQUEsRUFBQzNDLGNBQUEsQ0FBQXdDLE9BQWE7UUFBQ0ksVUFBVSxFQUFFckM7TUFBZSxDQUFFLENBQzlDLENBQUM7TUFGTytFLFdBQVcsR0FBQUQsUUFBQSxDQUFYQyxXQUFXO0lBSW5CLE1BQU0sSUFBQXhDLG9CQUFPLEVBQUMsWUFBTTtNQUNsQixJQUFNeUMsU0FBUyxHQUFHRCxXQUFXLENBQUMsY0FBYyxDQUFDO01BQzdDaEMsc0JBQVMsQ0FBQ0MsS0FBSyxDQUFDZ0MsU0FBUyxDQUFDO0lBQzVCLENBQUMsQ0FBQztJQUdGdEMsTUFBTSxDQUFDMUMsY0FBYyxDQUFDQyxRQUFRLENBQUMsQ0FBQ2dELG9CQUFvQixDQUFDLE1BQU0sRUFBRTtNQUMzRGdDLE9BQU8sRUFBRSxTQUFTO01BQ2xCM0UsT0FBTyxFQUFFO0lBQ1gsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxFQUFDO0VBRUYwQixFQUFFLENBQUMsNkNBQTZDLE1BQUE3QyxrQkFBQSxDQUFBOEMsT0FBQSxFQUFFLGFBQVk7SUFDNUQsSUFBQWlELFFBQUEsR0FBMkIsSUFBQS9DLG1CQUFNLEVBQy9CLElBQUF6QyxXQUFBLENBQUEwQyxHQUFBLEVBQUMzQyxjQUFBLENBQUF3QyxPQUFhO1FBQUNJLFVBQVUsRUFBRXJDO01BQWUsQ0FBRSxDQUM5QyxDQUFDO01BRk9zQyxjQUFjLEdBQUE0QyxRQUFBLENBQWQ1QyxjQUFjO0lBSXRCLE1BQU0sSUFBQUMsb0JBQU8sRUFBQyxZQUFNO01BQ2xCLElBQU1DLFlBQVksR0FBR0YsY0FBYyxDQUFDLG1CQUFtQixDQUFDO01BQ3hEUyxzQkFBUyxDQUFDQyxLQUFLLENBQUNSLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQyxDQUFDLENBQUM7SUFHRixJQUFNYSxTQUFTLEdBQUkvRSxtQkFBSyxDQUFDQyxLQUFLLENBQWVILElBQUksQ0FBQ2tGLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDMUQsSUFBTTZCLFlBQVksR0FBRzlCLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0csSUFBSSxDQUNwQyxVQUFDQyxNQUFXO01BQUEsT0FBS0EsTUFBTSxDQUFDTCxJQUFJLEtBQUssUUFBUTtJQUFBLENBQzNDLENBQUM7SUFFRCxJQUFJK0IsWUFBWSxDQUFDekIsT0FBTyxFQUFFO01BQ3hCeUIsWUFBWSxDQUFDekIsT0FBTyxDQUFDLENBQUM7SUFDeEI7SUFFQWhCLE1BQU0sQ0FBQ3ZCLGFBQWEsQ0FBQyxDQUFDMEMsR0FBRyxDQUFDSyxnQkFBZ0IsQ0FBQyxDQUFDO0VBQzlDLENBQUMsRUFBQztFQUVGbEMsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLFlBQU07SUFFM0N4RCxJQUFJLENBQ0Q0RyxLQUFLLENBQUNDLGNBQUssRUFBRSxVQUFVLENBQUMsQ0FDeEJDLHNCQUFzQixDQUFDO01BQUEsT0FBTSxDQUFDLEVBQUUsRUFBRTlHLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUFBLEVBQUMsQ0FDN0M2RyxzQkFBc0IsQ0FBQztNQUFBLE9BQU0sQ0FBQyxLQUFLLEVBQUU5RyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFBQSxFQUFDLENBQ2hENkcsc0JBQXNCLENBQUM7TUFBQSxPQUFNLENBQUMsS0FBSyxFQUFFOUcsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQUEsRUFBQyxDQUNoRDZHLHNCQUFzQixDQUFDO01BQUEsT0FBTSxDQUFDLFNBQVMsRUFBRTlHLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUFBLEVBQUM7SUFFdkQsSUFBQThHLFNBQUEsR0FBNkIsSUFBQXBELG1CQUFNLEVBQ2pDLElBQUF6QyxXQUFBLENBQUEwQyxHQUFBLEVBQUMzQyxjQUFBLENBQUF3QyxPQUFhO1FBQUNJLFVBQVUsRUFBRXJDO01BQWUsQ0FBRSxDQUM5QyxDQUFDO01BRk93RixnQkFBZ0IsR0FBQUQsU0FBQSxDQUFoQkMsZ0JBQWdCO0lBS3hCOUMsTUFBTSxDQUFDOEMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDN0MsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUM3REQsTUFBTSxDQUFDOEMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDN0MsWUFBWSxDQUFDLENBQUMsQ0FBQztFQUMvRCxDQUFDLENBQUM7RUFFRlgsRUFBRSxDQUFDLDhDQUE4QyxNQUFBN0Msa0JBQUEsQ0FBQThDLE9BQUEsRUFBRSxhQUFZO0lBQzdEZCxhQUFhLENBQUNzRSxpQkFBaUIsQ0FBQyxJQUFJQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUVoRSxJQUFBQyxTQUFBLEdBQTJCLElBQUF4RCxtQkFBTSxFQUMvQixJQUFBekMsV0FBQSxDQUFBMEMsR0FBQSxFQUFDM0MsY0FBQSxDQUFBd0MsT0FBYTtRQUFDSSxVQUFVLEVBQUVyQztNQUFlLENBQUUsQ0FDOUMsQ0FBQztNQUZPc0MsY0FBYyxHQUFBcUQsU0FBQSxDQUFkckQsY0FBYztJQUl0QixNQUFNLElBQUFDLG9CQUFPLEVBQUMsWUFBTTtNQUNsQixJQUFNQyxZQUFZLEdBQUdGLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQztNQUN4RFMsc0JBQVMsQ0FBQ0MsS0FBSyxDQUFDUixZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQyxDQUFDO0lBR0YsSUFBTWEsU0FBUyxHQUFJL0UsbUJBQUssQ0FBQ0MsS0FBSyxDQUFlSCxJQUFJLENBQUNrRixLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzFELElBQU1DLGFBQWEsR0FBR0YsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDRyxJQUFJLENBQ3JDLFVBQUNDLE1BQVc7TUFBQSxPQUFLQSxNQUFNLENBQUNMLElBQUksS0FBSyxNQUFNO0lBQUEsQ0FDekMsQ0FBQztJQUVELE1BQU1HLGFBQWEsQ0FBQ0csT0FBTyxDQUFDLENBQUM7SUFHN0JoQixNQUFNLENBQUNwRSxtQkFBSyxDQUFDQyxLQUFLLENBQUMsQ0FBQzBFLG9CQUFvQixDQUN0QyxPQUFPLEVBQ1Asb0VBQ0YsQ0FBQztFQUNILENBQUMsRUFBQztFQUVGakIsRUFBRSxDQUFDLDREQUE0RCxNQUFBN0Msa0JBQUEsQ0FBQThDLE9BQUEsRUFBRSxhQUFZO0lBQzNFLElBQUEyRCxTQUFBLEdBQXdDLElBQUF6RCxtQkFBTSxFQUM1QyxJQUFBekMsV0FBQSxDQUFBMEMsR0FBQSxFQUFDM0MsY0FBQSxDQUFBd0MsT0FBYTtRQUFDSSxVQUFVLEVBQUVyQztNQUFlLENBQUUsQ0FDOUMsQ0FBQztNQUZPK0UsV0FBVyxHQUFBYSxTQUFBLENBQVhiLFdBQVc7TUFBRXpDLGNBQWMsR0FBQXNELFNBQUEsQ0FBZHRELGNBQWM7SUFJbkMsTUFBTSxJQUFBQyxvQkFBTyxFQUFDLFlBQU07TUFFbEJHLE1BQU0sQ0FBQ3FDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDYyxpQkFBaUIsQ0FBQyxPQUFPLENBQUM7TUFDOURuRCxNQUFNLENBQUNxQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQ2MsaUJBQWlCLENBQUMsZUFBZSxDQUFDO01BR3ZFbkQsTUFBTSxDQUFDSixjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDSyxZQUFZLENBQUMsQ0FBQyxDQUFDO01BQzNERCxNQUFNLENBQUNKLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUNLLFlBQVksQ0FBQyxDQUFDLENBQUM7TUFHM0RELE1BQU0sQ0FBQ3FDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUNGLFVBQVUsQ0FBQyxDQUFDO0lBQ3JELENBQUMsQ0FBQztFQUNKLENBQUMsRUFBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==