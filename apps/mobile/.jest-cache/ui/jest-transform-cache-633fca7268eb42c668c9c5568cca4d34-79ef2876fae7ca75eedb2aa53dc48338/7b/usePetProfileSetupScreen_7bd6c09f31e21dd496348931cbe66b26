78334553bc1ad8839e174c5aca5fc9f3
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.usePetProfileSetupScreen = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _native = require("@react-navigation/native");
var _usePetProfileSetup2 = require("../domains/onboarding/usePetProfileSetup");
var usePetProfileSetupScreen = exports.usePetProfileSetupScreen = function usePetProfileSetupScreen() {
  var navigation = (0, _native.useNavigation)();
  var route = (0, _native.useRoute)();
  var _ref = route.params,
    userIntent = _ref.userIntent;
  var _usePetProfileSetup = (0, _usePetProfileSetup2.usePetProfileSetup)(),
    profile = _usePetProfileSetup.profile,
    state = _usePetProfileSetup.state,
    updateProfile = _usePetProfileSetup.updateProfile,
    setCurrentStep = _usePetProfileSetup.setCurrentStep,
    uploadPhoto = _usePetProfileSetup.uploadPhoto,
    removePhoto = _usePetProfileSetup.removePhoto,
    validateCurrentStep = _usePetProfileSetup.validateCurrentStep,
    canProceed = _usePetProfileSetup.canProceed,
    progressPercentage = _usePetProfileSetup.progressPercentage,
    submitProfile = _usePetProfileSetup.submitProfile;
  var handleNext = function handleNext() {
    if (canProceed && state.currentStep < 2) {
      setCurrentStep(state.currentStep + 1);
    }
  };
  var handlePrevious = function handlePrevious() {
    if (state.currentStep > 0) {
      setCurrentStep(state.currentStep - 1);
    }
  };
  var handleComplete = function () {
    var _ref2 = (0, _asyncToGenerator2.default)(function* () {
      if (!canProceed) return;
      try {
        yield submitProfile();
        navigation.navigate("PreferencesSetup", {
          userIntent: userIntent
        });
      } catch (error) {}
    });
    return function handleComplete() {
      return _ref2.apply(this, arguments);
    };
  }();
  var handleGoBack = function handleGoBack() {
    navigation.goBack();
  };
  return {
    profile: profile,
    state: state,
    updateProfile: updateProfile,
    setCurrentStep: setCurrentStep,
    uploadPhoto: uploadPhoto,
    removePhoto: removePhoto,
    validateCurrentStep: validateCurrentStep,
    canProceed: canProceed,
    progressPercentage: progressPercentage,
    userIntent: userIntent,
    handleNext: handleNext,
    handlePrevious: handlePrevious,
    handleComplete: handleComplete,
    handleGoBack: handleGoBack
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbmF0aXZlIiwicmVxdWlyZSIsIl91c2VQZXRQcm9maWxlU2V0dXAyIiwidXNlUGV0UHJvZmlsZVNldHVwU2NyZWVuIiwiZXhwb3J0cyIsIm5hdmlnYXRpb24iLCJ1c2VOYXZpZ2F0aW9uIiwicm91dGUiLCJ1c2VSb3V0ZSIsIl9yZWYiLCJwYXJhbXMiLCJ1c2VySW50ZW50IiwiX3VzZVBldFByb2ZpbGVTZXR1cCIsInVzZVBldFByb2ZpbGVTZXR1cCIsInByb2ZpbGUiLCJzdGF0ZSIsInVwZGF0ZVByb2ZpbGUiLCJzZXRDdXJyZW50U3RlcCIsInVwbG9hZFBob3RvIiwicmVtb3ZlUGhvdG8iLCJ2YWxpZGF0ZUN1cnJlbnRTdGVwIiwiY2FuUHJvY2VlZCIsInByb2dyZXNzUGVyY2VudGFnZSIsInN1Ym1pdFByb2ZpbGUiLCJoYW5kbGVOZXh0IiwiY3VycmVudFN0ZXAiLCJoYW5kbGVQcmV2aW91cyIsImhhbmRsZUNvbXBsZXRlIiwiX3JlZjIiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0IiwibmF2aWdhdGUiLCJlcnJvciIsImFwcGx5IiwiYXJndW1lbnRzIiwiaGFuZGxlR29CYWNrIiwiZ29CYWNrIl0sInNvdXJjZXMiOlsidXNlUGV0UHJvZmlsZVNldHVwU2NyZWVuLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogdXNlUGV0UHJvZmlsZVNldHVwU2NyZWVuIEhvb2tcbiAqIE1hbmFnZXMgUGV0IFByb2ZpbGUgU2V0dXAgc2NyZWVuIHdpdGggdmFsaWRhdGlvbiBhbmQgbmF2aWdhdGlvblxuICovXG5pbXBvcnQgeyB1c2VOYXZpZ2F0aW9uLCB1c2VSb3V0ZSB9IGZyb20gXCJAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmVcIjtcbmltcG9ydCB7IHVzZVBldFByb2ZpbGVTZXR1cCB9IGZyb20gXCIuLi9kb21haW5zL29uYm9hcmRpbmcvdXNlUGV0UHJvZmlsZVNldHVwXCI7XG5pbXBvcnQgdHlwZSB7IE9uYm9hcmRpbmdTY3JlZW5Qcm9wcyB9IGZyb20gXCIuLi8uLi9uYXZpZ2F0aW9uL3R5cGVzXCI7XG5cbmludGVyZmFjZSBVc2VQZXRQcm9maWxlU2V0dXBTY3JlZW5SZXR1cm4ge1xuICAvLyBGcm9tIGRvbWFpbiBob29rXG4gIHByb2ZpbGU6IGFueTtcbiAgc3RhdGU6IGFueTtcbiAgdXBkYXRlUHJvZmlsZTogKHVwZGF0ZXM6IGFueSkgPT4gdm9pZDtcbiAgc2V0Q3VycmVudFN0ZXA6IChzdGVwOiBudW1iZXIpID0+IHZvaWQ7XG4gIHVwbG9hZFBob3RvOiAodXJpOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHJlbW92ZVBob3RvOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgdmFsaWRhdGVDdXJyZW50U3RlcDogKCkgPT4gYm9vbGVhbjtcbiAgY2FuUHJvY2VlZDogYm9vbGVhbjtcbiAgcHJvZ3Jlc3NQZXJjZW50YWdlOiBudW1iZXI7XG5cbiAgLy8gUm91dGUgcGFyYW1zXG4gIHVzZXJJbnRlbnQ6IHN0cmluZztcblxuICAvLyBOYXZpZ2F0aW9uXG4gIGhhbmRsZU5leHQ6ICgpID0+IHZvaWQ7XG4gIGhhbmRsZVByZXZpb3VzOiAoKSA9PiB2b2lkO1xuICBoYW5kbGVDb21wbGV0ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgaGFuZGxlR29CYWNrOiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgdXNlUGV0UHJvZmlsZVNldHVwU2NyZWVuID0gKCk6IFVzZVBldFByb2ZpbGVTZXR1cFNjcmVlblJldHVybiA9PiB7XG4gIGNvbnN0IG5hdmlnYXRpb24gPSB1c2VOYXZpZ2F0aW9uPGFueT4oKTtcbiAgY29uc3Qgcm91dGUgPSB1c2VSb3V0ZTxhbnk+KCk7XG4gIGNvbnN0IHsgdXNlckludGVudCB9ID0gcm91dGUucGFyYW1zIGFzIHsgdXNlckludGVudDogc3RyaW5nIH07XG5cbiAgY29uc3Qge1xuICAgIHByb2ZpbGUsXG4gICAgc3RhdGUsXG4gICAgdXBkYXRlUHJvZmlsZSxcbiAgICBzZXRDdXJyZW50U3RlcCxcbiAgICB1cGxvYWRQaG90byxcbiAgICByZW1vdmVQaG90byxcbiAgICB2YWxpZGF0ZUN1cnJlbnRTdGVwLFxuICAgIGNhblByb2NlZWQsXG4gICAgcHJvZ3Jlc3NQZXJjZW50YWdlLFxuICAgIHN1Ym1pdFByb2ZpbGUsXG4gIH0gPSB1c2VQZXRQcm9maWxlU2V0dXAoKTtcblxuICBjb25zdCBoYW5kbGVOZXh0ID0gKCkgPT4ge1xuICAgIGlmIChjYW5Qcm9jZWVkICYmIHN0YXRlLmN1cnJlbnRTdGVwIDwgMikge1xuICAgICAgc2V0Q3VycmVudFN0ZXAoc3RhdGUuY3VycmVudFN0ZXAgKyAxKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUHJldmlvdXMgPSAoKSA9PiB7XG4gICAgaWYgKHN0YXRlLmN1cnJlbnRTdGVwID4gMCkge1xuICAgICAgc2V0Q3VycmVudFN0ZXAoc3RhdGUuY3VycmVudFN0ZXAgLSAxKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29tcGxldGUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFjYW5Qcm9jZWVkKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgc3VibWl0UHJvZmlsZSgpO1xuICAgICAgbmF2aWdhdGlvbi5uYXZpZ2F0ZShcIlByZWZlcmVuY2VzU2V0dXBcIiwgeyB1c2VySW50ZW50IH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFcnJvciBoYW5kbGluZyBpcyBkb25lIGluIHRoZSBkb21haW4gaG9va1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVHb0JhY2sgPSAoKSA9PiB7XG4gICAgbmF2aWdhdGlvbi5nb0JhY2soKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC8vIEZyb20gZG9tYWluIGhvb2tcbiAgICBwcm9maWxlLFxuICAgIHN0YXRlLFxuICAgIHVwZGF0ZVByb2ZpbGUsXG4gICAgc2V0Q3VycmVudFN0ZXAsXG4gICAgdXBsb2FkUGhvdG8sXG4gICAgcmVtb3ZlUGhvdG8sXG4gICAgdmFsaWRhdGVDdXJyZW50U3RlcCxcbiAgICBjYW5Qcm9jZWVkLFxuICAgIHByb2dyZXNzUGVyY2VudGFnZSxcblxuICAgIC8vIFJvdXRlIHBhcmFtc1xuICAgIHVzZXJJbnRlbnQsXG5cbiAgICAvLyBOYXZpZ2F0aW9uXG4gICAgaGFuZGxlTmV4dCxcbiAgICBoYW5kbGVQcmV2aW91cyxcbiAgICBoYW5kbGVDb21wbGV0ZSxcbiAgICBoYW5kbGVHb0JhY2ssXG4gIH07XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUlBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLG9CQUFBLEdBQUFELE9BQUE7QUF5Qk8sSUFBTUUsd0JBQXdCLEdBQUFDLE9BQUEsQ0FBQUQsd0JBQUEsR0FBRyxTQUEzQkEsd0JBQXdCQSxDQUFBLEVBQXlDO0VBQzVFLElBQU1FLFVBQVUsR0FBRyxJQUFBQyxxQkFBYSxFQUFNLENBQUM7RUFDdkMsSUFBTUMsS0FBSyxHQUFHLElBQUFDLGdCQUFRLEVBQU0sQ0FBQztFQUM3QixJQUFBQyxJQUFBLEdBQXVCRixLQUFLLENBQUNHLE1BQU07SUFBM0JDLFVBQVUsR0FBQUYsSUFBQSxDQUFWRSxVQUFVO0VBRWxCLElBQUFDLG1CQUFBLEdBV0ksSUFBQUMsdUNBQWtCLEVBQUMsQ0FBQztJQVZ0QkMsT0FBTyxHQUFBRixtQkFBQSxDQUFQRSxPQUFPO0lBQ1BDLEtBQUssR0FBQUgsbUJBQUEsQ0FBTEcsS0FBSztJQUNMQyxhQUFhLEdBQUFKLG1CQUFBLENBQWJJLGFBQWE7SUFDYkMsY0FBYyxHQUFBTCxtQkFBQSxDQUFkSyxjQUFjO0lBQ2RDLFdBQVcsR0FBQU4sbUJBQUEsQ0FBWE0sV0FBVztJQUNYQyxXQUFXLEdBQUFQLG1CQUFBLENBQVhPLFdBQVc7SUFDWEMsbUJBQW1CLEdBQUFSLG1CQUFBLENBQW5CUSxtQkFBbUI7SUFDbkJDLFVBQVUsR0FBQVQsbUJBQUEsQ0FBVlMsVUFBVTtJQUNWQyxrQkFBa0IsR0FBQVYsbUJBQUEsQ0FBbEJVLGtCQUFrQjtJQUNsQkMsYUFBYSxHQUFBWCxtQkFBQSxDQUFiVyxhQUFhO0VBR2YsSUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQVVBLENBQUEsRUFBUztJQUN2QixJQUFJSCxVQUFVLElBQUlOLEtBQUssQ0FBQ1UsV0FBVyxHQUFHLENBQUMsRUFBRTtNQUN2Q1IsY0FBYyxDQUFDRixLQUFLLENBQUNVLFdBQVcsR0FBRyxDQUFDLENBQUM7SUFDdkM7RUFDRixDQUFDO0VBRUQsSUFBTUMsY0FBYyxHQUFHLFNBQWpCQSxjQUFjQSxDQUFBLEVBQVM7SUFDM0IsSUFBSVgsS0FBSyxDQUFDVSxXQUFXLEdBQUcsQ0FBQyxFQUFFO01BQ3pCUixjQUFjLENBQUNGLEtBQUssQ0FBQ1UsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUN2QztFQUNGLENBQUM7RUFFRCxJQUFNRSxjQUFjO0lBQUEsSUFBQUMsS0FBQSxPQUFBQyxrQkFBQSxDQUFBQyxPQUFBLEVBQUcsYUFBWTtNQUNqQyxJQUFJLENBQUNULFVBQVUsRUFBRTtNQUVqQixJQUFJO1FBQ0YsTUFBTUUsYUFBYSxDQUFDLENBQUM7UUFDckJsQixVQUFVLENBQUMwQixRQUFRLENBQUMsa0JBQWtCLEVBQUU7VUFBRXBCLFVBQVUsRUFBVkE7UUFBVyxDQUFDLENBQUM7TUFDekQsQ0FBQyxDQUFDLE9BQU9xQixLQUFLLEVBQUUsQ0FFaEI7SUFDRixDQUFDO0lBQUEsZ0JBVEtMLGNBQWNBLENBQUE7TUFBQSxPQUFBQyxLQUFBLENBQUFLLEtBQUEsT0FBQUMsU0FBQTtJQUFBO0VBQUEsR0FTbkI7RUFFRCxJQUFNQyxZQUFZLEdBQUcsU0FBZkEsWUFBWUEsQ0FBQSxFQUFTO0lBQ3pCOUIsVUFBVSxDQUFDK0IsTUFBTSxDQUFDLENBQUM7RUFDckIsQ0FBQztFQUVELE9BQU87SUFFTHRCLE9BQU8sRUFBUEEsT0FBTztJQUNQQyxLQUFLLEVBQUxBLEtBQUs7SUFDTEMsYUFBYSxFQUFiQSxhQUFhO0lBQ2JDLGNBQWMsRUFBZEEsY0FBYztJQUNkQyxXQUFXLEVBQVhBLFdBQVc7SUFDWEMsV0FBVyxFQUFYQSxXQUFXO0lBQ1hDLG1CQUFtQixFQUFuQkEsbUJBQW1CO0lBQ25CQyxVQUFVLEVBQVZBLFVBQVU7SUFDVkMsa0JBQWtCLEVBQWxCQSxrQkFBa0I7SUFHbEJYLFVBQVUsRUFBVkEsVUFBVTtJQUdWYSxVQUFVLEVBQVZBLFVBQVU7SUFDVkUsY0FBYyxFQUFkQSxjQUFjO0lBQ2RDLGNBQWMsRUFBZEEsY0FBYztJQUNkUSxZQUFZLEVBQVpBO0VBQ0YsQ0FBQztBQUNILENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=