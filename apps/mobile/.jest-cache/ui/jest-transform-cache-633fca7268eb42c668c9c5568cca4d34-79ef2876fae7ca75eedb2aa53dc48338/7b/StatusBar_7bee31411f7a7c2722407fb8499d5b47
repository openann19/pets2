c124d60392e4ec73bf14cda88d1fd166
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _processColor = _interopRequireDefault(require("../../StyleSheet/processColor"));
var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));
var _NativeStatusBarManagerAndroid = _interopRequireDefault(require("./NativeStatusBarManagerAndroid"));
var _NativeStatusBarManagerIOS = _interopRequireDefault(require("./NativeStatusBarManagerIOS"));
var _invariant = _interopRequireDefault(require("invariant"));
var React = _interopRequireWildcard(require("react"));
var _StatusBar, _NativeStatusBarManag;
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function mergePropsStack(propsStack, defaultValues) {
  return propsStack.reduce(function (prev, cur) {
    for (var prop in cur) {
      if (cur[prop] != null) {
        prev[prop] = cur[prop];
      }
    }
    return prev;
  }, _objectSpread({}, defaultValues));
}
function createStackEntry(props) {
  var _props$animated, _props$showHideTransi;
  var animated = (_props$animated = props.animated) != null ? _props$animated : false;
  var showHideTransition = (_props$showHideTransi = props.showHideTransition) != null ? _props$showHideTransi : 'fade';
  return {
    backgroundColor: props.backgroundColor != null ? {
      value: props.backgroundColor,
      animated: animated
    } : null,
    barStyle: props.barStyle != null ? {
      value: props.barStyle,
      animated: animated
    } : null,
    translucent: props.translucent,
    hidden: props.hidden != null ? {
      value: props.hidden,
      animated: animated,
      transition: showHideTransition
    } : null,
    networkActivityIndicatorVisible: props.networkActivityIndicatorVisible
  };
}
var StatusBar = function (_React$Component) {
  function StatusBar() {
    var _this;
    (0, _classCallCheck2.default)(this, StatusBar);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _callSuper(this, StatusBar, [].concat(args));
    _this._stackEntry = null;
    return _this;
  }
  (0, _inherits2.default)(StatusBar, _React$Component);
  return (0, _createClass2.default)(StatusBar, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this._stackEntry = StatusBar.pushStackEntry(this.props);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      StatusBar.popStackEntry(this._stackEntry);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this._stackEntry = StatusBar.replaceStackEntry(this._stackEntry, this.props);
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }], [{
    key: "setHidden",
    value: function setHidden(hidden, animation) {
      animation = animation || 'none';
      StatusBar._defaultProps.hidden.value = hidden;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setHidden(hidden, animation);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setHidden(hidden);
      }
    }
  }, {
    key: "setBarStyle",
    value: function setBarStyle(style, animated) {
      animated = animated || false;
      StatusBar._defaultProps.barStyle.value = style;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setStyle(style, animated);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setStyle(style);
      }
    }
  }, {
    key: "setNetworkActivityIndicatorVisible",
    value: function setNetworkActivityIndicatorVisible(visible) {
      if (_Platform.default.OS !== 'ios') {
        console.warn('`setNetworkActivityIndicatorVisible` is only available on iOS');
        return;
      }
      StatusBar._defaultProps.networkActivityIndicatorVisible = visible;
      _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(visible);
    }
  }, {
    key: "setBackgroundColor",
    value: function setBackgroundColor(color, animated) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setBackgroundColor` is only available on Android');
        return;
      }
      animated = animated || false;
      StatusBar._defaultProps.backgroundColor.value = color;
      var processedColor = (0, _processColor.default)(color);
      if (processedColor == null) {
        console.warn(`\`StatusBar.setBackgroundColor\`: Color ${color} parsed to null or undefined`);
        return;
      }
      (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given for StatusBar.setBackgroundColor');
      _NativeStatusBarManagerAndroid.default.setColor(processedColor, animated);
    }
  }, {
    key: "setTranslucent",
    value: function setTranslucent(translucent) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setTranslucent` is only available on Android');
        return;
      }
      StatusBar._defaultProps.translucent = translucent;
      _NativeStatusBarManagerAndroid.default.setTranslucent(translucent);
    }
  }, {
    key: "pushStackEntry",
    value: function pushStackEntry(props) {
      var entry = createStackEntry(props);
      StatusBar._propsStack.push(entry);
      StatusBar._updatePropsStack();
      return entry;
    }
  }, {
    key: "popStackEntry",
    value: function popStackEntry(entry) {
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack.splice(index, 1);
      }
      StatusBar._updatePropsStack();
    }
  }, {
    key: "replaceStackEntry",
    value: function replaceStackEntry(entry, props) {
      var newEntry = createStackEntry(props);
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack[index] = newEntry;
      }
      StatusBar._updatePropsStack();
      return newEntry;
    }
  }]);
}(React.Component);
_StatusBar = StatusBar;
StatusBar._propsStack = [];
StatusBar._defaultProps = createStackEntry({
  backgroundColor: _Platform.default.OS === 'android' ? (_NativeStatusBarManag = _NativeStatusBarManagerAndroid.default.getConstants().DEFAULT_BACKGROUND_COLOR) != null ? _NativeStatusBarManag : 'black' : 'black',
  barStyle: 'default',
  translucent: false,
  hidden: false,
  networkActivityIndicatorVisible: false
});
StatusBar._updateImmediate = null;
StatusBar._currentValues = null;
StatusBar.currentHeight = _Platform.default.OS === 'android' ? _NativeStatusBarManagerAndroid.default.getConstants().HEIGHT : null;
StatusBar._updatePropsStack = function () {
  clearImmediate(_StatusBar._updateImmediate);
  _StatusBar._updateImmediate = setImmediate(function () {
    var oldProps = _StatusBar._currentValues;
    var mergedProps = mergePropsStack(_StatusBar._propsStack, _StatusBar._defaultProps);
    if (_Platform.default.OS === 'ios') {
      if (!oldProps || oldProps.barStyle.value !== mergedProps.barStyle.value) {
        _NativeStatusBarManagerIOS.default.setStyle(mergedProps.barStyle.value, mergedProps.barStyle.animated || false);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManagerIOS.default.setHidden(mergedProps.hidden.value, mergedProps.hidden.animated ? mergedProps.hidden.transition : 'none');
      }
      if (!oldProps || oldProps.networkActivityIndicatorVisible !== mergedProps.networkActivityIndicatorVisible) {
        _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(mergedProps.networkActivityIndicatorVisible);
      }
    } else if (_Platform.default.OS === 'android') {
      _NativeStatusBarManagerAndroid.default.setStyle(mergedProps.barStyle.value);
      var processedColor = (0, _processColor.default)(mergedProps.backgroundColor.value);
      if (processedColor == null) {
        console.warn(`\`StatusBar._updatePropsStack\`: Color ${mergedProps.backgroundColor.value} parsed to null or undefined`);
      } else {
        (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given in StatusBar._updatePropsStack');
        _NativeStatusBarManagerAndroid.default.setColor(processedColor, mergedProps.backgroundColor.animated);
      }
      if (!oldProps || oldProps.hidden.value !== mergedProps.hidden.value) {
        _NativeStatusBarManagerAndroid.default.setHidden(mergedProps.hidden.value);
      }
      if (!oldProps || oldProps.translucent !== mergedProps.translucent || mergedProps.translucent) {
        _NativeStatusBarManagerAndroid.default.setTranslucent(mergedProps.translucent);
      }
    }
    _StatusBar._currentValues = mergedProps;
  });
};
module.exports = StatusBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvY2Vzc0NvbG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfUGxhdGZvcm0iLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQiLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyIsIl9pbnZhcmlhbnQiLCJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX1N0YXR1c0JhciIsIl9OYXRpdmVTdGF0dXNCYXJNYW5hZyIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX2NhbGxTdXBlciIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiYXBwbHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIm1lcmdlUHJvcHNTdGFjayIsInByb3BzU3RhY2siLCJkZWZhdWx0VmFsdWVzIiwicmVkdWNlIiwicHJldiIsImN1ciIsInByb3AiLCJjcmVhdGVTdGFja0VudHJ5IiwicHJvcHMiLCJfcHJvcHMkYW5pbWF0ZWQiLCJfcHJvcHMkc2hvd0hpZGVUcmFuc2kiLCJhbmltYXRlZCIsInNob3dIaWRlVHJhbnNpdGlvbiIsImJhY2tncm91bmRDb2xvciIsInZhbHVlIiwiYmFyU3R5bGUiLCJ0cmFuc2x1Y2VudCIsImhpZGRlbiIsInRyYW5zaXRpb24iLCJuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlIiwiU3RhdHVzQmFyIiwiX1JlYWN0JENvbXBvbmVudCIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9sZW4iLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY29uY2F0IiwiX3N0YWNrRW50cnkiLCJfaW5oZXJpdHMyIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsImNvbXBvbmVudERpZE1vdW50IiwicHVzaFN0YWNrRW50cnkiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInBvcFN0YWNrRW50cnkiLCJjb21wb25lbnREaWRVcGRhdGUiLCJyZXBsYWNlU3RhY2tFbnRyeSIsInJlbmRlciIsInNldEhpZGRlbiIsImFuaW1hdGlvbiIsIl9kZWZhdWx0UHJvcHMiLCJQbGF0Zm9ybSIsIk9TIiwiTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyIsIk5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkIiwic2V0QmFyU3R5bGUiLCJzdHlsZSIsInNldFN0eWxlIiwic2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSIsInZpc2libGUiLCJjb25zb2xlIiwid2FybiIsInNldEJhY2tncm91bmRDb2xvciIsImNvbG9yIiwicHJvY2Vzc2VkQ29sb3IiLCJwcm9jZXNzQ29sb3IiLCJpbnZhcmlhbnQiLCJzZXRDb2xvciIsInNldFRyYW5zbHVjZW50IiwiZW50cnkiLCJfcHJvcHNTdGFjayIsIl91cGRhdGVQcm9wc1N0YWNrIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwibmV3RW50cnkiLCJDb21wb25lbnQiLCJnZXRDb25zdGFudHMiLCJERUZBVUxUX0JBQ0tHUk9VTkRfQ09MT1IiLCJfdXBkYXRlSW1tZWRpYXRlIiwiX2N1cnJlbnRWYWx1ZXMiLCJjdXJyZW50SGVpZ2h0IiwiSEVJR0hUIiwiY2xlYXJJbW1lZGlhdGUiLCJzZXRJbW1lZGlhdGUiLCJvbGRQcm9wcyIsIm1lcmdlZFByb3BzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlN0YXR1c0Jhci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG5pbXBvcnQgdHlwZSB7Q29sb3JWYWx1ZX0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcblxuaW1wb3J0IHByb2Nlc3NDb2xvciBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L3Byb2Nlc3NDb2xvcic7XG5pbXBvcnQgUGxhdGZvcm0gZnJvbSAnLi4vLi4vVXRpbGl0aWVzL1BsYXRmb3JtJztcbmltcG9ydCBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZCBmcm9tICcuL05hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkJztcbmltcG9ydCBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TIGZyb20gJy4vTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICogU3RhdHVzIGJhciBzdHlsZVxuICovXG5leHBvcnQgdHlwZSBTdGF0dXNCYXJTdHlsZSA9ICRLZXlzPHtcbiAgLyoqXG4gICAqIERlZmF1bHQgc3RhdHVzIGJhciBzdHlsZSAoZGFyayBmb3IgaU9TLCBsaWdodCBmb3IgQW5kcm9pZClcbiAgICovXG4gIGRlZmF1bHQ6IHN0cmluZyxcbiAgLyoqXG4gICAqIERhcmsgYmFja2dyb3VuZCwgd2hpdGUgdGV4dHMgYW5kIGljb25zXG4gICAqL1xuICAnbGlnaHQtY29udGVudCc6IHN0cmluZyxcbiAgLyoqXG4gICAqIExpZ2h0IGJhY2tncm91bmQsIGRhcmsgdGV4dHMgYW5kIGljb25zXG4gICAqL1xuICAnZGFyay1jb250ZW50Jzogc3RyaW5nLFxuICAuLi5cbn0+O1xuXG4vKipcbiAqIFN0YXR1cyBiYXIgYW5pbWF0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIFN0YXR1c0JhckFuaW1hdGlvbiA9ICRLZXlzPHtcbiAgLyoqXG4gICAqIE5vIGFuaW1hdGlvblxuICAgKi9cbiAgbm9uZTogc3RyaW5nLFxuICAvKipcbiAgICogRmFkZSBhbmltYXRpb25cbiAgICovXG4gIGZhZGU6IHN0cmluZyxcbiAgLyoqXG4gICAqIFNsaWRlIGFuaW1hdGlvblxuICAgKi9cbiAgc2xpZGU6IHN0cmluZyxcbiAgLi4uXG59PjtcblxudHlwZSBBbmRyb2lkUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLyoqXG4gICAqIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBzdGF0dXMgYmFyLlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgYmFja2dyb3VuZENvbG9yPzogP0NvbG9yVmFsdWUsXG4gIC8qKlxuICAgKiBJZiB0aGUgc3RhdHVzIGJhciBpcyB0cmFuc2x1Y2VudC5cbiAgICogV2hlbiB0cmFuc2x1Y2VudCBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGFwcCB3aWxsIGRyYXcgdW5kZXIgdGhlIHN0YXR1cyBiYXIuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4gdXNpbmcgYSBzZW1pIHRyYW5zcGFyZW50IHN0YXR1cyBiYXIgY29sb3IuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICB0cmFuc2x1Y2VudD86ID9ib29sZWFuLFxufH0+O1xuXG50eXBlIElPU1Byb3BzID0gJFJlYWRPbmx5PHt8XG4gIC8qKlxuICAgKiBJZiB0aGUgbmV0d29yayBhY3Rpdml0eSBpbmRpY2F0b3Igc2hvdWxkIGJlIHZpc2libGUuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIG5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGU/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIFRoZSB0cmFuc2l0aW9uIGVmZmVjdCB3aGVuIHNob3dpbmcgYW5kIGhpZGluZyB0aGUgc3RhdHVzIGJhciB1c2luZyB0aGUgYGhpZGRlbmBcbiAgICogcHJvcC4gRGVmYXVsdHMgdG8gJ2ZhZGUnLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBzaG93SGlkZVRyYW5zaXRpb24/OiA/KCdmYWRlJyB8ICdzbGlkZScgfCAnbm9uZScpLFxufH0+O1xuXG50eXBlIFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC4uLkFuZHJvaWRQcm9wcyxcbiAgLi4uSU9TUHJvcHMsXG4gIC8qKlxuICAgKiBJZiB0aGUgc3RhdHVzIGJhciBpcyBoaWRkZW4uXG4gICAqL1xuICBoaWRkZW4/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIElmIHRoZSB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdHVzIGJhciBwcm9wZXJ0eSBjaGFuZ2VzIHNob3VsZCBiZSBhbmltYXRlZC5cbiAgICogU3VwcG9ydGVkIGZvciBiYWNrZ3JvdW5kQ29sb3IsIGJhclN0eWxlIGFuZCBoaWRkZW4uXG4gICAqL1xuICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAvKipcbiAgICogU2V0cyB0aGUgY29sb3Igb2YgdGhlIHN0YXR1cyBiYXIgdGV4dC5cbiAgICovXG4gIGJhclN0eWxlPzogPygnZGVmYXVsdCcgfCAnbGlnaHQtY29udGVudCcgfCAnZGFyay1jb250ZW50JyksXG58fT47XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBwcm9wIHN0YWNrIHdpdGggdGhlIGRlZmF1bHQgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBtZXJnZVByb3BzU3RhY2soXG4gIHByb3BzU3RhY2s6IEFycmF5PE9iamVjdD4sXG4gIGRlZmF1bHRWYWx1ZXM6IE9iamVjdCxcbik6IE9iamVjdCB7XG4gIHJldHVybiBwcm9wc1N0YWNrLnJlZHVjZShcbiAgICAocHJldiwgY3VyKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gY3VyKSB7XG4gICAgICAgIGlmIChjdXJbcHJvcF0gIT0gbnVsbCkge1xuICAgICAgICAgIHByZXZbcHJvcF0gPSBjdXJbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmV2O1xuICAgIH0sXG4gICAgey4uLmRlZmF1bHRWYWx1ZXN9LFxuICApO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRvIGluc2VydCBpbiB0aGUgcHJvcHMgc3RhY2sgZnJvbSB0aGUgcHJvcHNcbiAqIGFuZCB0aGUgdHJhbnNpdGlvbi9hbmltYXRpb24gaW5mby5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RhY2tFbnRyeShwcm9wczogYW55KTogYW55IHtcbiAgY29uc3QgYW5pbWF0ZWQgPSBwcm9wcy5hbmltYXRlZCA/PyBmYWxzZTtcbiAgY29uc3Qgc2hvd0hpZGVUcmFuc2l0aW9uID0gcHJvcHMuc2hvd0hpZGVUcmFuc2l0aW9uID8/ICdmYWRlJztcbiAgcmV0dXJuIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICBwcm9wcy5iYWNrZ3JvdW5kQ29sb3IgIT0gbnVsbFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICBhbmltYXRlZCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICBiYXJTdHlsZTpcbiAgICAgIHByb3BzLmJhclN0eWxlICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuYmFyU3R5bGUsXG4gICAgICAgICAgICBhbmltYXRlZCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICB0cmFuc2x1Y2VudDogcHJvcHMudHJhbnNsdWNlbnQsXG4gICAgaGlkZGVuOlxuICAgICAgcHJvcHMuaGlkZGVuICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuaGlkZGVuLFxuICAgICAgICAgICAgYW5pbWF0ZWQsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBzaG93SGlkZVRyYW5zaXRpb24sXG4gICAgICAgICAgfVxuICAgICAgICA6IG51bGwsXG4gICAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZTogcHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSxcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21wb25lbnQgdG8gY29udHJvbCB0aGUgYXBwIHN0YXR1cyBiYXIuXG4gKlxuICogIyMjIFVzYWdlIHdpdGggTmF2aWdhdG9yXG4gKlxuICogSXQgaXMgcG9zc2libGUgdG8gaGF2ZSBtdWx0aXBsZSBgU3RhdHVzQmFyYCBjb21wb25lbnRzIG1vdW50ZWQgYXQgdGhlIHNhbWVcbiAqIHRpbWUuIFRoZSBwcm9wcyB3aWxsIGJlIG1lcmdlZCBpbiB0aGUgb3JkZXIgdGhlIGBTdGF0dXNCYXJgIGNvbXBvbmVudHMgd2VyZVxuICogbW91bnRlZC4gT25lIHVzZSBjYXNlIGlzIHRvIHNwZWNpZnkgc3RhdHVzIGJhciBzdHlsZXMgcGVyIHJvdXRlIHVzaW5nIGBOYXZpZ2F0b3JgLlxuICpcbiAqIGBgYFxuICogIDxWaWV3PlxuICogICAgPFN0YXR1c0JhclxuICogICAgICBiYWNrZ3JvdW5kQ29sb3I9XCJibHVlXCJcbiAqICAgICAgYmFyU3R5bGU9XCJsaWdodC1jb250ZW50XCJcbiAqICAgIC8+XG4gKiAgICA8TmF2aWdhdG9yXG4gKiAgICAgIGluaXRpYWxSb3V0ZT17e3N0YXR1c0JhckhpZGRlbjogdHJ1ZX19XG4gKiAgICAgIHJlbmRlclNjZW5lPXsocm91dGUsIG5hdmlnYXRvcikgPT5cbiAqICAgICAgICA8Vmlldz5cbiAqICAgICAgICAgIDxTdGF0dXNCYXIgaGlkZGVuPXtyb3V0ZS5zdGF0dXNCYXJIaWRkZW59IC8+XG4gKiAgICAgICAgICAuLi5cbiAqICAgICAgICA8L1ZpZXc+XG4gKiAgICAgIH1cbiAqICAgIC8+XG4gKiAgPC9WaWV3PlxuICogYGBgXG4gKlxuICogIyMjIEltcGVyYXRpdmUgQVBJXG4gKlxuICogRm9yIGNhc2VzIHdoZXJlIHVzaW5nIGEgY29tcG9uZW50IGlzIG5vdCBpZGVhbCwgdGhlcmUgYXJlIHN0YXRpYyBtZXRob2RzXG4gKiB0byBtYW5pcHVsYXRlIHRoZSBgU3RhdHVzQmFyYCBkaXNwbGF5IHN0YWNrLiBUaGVzZSBtZXRob2RzIGhhdmUgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIGFzIG1vdW50aW5nIGFuZCB1bm1vdW50aW5nIGEgYFN0YXR1c0JhcmAgY29tcG9uZW50LlxuICpcbiAqIEZvciBleGFtcGxlLCB5b3UgY2FuIGNhbGwgYFN0YXR1c0Jhci5wdXNoU3RhY2tFbnRyeWAgdG8gdXBkYXRlIHRoZSBzdGF0dXMgYmFyXG4gKiBiZWZvcmUgbGF1bmNoaW5nIGEgdGhpcmQtcGFydHkgbmF0aXZlIFVJIGNvbXBvbmVudCwgYW5kIHRoZW4gY2FsbFxuICogYFN0YXR1c0Jhci5wb3BTdGFja0VudHJ5YCB3aGVuIGNvbXBsZXRlZC5cbiAqXG4gKiBgYGBcbiAqIGNvbnN0IG9wZW5UaGlyZFBhcnR5QnVnUmVwb3J0ZXIgPSBhc3luYyAoKSA9PiB7XG4gKiAgIC8vIFRoZSBidWcgcmVwb3J0ZXIgaGFzIGEgZGFyayBiYWNrZ3JvdW5kLCBzbyB3ZSBwdXNoIGEgbmV3IHN0YXR1cyBiYXIgc3R5bGUuXG4gKiAgIGNvbnN0IHN0YWNrRW50cnkgPSBTdGF0dXNCYXIucHVzaFN0YWNrRW50cnkoe2JhclN0eWxlOiAnbGlnaHQtY29udGVudCd9KTtcbiAqXG4gKiAgIC8vIGBvcGVuYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIFVJIGlzIGRpc21pc3NlZC5cbiAqICAgYXdhaXQgQnVnUmVwb3J0ZXIub3BlbigpO1xuICpcbiAqICAgLy8gRG9uJ3QgZm9yZ2V0IHRvIGNhbGwgYHBvcFN0YWNrRW50cnlgIHdoZW4geW91J3JlIGRvbmUuXG4gKiAgIFN0YXR1c0Jhci5wb3BTdGFja0VudHJ5KHN0YWNrRW50cnkpO1xuICogfTtcbiAqIGBgYFxuICpcbiAqIFRoZXJlIGlzIGEgbGVnYWN5IGltcGVyYXRpdmUgQVBJIHRoYXQgZW5hYmxlcyB5b3UgdG8gbWFudWFsbHkgdXBkYXRlIHRoZVxuICogc3RhdHVzIGJhciBzdHlsZXMuIEhvd2V2ZXIsIHRoZSBsZWdhY3kgQVBJIGRvZXMgbm90IHVwZGF0ZSB0aGUgaW50ZXJuYWxcbiAqIGBTdGF0dXNCYXJgIGRpc3BsYXkgc3RhY2ssIHdoaWNoIG1lYW5zIHRoYXQgYW55IGNoYW5nZXMgd2lsbCBiZSBvdmVycmlkZGVuXG4gKiB3aGVuZXZlciBhIGBTdGF0dXNCYXJgIGNvbXBvbmVudCBpcyBtb3VudGVkIG9yIHVubW91bnRlZC5cbiAqXG4gKiBJdCBpcyBzdHJvbmdseSBhZHZpc2VkIHRoYXQgeW91IHVzZSBgcHVzaFN0YWNrRW50cnlgLCBgcG9wU3RhY2tFbnRyeWAsIG9yXG4gKiBgcmVwbGFjZVN0YWNrRW50cnlgIGluc3RlYWQgb2YgdGhlIHN0YXRpYyBtZXRob2RzIGJlZ2lubmluZyB3aXRoIGBzZXRgLlxuICpcbiAqICMjIyBDb25zdGFudHNcbiAqXG4gKiBgY3VycmVudEhlaWdodGAgKEFuZHJvaWQgb25seSkgVGhlIGhlaWdodCBvZiB0aGUgc3RhdHVzIGJhci5cbiAqL1xuY2xhc3MgU3RhdHVzQmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIHN0YXRpYyBfcHJvcHNTdGFjazogQXJyYXk8YW55PiA9IFtdO1xuXG4gIHN0YXRpYyBfZGVmYXVsdFByb3BzOiBhbnkgPSBjcmVhdGVTdGFja0VudHJ5KHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnXG4gICAgICAgID8gTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuZ2V0Q29uc3RhbnRzKClcbiAgICAgICAgICAgIC5ERUZBVUxUX0JBQ0tHUk9VTkRfQ09MT1IgPz8gJ2JsYWNrJ1xuICAgICAgICA6ICdibGFjaycsXG4gICAgYmFyU3R5bGU6ICdkZWZhdWx0JyxcbiAgICB0cmFuc2x1Y2VudDogZmFsc2UsXG4gICAgaGlkZGVuOiBmYWxzZSxcbiAgICBuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlOiBmYWxzZSxcbiAgfSk7XG5cbiAgLy8gVGltZXIgZm9yIHVwZGF0aW5nIHRoZSBuYXRpdmUgbW9kdWxlIHZhbHVlcyBhdCB0aGUgZW5kIG9mIHRoZSBmcmFtZS5cbiAgLy8gJEZsb3dGaXhNZVttaXNzaW5nLWxvY2FsLWFubm90XVxuICBzdGF0aWMgX3VwZGF0ZUltbWVkaWF0ZSA9IG51bGw7XG5cbiAgLy8gVGhlIGN1cnJlbnQgbWVyZ2VkIHZhbHVlcyBmcm9tIHRoZSBwcm9wcyBzdGFjay5cbiAgLy8gJEZsb3dGaXhNZVttaXNzaW5nLWxvY2FsLWFubm90XVxuICBzdGF0aWMgX2N1cnJlbnRWYWx1ZXMgPSBudWxsO1xuXG4gIC8vIFRPRE8oamFuaWMpOiBQcm92aWRlIGEgcmVhbCBBUEkgdG8gZGVhbCB3aXRoIHN0YXR1cyBiYXIgaGVpZ2h0LiBTZWUgdGhlXG4gIC8vIGRpc2N1c3Npb24gaW4gIzYxOTUuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIHN0YXR1cyBiYXIgb24gdGhlIGRldmljZS5cbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHN0YXRpYyBjdXJyZW50SGVpZ2h0OiA/bnVtYmVyID1cbiAgICBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnXG4gICAgICA/IE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLmdldENvbnN0YW50cygpLkhFSUdIVFxuICAgICAgOiBudWxsO1xuXG4gIC8vIFByb3ZpZGUgYW4gaW1wZXJhdGl2ZSBBUEkgYXMgc3RhdGljIGZ1bmN0aW9ucyBvZiB0aGUgY29tcG9uZW50LlxuICAvLyBTZWUgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcCBmb3IgbW9yZSBkZXRhaWwuXG5cbiAgLyoqXG4gICAqIFNob3cgb3IgaGlkZSB0aGUgc3RhdHVzIGJhclxuICAgKiBAcGFyYW0gaGlkZGVuIEhpZGUgdGhlIHN0YXR1cyBiYXIuXG4gICAqIEBwYXJhbSBhbmltYXRpb24gT3B0aW9uYWwgYW5pbWF0aW9uIHdoZW5cbiAgICogICAgY2hhbmdpbmcgdGhlIHN0YXR1cyBiYXIgaGlkZGVuIHByb3BlcnR5LlxuICAgKi9cbiAgc3RhdGljIHNldEhpZGRlbihoaWRkZW46IGJvb2xlYW4sIGFuaW1hdGlvbj86IFN0YXR1c0JhckFuaW1hdGlvbikge1xuICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbiB8fCAnbm9uZSc7XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMuaGlkZGVuLnZhbHVlID0gaGlkZGVuO1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0SGlkZGVuKGhpZGRlbiwgYW5pbWF0aW9uKTtcbiAgICB9IGVsc2UgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldEhpZGRlbihoaWRkZW4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyBiYXIgc3R5bGVcbiAgICogQHBhcmFtIHN0eWxlIFN0YXR1cyBiYXIgc3R5bGUgdG8gc2V0XG4gICAqIEBwYXJhbSBhbmltYXRlZCBBbmltYXRlIHRoZSBzdHlsZSBjaGFuZ2UuXG4gICAqL1xuICBzdGF0aWMgc2V0QmFyU3R5bGUoc3R5bGU6IFN0YXR1c0JhclN0eWxlLCBhbmltYXRlZD86IGJvb2xlYW4pIHtcbiAgICBhbmltYXRlZCA9IGFuaW1hdGVkIHx8IGZhbHNlO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmJhclN0eWxlLnZhbHVlID0gc3R5bGU7XG4gICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXRTdHlsZShzdHlsZSwgYW5pbWF0ZWQpO1xuICAgIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0U3R5bGUoc3R5bGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb250cm9sIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBuZXR3b3JrIGFjdGl2aXR5IGluZGljYXRvclxuICAgKiBAcGFyYW0gdmlzaWJsZSBTaG93IHRoZSBpbmRpY2F0b3IuXG4gICAqL1xuICBzdGF0aWMgc2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgaWYgKFBsYXRmb3JtLk9TICE9PSAnaW9zJykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnYHNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGVgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIGlPUycsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlID0gdmlzaWJsZTtcbiAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUodmlzaWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgc3RhdHVzIGJhclxuICAgKiBAcGFyYW0gY29sb3IgQmFja2dyb3VuZCBjb2xvci5cbiAgICogQHBhcmFtIGFuaW1hdGVkIEFuaW1hdGUgdGhlIHN0eWxlIGNoYW5nZS5cbiAgICovXG4gIHN0YXRpYyBzZXRCYWNrZ3JvdW5kQ29sb3IoY29sb3I6IHN0cmluZywgYW5pbWF0ZWQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKFBsYXRmb3JtLk9TICE9PSAnYW5kcm9pZCcpIHtcbiAgICAgIGNvbnNvbGUud2FybignYHNldEJhY2tncm91bmRDb2xvcmAgaXMgb25seSBhdmFpbGFibGUgb24gQW5kcm9pZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhbmltYXRlZCA9IGFuaW1hdGVkIHx8IGZhbHNlO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmJhY2tncm91bmRDb2xvci52YWx1ZSA9IGNvbG9yO1xuXG4gICAgY29uc3QgcHJvY2Vzc2VkQ29sb3IgPSBwcm9jZXNzQ29sb3IoY29sb3IpO1xuICAgIGlmIChwcm9jZXNzZWRDb2xvciA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBcXGBTdGF0dXNCYXIuc2V0QmFja2dyb3VuZENvbG9yXFxgOiBDb2xvciAke2NvbG9yfSBwYXJzZWQgdG8gbnVsbCBvciB1bmRlZmluZWRgLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgdHlwZW9mIHByb2Nlc3NlZENvbG9yID09PSAnbnVtYmVyJyxcbiAgICAgICdVbmV4cGVjdGVkIGNvbG9yIGdpdmVuIGZvciBTdGF0dXNCYXIuc2V0QmFja2dyb3VuZENvbG9yJyxcbiAgICApO1xuXG4gICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0Q29sb3IocHJvY2Vzc2VkQ29sb3IsIGFuaW1hdGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb250cm9sIHRoZSB0cmFuc2x1Y2VuY3kgb2YgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIHRyYW5zbHVjZW50IFNldCBhcyB0cmFuc2x1Y2VudC5cbiAgICovXG4gIHN0YXRpYyBzZXRUcmFuc2x1Y2VudCh0cmFuc2x1Y2VudDogYm9vbGVhbikge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2BzZXRUcmFuc2x1Y2VudGAgaXMgb25seSBhdmFpbGFibGUgb24gQW5kcm9pZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy50cmFuc2x1Y2VudCA9IHRyYW5zbHVjZW50O1xuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldFRyYW5zbHVjZW50KHRyYW5zbHVjZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoIGEgU3RhdHVzQmFyIGVudHJ5IG9udG8gdGhlIHN0YWNrLlxuICAgKiBUaGUgcmV0dXJuIHZhbHVlIHNob3VsZCBiZSBwYXNzZWQgdG8gYHBvcFN0YWNrRW50cnlgIHdoZW4gY29tcGxldGUuXG4gICAqXG4gICAqIEBwYXJhbSBwcm9wcyBPYmplY3QgY29udGFpbmluZyB0aGUgU3RhdHVzQmFyIHByb3BzIHRvIHVzZSBpbiB0aGUgc3RhY2sgZW50cnkuXG4gICAqL1xuICBzdGF0aWMgcHVzaFN0YWNrRW50cnkocHJvcHM6IGFueSk6IGFueSB7XG4gICAgY29uc3QgZW50cnkgPSBjcmVhdGVTdGFja0VudHJ5KHByb3BzKTtcbiAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2sucHVzaChlbnRyeSk7XG4gICAgU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrKCk7XG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIFBvcCBhIFN0YXR1c0JhciBlbnRyeSBmcm9tIHRoZSBzdGFjay5cbiAgICpcbiAgICogQHBhcmFtIGVudHJ5IEVudHJ5IHJldHVybmVkIGZyb20gYHB1c2hTdGFja0VudHJ5YC5cbiAgICovXG4gIHN0YXRpYyBwb3BTdGFja0VudHJ5KGVudHJ5OiBhbnkpIHtcbiAgICBjb25zdCBpbmRleCA9IFN0YXR1c0Jhci5fcHJvcHNTdGFjay5pbmRleE9mKGVudHJ5KTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2suc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZSBhbiBleGlzdGluZyBTdGF0dXNCYXIgc3RhY2sgZW50cnkgd2l0aCBuZXcgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSBlbnRyeSBFbnRyeSByZXR1cm5lZCBmcm9tIGBwdXNoU3RhY2tFbnRyeWAgdG8gcmVwbGFjZS5cbiAgICogQHBhcmFtIHByb3BzIE9iamVjdCBjb250YWluaW5nIHRoZSBTdGF0dXNCYXIgcHJvcHMgdG8gdXNlIGluIHRoZSByZXBsYWNlbWVudCBzdGFjayBlbnRyeS5cbiAgICovXG4gIHN0YXRpYyByZXBsYWNlU3RhY2tFbnRyeShlbnRyeTogYW55LCBwcm9wczogYW55KTogYW55IHtcbiAgICBjb25zdCBuZXdFbnRyeSA9IGNyZWF0ZVN0YWNrRW50cnkocHJvcHMpO1xuICAgIGNvbnN0IGluZGV4ID0gU3RhdHVzQmFyLl9wcm9wc1N0YWNrLmluZGV4T2YoZW50cnkpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIFN0YXR1c0Jhci5fcHJvcHNTdGFja1tpbmRleF0gPSBuZXdFbnRyeTtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrKCk7XG4gICAgcmV0dXJuIG5ld0VudHJ5O1xuICB9XG5cbiAgLy8gJEZsb3dGaXhNZVttaXNzaW5nLWxvY2FsLWFubm90XVxuICBfc3RhY2tFbnRyeSA9IG51bGw7XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gRXZlcnkgdGltZSBhIFN0YXR1c0JhciBjb21wb25lbnQgaXMgbW91bnRlZCwgd2UgcHVzaCBpdCdzIHByb3AgdG8gYSBzdGFja1xuICAgIC8vIGFuZCBhbHdheXMgdXBkYXRlIHRoZSBuYXRpdmUgc3RhdHVzIGJhciB3aXRoIHRoZSBwcm9wcyBmcm9tIHRoZSB0b3Agb2YgdGhlblxuICAgIC8vIHN0YWNrLiBUaGlzIGFsbG93cyBoYXZpbmcgbXVsdGlwbGUgU3RhdHVzQmFyIGNvbXBvbmVudHMgYW5kIHRoZSBvbmUgdGhhdCBpc1xuICAgIC8vIGFkZGVkIGxhc3Qgb3IgaXMgZGVlcGVyIGluIHRoZSB2aWV3IGhpZXJhcmNoeSB3aWxsIGhhdmUgcHJpb3JpdHkuXG4gICAgdGhpcy5fc3RhY2tFbnRyeSA9IFN0YXR1c0Jhci5wdXNoU3RhY2tFbnRyeSh0aGlzLnByb3BzKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIC8vIFdoZW4gYSBTdGF0dXNCYXIgaXMgdW5tb3VudGVkLCByZW1vdmUgaXRzZWxmIGZyb20gdGhlIHN0YWNrIGFuZCB1cGRhdGVcbiAgICAvLyB0aGUgbmF0aXZlIGJhciB3aXRoIHRoZSBuZXh0IHByb3BzLlxuICAgIFN0YXR1c0Jhci5wb3BTdGFja0VudHJ5KHRoaXMuX3N0YWNrRW50cnkpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuX3N0YWNrRW50cnkgPSBTdGF0dXNCYXIucmVwbGFjZVN0YWNrRW50cnkoXG4gICAgICB0aGlzLl9zdGFja0VudHJ5LFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIG5hdGl2ZSBzdGF0dXMgYmFyIHdpdGggdGhlIHByb3BzIGZyb20gdGhlIHN0YWNrLlxuICAgKi9cbiAgc3RhdGljIF91cGRhdGVQcm9wc1N0YWNrID0gKCkgPT4ge1xuICAgIC8vIFNlbmQgdGhlIHVwZGF0ZSB0byB0aGUgbmF0aXZlIG1vZHVsZSBvbmx5IG9uY2UgYXQgdGhlIGVuZCBvZiB0aGUgZnJhbWUuXG4gICAgY2xlYXJJbW1lZGlhdGUoU3RhdHVzQmFyLl91cGRhdGVJbW1lZGlhdGUpO1xuICAgIFN0YXR1c0Jhci5fdXBkYXRlSW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICAgIGNvbnN0IG9sZFByb3BzID0gU3RhdHVzQmFyLl9jdXJyZW50VmFsdWVzO1xuICAgICAgY29uc3QgbWVyZ2VkUHJvcHMgPSBtZXJnZVByb3BzU3RhY2soXG4gICAgICAgIFN0YXR1c0Jhci5fcHJvcHNTdGFjayxcbiAgICAgICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMsXG4gICAgICApO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHByb3BzIHRoYXQgaGF2ZSBjaGFuZ2VkIHVzaW5nIHRoZSBtZXJnZWQgdmFsdWVzIGZyb20gdGhlIHByb3BzIHN0YWNrLlxuICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9sZFByb3BzIHx8XG4gICAgICAgICAgb2xkUHJvcHMuYmFyU3R5bGUudmFsdWUgIT09IG1lcmdlZFByb3BzLmJhclN0eWxlLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0U3R5bGUoXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5iYXJTdHlsZS52YWx1ZSxcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmJhclN0eWxlLmFuaW1hdGVkIHx8IGZhbHNlLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvbGRQcm9wcyB8fCBvbGRQcm9wcy5oaWRkZW4udmFsdWUgIT09IG1lcmdlZFByb3BzLmhpZGRlbi52YWx1ZSkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0SGlkZGVuKFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuaGlkZGVuLmFuaW1hdGVkXG4gICAgICAgICAgICAgID8gbWVyZ2VkUHJvcHMuaGlkZGVuLnRyYW5zaXRpb25cbiAgICAgICAgICAgICAgOiAnbm9uZScsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb2xkUHJvcHMgfHxcbiAgICAgICAgICBvbGRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlICE9PVxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZVxuICAgICAgICApIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUoXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgICAvL3RvZG8oVDYwNjg0Nzg3KTogQWRkIGJhY2sgb3B0aW1pemF0aW9uIHRvIG9ubHkgdXBkYXRlIGJhciBzdHlsZSBhbmRcbiAgICAgICAgLy9iYWNrZ3JvdW5kIGNvbG9yIGlmIHRoZSBuZXcgdmFsdWUgaXMgZGlmZmVyZW50IGZyb20gdGhlIG9sZCB2YWx1ZS5cbiAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0U3R5bGUobWVyZ2VkUHJvcHMuYmFyU3R5bGUudmFsdWUpO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRDb2xvciA9IHByb2Nlc3NDb2xvcihtZXJnZWRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWUpO1xuICAgICAgICBpZiAocHJvY2Vzc2VkQ29sb3IgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBcXGBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2tcXGA6IENvbG9yICR7bWVyZ2VkUHJvcHMuYmFja2dyb3VuZENvbG9yLnZhbHVlfSBwYXJzZWQgdG8gbnVsbCBvciB1bmRlZmluZWRgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgICAgdHlwZW9mIHByb2Nlc3NlZENvbG9yID09PSAnbnVtYmVyJyxcbiAgICAgICAgICAgICdVbmV4cGVjdGVkIGNvbG9yIGdpdmVuIGluIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaycsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRDb2xvcihcbiAgICAgICAgICAgIHByb2Nlc3NlZENvbG9yLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuYmFja2dyb3VuZENvbG9yLmFuaW1hdGVkLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvbGRQcm9wcyB8fCBvbGRQcm9wcy5oaWRkZW4udmFsdWUgIT09IG1lcmdlZFByb3BzLmhpZGRlbi52YWx1ZSkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldEhpZGRlbihtZXJnZWRQcm9wcy5oaWRkZW4udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFjdGl2aXRpZXMgYXJlIG5vdCB0cmFuc2x1Y2VudCBieSBkZWZhdWx0LCBzbyBhbHdheXMgc2V0IGlmIHRydWUuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb2xkUHJvcHMgfHxcbiAgICAgICAgICBvbGRQcm9wcy50cmFuc2x1Y2VudCAhPT0gbWVyZ2VkUHJvcHMudHJhbnNsdWNlbnQgfHxcbiAgICAgICAgICBtZXJnZWRQcm9wcy50cmFuc2x1Y2VudFxuICAgICAgICApIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRUcmFuc2x1Y2VudChtZXJnZWRQcm9wcy50cmFuc2x1Y2VudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFVwZGF0ZSB0aGUgY3VycmVudCBwcm9wIHZhbHVlcy5cbiAgICAgIFN0YXR1c0Jhci5fY3VycmVudFZhbHVlcyA9IG1lcmdlZFByb3BzO1xuICAgIH0pO1xuICB9O1xuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXR1c0JhcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBWUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsOEJBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLDBCQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxVQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxLQUFBLEdBQUFDLHVCQUFBLENBQUFOLE9BQUE7QUFBK0IsSUFBQU8sVUFBQSxFQUFBQyxxQkFBQTtBQUFBLFNBQUFGLHdCQUFBRyxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBTCx1QkFBQSxZQUFBQSx3QkFBQUcsQ0FBQSxFQUFBQyxDQUFBLFNBQUFBLENBQUEsSUFBQUQsQ0FBQSxJQUFBQSxDQUFBLENBQUFLLFVBQUEsU0FBQUwsQ0FBQSxNQUFBTSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxLQUFBQyxTQUFBLFFBQUFDLE9BQUEsRUFBQVYsQ0FBQSxpQkFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUSxDQUFBLE1BQUFGLENBQUEsR0FBQUwsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsUUFBQUcsQ0FBQSxDQUFBSyxHQUFBLENBQUFYLENBQUEsVUFBQU0sQ0FBQSxDQUFBTSxHQUFBLENBQUFaLENBQUEsR0FBQU0sQ0FBQSxDQUFBTyxHQUFBLENBQUFiLENBQUEsRUFBQVEsQ0FBQSxjQUFBTSxFQUFBLElBQUFkLENBQUEsZ0JBQUFjLEVBQUEsT0FBQUMsY0FBQSxDQUFBQyxJQUFBLENBQUFoQixDQUFBLEVB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