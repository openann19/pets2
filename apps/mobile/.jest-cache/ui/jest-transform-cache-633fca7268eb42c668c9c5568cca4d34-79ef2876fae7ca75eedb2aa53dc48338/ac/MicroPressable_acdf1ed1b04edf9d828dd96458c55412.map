{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","Haptics","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_worklet_13026151603687_init_data","code","location","sourceMap","_worklet_6999366343294_init_data","MicroPressable","_ref","children","onPress","style","disabled","_ref$rippleColor","rippleColor","_ref$haptics","haptics","_ref$scaleFrom","scaleFrom","_useState","useState","w","h","_useState2","_slicedToArray2","layout","setLayout","x","useSharedValue","y","prog","scale","pressingRef","useRef","onPressIn","current","_e$nativeEvent","nativeEvent","locationX","locationY","value","withTiming","duration","withSpring","damping","stiffness","mass","impactAsync","ImpactFeedbackStyle","Light","onPressOut","circle","useAnimatedStyle","_e","global","Error","_f","Math","max","position","top","left","width","height","borderRadius","opacity","transform","interpolate","backgroundColor","_closure","__initData","__workletHash","__stackDetails","__version","wrap","jsx","Pressable","onLayout","_e$nativeEvent$layout","View","jsxs","styles","overflow","pointerEvents","StyleSheet","create"],"sources":["MicroPressable.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { Pressable, View, StyleSheet, type ViewStyle } from \"react-native\";\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming, withSpring, interpolate } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\n\ntype Props = {\n  children: React.ReactNode;\n  onPress?: () => void | Promise<void>;\n  style?: ViewStyle | ViewStyle[];\n  disabled?: boolean;\n  rippleColor?: string;      // e.g. \"rgba(236,72,153,0.35)\" (Theme pink)\n  haptics?: boolean;\n  scaleFrom?: number;        // 0.98 default\n};\n\nexport default function MicroPressable({\n  children,\n  onPress,\n  style,\n  disabled,\n  rippleColor = \"rgba(236,72,153,0.35)\",\n  haptics = true,\n  scaleFrom = 0.98,\n}: Props) {\n  const [layout, setLayout] = useState({ w: 0, h: 0 });\n  const x = useSharedValue(0);\n  const y = useSharedValue(0);\n  const prog = useSharedValue(0);\n  const scale = useSharedValue(1);\n  const pressingRef = useRef(false);\n\n  const onPressIn = (e: any) => {\n    pressingRef.current = true;\n    const { locationX, locationY } = e.nativeEvent;\n    x.value = locationX;\n    y.value = locationY;\n    prog.value = 0;\n    prog.value = withTiming(1, { duration: 450 });\n    scale.value = withSpring(scaleFrom, { damping: 18, stiffness: 420, mass: 0.6 });\n    if (haptics) Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n  };\n\n  const onPressOut = () => {\n    pressingRef.current = false;\n    scale.value = withSpring(1, { damping: 18, stiffness: 300 });\n  };\n\n  const circle = useAnimatedStyle(() => {\n    const r = Math.max(layout.w, layout.h) * 0.75;\n    return {\n      position: \"absolute\" as const,\n      top: y.value - r,\n      left: x.value - r,\n      width: r * 2,\n      height: r * 2,\n      borderRadius: r,\n      opacity: 1 - prog.value,\n      transform: [{ scale: interpolate(prog.value, [0, 1], [0.1, 1.8]) }],\n      backgroundColor: rippleColor,\n    };\n  });\n\n  const wrap = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return (\n    <Pressable\n      onPress={onPress}\n      onPressIn={onPressIn}\n      onPressOut={onPressOut}\n      disabled={disabled}\n      style={style}\n      onLayout={e => {\n        const { width, height } = e.nativeEvent.layout;\n        setLayout({ w: width, h: height });\n      }}\n    >\n      <Animated.View style={wrap}>\n        <View style={styles.overflow}>\n          <Animated.View style={circle} pointerEvents=\"none\" />\n          {children}\n        </View>\n      </Animated.View>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  overflow: { overflow: \"hidden\", borderRadius: 9999 },\n});\n\n"],"mappings":"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","ignoreList":[]}