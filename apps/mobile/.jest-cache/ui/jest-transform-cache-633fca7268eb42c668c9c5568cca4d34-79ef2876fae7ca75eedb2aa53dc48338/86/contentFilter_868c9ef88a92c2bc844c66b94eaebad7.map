{"version":3,"names":["Object","defineProperty","exports","value","filterContent","DEFAULT_BLOCKED","input","config","_config$replacement","blocked","blockedKeywords","length","flags","caseSensitive","replacement","output","matched","kw","re","RegExp","replace","test","push"],"sources":["contentFilter.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.filterContent = filterContent;\nconst DEFAULT_BLOCKED = ['scam', 'spam', 'abuse'];\nfunction filterContent(input, config) {\n    const blocked = (config?.blockedKeywords != null && config.blockedKeywords.length > 0)\n        ? config.blockedKeywords\n        : DEFAULT_BLOCKED;\n    const flags = config?.caseSensitive === true ? 'g' : 'gi';\n    const replacement = config?.replacement ?? '***';\n    let output = input;\n    const matched = [];\n    for (const kw of blocked) {\n        const re = new RegExp(`\\\\b${kw.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\b`, flags);\n        if (re.test(output)) {\n            matched.push(kw);\n            output = output.replace(re, replacement);\n        }\n    }\n    return { output, matched };\n}\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,aAAa,GAAGA,aAAa;AACrC,IAAMC,eAAe,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC;AACjD,SAASD,aAAaA,CAACE,KAAK,EAAEC,MAAM,EAAE;EAAA,IAAAC,mBAAA;EAClC,IAAMC,OAAO,GAAI,CAAAF,MAAM,oBAANA,MAAM,CAAEG,eAAe,KAAI,IAAI,IAAIH,MAAM,CAACG,eAAe,CAACC,MAAM,GAAG,CAAC,GAC/EJ,MAAM,CAACG,eAAe,GACtBL,eAAe;EACrB,IAAMO,KAAK,GAAG,CAAAL,MAAM,oBAANA,MAAM,CAAEM,aAAa,MAAK,IAAI,GAAG,GAAG,GAAG,IAAI;EACzD,IAAMC,WAAW,IAAAN,mBAAA,GAAGD,MAAM,oBAANA,MAAM,CAAEO,WAAW,YAAAN,mBAAA,GAAI,KAAK;EAChD,IAAIO,MAAM,GAAGT,KAAK;EAClB,IAAMU,OAAO,GAAG,EAAE;EAClB,KAAK,IAAMC,EAAE,IAAIR,OAAO,EAAE;IACtB,IAAMS,EAAE,GAAG,IAAIC,MAAM,CAAC,MAAMF,EAAE,CAACG,OAAO,CAAC,qBAAqB,EAAE,MAAM,CAAC,KAAK,EAAER,KAAK,CAAC;IAClF,IAAIM,EAAE,CAACG,IAAI,CAACN,MAAM,CAAC,EAAE;MACjBC,OAAO,CAACM,IAAI,CAACL,EAAE,CAAC;MAChBF,MAAM,GAAGA,MAAM,CAACK,OAAO,CAACF,EAAE,EAAEJ,WAAW,CAAC;IAC5C;EACJ;EACA,OAAO;IAAEC,MAAM,EAANA,MAAM;IAAEC,OAAO,EAAPA;EAAQ,CAAC;AAC9B","ignoreList":[]}