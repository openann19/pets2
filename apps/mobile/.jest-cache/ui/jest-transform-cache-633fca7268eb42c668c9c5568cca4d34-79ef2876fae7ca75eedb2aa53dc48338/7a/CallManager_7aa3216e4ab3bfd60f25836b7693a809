2039d4e8b3b8332270060beb19536672
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = CallManager;
exports.useCallManager = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = _interopRequireWildcard(require("react"));
var _core = require("@pawfectmatch/core");
var _reactNative = require("react-native");
var _useSocket = require("../../hooks/useSocket");
var _ActiveCallScreen = _interopRequireDefault(require("../../screens/calling/ActiveCallScreen"));
var _IncomingCallScreen = _interopRequireDefault(require("../../screens/calling/IncomingCallScreen"));
var _WebRTCService = _interopRequireDefault(require("../../services/WebRTCService"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function CallManager(_ref) {
  var children = _ref.children;
  var _useState = (0, _react.useState)(_WebRTCService.default.getCallState()),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    callState = _useState2[0],
    setCallState = _useState2[1];
  var _useState3 = (0, _react.useState)(false),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    showIncomingCall = _useState4[0],
    setShowIncomingCall = _useState4[1];
  var _useState5 = (0, _react.useState)(false),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    showActiveCall = _useState6[0],
    setShowActiveCall = _useState6[1];
  var socket = (0, _useSocket.useSocket)();
  (0, _react.useEffect)(function () {
    if (socket) {}
    var handleCallStateChange = function handleCallStateChange(newState) {
      setCallState(newState);
      if (newState.isActive && newState.isIncoming && !newState.isConnected) {
        setShowIncomingCall(true);
        setShowActiveCall(false);
      } else if (newState.isActive && !newState.isIncoming) {
        setShowIncomingCall(false);
        setShowActiveCall(true);
      } else if (!newState.isActive) {
        setShowIncomingCall(false);
        setShowActiveCall(false);
      }
    };
    var handleCallError = function handleCallError(error) {
      _reactNative.Alert.alert("Call Error", "There was an issue with the call. Please try again.", [{
        text: "OK"
      }]);
      _core.logger.error("Call error:", {
        error: error
      });
    };
    _WebRTCService.default.on("callStateChanged", handleCallStateChange);
    _WebRTCService.default.on("callError", handleCallError);
    var handleAppStateChange = function handleAppStateChange(nextAppState) {
      if (nextAppState === "background" && callState.isActive) {
        _core.logger.info("Call moved to background");
      } else if (nextAppState === "active" && callState.isActive) {
        _core.logger.info("Call returned to foreground");
      }
    };
    var appStateSubscription = _reactNative.AppState.addEventListener("change", handleAppStateChange);
    return function () {
      _WebRTCService.default.off("callStateChanged", handleCallStateChange);
      _WebRTCService.default.off("callError", handleCallError);
      appStateSubscription == null ? void 0 : appStateSubscription.remove();
    };
  }, [socket]);
  var handleAnswerCall = function () {
    var _ref2 = (0, _asyncToGenerator2.default)(function* () {
      try {
        var success = yield _WebRTCService.default.answerCall();
        if (success) {
          setShowIncomingCall(false);
          setShowActiveCall(true);
        }
      } catch (error) {
        _reactNative.Alert.alert("Error", "Failed to answer call");
      }
    });
    return function handleAnswerCall() {
      return _ref2.apply(this, arguments);
    };
  }();
  var handleRejectCall = function handleRejectCall() {
    _WebRTCService.default.rejectCall();
    setShowIncomingCall(false);
  };
  var handleEndCall = function handleEndCall() {
    _reactNative.Alert.alert("End Call", "Are you sure you want to end this call?", [{
      text: "Cancel",
      style: "cancel"
    }, {
      text: "End Call",
      style: "destructive",
      onPress: function onPress() {
        _WebRTCService.default.endCall();
        setShowActiveCall(false);
      }
    }]);
  };
  var handleToggleMute = function handleToggleMute() {
    _WebRTCService.default.toggleMute();
  };
  var handleToggleVideo = function handleToggleVideo() {
    _WebRTCService.default.toggleVideo();
  };
  var handleSwitchCamera = function handleSwitchCamera() {
    _WebRTCService.default.switchCamera();
  };
  var handleToggleSpeaker = function handleToggleSpeaker() {
    _WebRTCService.default.toggleSpeaker();
  };
  return (0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {
    children: [children, (0, _jsxRuntime.jsx)(_reactNative.Modal, {
      visible: showIncomingCall,
      animationType: "slide",
      presentationStyle: "fullScreen",
      onRequestClose: handleRejectCall,
      children: callState.callData && (0, _jsxRuntime.jsx)(_IncomingCallScreen.default, {
        callData: callState.callData,
        onAnswer: handleAnswerCall,
        onReject: handleRejectCall
      })
    }), (0, _jsxRuntime.jsx)(_reactNative.Modal, {
      visible: showActiveCall,
      animationType: "slide",
      presentationStyle: "fullScreen",
      onRequestClose: handleEndCall,
      children: (0, _jsxRuntime.jsx)(_ActiveCallScreen.default, {
        callState: callState,
        onEndCall: handleEndCall,
        onToggleMute: handleToggleMute,
        onToggleVideo: handleToggleVideo,
        onSwitchCamera: handleSwitchCamera,
        onToggleSpeaker: handleToggleSpeaker
      })
    })]
  });
}
var useCallManager = exports.useCallManager = function useCallManager() {
  var startCall = function () {
    var _ref3 = (0, _asyncToGenerator2.default)(function* (matchId, callType) {
      try {
        var success = yield _WebRTCService.default.startCall(matchId, callType);
        if (!success) {
          _reactNative.Alert.alert("Error", "Failed to start call. Please check your permissions and try again.");
        }
        return success;
      } catch (error) {
        _reactNative.Alert.alert("Error", "Failed to start call");
        return false;
      }
    });
    return function startCall(_x, _x2) {
      return _ref3.apply(this, arguments);
    };
  }();
  var endCall = function endCall() {
    _WebRTCService.default.endCall();
  };
  var isCallActive = function isCallActive() {
    return _WebRTCService.default.isCallActive();
  };
  var getCallState = function getCallState() {
    return _WebRTCService.default.getCallState();
  };
  return {
    startCall: startCall,
    endCall: endCall,
    isCallActive: isCallActive,
    getCallState: getCallState
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfY29yZSIsIl9yZWFjdE5hdGl2ZSIsIl91c2VTb2NrZXQiLCJfQWN0aXZlQ2FsbFNjcmVlbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfSW5jb21pbmdDYWxsU2NyZWVuIiwiX1dlYlJUQ1NlcnZpY2UiLCJfanN4UnVudGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiQ2FsbE1hbmFnZXIiLCJfcmVmIiwiY2hpbGRyZW4iLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIldlYlJUQ1NlcnZpY2UiLCJnZXRDYWxsU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiY2FsbFN0YXRlIiwic2V0Q2FsbFN0YXRlIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJzaG93SW5jb21pbmdDYWxsIiwic2V0U2hvd0luY29taW5nQ2FsbCIsIl91c2VTdGF0ZTUiLCJfdXNlU3RhdGU2Iiwic2hvd0FjdGl2ZUNhbGwiLCJzZXRTaG93QWN0aXZlQ2FsbCIsInNvY2tldCIsInVzZVNvY2tldCIsInVzZUVmZmVjdCIsImhhbmRsZUNhbGxTdGF0ZUNoYW5nZSIsIm5ld1N0YXRlIiwiaXNBY3RpdmUiLCJpc0luY29taW5nIiwiaXNDb25uZWN0ZWQiLCJoYW5kbGVDYWxsRXJyb3IiLCJlcnJvciIsIkFsZXJ0IiwiYWxlcnQiLCJ0ZXh0IiwibG9nZ2VyIiwib24iLCJoYW5kbGVBcHBTdGF0ZUNoYW5nZSIsIm5leHRBcHBTdGF0ZSIsImluZm8iLCJhcHBTdGF0ZVN1YnNjcmlwdGlvbiIsIkFwcFN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9mZiIsInJlbW92ZSIsImhhbmRsZUFuc3dlckNhbGwiLCJfcmVmMiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsInN1Y2Nlc3MiLCJhbnN3ZXJDYWxsIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJoYW5kbGVSZWplY3RDYWxsIiwicmVqZWN0Q2FsbCIsImhhbmRsZUVuZENhbGwiLCJzdHlsZSIsIm9uUHJlc3MiLCJlbmRDYWxsIiwiaGFuZGxlVG9nZ2xlTXV0ZSIsInRvZ2dsZU11dGUiLCJoYW5kbGVUb2dnbGVWaWRlbyIsInRvZ2dsZVZpZGVvIiwiaGFuZGxlU3dpdGNoQ2FtZXJhIiwic3dpdGNoQ2FtZXJhIiwiaGFuZGxlVG9nZ2xlU3BlYWtlciIsInRvZ2dsZVNwZWFrZXIiLCJqc3hzIiwiRnJhZ21lbnQiLCJqc3giLCJNb2RhbCIsInZpc2libGUiLCJhbmltYXRpb25UeXBlIiwicHJlc2VudGF0aW9uU3R5bGUiLCJvblJlcXVlc3RDbG9zZSIsImNhbGxEYXRhIiwib25BbnN3ZXIiLCJvblJlamVjdCIsIm9uRW5kQ2FsbCIsIm9uVG9nZ2xlTXV0ZSIsIm9uVG9nZ2xlVmlkZW8iLCJvblN3aXRjaENhbWVyYSIsIm9uVG9nZ2xlU3BlYWtlciIsInVzZUNhbGxNYW5hZ2VyIiwiZXhwb3J0cyIsInN0YXJ0Q2FsbCIsIl9yZWYzIiwibWF0Y2hJZCIsImNhbGxUeXBlIiwiX3giLCJfeDIiLCJpc0NhbGxBY3RpdmUiXSwic291cmNlcyI6WyJDYWxsTWFuYWdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAcGF3ZmVjdG1hdGNoL2NvcmVcIjtcbmltcG9ydCB0eXBlIHsgQXBwU3RhdGVTdGF0dXMgfSBmcm9tIFwicmVhY3QtbmF0aXZlXCI7XG5pbXBvcnQgeyBNb2RhbCwgQWxlcnQsIEFwcFN0YXRlIH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xuXG5pbXBvcnQgeyB1c2VTb2NrZXQgfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlU29ja2V0XCI7XG5pbXBvcnQgQWN0aXZlQ2FsbFNjcmVlbiBmcm9tIFwiLi4vLi4vc2NyZWVucy9jYWxsaW5nL0FjdGl2ZUNhbGxTY3JlZW5cIjtcbmltcG9ydCBJbmNvbWluZ0NhbGxTY3JlZW4gZnJvbSBcIi4uLy4uL3NjcmVlbnMvY2FsbGluZy9JbmNvbWluZ0NhbGxTY3JlZW5cIjtcbmltcG9ydCB0eXBlIHsgQ2FsbFN0YXRlIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL1dlYlJUQ1NlcnZpY2VcIjtcbmltcG9ydCBXZWJSVENTZXJ2aWNlIGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9XZWJSVENTZXJ2aWNlXCI7XG5pbXBvcnQgdHlwZSB7IENhbGxEYXRhIH0gZnJvbSBcIi4uLy4uL3NlcnZpY2VzL1dlYlJUQ1NlcnZpY2VcIjtcblxuaW50ZXJmYWNlIENhbGxNYW5hZ2VyUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDYWxsTWFuYWdlcih7IGNoaWxkcmVuIH06IENhbGxNYW5hZ2VyUHJvcHMpIHtcbiAgY29uc3QgW2NhbGxTdGF0ZSwgc2V0Q2FsbFN0YXRlXSA9IHVzZVN0YXRlPENhbGxTdGF0ZT4oXG4gICAgV2ViUlRDU2VydmljZS5nZXRDYWxsU3RhdGUoKSxcbiAgKTtcbiAgY29uc3QgW3Nob3dJbmNvbWluZ0NhbGwsIHNldFNob3dJbmNvbWluZ0NhbGxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0FjdGl2ZUNhbGwsIHNldFNob3dBY3RpdmVDYWxsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc29ja2V0ID0gdXNlU29ja2V0KCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBXZWJSVEMgc2VydmljZSBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgc29ja2V0IGNvbm5lY3Rpb25zXG4gICAgLy8gTm8gZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gbmVlZGVkXG4gICAgaWYgKHNvY2tldCkge1xuICAgICAgLy8gU29ja2V0IGlzIGFscmVhZHkgY29ubmVjdGVkIGFuZCBXZWJSVEMgc2VydmljZSB3aWxsIHVzZSBpdFxuICAgIH1cblxuICAgIC8vIExpc3RlbiBmb3IgY2FsbCBzdGF0ZSBjaGFuZ2VzXG4gICAgY29uc3QgaGFuZGxlQ2FsbFN0YXRlQ2hhbmdlID0gKG5ld1N0YXRlOiBDYWxsU3RhdGUpID0+IHtcbiAgICAgIHNldENhbGxTdGF0ZShuZXdTdGF0ZSk7XG5cbiAgICAgIGlmIChuZXdTdGF0ZS5pc0FjdGl2ZSAmJiBuZXdTdGF0ZS5pc0luY29taW5nICYmICFuZXdTdGF0ZS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAvLyBTaG93IGluY29taW5nIGNhbGwgc2NyZWVuXG4gICAgICAgIHNldFNob3dJbmNvbWluZ0NhbGwodHJ1ZSk7XG4gICAgICAgIHNldFNob3dBY3RpdmVDYWxsKGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAobmV3U3RhdGUuaXNBY3RpdmUgJiYgIW5ld1N0YXRlLmlzSW5jb21pbmcpIHtcbiAgICAgICAgLy8gU2hvdyBhY3RpdmUgY2FsbCBzY3JlZW5cbiAgICAgICAgc2V0U2hvd0luY29taW5nQ2FsbChmYWxzZSk7XG4gICAgICAgIHNldFNob3dBY3RpdmVDYWxsKHRydWUpO1xuICAgICAgfSBlbHNlIGlmICghbmV3U3RhdGUuaXNBY3RpdmUpIHtcbiAgICAgICAgLy8gSGlkZSBhbGwgY2FsbCBzY3JlZW5zXG4gICAgICAgIHNldFNob3dJbmNvbWluZ0NhbGwoZmFsc2UpO1xuICAgICAgICBzZXRTaG93QWN0aXZlQ2FsbChmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUNhbGxFcnJvciA9IChlcnJvcjogdW5rbm93bikgPT4ge1xuICAgICAgQWxlcnQuYWxlcnQoXG4gICAgICAgIFwiQ2FsbCBFcnJvclwiLFxuICAgICAgICBcIlRoZXJlIHdhcyBhbiBpc3N1ZSB3aXRoIHRoZSBjYWxsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgICBbeyB0ZXh0OiBcIk9LXCIgfV0sXG4gICAgICApO1xuICAgICAgbG9nZ2VyLmVycm9yKFwiQ2FsbCBlcnJvcjpcIiwgeyBlcnJvciB9KTtcbiAgICB9O1xuXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgIFdlYlJUQ1NlcnZpY2Uub24oXCJjYWxsU3RhdGVDaGFuZ2VkXCIsIGhhbmRsZUNhbGxTdGF0ZUNoYW5nZSk7XG4gICAgV2ViUlRDU2VydmljZS5vbihcImNhbGxFcnJvclwiLCBoYW5kbGVDYWxsRXJyb3IpO1xuXG4gICAgLy8gSGFuZGxlIGFwcCBzdGF0ZSBjaGFuZ2VzIChmb3IgYmFja2dyb3VuZC9mb3JlZ3JvdW5kKVxuICAgIGNvbnN0IGhhbmRsZUFwcFN0YXRlQ2hhbmdlID0gKG5leHRBcHBTdGF0ZTogQXBwU3RhdGVTdGF0dXMpID0+IHtcbiAgICAgIGlmIChuZXh0QXBwU3RhdGUgPT09IFwiYmFja2dyb3VuZFwiICYmIGNhbGxTdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgICAvLyBIYW5kbGUgY2FsbCBpbiBiYWNrZ3JvdW5kIC0gY291bGQgaW1wbGVtZW50IHBpY3R1cmUtaW4tcGljdHVyZVxuICAgICAgICBsb2dnZXIuaW5mbyhcIkNhbGwgbW92ZWQgdG8gYmFja2dyb3VuZFwiKTtcbiAgICAgIH0gZWxzZSBpZiAobmV4dEFwcFN0YXRlID09PSBcImFjdGl2ZVwiICYmIGNhbGxTdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgICAvLyBDYWxsIHJldHVybmVkIHRvIGZvcmVncm91bmRcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJDYWxsIHJldHVybmVkIHRvIGZvcmVncm91bmRcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGFwcFN0YXRlU3Vic2NyaXB0aW9uID0gQXBwU3RhdGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2hhbmdlXCIsXG4gICAgICBoYW5kbGVBcHBTdGF0ZUNoYW5nZSxcbiAgICApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIFdlYlJUQ1NlcnZpY2Uub2ZmKFwiY2FsbFN0YXRlQ2hhbmdlZFwiLCBoYW5kbGVDYWxsU3RhdGVDaGFuZ2UpO1xuICAgICAgV2ViUlRDU2VydmljZS5vZmYoXCJjYWxsRXJyb3JcIiwgaGFuZGxlQ2FsbEVycm9yKTtcbiAgICAgIGFwcFN0YXRlU3Vic2NyaXB0aW9uPy5yZW1vdmUoKTtcbiAgICB9O1xuICB9LCBbc29ja2V0XSk7XG5cbiAgLy8gQ2FsbCBhY3Rpb24gaGFuZGxlcnNcbiAgY29uc3QgaGFuZGxlQW5zd2VyQ2FsbCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IFdlYlJUQ1NlcnZpY2UuYW5zd2VyQ2FsbCgpO1xuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgc2V0U2hvd0luY29taW5nQ2FsbChmYWxzZSk7XG4gICAgICAgIHNldFNob3dBY3RpdmVDYWxsKHRydWUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBBbGVydC5hbGVydChcIkVycm9yXCIsIFwiRmFpbGVkIHRvIGFuc3dlciBjYWxsXCIpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZWplY3RDYWxsID0gKCkgPT4ge1xuICAgIFdlYlJUQ1NlcnZpY2UucmVqZWN0Q2FsbCgpO1xuICAgIHNldFNob3dJbmNvbWluZ0NhbGwoZmFsc2UpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUVuZENhbGwgPSAoKSA9PiB7XG4gICAgQWxlcnQuYWxlcnQoXCJFbmQgQ2FsbFwiLCBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBlbmQgdGhpcyBjYWxsP1wiLCBbXG4gICAgICB7IHRleHQ6IFwiQ2FuY2VsXCIsIHN0eWxlOiBcImNhbmNlbFwiIH0sXG4gICAgICB7XG4gICAgICAgIHRleHQ6IFwiRW5kIENhbGxcIixcbiAgICAgICAgc3R5bGU6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgICAgb25QcmVzczogKCkgPT4ge1xuICAgICAgICAgIFdlYlJUQ1NlcnZpY2UuZW5kQ2FsbCgpO1xuICAgICAgICAgIHNldFNob3dBY3RpdmVDYWxsKGZhbHNlKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVG9nZ2xlTXV0ZSA9ICgpID0+IHtcbiAgICBXZWJSVENTZXJ2aWNlLnRvZ2dsZU11dGUoKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGVWaWRlbyA9ICgpID0+IHtcbiAgICBXZWJSVENTZXJ2aWNlLnRvZ2dsZVZpZGVvKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3dpdGNoQ2FtZXJhID0gKCkgPT4ge1xuICAgIFdlYlJUQ1NlcnZpY2Uuc3dpdGNoQ2FtZXJhKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVG9nZ2xlU3BlYWtlciA9ICgpID0+IHtcbiAgICBXZWJSVENTZXJ2aWNlLnRvZ2dsZVNwZWFrZXIoKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7Y2hpbGRyZW59XG5cbiAgICAgIHsvKiBJbmNvbWluZyBDYWxsIE1vZGFsICovfVxuICAgICAgPE1vZGFsXG4gICAgICAgIHZpc2libGU9e3Nob3dJbmNvbWluZ0NhbGx9XG4gICAgICAgIGFuaW1hdGlvblR5cGU9XCJzbGlkZVwiXG4gICAgICAgIHByZXNlbnRhdGlvblN0eWxlPVwiZnVsbFNjcmVlblwiXG4gICAgICAgIG9uUmVxdWVzdENsb3NlPXtoYW5kbGVSZWplY3RDYWxsfVxuICAgICAgPlxuICAgICAgICB7Y2FsbFN0YXRlLmNhbGxEYXRhICYmIChcbiAgICAgICAgICA8SW5jb21pbmdDYWxsU2NyZWVuXG4gICAgICAgICAgICBjYWxsRGF0YT17Y2FsbFN0YXRlLmNhbGxEYXRhfVxuICAgICAgICAgICAgb25BbnN3ZXI9e2hhbmRsZUFuc3dlckNhbGx9XG4gICAgICAgICAgICBvblJlamVjdD17aGFuZGxlUmVqZWN0Q2FsbH1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9Nb2RhbD5cblxuICAgICAgey8qIEFjdGl2ZSBDYWxsIE1vZGFsICovfVxuICAgICAgPE1vZGFsXG4gICAgICAgIHZpc2libGU9e3Nob3dBY3RpdmVDYWxsfVxuICAgICAgICBhbmltYXRpb25UeXBlPVwic2xpZGVcIlxuICAgICAgICBwcmVzZW50YXRpb25TdHlsZT1cImZ1bGxTY3JlZW5cIlxuICAgICAgICBvblJlcXVlc3RDbG9zZT17aGFuZGxlRW5kQ2FsbH1cbiAgICAgID5cbiAgICAgICAgPEFjdGl2ZUNhbGxTY3JlZW5cbiAgICAgICAgICBjYWxsU3RhdGU9e2NhbGxTdGF0ZX1cbiAgICAgICAgICBvbkVuZENhbGw9e2hhbmRsZUVuZENhbGx9XG4gICAgICAgICAgb25Ub2dnbGVNdXRlPXtoYW5kbGVUb2dnbGVNdXRlfVxuICAgICAgICAgIG9uVG9nZ2xlVmlkZW89e2hhbmRsZVRvZ2dsZVZpZGVvfVxuICAgICAgICAgIG9uU3dpdGNoQ2FtZXJhPXtoYW5kbGVTd2l0Y2hDYW1lcmF9XG4gICAgICAgICAgb25Ub2dnbGVTcGVha2VyPXtoYW5kbGVUb2dnbGVTcGVha2VyfVxuICAgICAgICAvPlxuICAgICAgPC9Nb2RhbD5cbiAgICA8Lz5cbiAgKTtcbn1cblxuLy8gRXhwb3J0IGhvb2sgZm9yIGVhc3kgYWNjZXNzIHRvIGNhbGwgZnVuY3Rpb25hbGl0eVxuZXhwb3J0IGNvbnN0IHVzZUNhbGxNYW5hZ2VyID0gKCkgPT4ge1xuICBjb25zdCBzdGFydENhbGwgPSBhc3luYyAobWF0Y2hJZDogc3RyaW5nLCBjYWxsVHlwZTogXCJ2b2ljZVwiIHwgXCJ2aWRlb1wiKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBXZWJSVENTZXJ2aWNlLnN0YXJ0Q2FsbChtYXRjaElkLCBjYWxsVHlwZSk7XG4gICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgQWxlcnQuYWxlcnQoXG4gICAgICAgICAgXCJFcnJvclwiLFxuICAgICAgICAgIFwiRmFpbGVkIHRvIHN0YXJ0IGNhbGwuIFBsZWFzZSBjaGVjayB5b3VyIHBlcm1pc3Npb25zIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgQWxlcnQuYWxlcnQoXCJFcnJvclwiLCBcIkZhaWxlZCB0byBzdGFydCBjYWxsXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBlbmRDYWxsID0gKCkgPT4ge1xuICAgIFdlYlJUQ1NlcnZpY2UuZW5kQ2FsbCgpO1xuICB9O1xuXG4gIGNvbnN0IGlzQ2FsbEFjdGl2ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gV2ViUlRDU2VydmljZS5pc0NhbGxBY3RpdmUoKTtcbiAgfTtcblxuICBjb25zdCBnZXRDYWxsU3RhdGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIFdlYlJUQ1NlcnZpY2UuZ2V0Q2FsbFN0YXRlKCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydENhbGwsXG4gICAgZW5kQ2FsbCxcbiAgICBpc0NhbGxBY3RpdmUsXG4gICAgZ2V0Q2FsbFN0YXRlLFxuICB9O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUVBLElBQUFHLFVBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLGlCQUFBLEdBQUFDLHNCQUFBLENBQUFMLE9BQUE7QUFDQSxJQUFBTSxtQkFBQSxHQUFBRCxzQkFBQSxDQUFBTCxPQUFBO0FBRUEsSUFBQU8sY0FBQSxHQUFBRixzQkFBQSxDQUFBTCxPQUFBO0FBQXlELElBQUFRLFdBQUEsR0FBQVIsT0FBQTtBQUFBLFNBQUFELHdCQUFBVSxDQUFB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