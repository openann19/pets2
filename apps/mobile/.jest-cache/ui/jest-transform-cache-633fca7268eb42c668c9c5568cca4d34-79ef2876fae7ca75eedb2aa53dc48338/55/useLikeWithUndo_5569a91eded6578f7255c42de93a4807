c2fd4514545916ecd745dc1a4cd6f091
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useLikeWithUndo = useLikeWithUndo;
var _react = require("react");
function useLikeWithUndo(_ref) {
  var onLike = _ref.onLike,
    onUndo = _ref.onUndo;
  var cleanupRef = (0, _react.useRef)(null);
  var likeNow = function likeNow() {
    var cleanup = onLike();
    if (typeof cleanup === "function") cleanupRef.current = cleanup;
  };
  var triggerUndoPill = function triggerUndoPill() {
    var win = window;
    if (typeof win.__undoPillShow === "function") win.__undoPillShow();
  };
  var undoNow = function undoNow() {
    cleanupRef.current == null ? void 0 : cleanupRef.current();
    cleanupRef.current = null;
    onUndo == null ? void 0 : onUndo();
    var win = window;
    if (typeof win.__undoPillHide === "function") win.__undoPillHide();
  };
  return {
    likeNow: likeNow,
    triggerUndoPill: triggerUndoPill,
    undoNow: undoNow
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwidXNlTGlrZVdpdGhVbmRvIiwiX3JlZiIsIm9uTGlrZSIsIm9uVW5kbyIsImNsZWFudXBSZWYiLCJ1c2VSZWYiLCJsaWtlTm93IiwiY2xlYW51cCIsImN1cnJlbnQiLCJ0cmlnZ2VyVW5kb1BpbGwiLCJ3aW4iLCJ3aW5kb3ciLCJfX3VuZG9QaWxsU2hvdyIsInVuZG9Ob3ciLCJfX3VuZG9QaWxsSGlkZSJdLCJzb3VyY2VzIjpbInVzZUxpa2VXaXRoVW5kby50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxuaW50ZXJmYWNlIFdpbmRvd1dpdGhVbmRvIHtcbiAgX191bmRvUGlsbFNob3c/OiAoKSA9PiB2b2lkO1xuICBfX3VuZG9QaWxsSGlkZT86ICgpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogT3JjaGVzdHJhdGVzIG9wdGltaXN0aWMgbGlrZSArIHVuZG8uXG4gKiAtIENhbGxzIG9uTGlrZSgpIGltbWVkaWF0ZWx5IChtYXkgcmV0dXJuIGEgY2xlYW51cCBmdW5jdGlvbikuXG4gKiAtIEV4cG9zZXMgdHJpZ2dlclVuZG9QaWxsKCkgd2hpY2ggc2hvd3MgdGhlIFVuZG9QaWxsLlxuICogLSBJZiB1c2VyIHRhcHMgVW5kbyB3aXRoaW4gdGhlIHdpbmRvdywgY2FsbHMgY2xlYW51cC9vblVuZG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VMaWtlV2l0aFVuZG8oe1xuICBvbkxpa2UsXG4gIG9uVW5kbyxcbn06IHtcbiAgb25MaWtlOiAoKSA9PiB2b2lkIHwgKCgpID0+IHZvaWQpO1xuICBvblVuZG8/OiAoKSA9PiB2b2lkO1xufSkge1xuICBjb25zdCBjbGVhbnVwUmVmID0gdXNlUmVmPG51bGwgfCAoKCkgPT4gdm9pZCk+KG51bGwpO1xuXG4gIGNvbnN0IGxpa2VOb3cgPSAoKSA9PiB7XG4gICAgY29uc3QgY2xlYW51cCA9IG9uTGlrZSgpO1xuICAgIGlmICh0eXBlb2YgY2xlYW51cCA9PT0gXCJmdW5jdGlvblwiKSBjbGVhbnVwUmVmLmN1cnJlbnQgPSBjbGVhbnVwO1xuICB9O1xuXG4gIGNvbnN0IHRyaWdnZXJVbmRvUGlsbCA9ICgpID0+IHtcbiAgICBjb25zdCB3aW4gPSB3aW5kb3cgYXMgdW5rbm93biBhcyBXaW5kb3dXaXRoVW5kbztcbiAgICBpZiAodHlwZW9mIHdpbi5fX3VuZG9QaWxsU2hvdyA9PT0gXCJmdW5jdGlvblwiKSB3aW4uX191bmRvUGlsbFNob3coKTtcbiAgfTtcblxuICBjb25zdCB1bmRvTm93ID0gKCkgPT4ge1xuICAgIGNsZWFudXBSZWYuY3VycmVudD8uKCk7XG4gICAgY2xlYW51cFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICBvblVuZG8/LigpO1xuICAgIGNvbnN0IHdpbiA9IHdpbmRvdyBhcyB1bmtub3duIGFzIFdpbmRvd1dpdGhVbmRvO1xuICAgIGlmICh0eXBlb2Ygd2luLl9fdW5kb1BpbGxIaWRlID09PSBcImZ1bmN0aW9uXCIpIHdpbi5fX3VuZG9QaWxsSGlkZSgpO1xuICB9O1xuXG4gIHJldHVybiB7IGxpa2VOb3csIHRyaWdnZXJVbmRvUGlsbCwgdW5kb05vdyB9O1xufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQWFPLFNBQVNDLGVBQWVBLENBQUFDLElBQUEsRUFNNUI7RUFBQSxJQUxEQyxNQUFNLEdBQUFELElBQUEsQ0FBTkMsTUFBTTtJQUNOQyxNQUFNLEdBQUFGLElBQUEsQ0FBTkUsTUFBTTtFQUtOLElBQU1DLFVBQVUsR0FBRyxJQUFBQyxhQUFNLEVBQXNCLElBQUksQ0FBQztFQUVwRCxJQUFNQyxPQUFPLEdBQUcsU0FBVkEsT0FBT0EsQ0FBQSxFQUFTO0lBQ3BCLElBQU1DLE9BQU8sR0FBR0wsTUFBTSxDQUFDLENBQUM7SUFDeEIsSUFBSSxPQUFPSyxPQUFPLEtBQUssVUFBVSxFQUFFSCxVQUFVLENBQUNJLE9BQU8sR0FBR0QsT0FBTztFQUNqRSxDQUFDO0VBRUQsSUFBTUUsZUFBZSxHQUFHLFNBQWxCQSxlQUFlQSxDQUFBLEVBQVM7SUFDNUIsSUFBTUMsR0FBRyxHQUFHQyxNQUFtQztJQUMvQyxJQUFJLE9BQU9ELEdBQUcsQ0FBQ0UsY0FBYyxLQUFLLFVBQVUsRUFBRUYsR0FBRyxDQUFDRSxjQUFjLENBQUMsQ0FBQztFQUNwRSxDQUFDO0VBRUQsSUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQU9BLENBQUEsRUFBUztJQUNwQlQsVUFBVSxDQUFDSSxPQUFPLG9CQUFsQkosVUFBVSxDQUFDSSxPQUFPLENBQUcsQ0FBQztJQUN0QkosVUFBVSxDQUFDSSxPQUFPLEdBQUcsSUFBSTtJQUN6QkwsTUFBTSxvQkFBTkEsTUFBTSxDQUFHLENBQUM7SUFDVixJQUFNTyxHQUFHLEdBQUdDLE1BQW1DO0lBQy9DLElBQUksT0FBT0QsR0FBRyxDQUFDSSxjQUFjLEtBQUssVUFBVSxFQUFFSixHQUFHLENBQUNJLGNBQWMsQ0FBQyxDQUFDO0VBQ3BFLENBQUM7RUFFRCxPQUFPO0lBQUVSLE9BQU8sRUFBUEEsT0FBTztJQUFFRyxlQUFlLEVBQWZBLGVBQWU7SUFBRUksT0FBTyxFQUFQQTtFQUFRLENBQUM7QUFDOUMiLCJpZ25vcmVMaXN0IjpbXX0=