{"version":3,"names":["FileSystem","_interopRequireWildcard","require","_api","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","analyzePhotoFromUri","_x","_analyzePhotoFromUri","apply","arguments","_asyncToGenerator2","localUri","contentType","length","undefined","data","request","method","body","uploadAsync","url","httpMethod","headers","uploadType","FileSystemUploadType","BINARY_CONTENT","analysis","s3Key","key"],"sources":["aiPhotoService.ts"],"sourcesContent":["import * as FileSystem from \"expo-file-system\";\nimport { request } from \"./api\";\n\nexport interface PhotoAnalysisResult {\n  labels: Array<{ name: string | undefined; confidence: number | undefined }>;\n  breedCandidates: Array<{ name: string; confidence: number }>;\n  quality: {\n    dims: { width?: number; height?: number };\n    exposure: number;\n    contrast: number;\n    sharpness: number;\n  };\n  overall: number;\n  isPet: boolean;\n  suggestions: string[];\n}\n\nexport async function analyzePhotoFromUri(localUri: string, contentType = \"image/jpeg\"): Promise<PhotoAnalysisResult> {\n  // Upload photo to S3\n  const data = await request<{ key: string; url: string }>(\"/uploads/photos/presign\", { method: 'POST', body: { contentType } });\n  \n  await FileSystem.uploadAsync(data.url, localUri, {\n    httpMethod: \"PUT\",\n    headers: { \"Content-Type\": contentType },\n    uploadType: FileSystem.FileSystemUploadType.BINARY_CONTENT,\n  });\n\n  // Analyze the uploaded photo\n  const analysis = await request<{ data: PhotoAnalysisResult }>(\"/ai/analyze-photo\", { \n    method: 'POST', \n    body: { s3Key: data.key }\n  });\n  \n  return analysis.data;\n}\n\n"],"mappings":";;;;;;;;AAAA,IAAAA,UAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAD,OAAA;AAAgC,SAAAD,wBAAAG,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAL,uBAAA,YAAAA,wBAAAG,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAAA,SAgBVmB,mBAAmBA,CAAAC,EAAA;EAAA,OAAAC,oBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,qBAAA;EAAAA,oBAAA,OAAAG,kBAAA,CAAAf,OAAA,EAAlC,WAAmCgB,QAAgB,EAA4D;IAAA,IAA1DC,WAAW,GAAAH,SAAA,CAAAI,MAAA,QAAAJ,SAAA,QAAAK,SAAA,GAAAL,SAAA,MAAG,YAAY;IAEpF,IAAMM,IAAI,SAAS,IAAAC,YAAO,EAA+B,yBAAyB,EAAE;MAAEC,MAAM,EAAE,MAAM;MAAEC,IAAI,EAAE;QAAEN,WAAW,EAAXA;MAAY;IAAE,CAAC,CAAC;IAE9H,MAAM/B,UAAU,CAACsC,WAAW,CAACJ,IAAI,CAACK,GAAG,EAAET,QAAQ,EAAE;MAC/CU,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE;QAAE,cAAc,EAAEV;MAAY,CAAC;MACxCW,UAAU,EAAE1C,UAAU,CAAC2C,oBAAoB,CAACC;IAC9C,CAAC,CAAC;IAGF,IAAMC,QAAQ,SAAS,IAAAV,YAAO,EAAgC,mBAAmB,EAAE;MACjFC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAE;QAAES,KAAK,EAAEZ,IAAI,CAACa;MAAI;IAC1B,CAAC,CAAC;IAEF,OAAOF,QAAQ,CAACX,IAAI;EACtB,CAAC;EAAA,OAAAR,oBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA","ignoreList":[]}