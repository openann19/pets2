{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","ReanimatedFlatList","_defineProperty2","_objectWithoutProperties2","_react","_interopRequireWildcard","_reactNative","_createAnimatedComponent","_reactUtils","_LayoutAnimationConfig","_View","_jsxRuntime","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","AnimatedFlatList","createAnimatedComponent","FlatList","createCellRendererComponent","itemLayoutAnimationRef","cellRendererComponentStyleRef","CellRendererComponent","props","jsx","AnimatedView","layout","current","onLayout","style","index","item","children","FlatListForwardRefRender","ref","itemLayoutAnimation","skipEnteringExitingAnimations","CellRendererComponentStyle","restProps","scrollEventThrottle","useRef","React","useMemo","animatedFlatList","undefined","LayoutAnimationConfig","skipEntering","skipExiting","componentWithRef"],"sources":["FlatList.tsx"],"sourcesContent":["'use strict';\nimport React, { useRef } from 'react';\nimport type {\n  FlatListProps,\n  LayoutChangeEvent,\n  StyleProp,\n  ViewStyle,\n} from 'react-native';\nimport { FlatList } from 'react-native';\n\nimport type { AnimatedStyle, ILayoutAnimationBuilder } from '../commonTypes';\nimport { createAnimatedComponent } from '../createAnimatedComponent';\nimport type { AnimatedProps } from '../helperTypes';\nimport { componentWithRef } from '../reactUtils';\nimport { LayoutAnimationConfig } from './LayoutAnimationConfig';\nimport { AnimatedView } from './View';\n\nconst AnimatedFlatList = createAnimatedComponent(FlatList);\n\ninterface CellRendererComponentProps<ItemT = any> {\n  index: number;\n  item: ItemT;\n  onLayout?: ((event: LayoutChangeEvent) => void) | undefined;\n  children: React.ReactNode;\n  style?: StyleProp<AnimatedStyle<ViewStyle>>;\n}\n\nconst createCellRendererComponent = (\n  itemLayoutAnimationRef?: React.MutableRefObject<\n    ILayoutAnimationBuilder | undefined\n  >,\n  cellRendererComponentStyleRef?: React.MutableRefObject<\n    ReanimatedFlatListPropsWithLayout<any>['CellRendererComponentStyle']\n  >\n) => {\n  const CellRendererComponent = (props: CellRendererComponentProps) => {\n    return (\n      <AnimatedView\n        // TODO TYPESCRIPT This is temporary cast is to get rid of .d.ts file.\n        layout={itemLayoutAnimationRef?.current as any}\n        onLayout={props.onLayout}\n        style={[\n          props.style,\n          typeof cellRendererComponentStyleRef?.current === 'function'\n            ? cellRendererComponentStyleRef?.current({\n                index: props.index,\n                item: props.item,\n              })\n            : cellRendererComponentStyleRef?.current,\n        ]}>\n        {props.children}\n      </AnimatedView>\n    );\n  };\n\n  return CellRendererComponent;\n};\n\ninterface ReanimatedFlatListPropsWithLayout<T>\n  extends AnimatedProps<FlatListProps<T>> {\n  /**\n   * Lets you pass layout animation directly to the FlatList item. Works only\n   * with a single-column `Animated.FlatList`, `numColumns` property cannot be\n   * greater than 1.\n   */\n  itemLayoutAnimation?: ILayoutAnimationBuilder;\n  /**\n   * Lets you skip entering and exiting animations of FlatList items when on\n   * FlatList mount or unmount.\n   */\n  skipEnteringExitingAnimations?: boolean;\n  /** Property `CellRendererComponent` is not supported in `Animated.FlatList`. */\n  CellRendererComponent?: never;\n  /**\n   * Either animated view styles or a function that receives the item to be\n   * rendered and its index and returns animated view styles.\n   */\n  CellRendererComponentStyle?:\n    | StyleProp<AnimatedStyle<StyleProp<ViewStyle>>>\n    | (({\n        item,\n        index,\n      }: {\n        item: T;\n        index: number;\n      }) => StyleProp<AnimatedStyle<StyleProp<ViewStyle>>>)\n    | undefined;\n}\n\nexport type FlatListPropsWithLayout<T> = ReanimatedFlatListPropsWithLayout<T>;\n\n// Since createAnimatedComponent return type is ComponentClass that has the props of the argument,\n// but not things like NativeMethods, etc. we need to add them manually by extending the type.\ninterface AnimatedFlatListComplement<T> extends FlatList<T> {\n  getNode(): FlatList<T>;\n}\n\n// We need explicit any here, because this is the exact same type that is used in React Native types.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst FlatListForwardRefRender = function <Item = any>(\n  props: ReanimatedFlatListPropsWithLayout<Item>,\n  ref: React.ForwardedRef<FlatList>\n) {\n  const {\n    itemLayoutAnimation,\n    skipEnteringExitingAnimations,\n    CellRendererComponentStyle,\n    ...restProps\n  } = props;\n\n  // Set default scrollEventThrottle, because user expects\n  // to have continuous scroll events and\n  // react-native defaults it to 50 for FlatLists.\n  // We set it to 1, so we have peace until\n  // there are 960 fps screens.\n  if (!('scrollEventThrottle' in restProps)) {\n    restProps.scrollEventThrottle = 1;\n  }\n\n  const itemLayoutAnimationRef = useRef(itemLayoutAnimation);\n  itemLayoutAnimationRef.current = itemLayoutAnimation;\n\n  const cellRendererComponentStyleRef = useRef(CellRendererComponentStyle);\n  cellRendererComponentStyleRef.current = CellRendererComponentStyle;\n\n  const CellRendererComponent = React.useMemo(\n    () =>\n      createCellRendererComponent(\n        itemLayoutAnimationRef,\n        cellRendererComponentStyleRef\n      ),\n    []\n  );\n\n  const animatedFlatList = (\n    // @ts-expect-error In its current type state, createAnimatedComponent cannot create generic components.\n    <AnimatedFlatList\n      ref={ref}\n      {...restProps}\n      CellRendererComponent={CellRendererComponent}\n    />\n  );\n\n  if (skipEnteringExitingAnimations === undefined) {\n    return animatedFlatList;\n  }\n\n  return (\n    <LayoutAnimationConfig skipEntering skipExiting>\n      {animatedFlatList}\n    </LayoutAnimationConfig>\n  );\n};\n\nexport const ReanimatedFlatList = componentWithRef(\n  FlatListForwardRefRender\n) as <\n  // We need explicit any here, because this is the exact same type that is used in React Native types.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ItemT = any,\n>(\n  props: ReanimatedFlatListPropsWithLayout<ItemT> & {\n    ref?: React.ForwardedRef<FlatList>;\n  }\n) => React.ReactElement;\n\nexport type ReanimatedFlatList<T> = typeof AnimatedFlatList &\n  AnimatedFlatListComplement<T>;\n"],"mappings":"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","ignoreList":[]}