812cf094e5afb988d808df659b00eca4
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.authService = exports.AuthError = void 0;
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var SecureStore = _interopRequireWildcard(require("expo-secure-store"));
var LocalAuthentication = _interopRequireWildcard(require("expo-local-authentication"));
var Keychain = _interopRequireWildcard(require("react-native-keychain"));
var _core = require("@pawfectmatch/core");
var _api = require("./api");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var AuthService = function () {
  function AuthService() {
    (0, _classCallCheck2.default)(this, AuthService);
    this.sessionCheckInterval = null;
    this.useKeychain = true;
    this.startSessionMonitoring();
  }
  return (0, _createClass2.default)(AuthService, [{
    key: "startSessionMonitoring",
    value: function startSessionMonitoring() {
      var _this = this;
      if (this.sessionCheckInterval) {
        clearInterval(this.sessionCheckInterval);
      }
      this.sessionCheckInterval = setInterval(function () {
        void _this.checkSessionValidity();
      }, 60000);
    }
  }, {
    key: "checkSessionValidity",
    value: (function () {
      var _checkSessionValidity = (0, _asyncToGenerator2.default)(function* () {
        try {
          var isAuthenticated = yield this.isAuthenticated();
          if (!isAuthenticated) {
            this.stopSessionMonitoring();
            return;
          }
          var sessionStart = yield this.getSessionStartTime();
          var lastActivity = yield this.getLastActivityTime();
          var now = Date.now();
          if (sessionStart && now - sessionStart > AuthService.SESSION_TIMEOUT) {
            _core.logger.info("Session expired due to timeout");
            yield this.logout();
            return;
          }
          if (lastActivity && now - lastActivity > AuthService.ACTIVITY_TIMEOUT) {
            _core.logger.info("Session expired due to inactivity");
            yield this.logout();
            return;
          }
          yield this.updateLastActivityTime();
        } catch (error) {
          _core.logger.error("Session validity check failed", {
            error: error
          });
        }
      });
      function checkSessionValidity() {
        return _checkSessionValidity.apply(this, arguments);
      }
      return checkSessionValidity;
    }())
  }, {
    key: "stopSessionMonitoring",
    value: function stopSessionMonitoring() {
      if (this.sessionCheckInterval) {
        clearInterval(this.sessionCheckInterval);
        this.sessionCheckInterval = null;
      }
    }
  }, {
    key: "getSessionStartTime",
    value: (function () {
      var _getSessionStartTime = (0, _asyncToGenerator2.default)(function* () {
        try {
          var startTime = yield this.secureGetItemAsync(AuthService.SESSION_START_KEY);
          return startTime ? parseInt(startTime) : null;
        } catch (error) {
          _core.logger.error("Failed to get session start time", {
            error: error
          });
          return null;
        }
      });
      function getSessionStartTime() {
        return _getSessionStartTime.apply(this, arguments);
      }
      return getSessionStartTime;
    }())
  }, {
    key: "getLastActivityTime",
    value: (function () {
      var _getLastActivityTime = (0, _asyncToGenerator2.default)(function* () {
        try {
          var lastActivity = yield this.secureGetItemAsync(AuthService.LAST_ACTIVITY_KEY);
          return lastActivity ? parseInt(lastActivity) : null;
        } catch (error) {
          _core.logger.error("Failed to get last activity time", {
            error: error
          });
          return null;
        }
      });
      function getLastActivityTime() {
        return _getLastActivityTime.apply(this, arguments);
      }
      return getLastActivityTime;
    }())
  }, {
    key: "updateLastActivityTime",
    value: (function () {
      var _updateLastActivityTime = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield this.secureSetItemAsync(AuthService.LAST_ACTIVITY_KEY, Date.now().toString());
        } catch (error) {
          _core.logger.error("Failed to update last activity time", {
            error: error
          });
        }
      });
      function updateLastActivityTime() {
        return _updateLastActivityTime.apply(this, arguments);
      }
      return updateLastActivityTime;
    }())
  }, {
    key: "recordUserActivity",
    value: (function () {
      var _recordUserActivity = (0, _asyncToGenerator2.default)(function* () {
        yield this.updateLastActivityTime();
      });
      function recordUserActivity() {
        return _recordUserActivity.apply(this, arguments);
      }
      return recordUserActivity;
    }())
  }, {
    key: "rotateTokens",
    value: (function () {
      var _rotateTokens = (0, _asyncToGenerator2.default)(function* () {
        try {
          var refreshToken = yield this.getRefreshToken();
          if (!refreshToken) {
            return false;
          }
          var response = yield _api.api.request("/auth/refresh-token", {
            method: "POST",
            body: JSON.stringify({
              refreshToken: refreshToken
            })
          });
          yield this.storeAuthData(response);
          yield this.secureSetItemAsync(AuthService.SESSION_START_KEY, Date.now().toString());
          _core.logger.info("Tokens rotated successfully");
          return true;
        } catch (error) {
          _core.logger.error("Token rotation failed", {
            error: error
          });
          yield this.logout();
          return false;
        }
      });
      function rotateTokens() {
        return _rotateTokens.apply(this, arguments);
      }
      return rotateTokens;
    }())
  }, {
    key: "isBiometricAvailable",
    value: (function () {
      var _isBiometricAvailable = (0, _asyncToGenerator2.default)(function* () {
        try {
          var hasHardware = yield LocalAuthentication.hasHardwareAsync();
          var isEnrolled = yield LocalAuthentication.isEnrolledAsync();
          var supportedTypes = yield LocalAuthentication.supportedAuthenticationTypesAsync();
          return {
            available: hasHardware && isEnrolled,
            types: supportedTypes
          };
        } catch (error) {
          _core.logger.error("Failed to check biometric availability", {
            error: error
          });
          return {
            available: false,
            types: []
          };
        }
      });
      function isBiometricAvailable() {
        return _isBiometricAvailable.apply(this, arguments);
      }
      return isBiometricAvailable;
    }())
  }, {
    key: "enableBiometricAuthentication",
    value: (function () {
      var _enableBiometricAuthentication = (0, _asyncToGenerator2.default)(function* () {
        try {
          var _yield$this$isBiometr = yield this.isBiometricAvailable(),
            available = _yield$this$isBiometr.available;
          if (!available) {
            throw new AuthError("Biometric authentication is not available on this device");
          }
          var biometricAuth = yield LocalAuthentication.authenticateAsync({
            promptMessage: "Authenticate to enable biometric login",
            fallbackLabel: "Use PIN",
            cancelLabel: "Cancel",
            disableDeviceFallback: false
          });
          if (!biometricAuth.success) {
            throw new AuthError("Biometric authentication failed");
          }
          yield this.secureSetItemAsync(AuthService.BIOMETRIC_ENABLED_KEY, "true");
          var currentUser = yield this.getCurrentUser();
          if (currentUser) {
            var biometricCredentials = {
              email: currentUser.email,
              biometricToken: Date.now().toString() + Math.random().toString(36)
            };
            yield this.secureSetItemAsync(AuthService.BIOMETRIC_CREDENTIALS_KEY, JSON.stringify(biometricCredentials));
          }
          _core.logger.info("Biometric authentication enabled");
          return true;
        } catch (error) {
          _core.logger.error("Failed to enable biometric authentication", {
            error: error
          });
          throw new AuthError("Failed to enable biometric authentication", error);
        }
      });
      function enableBiometricAuthentication() {
        return _enableBiometricAuthentication.apply(this, arguments);
      }
      return enableBiometricAuthentication;
    }())
  }, {
    key: "disableBiometricAuthentication",
    value: (function () {
      var _disableBiometricAuthentication = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield this.secureDeleteItemAsync(AuthService.BIOMETRIC_ENABLED_KEY);
          yield this.secureDeleteItemAsync(AuthService.BIOMETRIC_CREDENTIALS_KEY);
          _core.logger.info("Biometric authentication disabled");
        } catch (error) {
          _core.logger.error("Failed to disable biometric authentication", {
            error: error
          });
          throw new AuthError("Failed to disable biometric authentication", error);
        }
      });
      function disableBiometricAuthentication() {
        return _disableBiometricAuthentication.apply(this, arguments);
      }
      return disableBiometricAuthentication;
    }())
  }, {
    key: "isBiometricEnabled",
    value: (function () {
      var _isBiometricEnabled = (0, _asyncToGenerator2.default)(function* () {
        try {
          var enabled = yield this.secureGetItemAsync(AuthService.BIOMETRIC_ENABLED_KEY);
          return enabled === "true";
        } catch (error) {
          _core.logger.error("Failed to check biometric status", {
            error: error
          });
          return false;
        }
      });
      function isBiometricEnabled() {
        return _isBiometricEnabled.apply(this, arguments);
      }
      return isBiometricEnabled;
    }())
  }, {
    key: "loginWithBiometrics",
    value: (function () {
      var _loginWithBiometrics = (0, _asyncToGenerator2.default)(function* () {
        try {
          var isEnabled = yield this.isBiometricEnabled();
          if (!isEnabled) {
            throw new AuthError("Biometric authentication is not enabled");
          }
          var _yield$this$isBiometr2 = yield this.isBiometricAvailable(),
            available = _yield$this$isBiometr2.available;
          if (!available) {
            throw new AuthError("Biometric authentication is not available");
          }
          var biometricAuth = yield LocalAuthentication.authenticateAsync({
            promptMessage: "Authenticate to login",
            fallbackLabel: "Use PIN",
            cancelLabel: "Cancel",
            disableDeviceFallback: false
          });
          if (!biometricAuth.success) {
            throw new AuthError("Biometric authentication failed");
          }
          var storedCredentials = yield this.secureGetItemAsync(AuthService.BIOMETRIC_CREDENTIALS_KEY);
          if (!storedCredentials) {
            throw new AuthError("No biometric credentials found");
          }
          var credentials = JSON.parse(storedCredentials);
          var response = yield _api.api.request("/auth/biometric-login", {
            method: "POST",
            body: JSON.stringify({
              email: credentials.email,
              biometricToken: credentials.biometricToken
            })
          });
          yield this.storeAuthData(response);
          _core.logger.info("User logged in with biometrics", {
            userId: response.user.id
          });
          return response;
        } catch (error) {
          _core.logger.error("Biometric login failed", {
            error: error
          });
          throw new AuthError("Biometric login failed. Please use email and password.", error);
        }
      });
      function loginWithBiometrics() {
        return _loginWithBiometrics.apply(this, arguments);
      }
      return loginWithBiometrics;
    }())
  }, {
    key: "login",
    value: (function () {
      var _login = (0, _asyncToGenerator2.default)(function* (credentials) {
        try {
          var response = yield _api.api.request("/auth/login", {
            method: "POST",
            body: JSON.stringify(credentials)
          });
          yield this.storeAuthData(response);
          _core.logger.info("User logged in successfully", {
            userId: response.user.id
          });
          return response;
        } catch (error) {
          _core.logger.error("Login failed", {
            error: error,
            email: credentials.email
          });
          throw new AuthError("Login failed. Please check your credentials and try again.", error);
        }
      });
      function login(_x) {
        return _login.apply(this, arguments);
      }
      return login;
    }())
  }, {
    key: "register",
    value: (function () {
      var _register = (0, _asyncToGenerator2.default)(function* (data) {
        try {
          if (data.password !== data.confirmPassword) {
            throw new AuthError("Passwords do not match");
          }
          var registerData = {
            email: data.email,
            password: data.password,
            name: data.name
          };
          var response = yield _api.api.request("/auth/register", {
            method: "POST",
            body: JSON.stringify(registerData)
          });
          yield this.storeAuthData(response);
          _core.logger.info("User registered successfully", {
            userId: response.user.id
          });
          return response;
        } catch (error) {
          _core.logger.error("Registration failed", {
            error: error,
            email: data.email
          });
          throw new AuthError("Registration failed. Please try again.", error);
        }
      });
      function register(_x2) {
        return _register.apply(this, arguments);
      }
      return register;
    }())
  }, {
    key: "logout",
    value: (function () {
      var _logout = (0, _asyncToGenerator2.default)(function* () {
        try {
          var refreshToken = yield this.getRefreshToken();
          if (refreshToken) {
            try {
              yield _api.api.request("/auth/logout", {
                method: "POST",
                body: JSON.stringify({
                  refreshToken: refreshToken
                })
              });
            } catch (error) {
              _core.logger.warn("Server logout failed, continuing with local logout", {
                error: error
              });
            }
          }
          yield this.clearAuthData();
          _core.logger.info("User logged out successfully");
        } catch (error) {
          _core.logger.error("Logout failed", {
            error: error
          });
          yield this.clearAuthData();
        }
      });
      function logout() {
        return _logout.apply(this, arguments);
      }
      return logout;
    }())
  }, {
    key: "refreshToken",
    value: (function () {
      var _refreshToken = (0, _asyncToGenerator2.default)(function* () {
        try {
          var _refreshToken2 = yield this.getRefreshToken();
          if (!_refreshToken2) {
            return null;
          }
          var response = yield _api.api.request("/auth/refresh", {
            method: "POST",
            body: JSON.stringify({
              refreshToken: _refreshToken2
            })
          });
          yield this.storeAuthData(response);
          return response;
        } catch (error) {
          _core.logger.error("Token refresh failed", {
            error: error
          });
          yield this.clearAuthData();
          return null;
        }
      });
      function refreshToken() {
        return _refreshToken.apply(this, arguments);
      }
      return refreshToken;
    }())
  }, {
    key: "forgotPassword",
    value: (function () {
      var _forgotPassword = (0, _asyncToGenerator2.default)(function* (email) {
        try {
          var response = yield _api.api.request("/auth/forgot-password", {
            method: "POST",
            body: JSON.stringify({
              email: email
            })
          });
          _core.logger.info("Password reset requested", {
            email: email
          });
          return response;
        } catch (error) {
          _core.logger.error("Forgot password failed", {
            error: error,
            email: email
          });
          throw new AuthError("Failed to send password reset email. Please try again.", error);
        }
      });
      function forgotPassword(_x3) {
        return _forgotPassword.apply(this, arguments);
      }
      return forgotPassword;
    }())
  }, {
    key: "resetPassword",
    value: (function () {
      var _resetPassword = (0, _asyncToGenerator2.default)(function* (data) {
        try {
          if (data.password !== data.confirmPassword) {
            throw new AuthError("Passwords do not match");
          }
          var resetData = {
            token: data.token,
            password: data.password
          };
          var response = yield _api.api.request("/auth/reset-password", {
            method: "POST",
            body: JSON.stringify(resetData)
          });
          _core.logger.info("Password reset successful");
          return response;
        } catch (error) {
          _core.logger.error("Password reset failed", {
            error: error
          });
          throw new AuthError("Failed to reset password. Please try again.", error);
        }
      });
      function resetPassword(_x4) {
        return _resetPassword.apply(this, arguments);
      }
      return resetPassword;
    }())
  }, {
    key: "getCurrentUser",
    value: (function () {
      var _getCurrentUser = (0, _asyncToGenerator2.default)(function* () {
        try {
          var userData = yield this.secureGetItemAsync(AuthService.USER_KEY);
          return userData ? JSON.parse(userData) : null;
        } catch (error) {
          _core.logger.error("Failed to get current user", {
            error: error
          });
          return null;
        }
      });
      function getCurrentUser() {
        return _getCurrentUser.apply(this, arguments);
      }
      return getCurrentUser;
    }())
  }, {
    key: "getAccessToken",
    value: (function () {
      var _getAccessToken = (0, _asyncToGenerator2.default)(function* () {
        try {
          return yield this.secureGetItemAsync(AuthService.ACCESS_TOKEN_KEY);
        } catch (error) {
          _core.logger.error("Failed to get access token", {
            error: error
          });
          return null;
        }
      });
      function getAccessToken() {
        return _getAccessToken.apply(this, arguments);
      }
      return getAccessToken;
    }())
  }, {
    key: "isAuthenticated",
    value: (function () {
      var _isAuthenticated = (0, _asyncToGenerator2.default)(function* () {
        try {
          var token = yield this.getAccessToken();
          var user = yield this.getCurrentUser();
          return !!(token && user);
        } catch (error) {
          _core.logger.error("Authentication check failed", {
            error: error
          });
          return false;
        }
      });
      function isAuthenticated() {
        return _isAuthenticated.apply(this, arguments);
      }
      return isAuthenticated;
    }())
  }, {
    key: "updateUser",
    value: (function () {
      var _updateUser = (0, _asyncToGenerator2.default)(function* (userData) {
        try {
          var currentUser = yield this.getCurrentUser();
          if (!currentUser) {
            throw new AuthError("No authenticated user found");
          }
          var updatedUser = _objectSpread(_objectSpread({}, currentUser), userData);
          yield this.secureSetItemAsync(AuthService.USER_KEY, JSON.stringify(updatedUser));
          _core.logger.info("User data updated", {
            userId: updatedUser.id
          });
        } catch (error) {
          _core.logger.error("Failed to update user data", {
            error: error
          });
          throw new AuthError("Failed to update user data", error);
        }
      });
      function updateUser(_x5) {
        return _updateUser.apply(this, arguments);
      }
      return updateUser;
    }())
  }, {
    key: "secureSetItemAsync",
    value: function () {
      var _secureSetItemAsync = (0, _asyncToGenerator2.default)(function* (key, value) {
        try {
          if (key.includes('token') || key.includes('user')) {
            try {
              var result = yield Keychain.setGenericPassword('pawfectmatch', value, {
                service: 'pawfectmatch-auth',
                accessControl: Keychain.ACCESS_CONTROL.BIOMETRY_ANY_OR_DEVICE_PASSCODE,
                accessible: Keychain.ACCESSIBLE.WHEN_UNLOCKED_THIS_DEVICE_ONLY
              });
              if (result === false) {
                throw new Error('Failed to store in Keychain');
              }
              yield SecureStore.setItemAsync(`${key}_ref`, 'keychain', {
                keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
              });
              return;
            } catch (keychainError) {
              _core.logger.warn(`Keychain failed, falling back to SecureStore for ${key}`, {
                error: keychainError
              });
              yield SecureStore.setItemAsync(key, value, {
                keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
              });
              yield SecureStore.setItemAsync(`${key}_ref`, 'securestore', {
                keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
              });
            }
          } else {
            yield SecureStore.setItemAsync(key, value, {
              keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
            });
          }
        } catch (error) {
          _core.logger.error(`Failed to securely store ${key}`, {
            error: error
          });
          throw new AuthError(`Failed to securely store authentication data`, error);
        }
      });
      function secureSetItemAsync(_x6, _x7) {
        return _secureSetItemAsync.apply(this, arguments);
      }
      return secureSetItemAsync;
    }()
  }, {
    key: "secureGetItemAsync",
    value: function () {
      var _secureGetItemAsync = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          var refKey = `${key}_ref`;
          var storageLocation = yield SecureStore.getItemAsync(refKey);
          if (storageLocation === 'keychain') {
            try {
              var credentials = yield Keychain.getGenericPassword({
                service: 'pawfectmatch-auth'
              });
              if (credentials) {
                return credentials.password;
              }
              return null;
            } catch (keychainError) {
              _core.logger.warn(`Keychain retrieval failed, trying SecureStore fallback for ${key}`, {
                error: keychainError
              });
              return yield SecureStore.getItemAsync(key);
            }
          } else if (storageLocation === 'securestore') {
            return yield SecureStore.getItemAsync(key);
          } else {
            return yield SecureStore.getItemAsync(key);
          }
        } catch (error) {
          _core.logger.error(`Failed to securely retrieve ${key}`, {
            error: error
          });
          return null;
        }
      });
      function secureGetItemAsync(_x8) {
        return _secureGetItemAsync.apply(this, arguments);
      }
      return secureGetItemAsync;
    }()
  }, {
    key: "secureDeleteItemAsync",
    value: function () {
      var _secureDeleteItemAsync = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          var refKey = `${key}_ref`;
          var storageLocation = yield SecureStore.getItemAsync(refKey);
          if (storageLocation === 'keychain') {
            try {
              yield Keychain.resetGenericPassword({
                service: 'pawfectmatch-auth'
              });
            } catch (keychainError) {
              _core.logger.warn(`Keychain deletion failed, continuing with cleanup`, {
                error: keychainError
              });
            }
            yield SecureStore.deleteItemAsync(refKey);
          } else if (storageLocation === 'securestore') {
            yield SecureStore.deleteItemAsync(key);
            yield SecureStore.deleteItemAsync(refKey);
          } else {
            try {
              yield SecureStore.deleteItemAsync(key);
            } catch (error) {}
          }
        } catch (error) {
          _core.logger.error(`Failed to securely delete ${key}`, {
            error: error
          });
        }
      });
      function secureDeleteItemAsync(_x9) {
        return _secureDeleteItemAsync.apply(this, arguments);
      }
      return secureDeleteItemAsync;
    }()
  }, {
    key: "storeAuthData",
    value: function () {
      var _storeAuthData = (0, _asyncToGenerator2.default)(function* (response) {
        try {
          yield Promise.all([this.secureSetItemAsync(AuthService.ACCESS_TOKEN_KEY, response.accessToken), this.secureSetItemAsync(AuthService.REFRESH_TOKEN_KEY, response.refreshToken), this.secureSetItemAsync(AuthService.USER_KEY, JSON.stringify(response.user)), this.secureSetItemAsync(AuthService.SESSION_START_KEY, Date.now().toString()), this.secureSetItemAsync(AuthService.LAST_ACTIVITY_KEY, Date.now().toString())]);
          this.startSessionMonitoring();
        } catch (error) {
          _core.logger.error("Failed to store auth data", {
            error: error
          });
          throw new AuthError("Failed to save authentication data", error);
        }
      });
      function storeAuthData(_x0) {
        return _storeAuthData.apply(this, arguments);
      }
      return storeAuthData;
    }()
  }, {
    key: "clearAuthData",
    value: function () {
      var _clearAuthData = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield Promise.all([this.secureDeleteItemAsync(AuthService.ACCESS_TOKEN_KEY), this.secureDeleteItemAsync(AuthService.REFRESH_TOKEN_KEY), this.secureDeleteItemAsync(AuthService.USER_KEY), this.secureDeleteItemAsync(AuthService.SESSION_START_KEY), this.secureDeleteItemAsync(AuthService.LAST_ACTIVITY_KEY)]);
          this.stopSessionMonitoring();
        } catch (error) {
          _core.logger.error("Failed to clear auth data", {
            error: error
          });
        }
      });
      function clearAuthData() {
        return _clearAuthData.apply(this, arguments);
      }
      return clearAuthData;
    }()
  }, {
    key: "getRefreshToken",
    value: function () {
      var _getRefreshToken = (0, _asyncToGenerator2.default)(function* () {
        try {
          return yield this.secureGetItemAsync(AuthService.REFRESH_TOKEN_KEY);
        } catch (error) {
          _core.logger.error("Failed to get refresh token", {
            error: error
          });
          return null;
        }
      });
      function getRefreshToken() {
        return _getRefreshToken.apply(this, arguments);
      }
      return getRefreshToken;
    }()
  }]);
}();
AuthService.ACCESS_TOKEN_KEY = "auth_access_token";
AuthService.REFRESH_TOKEN_KEY = "auth_refresh_token";
AuthService.USER_KEY = "auth_user";
AuthService.BIOMETRIC_ENABLED_KEY = "biometric_enabled";
AuthService.BIOMETRIC_CREDENTIALS_KEY = "biometric_credentials";
AuthService.SESSION_START_KEY = "session_start_time";
AuthService.LAST_ACTIVITY_KEY = "last_activity_time";
AuthService.SERVICE_NAME = "com.pawfectmatch.mobile";
AuthService.SESSION_TIMEOUT = 24 * 60 * 60 * 1000;
AuthService.ACTIVITY_TIMEOUT = 30 * 60 * 1000;
var AuthError = exports.AuthError = function (_Error) {
  function AuthError(message, originalError) {
    var _this2;
    (0, _classCallCheck2.default)(this, AuthError);
    _this2 = _callSuper(this, AuthError, [message]);
    _this2.originalError = originalError;
    _this2.name = "AuthError";
    return _this2;
  }
  (0, _inherits2.default)(AuthError, _Error);
  return (0, _createClass2.default)(AuthError);
}((0, _wrapNativeSuper2.default)(Error));
var authService = exports.authService = new AuthService();
var _default = exports.default = authService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZWN1cmVTdG9yZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIkxvY2FsQXV0aGVudGljYXRpb24iLCJLZXljaGFpbiIsIl9jb3JlIiwiX2FwaSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX2NhbGxTdXBlciIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiYXBwbHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIkF1dGhTZXJ2aWNlIiwiX2NsYXNzQ2FsbENoZWNrMiIsInNlc3Npb25DaGVja0ludGVydmFsIiwidXNlS2V5Y2hhaW4iLCJzdGFydFNlc3Npb25Nb25pdG9yaW5nIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsInZhbHVlIiwiX3RoaXMiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjaGVja1Nlc3Npb25WYWxpZGl0eSIsIl9jaGVja1Nlc3Npb25WYWxpZGl0eSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImlzQXV0aGVudGljYXRlZCIsInN0b3BTZXNzaW9uTW9uaXRvcmluZyIsInNlc3Npb25TdGFydCIsImdldFNlc3Npb25TdGFydFRpbWUiLCJsYXN0QWN0aXZpdHkiLCJnZXRMYXN0QWN0aXZpdHlUaW1lIiwibm93IiwiRGF0ZSIsIlNFU1NJT05fVElNRU9VVCIsImxvZ2dlciIsImluZm8iLCJsb2dvdXQiLCJBQ1RJVklUWV9USU1FT1VUIiwidXBkYXRlTGFzdEFjdGl2aXR5VGltZSIsImVycm9yIiwiX2dldFNlc3Npb25TdGFydFRpbWUiLCJzdGFydFRpbWUiLCJzZWN1cmVHZXRJdGVtQXN5bmMiLCJTRVNTSU9OX1NUQVJUX0tFWSIsInBhcnNlSW50IiwiX2dldExhc3RBY3Rpdml0eVRpbWUiLCJMQVNUX0FDVElWSVRZX0tFWSIsIl91cGRhdGVMYXN0QWN0aXZpdHlUaW1lIiwic2VjdXJlU2V0SXRlbUFzeW5jIiwidG9TdHJpbmciLCJfcmVjb3JkVXNlckFjdGl2aXR5IiwicmVjb3JkVXNlckFjdGl2aXR5IiwiX3JvdGF0ZVRva2VucyIsInJlZnJlc2hUb2tlbiIsImdldFJlZnJlc2hUb2tlbiIsInJlc3BvbnNlIiwiYXBpIiwicmVxdWVzdCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RvcmVBdXRoRGF0YSIsInJvdGF0ZVRva2VucyIsIl9pc0Jpb21ldHJpY0F2YWlsYWJsZSIsImhhc0hhcmR3YXJlIiwiaGFzSGFyZHdhcmVBc3luYyIsImlzRW5yb2xsZWQiLCJpc0Vucm9sbGVkQXN5bmMiLCJzdXBwb3J0ZWRUeXBlcyIsInN1cHBvcnRlZEF1dGhlbnRpY2F0aW9uVHlwZXNBc3luYyIsImF2YWlsYWJsZSIsInR5cGVzIiwiaXNCaW9tZXRyaWNBdmFpbGFibGUiLCJfZW5hYmxlQmlvbWV0cmljQXV0aGVudGljYXRpb24iLCJfeWllbGQkdGhpcyRpc0Jpb21ldHIiLCJBdXRoRXJyb3IiLCJiaW9tZXRyaWNBdXRoIiwiYXV0aGVudGljYXRlQXN5bmMiLCJwcm9tcHRNZXNzYWdlIiwiZmFsbGJhY2tMYWJlbCIsImNhbmNlbExhYmVsIiwiZGlzYWJsZURldmljZUZhbGxiYWNrIiwic3VjY2VzcyIsIkJJT01FVFJJQ19FTkFCTEVEX0tFWSIsImN1cnJlbnRVc2VyIiwiZ2V0Q3VycmVudFVzZXIiLCJiaW9tZXRyaWNDcmVkZW50aWFscyIsImVtYWlsIiwiYmlvbWV0cmljVG9rZW4iLCJNYXRoIiwicmFuZG9tIiwiQklPTUVUUklDX0NSRURFTlRJQUxTX0tFWSIsImVuYWJsZUJpb21ldHJpY0F1dGhlbnRpY2F0aW9uIiwiX2Rpc2FibGVCaW9tZXRyaWNBdXRoZW50aWNhdGlvbiIsInNlY3VyZURlbGV0ZUl0ZW1Bc3luYyIsImRpc2FibGVCaW9tZXRyaWNBdXRoZW50aWNhdGlvbiIsIl9pc0Jpb21ldHJpY0VuYWJsZWQiLCJlbmFibGVkIiwiaXNCaW9tZXRyaWNFbmFibGVkIiwiX2xvZ2luV2l0aEJpb21ldHJpY3MiLCJpc0VuYWJsZWQiLCJfeWllbGQkdGhpcyRpc0Jpb21ldHIyIiwic3RvcmVkQ3JlZGVudGlhbHMiLCJjcmVkZW50aWFscyIsInBhcnNlIiwidXNlcklkIiwidXNlciIsImlkIiwibG9naW5XaXRoQmlvbWV0cmljcyIsIl9sb2dpbiIsImxvZ2luIiwiX3giLCJfcmVnaXN0ZXIiLCJkYXRhIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJyZWdpc3RlckRhdGEiLCJuYW1lIiwicmVnaXN0ZXIiLCJfeDIiLCJfbG9nb3V0Iiwid2FybiIsImNsZWFyQXV0aERhdGEiLCJfcmVmcmVzaFRva2VuIiwiX2ZvcmdvdFBhc3N3b3JkIiwiZm9yZ290UGFzc3dvcmQiLCJfeDMiLCJfcmVzZXRQYXNzd29yZCIsInJlc2V0RGF0YSIsInRva2VuIiwicmVzZXRQYXNzd29yZCIsIl94NCIsIl9nZXRDdXJyZW50VXNlciIsInVzZXJEYXRhIiwiVVNFUl9LRVkiLCJfZ2V0QWNjZXNzVG9rZW4iLCJBQ0NFU1NfVE9LRU5fS0VZIiwiZ2V0QWNjZXNzVG9rZW4iLCJfaXNBdXRoZW50aWNhdGVkIiwiX3VwZGF0ZVVzZXIiLCJ1cGRhdGVkVXNlciIsInVwZGF0ZVVzZXIiLCJfeDUiLCJfc2VjdXJlU2V0SXRlbUFzeW5jIiwiaW5jbHVkZXMiLCJyZXN1bHQiLCJzZXRHZW5lcmljUGFzc3dvcmQiLCJzZXJ2aWNlIiwiYWNjZXNzQ29udHJvbCIsIkFDQ0VTU19DT05UUk9MIiwiQklPTUVUUllfQU5ZX09SX0RFVklDRV9QQVNTQ09ERSIsImFjY2Vzc2libGUiLCJBQ0NFU1NJQkxFIiwiV0hFTl9VTkxPQ0tFRF9USElTX0RFVklDRV9PTkxZIiwiRXJyb3IiLCJzZXRJdGVtQXN5bmMiLCJrZXljaGFpbkFjY2Vzc2libGUiLCJBRlRFUl9GSVJTVF9VTkxPQ0tfVEhJU19ERVZJQ0VfT05MWSIsImtleWNoYWluRXJyb3IiLCJfeDYiLCJfeDciLCJfc2VjdXJlR2V0SXRlbUFzeW5jIiwicmVmS2V5Iiwic3RvcmFnZUxvY2F0aW9uIiwiZ2V0SXRlbUFzeW5jIiwiZ2V0R2VuZXJpY1Bhc3N3b3JkIiwiX3g4IiwiX3NlY3VyZURlbGV0ZUl0ZW1Bc3luYyIsInJlc2V0R2VuZXJpY1Bhc3N3b3JkIiwiZGVsZXRlSXRlbUFzeW5jIiwiX3g5IiwiX3N0b3JlQXV0aERhdGEiLCJQcm9taXNlIiwiYWxsIiwiYWNjZXNzVG9rZW4iLCJSRUZSRVNIX1RPS0VOX0tFWSIsIl94MCIsIl9jbGVhckF1dGhEYXRhIiwiX2dldFJlZnJlc2hUb2tlbiIsIlNFUlZJQ0VfTkFNRSIsImV4cG9ydHMiLCJfRXJyb3IiLCJtZXNzYWdlIiwib3JpZ2luYWxFcnJvciIsIl90aGlzMiIsIl9pbmhlcml0czIiLCJfd3JhcE5hdGl2ZVN1cGVyMiIsImF1dGhTZXJ2aWNlIiwiX2RlZmF1bHQiXSwic291cmNlcyI6WyJBdXRoU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhlbnRpY2F0aW9uIFNlcnZpY2UgZm9yIFBhd2ZlY3RNYXRjaCBNb2JpbGUgQXBwXG4gKiBIYW5kbGVzIHVzZXIgYXV0aGVudGljYXRpb24sIHRva2VuIG1hbmFnZW1lbnQsIGFuZCBzZWN1cmUgc3RvcmFnZVxuICogVXNlcyByZWFjdC1uYXRpdmUta2V5Y2hhaW4gZm9yIHByb2R1Y3Rpb24tZ3JhZGUgc2VjdXJpdHlcbiAqL1xuaW1wb3J0ICogYXMgU2VjdXJlU3RvcmUgZnJvbSBcImV4cG8tc2VjdXJlLXN0b3JlXCI7XG5pbXBvcnQgKiBhcyBMb2NhbEF1dGhlbnRpY2F0aW9uIGZyb20gXCJleHBvLWxvY2FsLWF1dGhlbnRpY2F0aW9uXCI7XG5pbXBvcnQgKiBhcyBLZXljaGFpbiBmcm9tIFwicmVhY3QtbmF0aXZlLWtleWNoYWluXCI7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQHBhd2ZlY3RtYXRjaC9jb3JlXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi9hcGlcIjtcblxuLy8gVHlwZXMgZm9yIGF1dGhlbnRpY2F0aW9uXG5leHBvcnQgaW50ZXJmYWNlIExvZ2luQ3JlZGVudGlhbHMge1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhSZXNwb25zZSB7XG4gIHVzZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHByb2ZpbGVDb21wbGV0ZTogYm9vbGVhbjtcbiAgICBzdWJzY3JpcHRpb25TdGF0dXM6IHN0cmluZztcbiAgICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgfTtcbiAgYWNjZXNzVG9rZW46IHN0cmluZztcbiAgcmVmcmVzaFRva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNJbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZ2lzdGVyRGF0YSB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgY29uZmlybVBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVzZXRQYXNzd29yZERhdGEge1xuICB0b2tlbjogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBjb25maXJtUGFzc3dvcmQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm9maWxlQ29tcGxldGU6IGJvb2xlYW47XG4gIHN1YnNjcmlwdGlvblN0YXR1czogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaW9tZXRyaWNDcmVkZW50aWFscyB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGJpb21ldHJpY1Rva2VuOiBzdHJpbmc7XG59XG5cbmNsYXNzIEF1dGhTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQUNDRVNTX1RPS0VOX0tFWSA9IFwiYXV0aF9hY2Nlc3NfdG9rZW5cIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgUkVGUkVTSF9UT0tFTl9LRVkgPSBcImF1dGhfcmVmcmVzaF90b2tlblwiO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBVU0VSX0tFWSA9IFwiYXV0aF91c2VyXCI7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEJJT01FVFJJQ19FTkFCTEVEX0tFWSA9IFwiYmlvbWV0cmljX2VuYWJsZWRcIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgQklPTUVUUklDX0NSRURFTlRJQUxTX0tFWSA9IFwiYmlvbWV0cmljX2NyZWRlbnRpYWxzXCI7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNFU1NJT05fU1RBUlRfS0VZID0gXCJzZXNzaW9uX3N0YXJ0X3RpbWVcIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgTEFTVF9BQ1RJVklUWV9LRVkgPSBcImxhc3RfYWN0aXZpdHlfdGltZVwiO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTRVJWSUNFX05BTUUgPSBcImNvbS5wYXdmZWN0bWF0Y2gubW9iaWxlXCI7XG5cbiAgLy8gU2Vzc2lvbiBjb25maWd1cmF0aW9uXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNFU1NJT05fVElNRU9VVCA9IDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDI0IGhvdXJzXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEFDVElWSVRZX1RJTUVPVVQgPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlcyBvZiBpbmFjdGl2aXR5XG4gIHByaXZhdGUgc2Vzc2lvbkNoZWNrSW50ZXJ2YWw6IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHVzZUtleWNoYWluOiBib29sZWFuID0gdHJ1ZTsgLy8gVXNlIEtleWNoYWluIGJ5IGRlZmF1bHQgZm9yIHByb2R1Y3Rpb24gc2VjdXJpdHlcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0YXJ0U2Vzc2lvbk1vbml0b3JpbmcoKTtcbiAgfVxuXG4gIC8vID09PT09IFNlc3Npb24gTWFuYWdlbWVudCA9PT09PVxuXG4gIC8qKlxuICAgKiBTdGFydCBzZXNzaW9uIG1vbml0b3JpbmcgZm9yIGF1dG8tbG9nb3V0XG4gICAqL1xuICBwcml2YXRlIHN0YXJ0U2Vzc2lvbk1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIGludGVydmFsXG4gICAgaWYgKHRoaXMuc2Vzc2lvbkNoZWNrSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zZXNzaW9uQ2hlY2tJbnRlcnZhbCk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgc2Vzc2lvbiBldmVyeSBtaW51dGVcbiAgICB0aGlzLnNlc3Npb25DaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdm9pZCB0aGlzLmNoZWNrU2Vzc2lvblZhbGlkaXR5KCk7XG4gICAgfSwgNjAwMDApOyAvLyBDaGVjayBldmVyeSBtaW51dGVcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjdXJyZW50IHNlc3Npb24gaXMgc3RpbGwgdmFsaWRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tTZXNzaW9uVmFsaWRpdHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IGF3YWl0IHRoaXMuaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgICBpZiAoIWlzQXV0aGVudGljYXRlZCkge1xuICAgICAgICB0aGlzLnN0b3BTZXNzaW9uTW9uaXRvcmluZygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNlc3Npb25TdGFydCA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvblN0YXJ0VGltZSgpO1xuICAgICAgY29uc3QgbGFzdEFjdGl2aXR5ID0gYXdhaXQgdGhpcy5nZXRMYXN0QWN0aXZpdHlUaW1lKCk7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICAvLyBDaGVjayBzZXNzaW9uIHRpbWVvdXQgKDI0IGhvdXJzKVxuICAgICAgaWYgKHNlc3Npb25TdGFydCAmJiBub3cgLSBzZXNzaW9uU3RhcnQgPiBBdXRoU2VydmljZS5TRVNTSU9OX1RJTUVPVVQpIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJTZXNzaW9uIGV4cGlyZWQgZHVlIHRvIHRpbWVvdXRcIik7XG4gICAgICAgIGF3YWl0IHRoaXMubG9nb3V0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgYWN0aXZpdHkgdGltZW91dCAoMzAgbWludXRlcylcbiAgICAgIGlmIChsYXN0QWN0aXZpdHkgJiYgbm93IC0gbGFzdEFjdGl2aXR5ID4gQXV0aFNlcnZpY2UuQUNUSVZJVFlfVElNRU9VVCkge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlNlc3Npb24gZXhwaXJlZCBkdWUgdG8gaW5hY3Rpdml0eVwiKTtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgbGFzdCBhY3Rpdml0eSB0aW1lXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxhc3RBY3Rpdml0eVRpbWUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiU2Vzc2lvbiB2YWxpZGl0eSBjaGVjayBmYWlsZWRcIiwgeyBlcnJvciB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBzZXNzaW9uIG1vbml0b3JpbmdcbiAgICovXG4gIHByaXZhdGUgc3RvcFNlc3Npb25Nb25pdG9yaW5nKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlc3Npb25DaGVja0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc2Vzc2lvbkNoZWNrSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zZXNzaW9uQ2hlY2tJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzZXNzaW9uIHN0YXJ0IHRpbWVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0U2Vzc2lvblN0YXJ0VGltZSgpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gYXdhaXQgdGhpcy5zZWN1cmVHZXRJdGVtQXN5bmMoXG4gICAgICAgIEF1dGhTZXJ2aWNlLlNFU1NJT05fU1RBUlRfS0VZLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBzdGFydFRpbWUgPyBwYXJzZUludChzdGFydFRpbWUpIDogbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCBzZXNzaW9uIHN0YXJ0IHRpbWVcIiwgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGFzdCBhY3Rpdml0eSB0aW1lXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldExhc3RBY3Rpdml0eVRpbWUoKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxhc3RBY3Rpdml0eSA9IGF3YWl0IHRoaXMuc2VjdXJlR2V0SXRlbUFzeW5jKFxuICAgICAgICBBdXRoU2VydmljZS5MQVNUX0FDVElWSVRZX0tFWSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gbGFzdEFjdGl2aXR5ID8gcGFyc2VJbnQobGFzdEFjdGl2aXR5KSA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgbGFzdCBhY3Rpdml0eSB0aW1lXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGxhc3QgYWN0aXZpdHkgdGltZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVMYXN0QWN0aXZpdHlUaW1lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgQXV0aFNlcnZpY2UuTEFTVF9BQ1RJVklUWV9LRVksXG4gICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgbGFzdCBhY3Rpdml0eSB0aW1lXCIsIHsgZXJyb3IgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCB1c2VyIGFjdGl2aXR5IHRvIHByZXZlbnQgYXV0by1sb2dvdXRcbiAgICovXG4gIGFzeW5jIHJlY29yZFVzZXJBY3Rpdml0eSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxhc3RBY3Rpdml0eVRpbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZSByZWZyZXNoIHRva2VuIHJvdGF0aW9uXG4gICAqL1xuICBhc3luYyByb3RhdGVUb2tlbnMoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0UmVmcmVzaFRva2VuKCk7XG4gICAgICBpZiAoIXJlZnJlc2hUb2tlbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGwgcmVmcmVzaCBlbmRwb2ludCB0byBnZXQgbmV3IHRva2Vuc1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVxdWVzdDxBdXRoUmVzcG9uc2U+KFwiL2F1dGgvcmVmcmVzaC10b2tlblwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcmVmcmVzaFRva2VuIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0b3JlIG5ldyB0b2tlbnNcbiAgICAgIGF3YWl0IHRoaXMuc3RvcmVBdXRoRGF0YShyZXNwb25zZSk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzZXNzaW9uIHN0YXJ0IHRpbWUgZm9yIG5ldyBzZXNzaW9uXG4gICAgICBhd2FpdCB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgQXV0aFNlcnZpY2UuU0VTU0lPTl9TVEFSVF9LRVksXG4gICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKFwiVG9rZW5zIHJvdGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlRva2VuIHJvdGF0aW9uIGZhaWxlZFwiLCB7IGVycm9yIH0pO1xuICAgICAgLy8gSWYgcm90YXRpb24gZmFpbHMsIGxvZ291dCB1c2VyXG4gICAgICBhd2FpdCB0aGlzLmxvZ291dCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBiaW9tZXRyaWMgYXV0aGVudGljYXRpb24gaXMgYXZhaWxhYmxlIG9uIGRldmljZVxuICAgKi9cbiAgYXN5bmMgaXNCaW9tZXRyaWNBdmFpbGFibGUoKTogUHJvbWlzZTx7XG4gICAgYXZhaWxhYmxlOiBib29sZWFuO1xuICAgIHR5cGVzOiBMb2NhbEF1dGhlbnRpY2F0aW9uLkF1dGhlbnRpY2F0aW9uVHlwZVtdO1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhhc0hhcmR3YXJlID0gYXdhaXQgTG9jYWxBdXRoZW50aWNhdGlvbi5oYXNIYXJkd2FyZUFzeW5jKCk7XG4gICAgICBjb25zdCBpc0Vucm9sbGVkID0gYXdhaXQgTG9jYWxBdXRoZW50aWNhdGlvbi5pc0Vucm9sbGVkQXN5bmMoKTtcbiAgICAgIGNvbnN0IHN1cHBvcnRlZFR5cGVzID1cbiAgICAgICAgYXdhaXQgTG9jYWxBdXRoZW50aWNhdGlvbi5zdXBwb3J0ZWRBdXRoZW50aWNhdGlvblR5cGVzQXN5bmMoKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXZhaWxhYmxlOiBoYXNIYXJkd2FyZSAmJiBpc0Vucm9sbGVkLFxuICAgICAgICB0eXBlczogc3VwcG9ydGVkVHlwZXMsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY2hlY2sgYmlvbWV0cmljIGF2YWlsYWJpbGl0eVwiLCB7IGVycm9yIH0pO1xuICAgICAgcmV0dXJuIHsgYXZhaWxhYmxlOiBmYWxzZSwgdHlwZXM6IFtdIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBiaW9tZXRyaWMgYXV0aGVudGljYXRpb24gZm9yIGN1cnJlbnQgdXNlclxuICAgKi9cbiAgYXN5bmMgZW5hYmxlQmlvbWV0cmljQXV0aGVudGljYXRpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgYXZhaWxhYmxlIH0gPSBhd2FpdCB0aGlzLmlzQmlvbWV0cmljQXZhaWxhYmxlKCk7XG4gICAgICBpZiAoIWF2YWlsYWJsZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFxuICAgICAgICAgIFwiQmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBkZXZpY2VcIixcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXV0aGVudGljYXRlIHVzZXIgd2l0aCBiaW9tZXRyaWNzIHRvIGVuYWJsZSBmZWF0dXJlXG4gICAgICBjb25zdCBiaW9tZXRyaWNBdXRoID0gYXdhaXQgTG9jYWxBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGVBc3luYyh7XG4gICAgICAgIHByb21wdE1lc3NhZ2U6IFwiQXV0aGVudGljYXRlIHRvIGVuYWJsZSBiaW9tZXRyaWMgbG9naW5cIixcbiAgICAgICAgZmFsbGJhY2tMYWJlbDogXCJVc2UgUElOXCIsXG4gICAgICAgIGNhbmNlbExhYmVsOiBcIkNhbmNlbFwiLFxuICAgICAgICBkaXNhYmxlRGV2aWNlRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghYmlvbWV0cmljQXV0aC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJCaW9tZXRyaWMgYXV0aGVudGljYXRpb24gZmFpbGVkXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBTdG9yZSBiaW9tZXRyaWMgcHJlZmVyZW5jZVxuICAgICAgYXdhaXQgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoQXV0aFNlcnZpY2UuQklPTUVUUklDX0VOQUJMRURfS0VZLCBcInRydWVcIik7XG5cbiAgICAgIC8vIEdldCBjdXJyZW50IHVzZXIgY3JlZGVudGlhbHMgZm9yIGJpb21ldHJpYyBzdG9yYWdlXG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcbiAgICAgIGlmIChjdXJyZW50VXNlcikge1xuICAgICAgICBjb25zdCBiaW9tZXRyaWNDcmVkZW50aWFsczogQmlvbWV0cmljQ3JlZGVudGlhbHMgPSB7XG4gICAgICAgICAgZW1haWw6IGN1cnJlbnRVc2VyLmVtYWlsLFxuICAgICAgICAgIGJpb21ldHJpY1Rva2VuOiBEYXRlLm5vdygpLnRvU3RyaW5nKCkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgICBBdXRoU2VydmljZS5CSU9NRVRSSUNfQ1JFREVOVElBTFNfS0VZLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGJpb21ldHJpY0NyZWRlbnRpYWxzKSxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgbG9nZ2VyLmluZm8oXCJCaW9tZXRyaWMgYXV0aGVudGljYXRpb24gZW5hYmxlZFwiKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZW5hYmxlIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvblwiLCB7IGVycm9yIH0pO1xuICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIkZhaWxlZCB0byBlbmFibGUgYmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uXCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZSBiaW9tZXRyaWMgYXV0aGVudGljYXRpb25cbiAgICovXG4gIGFzeW5jIGRpc2FibGVCaW9tZXRyaWNBdXRoZW50aWNhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5zZWN1cmVEZWxldGVJdGVtQXN5bmMoQXV0aFNlcnZpY2UuQklPTUVUUklDX0VOQUJMRURfS0VZKTtcbiAgICAgIGF3YWl0IHRoaXMuc2VjdXJlRGVsZXRlSXRlbUFzeW5jKEF1dGhTZXJ2aWNlLkJJT01FVFJJQ19DUkVERU5USUFMU19LRVkpO1xuICAgICAgbG9nZ2VyLmluZm8oXCJCaW9tZXRyaWMgYXV0aGVudGljYXRpb24gZGlzYWJsZWRcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBkaXNhYmxlIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvblwiLCB7IGVycm9yIH0pO1xuICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIkZhaWxlZCB0byBkaXNhYmxlIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvblwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkXG4gICAqL1xuICBhc3luYyBpc0Jpb21ldHJpY0VuYWJsZWQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVuYWJsZWQgPSBhd2FpdCB0aGlzLnNlY3VyZUdldEl0ZW1Bc3luYyhcbiAgICAgICAgQXV0aFNlcnZpY2UuQklPTUVUUklDX0VOQUJMRURfS0VZLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBlbmFibGVkID09PSBcInRydWVcIjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGNoZWNrIGJpb21ldHJpYyBzdGF0dXNcIiwgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9naW4gd2l0aCBiaW9tZXRyaWNzIChpZiBlbmFibGVkKVxuICAgKi9cbiAgYXN5bmMgbG9naW5XaXRoQmlvbWV0cmljcygpOiBQcm9taXNlPEF1dGhSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpc0VuYWJsZWQgPSBhd2FpdCB0aGlzLmlzQmlvbWV0cmljRW5hYmxlZCgpO1xuICAgICAgaWYgKCFpc0VuYWJsZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIkJpb21ldHJpYyBhdXRoZW50aWNhdGlvbiBpcyBub3QgZW5hYmxlZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBhdmFpbGFibGUgfSA9IGF3YWl0IHRoaXMuaXNCaW9tZXRyaWNBdmFpbGFibGUoKTtcbiAgICAgIGlmICghYXZhaWxhYmxlKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJCaW9tZXRyaWMgYXV0aGVudGljYXRpb24gaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gUGVyZm9ybSBiaW9tZXRyaWMgYXV0aGVudGljYXRpb25cbiAgICAgIGNvbnN0IGJpb21ldHJpY0F1dGggPSBhd2FpdCBMb2NhbEF1dGhlbnRpY2F0aW9uLmF1dGhlbnRpY2F0ZUFzeW5jKHtcbiAgICAgICAgcHJvbXB0TWVzc2FnZTogXCJBdXRoZW50aWNhdGUgdG8gbG9naW5cIixcbiAgICAgICAgZmFsbGJhY2tMYWJlbDogXCJVc2UgUElOXCIsXG4gICAgICAgIGNhbmNlbExhYmVsOiBcIkNhbmNlbFwiLFxuICAgICAgICBkaXNhYmxlRGV2aWNlRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghYmlvbWV0cmljQXV0aC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJCaW9tZXRyaWMgYXV0aGVudGljYXRpb24gZmFpbGVkXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgc3RvcmVkIGJpb21ldHJpYyBjcmVkZW50aWFsc1xuICAgICAgY29uc3Qgc3RvcmVkQ3JlZGVudGlhbHMgPSBhd2FpdCB0aGlzLnNlY3VyZUdldEl0ZW1Bc3luYyhcbiAgICAgICAgQXV0aFNlcnZpY2UuQklPTUVUUklDX0NSRURFTlRJQUxTX0tFWSxcbiAgICAgICk7XG4gICAgICBpZiAoIXN0b3JlZENyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJObyBiaW9tZXRyaWMgY3JlZGVudGlhbHMgZm91bmRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gSlNPTi5wYXJzZShzdG9yZWRDcmVkZW50aWFscykgYXMgQmlvbWV0cmljQ3JlZGVudGlhbHM7XG5cbiAgICAgIC8vIFBlcmZvcm0gbG9naW4gd2l0aCBzdG9yZWQgZW1haWwgYW5kIGEgc3BlY2lhbCBiaW9tZXRyaWMgZmxhZ1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVxdWVzdDxBdXRoUmVzcG9uc2U+KFxuICAgICAgICBcIi9hdXRoL2Jpb21ldHJpYy1sb2dpblwiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsXG4gICAgICAgICAgICBiaW9tZXRyaWNUb2tlbjogY3JlZGVudGlhbHMuYmlvbWV0cmljVG9rZW4sXG4gICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICAvLyBTdG9yZSBhdXRoZW50aWNhdGlvbiBkYXRhIHNlY3VyZWx5XG4gICAgICBhd2FpdCB0aGlzLnN0b3JlQXV0aERhdGEocmVzcG9uc2UpO1xuXG4gICAgICBsb2dnZXIuaW5mbyhcIlVzZXIgbG9nZ2VkIGluIHdpdGggYmlvbWV0cmljc1wiLCB7XG4gICAgICAgIHVzZXJJZDogcmVzcG9uc2UudXNlci5pZCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJCaW9tZXRyaWMgbG9naW4gZmFpbGVkXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFxuICAgICAgICBcIkJpb21ldHJpYyBsb2dpbiBmYWlsZWQuIFBsZWFzZSB1c2UgZW1haWwgYW5kIHBhc3N3b3JkLlwiLFxuICAgICAgICBlcnJvcixcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ2luIHVzZXIgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmRcbiAgICovXG4gIGFzeW5jIGxvZ2luKGNyZWRlbnRpYWxzOiBMb2dpbkNyZWRlbnRpYWxzKTogUHJvbWlzZTxBdXRoUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVxdWVzdDxBdXRoUmVzcG9uc2U+KFwiL2F1dGgvbG9naW5cIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjcmVkZW50aWFscyksXG4gICAgICB9KTtcblxuICAgICAgLy8gU3RvcmUgYXV0aGVudGljYXRpb24gZGF0YSBzZWN1cmVseVxuICAgICAgYXdhaXQgdGhpcy5zdG9yZUF1dGhEYXRhKHJlc3BvbnNlKTtcblxuICAgICAgbG9nZ2VyLmluZm8oXCJVc2VyIGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHlcIiwgeyB1c2VySWQ6IHJlc3BvbnNlLnVzZXIuaWQgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkxvZ2luIGZhaWxlZFwiLCB7IGVycm9yLCBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFxuICAgICAgICBcIkxvZ2luIGZhaWxlZC4gUGxlYXNlIGNoZWNrIHlvdXIgY3JlZGVudGlhbHMgYW5kIHRyeSBhZ2Fpbi5cIixcbiAgICAgICAgZXJyb3IsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBuZXcgdXNlciBhY2NvdW50XG4gICAqL1xuICBhc3luYyByZWdpc3RlcihkYXRhOiBSZWdpc3RlckRhdGEpOiBQcm9taXNlPEF1dGhSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBwYXNzd29yZCBjb25maXJtYXRpb25cbiAgICAgIGlmIChkYXRhLnBhc3N3b3JkICE9PSBkYXRhLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVnaXN0ZXJEYXRhID0ge1xuICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGFzc3dvcmQsXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgIH07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5yZXF1ZXN0PEF1dGhSZXNwb25zZT4oXCIvYXV0aC9yZWdpc3RlclwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlZ2lzdGVyRGF0YSksXG4gICAgICB9KTtcblxuICAgICAgLy8gU3RvcmUgYXV0aGVudGljYXRpb24gZGF0YSBzZWN1cmVseVxuICAgICAgYXdhaXQgdGhpcy5zdG9yZUF1dGhEYXRhKHJlc3BvbnNlKTtcblxuICAgICAgbG9nZ2VyLmluZm8oXCJVc2VyIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XCIsIHsgdXNlcklkOiByZXNwb25zZS51c2VyLmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJSZWdpc3RyYXRpb24gZmFpbGVkXCIsIHsgZXJyb3IsIGVtYWlsOiBkYXRhLmVtYWlsIH0pO1xuICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIlJlZ2lzdHJhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9nb3V0IHVzZXIgYW5kIGNsZWFyIHN0b3JlZCBkYXRhXG4gICAqL1xuICBhc3luYyBsb2dvdXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZnJlc2hUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0UmVmcmVzaFRva2VuKCk7XG4gICAgICBpZiAocmVmcmVzaFRva2VuKSB7XG4gICAgICAgIC8vIE5vdGlmeSBzZXJ2ZXIgYWJvdXQgbG9nb3V0IChvcHRpb25hbClcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBhcGkucmVxdWVzdChcIi9hdXRoL2xvZ291dFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByZWZyZXNoVG9rZW4gfSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWdub3JlIHNlcnZlciBsb2dvdXQgZXJyb3JzXG4gICAgICAgICAgbG9nZ2VyLndhcm4oXCJTZXJ2ZXIgbG9nb3V0IGZhaWxlZCwgY29udGludWluZyB3aXRoIGxvY2FsIGxvZ291dFwiLCB7XG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBhbGwgc3RvcmVkIGF1dGggZGF0YVxuICAgICAgYXdhaXQgdGhpcy5jbGVhckF1dGhEYXRhKCk7XG4gICAgICBsb2dnZXIuaW5mbyhcIlVzZXIgbG9nZ2VkIG91dCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkxvZ291dCBmYWlsZWRcIiwgeyBlcnJvciB9KTtcbiAgICAgIC8vIEV2ZW4gaWYgbG9nb3V0IGZhaWxzLCBjbGVhciBsb2NhbCBkYXRhXG4gICAgICBhd2FpdCB0aGlzLmNsZWFyQXV0aERhdGEoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaCBhY2Nlc3MgdG9rZW4gdXNpbmcgcmVmcmVzaCB0b2tlblxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaFRva2VuKCk6IFByb21pc2U8QXV0aFJlc3BvbnNlIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCB0aGlzLmdldFJlZnJlc2hUb2tlbigpO1xuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnJlcXVlc3Q8QXV0aFJlc3BvbnNlPihcIi9hdXRoL3JlZnJlc2hcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHJlZnJlc2hUb2tlbiB9KSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdG9yZSBuZXcgdG9rZW5zXG4gICAgICBhd2FpdCB0aGlzLnN0b3JlQXV0aERhdGEocmVzcG9uc2UpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJUb2tlbiByZWZyZXNoIGZhaWxlZFwiLCB7IGVycm9yIH0pO1xuICAgICAgLy8gQ2xlYXIgaW52YWxpZCB0b2tlbnNcbiAgICAgIGF3YWl0IHRoaXMuY2xlYXJBdXRoRGF0YSgpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgcGFzc3dvcmQgcmVzZXRcbiAgICovXG4gIGFzeW5jIGZvcmdvdFBhc3N3b3JkKFxuICAgIGVtYWlsOiBzdHJpbmcsXG4gICk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5yZXF1ZXN0PHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+KFxuICAgICAgICBcIi9hdXRoL2ZvcmdvdC1wYXNzd29yZFwiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVtYWlsIH0pLFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgbG9nZ2VyLmluZm8oXCJQYXNzd29yZCByZXNldCByZXF1ZXN0ZWRcIiwgeyBlbWFpbCB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRm9yZ290IHBhc3N3b3JkIGZhaWxlZFwiLCB7IGVycm9yLCBlbWFpbCB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXG4gICAgICAgIFwiRmFpbGVkIHRvIHNlbmQgcGFzc3dvcmQgcmVzZXQgZW1haWwuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICAgIGVycm9yLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgcGFzc3dvcmQgd2l0aCB0b2tlblxuICAgKi9cbiAgYXN5bmMgcmVzZXRQYXNzd29yZChcbiAgICBkYXRhOiBSZXNldFBhc3N3b3JkRGF0YSxcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChkYXRhLnBhc3N3b3JkICE9PSBkYXRhLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzZXREYXRhID0ge1xuICAgICAgICB0b2tlbjogZGF0YS50b2tlbixcbiAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGFzc3dvcmQsXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVxdWVzdDx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PihcbiAgICAgICAgXCIvYXV0aC9yZXNldC1wYXNzd29yZFwiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXNldERhdGEpLFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgbG9nZ2VyLmluZm8oXCJQYXNzd29yZCByZXNldCBzdWNjZXNzZnVsXCIpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJQYXNzd29yZCByZXNldCBmYWlsZWRcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJGYWlsZWQgdG8gcmVzZXQgcGFzc3dvcmQuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgYXV0aGVudGljYXRlZCB1c2VyXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50VXNlcigpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgdGhpcy5zZWN1cmVHZXRJdGVtQXN5bmMoQXV0aFNlcnZpY2UuVVNFUl9LRVkpO1xuICAgICAgcmV0dXJuIHVzZXJEYXRhID8gKEpTT04ucGFyc2UodXNlckRhdGEpIGFzIFVzZXIpIDogbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCBjdXJyZW50IHVzZXJcIiwgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc3RvcmVkIGFjY2VzcyB0b2tlblxuICAgKi9cbiAgYXN5bmMgZ2V0QWNjZXNzVG9rZW4oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlY3VyZUdldEl0ZW1Bc3luYyhBdXRoU2VydmljZS5BQ0NFU1NfVE9LRU5fS0VZKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCBhY2Nlc3MgdG9rZW5cIiwgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICovXG4gIGFzeW5jIGlzQXV0aGVudGljYXRlZCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50VXNlcigpO1xuICAgICAgcmV0dXJuICEhKHRva2VuICYmIHVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJBdXRoZW50aWNhdGlvbiBjaGVjayBmYWlsZWRcIiwgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHVzZXIgcHJvZmlsZSBkYXRhXG4gICAqL1xuICBhc3luYyB1cGRhdGVVc2VyKHVzZXJEYXRhOiBQYXJ0aWFsPFVzZXI+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50VXNlcigpO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiTm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IHsgLi4uY3VycmVudFVzZXIsIC4uLnVzZXJEYXRhIH07XG4gICAgICBhd2FpdCB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgQXV0aFNlcnZpY2UuVVNFUl9LRVksXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRVc2VyKSxcbiAgICAgICk7XG4gICAgICBsb2dnZXIuaW5mbyhcIlVzZXIgZGF0YSB1cGRhdGVkXCIsIHsgdXNlcklkOiB1cGRhdGVkVXNlci5pZCB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIGRhdGFcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHVzZXIgZGF0YVwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8gU2VjdXJlIHN0b3JhZ2UgbWV0aG9kcyAtIEtleWNoYWluIGZvciBzZW5zaXRpdmUgZGF0YSwgU2VjdXJlU3RvcmUgZm9yIHNlc3Npb24gZGF0YVxuICAvLyBGYWxsYmFjayB0byBTZWN1cmVTdG9yZSBpZiBLZXljaGFpbiBmYWlscyBmb3Igcm9idXN0bmVzc1xuICBwcml2YXRlIGFzeW5jIHNlY3VyZVNldEl0ZW1Bc3luYyhrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBVc2UgS2V5Y2hhaW4gZm9yIHNlbnNpdGl2ZSBhdXRoZW50aWNhdGlvbiBkYXRhXG4gICAgICBpZiAoa2V5LmluY2x1ZGVzKCd0b2tlbicpIHx8IGtleS5pbmNsdWRlcygndXNlcicpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgS2V5Y2hhaW4uc2V0R2VuZXJpY1Bhc3N3b3JkKCdwYXdmZWN0bWF0Y2gnLCB2YWx1ZSwge1xuICAgICAgICAgICAgc2VydmljZTogJ3Bhd2ZlY3RtYXRjaC1hdXRoJyxcbiAgICAgICAgICAgIGFjY2Vzc0NvbnRyb2w6IEtleWNoYWluLkFDQ0VTU19DT05UUk9MLkJJT01FVFJZX0FOWV9PUl9ERVZJQ0VfUEFTU0NPREUsXG4gICAgICAgICAgICBhY2Nlc3NpYmxlOiBLZXljaGFpbi5BQ0NFU1NJQkxFLldIRU5fVU5MT0NLRURfVEhJU19ERVZJQ0VfT05MWSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc3RvcmUgaW4gS2V5Y2hhaW4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gU3RvcmUgYSByZWZlcmVuY2Uga2V5IGluIFNlY3VyZVN0b3JlIGZvciByZXRyaWV2YWxcbiAgICAgICAgICBhd2FpdCBTZWN1cmVTdG9yZS5zZXRJdGVtQXN5bmMoYCR7a2V5fV9yZWZgLCAna2V5Y2hhaW4nLCB7XG4gICAgICAgICAgICBrZXljaGFpbkFjY2Vzc2libGU6IFNlY3VyZVN0b3JlLkFGVEVSX0ZJUlNUX1VOTE9DS19USElTX0RFVklDRV9PTkxZLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIFN1Y2Nlc3NmdWxseSBzdG9yZWQgaW4gS2V5Y2hhaW5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gY2F0Y2ggKGtleWNoYWluRXJyb3IpIHtcbiAgICAgICAgICAvLyBGYWxsYmFjayB0byBTZWN1cmVTdG9yZSBpZiBLZXljaGFpbiBmYWlsc1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBLZXljaGFpbiBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBTZWN1cmVTdG9yZSBmb3IgJHtrZXl9YCwgeyBlcnJvcjoga2V5Y2hhaW5FcnJvciB9KTtcbiAgICAgICAgICBhd2FpdCBTZWN1cmVTdG9yZS5zZXRJdGVtQXN5bmMoa2V5LCB2YWx1ZSwge1xuICAgICAgICAgICAga2V5Y2hhaW5BY2Nlc3NpYmxlOiBTZWN1cmVTdG9yZS5BRlRFUl9GSVJTVF9VTkxPQ0tfVEhJU19ERVZJQ0VfT05MWSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBpbmRpY2F0aW5nIGZhbGxiYWNrIHRvIFNlY3VyZVN0b3JlXG4gICAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuc2V0SXRlbUFzeW5jKGAke2tleX1fcmVmYCwgJ3NlY3VyZXN0b3JlJywge1xuICAgICAgICAgICAga2V5Y2hhaW5BY2Nlc3NpYmxlOiBTZWN1cmVTdG9yZS5BRlRFUl9GSVJTVF9VTkxPQ0tfVEhJU19ERVZJQ0VfT05MWSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIFNlY3VyZVN0b3JlIGZvciBsZXNzIHNlbnNpdGl2ZSBzZXNzaW9uIGRhdGFcbiAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuc2V0SXRlbUFzeW5jKGtleSwgdmFsdWUsIHtcbiAgICAgICAgICBrZXljaGFpbkFjY2Vzc2libGU6IFNlY3VyZVN0b3JlLkFGVEVSX0ZJUlNUX1VOTE9DS19USElTX0RFVklDRV9PTkxZLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gc2VjdXJlbHkgc3RvcmUgJHtrZXl9YCwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoYEZhaWxlZCB0byBzZWN1cmVseSBzdG9yZSBhdXRoZW50aWNhdGlvbiBkYXRhYCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VjdXJlR2V0SXRlbUFzeW5jKGtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIGRhdGEgaXMgc3RvcmVkIGluIEtleWNoYWluIG9yIFNlY3VyZVN0b3JlIChmYWxsYmFjaylcbiAgICAgIGNvbnN0IHJlZktleSA9IGAke2tleX1fcmVmYDtcbiAgICAgIGNvbnN0IHN0b3JhZ2VMb2NhdGlvbiA9IGF3YWl0IFNlY3VyZVN0b3JlLmdldEl0ZW1Bc3luYyhyZWZLZXkpO1xuXG4gICAgICBpZiAoc3RvcmFnZUxvY2F0aW9uID09PSAna2V5Y2hhaW4nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBhd2FpdCBLZXljaGFpbi5nZXRHZW5lcmljUGFzc3dvcmQoe1xuICAgICAgICAgICAgc2VydmljZTogJ3Bhd2ZlY3RtYXRjaC1hdXRoJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgcGFzc3dvcmQgKHdoaWNoIGNvbnRhaW5zIG91ciBzdG9yZWQgdmFsdWUpXG4gICAgICAgICAgICByZXR1cm4gY3JlZGVudGlhbHMucGFzc3dvcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGNhdGNoIChrZXljaGFpbkVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgS2V5Y2hhaW4gcmV0cmlldmFsIGZhaWxzLCB0cnkgU2VjdXJlU3RvcmUgZmFsbGJhY2tcbiAgICAgICAgICBsb2dnZXIud2FybihgS2V5Y2hhaW4gcmV0cmlldmFsIGZhaWxlZCwgdHJ5aW5nIFNlY3VyZVN0b3JlIGZhbGxiYWNrIGZvciAke2tleX1gLCB7IGVycm9yOiBrZXljaGFpbkVycm9yIH0pO1xuICAgICAgICAgIHJldHVybiBhd2FpdCBTZWN1cmVTdG9yZS5nZXRJdGVtQXN5bmMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdG9yYWdlTG9jYXRpb24gPT09ICdzZWN1cmVzdG9yZScpIHtcbiAgICAgICAgLy8gRGF0YSB3YXMgc3RvcmVkIGluIFNlY3VyZVN0b3JlIGR1ZSB0byBLZXljaGFpbiBmYWlsdXJlXG4gICAgICAgIHJldHVybiBhd2FpdCBTZWN1cmVTdG9yZS5nZXRJdGVtQXN5bmMoa2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIHJlZmVyZW5jZSBmb3VuZCwgdHJ5IFNlY3VyZVN0b3JlIGRpcmVjdGx5IChmb3Igbm9uLXNlbnNpdGl2ZSBrZXlzKVxuICAgICAgICByZXR1cm4gYXdhaXQgU2VjdXJlU3RvcmUuZ2V0SXRlbUFzeW5jKGtleSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHNlY3VyZWx5IHJldHJpZXZlICR7a2V5fWAsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlY3VyZURlbGV0ZUl0ZW1Bc3luYyhrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBkYXRhIGlzIHN0b3JlZCBpbiBLZXljaGFpbiBvciBTZWN1cmVTdG9yZSAoZmFsbGJhY2spXG4gICAgICBjb25zdCByZWZLZXkgPSBgJHtrZXl9X3JlZmA7XG4gICAgICBjb25zdCBzdG9yYWdlTG9jYXRpb24gPSBhd2FpdCBTZWN1cmVTdG9yZS5nZXRJdGVtQXN5bmMocmVmS2V5KTtcblxuICAgICAgaWYgKHN0b3JhZ2VMb2NhdGlvbiA9PT0gJ2tleWNoYWluJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFJlc2V0IEtleWNoYWluIGNyZWRlbnRpYWxzXG4gICAgICAgICAgYXdhaXQgS2V5Y2hhaW4ucmVzZXRHZW5lcmljUGFzc3dvcmQoe1xuICAgICAgICAgICAgc2VydmljZTogJ3Bhd2ZlY3RtYXRjaC1hdXRoJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoa2V5Y2hhaW5FcnJvcikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKGBLZXljaGFpbiBkZWxldGlvbiBmYWlsZWQsIGNvbnRpbnVpbmcgd2l0aCBjbGVhbnVwYCwgeyBlcnJvcjoga2V5Y2hhaW5FcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZW1vdmUgdGhlIHJlZmVyZW5jZVxuICAgICAgICBhd2FpdCBTZWN1cmVTdG9yZS5kZWxldGVJdGVtQXN5bmMocmVmS2V5KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZUxvY2F0aW9uID09PSAnc2VjdXJlc3RvcmUnKSB7XG4gICAgICAgIC8vIERhdGEgd2FzIHN0b3JlZCBpbiBTZWN1cmVTdG9yZVxuICAgICAgICBhd2FpdCBTZWN1cmVTdG9yZS5kZWxldGVJdGVtQXN5bmMoa2V5KTtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VcbiAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuZGVsZXRlSXRlbUFzeW5jKHJlZktleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUcnkgdG8gZGVsZXRlIGZyb20gU2VjdXJlU3RvcmUgKGZvciBub24tc2Vuc2l0aXZlIGtleXMgb3IgY2xlYW51cClcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBTZWN1cmVTdG9yZS5kZWxldGVJdGVtQXN5bmMoa2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBTaWxlbnRseSBpZ25vcmUgZGVsZXRpb24gZXJyb3JzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gc2VjdXJlbHkgZGVsZXRlICR7a2V5fWAsIHsgZXJyb3IgfSk7XG4gICAgICAvLyBEb24ndCB0aHJvdyBoZXJlIGFzIHRoaXMgaXMgY2xlYW51cFxuICAgIH1cbiAgfVxuXG4gIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICBwcml2YXRlIGFzeW5jIHN0b3JlQXV0aERhdGEocmVzcG9uc2U6IEF1dGhSZXNwb25zZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuc2VjdXJlU2V0SXRlbUFzeW5jKFxuICAgICAgICAgIEF1dGhTZXJ2aWNlLkFDQ0VTU19UT0tFTl9LRVksXG4gICAgICAgICAgcmVzcG9uc2UuYWNjZXNzVG9rZW4sXG4gICAgICAgICksXG4gICAgICAgIHRoaXMuc2VjdXJlU2V0SXRlbUFzeW5jKFxuICAgICAgICAgIEF1dGhTZXJ2aWNlLlJFRlJFU0hfVE9LRU5fS0VZLFxuICAgICAgICAgIHJlc3BvbnNlLnJlZnJlc2hUb2tlbixcbiAgICAgICAgKSxcbiAgICAgICAgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoXG4gICAgICAgICAgQXV0aFNlcnZpY2UuVVNFUl9LRVksXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UudXNlciksXG4gICAgICAgICksXG4gICAgICAgIHRoaXMuc2VjdXJlU2V0SXRlbUFzeW5jKFxuICAgICAgICAgIEF1dGhTZXJ2aWNlLlNFU1NJT05fU1RBUlRfS0VZLFxuICAgICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgKSxcbiAgICAgICAgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoXG4gICAgICAgICAgQXV0aFNlcnZpY2UuTEFTVF9BQ1RJVklUWV9LRVksXG4gICAgICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICApLFxuICAgICAgXSk7XG5cbiAgICAgIC8vIFN0YXJ0IHNlc3Npb24gbW9uaXRvcmluZ1xuICAgICAgdGhpcy5zdGFydFNlc3Npb25Nb25pdG9yaW5nKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBzdG9yZSBhdXRoIGRhdGFcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJGYWlsZWQgdG8gc2F2ZSBhdXRoZW50aWNhdGlvbiBkYXRhXCIsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNsZWFyQXV0aERhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgdGhpcy5zZWN1cmVEZWxldGVJdGVtQXN5bmMoQXV0aFNlcnZpY2UuQUNDRVNTX1RPS0VOX0tFWSksXG4gICAgICAgIHRoaXMuc2VjdXJlRGVsZXRlSXRlbUFzeW5jKEF1dGhTZXJ2aWNlLlJFRlJFU0hfVE9LRU5fS0VZKSxcbiAgICAgICAgdGhpcy5zZWN1cmVEZWxldGVJdGVtQXN5bmMoQXV0aFNlcnZpY2UuVVNFUl9LRVkpLFxuICAgICAgICB0aGlzLnNlY3VyZURlbGV0ZUl0ZW1Bc3luYyhBdXRoU2VydmljZS5TRVNTSU9OX1NUQVJUX0tFWSksXG4gICAgICAgIHRoaXMuc2VjdXJlRGVsZXRlSXRlbUFzeW5jKEF1dGhTZXJ2aWNlLkxBU1RfQUNUSVZJVFlfS0VZKSxcbiAgICAgIF0pO1xuXG4gICAgICAvLyBTdG9wIHNlc3Npb24gbW9uaXRvcmluZ1xuICAgICAgdGhpcy5zdG9wU2Vzc2lvbk1vbml0b3JpbmcoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGNsZWFyIGF1dGggZGF0YVwiLCB7IGVycm9yIH0pO1xuICAgICAgLy8gRG9uJ3QgdGhyb3cgaGVyZSBhcyB0aGlzIGlzIGNsZWFudXBcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFJlZnJlc2hUb2tlbigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VjdXJlR2V0SXRlbUFzeW5jKEF1dGhTZXJ2aWNlLlJFRlJFU0hfVE9LRU5fS0VZKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCByZWZyZXNoIHRva2VuXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuLy8gQ3VzdG9tIGVycm9yIGNsYXNzIGZvciBhdXRoZW50aWNhdGlvbiBlcnJvcnNcbmV4cG9ydCBjbGFzcyBBdXRoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwdWJsaWMgb3JpZ2luYWxFcnJvcj86IHVua25vd24sXG4gICkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiQXV0aEVycm9yXCI7XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGF1dGhTZXJ2aWNlID0gbmV3IEF1dGhTZXJ2aWNlKCk7XG5leHBvcnQgZGVmYXVsdCBhdXRoU2VydmljZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBS0EsSUFBQUEsV0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsbUJBQUEsR0FBQUYsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLFFBQUEsR0FBQUgsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLElBQUEsR0FBQUosT0FBQTtBQUE0QixTQUFBRCx3QkFBQU0sQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQVIsdUJBQUEsWUFBQUEsd0JBQUFNLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdBQUFNLENBQUEsQ0FBQU8sR0FBQSxDQUFBYixDQUFBLEVBQUFRLENBQUEsY0FBQU0sRUFBQSxJQUFBZCxDQUFBLGdCQUFBYyxFQUFBLE9BQUFDLGNBQUEsQ0FBQUMsSUFBQSxDQUFBaEIsQ0FBQSxFQUFBYyxFQUFBLE9BQUFQLENBQUEsSUFBQUQsQ0FBQSxHQUFBVyxNQUFBLENBQUFDLGNBQUEsS0FBQUQsTUFBQSxDQUFBRSx3QkFBQSxDQUFBbkIsQ0FBQSxFQUFBYyxFQUFBLE9BQUFQLENBQUEsQ0FBQUssR0FBQSxJQUFBTCxDQUFBLENBQUFNLEdBQUEsSUFBQVAsQ0FBQSxDQUFBRSxDQUFBLEVBQUFNLEVBQUEsRUFBQVAsQ0FBQSxJQUFBQyxDQUFBLENBQUFNLEVBQUEsSUFBQWQsQ0FBQSxDQUFBYyxFQUFBLFdBQUFOLENBQUEsS0FBQVIsQ0FBQSxFQUFBQyxDQUFBO0FBQUEsU0FBQW1CLFdBQUFuQixDQUFBLEVBQUFLLENBQUEsRUFBQU4sQ0FBQSxXQUFBTSxDQUFBLE9BQUFlLGdCQUFBLENBQUFYLE9BQUEsRUFBQUosQ0FBQSxPQUFBZ0IsMkJBQUEsQ0FBQVosT0FBQSxFQUFBVCxDQUFBLEVBQUFzQix5QkFBQSxLQUFBQyxPQUFBLENBQUFDLFNBQUEsQ0FBQW5CLENBQUEsRUFBQU4sQ0FBQSxZQUFBcUIsZ0JBQUEsQ0FBQVgsT0FBQSxFQUFBVCxDQUFBLEVBQUF5QixXQUFBLElBQUFwQixDQUFBLENBQUFxQixLQUFBLENBQUExQixDQUFBLEVBQUFELENBQUE7QUFBQSxTQUFBdUIsMEJBQUEsY0FBQXRCLENBQUEsSUFBQTJCLE9BQUEsQ0FBQUMsU0FBQSxDQUFBQyxPQUFBLENBQUFkLElBQUEsQ0FBQVEsT0FBQSxDQUFBQyxTQUFBLENBQUFHLE9BQUEsaUNBQUEzQixDQUFBLGFBQUFzQix5QkFBQSxZQUFBQSwwQkFBQSxhQUFBdEIsQ0FBQTtBQUFBLFNBQUE4QixRQUFBL0IsQ0FBQSxFQUFBRyxDQUFBLFFBQUFGLENBQUEsR0FBQWdCLE1BQUEsQ0FBQWUsSUFBQSxDQUFBaEMsQ0FBQSxPQUFBaUIsTUFBQSxDQUFBZ0IscUJBQUEsUUFBQTNCLENBQUEsR0FBQVcsTUFBQSxDQUFBZ0IscUJBQUEsQ0FBQWpDLENBQUEsR0FBQUcsQ0FBQSxLQUFBRyxDQUFBLEdBQUFBLENBQUEsQ0FBQTRCLE1BQUEsV0FBQS9CLENBQUEsV0FBQWMsTUFBQSxDQUFBRSx3QkFBQSxDQUFBbkIsQ0FBQSxFQUFBRyxDQUFBLEVBQUFnQyxVQUFBLE9BQUFsQyxDQUFBLENBQUFtQyxJQUFBLENBQUFULEtBQUEsQ0FBQTFCLENBQUEsRUFBQUssQ0FBQSxZQUFBTCxDQUFBO0FBQUEsU0FBQW9DLGNBQUFyQyxDQUFBLGFBQUFHLENBQUEsTUFBQUEsQ0FBQSxHQUFBbUMsU0FBQSxDQUFBQyxNQUFBLEVBQUFwQyxDQUFBLFVBQUFGLENBQUEsV0FBQXFDLFNBQUEsQ0FBQW5DLENBQUEsSUFBQW1DLFNBQUEsQ0FBQW5DLENBQUEsUUFBQUEsQ0FBQSxPQUFBNEIsT0FBQSxDQUFBZCxNQUFBLENBQUFoQixDQUFBLE9BQUF1QyxPQUFBLFdBQUFyQyxDQUFBLFFBQUFzQyxnQkFBQSxDQUFBL0IsT0FBQSxFQUFBVixDQUFBLEVBQUFHLENBQUEsRUFBQUYsQ0FBQSxDQUFBRSxDQUFBLFNBQUFjLE1BQUEsQ0FBQXlCLHlCQUFBLEdBQUF6QixNQUFBLENBQUEwQixnQkFBQSxDQUFBM0MsQ0FBQSxFQUFBaUIsTUFBQSxDQUFBeUIseUJBQUEsQ0FBQXpDLENBQUEsS0FBQThCLE9BQUEsQ0FBQWQsTUFBQSxDQUFBaEIsQ0FBQSxHQUFBdUMsT0FBQSxXQUFBckMsQ0FBQSxJQUFBYyxNQUFBLENBQUFDLGNBQUEsQ0FBQWxCLENBQUEsRUFBQUcsQ0FBQSxFQUFBYyxNQUFBLENBQUFFLHdCQUFBLENBQUFsQixDQUFBLEVBQUFFLENBQUEsaUJBQUFILENBQUE7QUFBQSxJQWlEdEI0QyxXQUFXO0VBZ0JmLFNBQUFBLFlBQUEsRUFBYztJQUFBLElBQUFDLGdCQUFBLENBQUFuQyxPQUFBLFFBQUFrQyxXQUFBO0lBQUEsS0FITkUsb0JBQW9CLEdBQTBDLElBQUk7SUFBQSxLQUNsRUMsV0FBVyxHQUFZLElBQUk7SUFHakMsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQyxDQUFDO0VBQy9CO0VBQUMsV0FBQUMsYUFBQSxDQUFBdkMsT0FBQSxFQUFBa0MsV0FBQTtJQUFBTSxHQUFBO0lBQUFDLEtBQUEsRUFPRCxTQUFRSCxzQkFBc0JBLENBQUEsRUFBUztNQUFBLElBQUFJLEtBQUE7TUFFckMsSUFBSSxJQUFJLENBQUNOLG9CQUFvQixFQUFFO1FBQzdCTyxhQUFhLENBQUMsSUFBSSxDQUFDUCxvQkFBb0IsQ0FBQztNQUMxQztNQUdBLElBQUksQ0FBQ0Esb0JBQW9CLEdBQUdRLFdBQVcsQ0FBQyxZQUFNO1FBQzVDLEtBQUtGLEtBQUksQ0FBQ0csb0JBQW9CLENBQUMsQ0FBQztNQUNsQyxDQUFDLEVBQUUsS0FBSyxDQUFDO0lBQ1g7RUFBQztJQUFBTCxHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBSyxxQkFBQSxPQUFBQyxrQkFBQSxDQUFBL0MsT0FBQSxFQUtELGFBQW9EO1FBQ2xELElBQUk7VUFDRixJQUFNZ0QsZUFBZSxTQUFTLElBQUksQ0FBQ0EsZUFBZSxDQUFDLENBQUM7VUFDcEQsSUFBSSxDQUFDQSxlQUFlLEVBQUU7WUFDcEIsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQzVCO1VBQ0Y7VUFFQSxJQUFNQyxZQUFZLFNBQVMsSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQyxDQUFDO1VBQ3JELElBQU1DLFlBQVksU0FBUyxJQUFJLENBQUNDLG1CQUFtQixDQUFDLENBQUM7VUFDckQsSUFBTUMsR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO1VBR3RCLElBQUlKLFlBQVksSUFBSUksR0FBRyxHQUFHSixZQUFZLEdBQUdoQixXQUFXLENBQUNzQixlQUFlLEVBQUU7WUFDcEVDLFlBQU0sQ0FBQ0MsSUFBSSxDQUFDLGdDQUFnQyxDQUFDO1lBQzdDLE1BQU0sSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FBQztZQUNuQjtVQUNGO1VBR0EsSUFBSVAsWUFBWSxJQUFJRSxHQUFHLEdBQUdGLFlBQVksR0FBR2xCLFdBQVcsQ0FBQzBCLGdCQUFnQixFQUFFO1lBQ3JFSCxZQUFNLENBQUNDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQztZQUNoRCxNQUFNLElBQUksQ0FBQ0MsTUFBTSxDQUFDLENBQUM7WUFDbkI7VUFDRjtVQUdBLE1BQU0sSUFBSSxDQUFDRSxzQkFBc0IsQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7VUFDZEwsWUFBTSxDQUFDSyxLQUFLLENBQUMsK0JBQStCLEVBQUU7WUFBRUEsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztRQUMxRDtNQUNGLENBQUM7TUFBQSxTQS9CYWpCLG9CQUFvQkEsQ0FBQTtRQUFBLE9BQUFDLHFCQUFBLENBQUE3QixLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQXBCaUIsb0JBQW9CO0lBQUE7RUFBQTtJQUFBTCxHQUFBO0lBQUFDLEtBQUEsRUFvQ2xDLFNBQVFRLHFCQUFxQkEsQ0FBQSxFQUFTO01BQ3BDLElBQUksSUFBSSxDQUFDYixvQkFBb0IsRUFBRTtRQUM3Qk8sYUFBYSxDQUFDLElBQUksQ0FBQ1Asb0JBQW9CLENBQUM7UUFDeEMsSUFBSSxDQUFDQSxvQkFBb0IsR0FBRyxJQUFJO01BQ2xDO0lBQ0Y7RUFBQztJQUFBSSxHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBc0Isb0JBQUEsT0FBQWhCLGtCQUFBLENBQUEvQyxPQUFBLEVBS0QsYUFBNEQ7UUFDMUQsSUFBSTtVQUNGLElBQU1nRSxTQUFTLFNBQVMsSUFBSSxDQUFDQyxrQkFBa0IsQ0FDN0MvQixXQUFXLENBQUNnQyxpQkFDZCxDQUFDO1VBQ0QsT0FBT0YsU0FBUyxHQUFHRyxRQUFRLENBQUNILFNBQVMsQ0FBQyxHQUFHLElBQUk7UUFDL0MsQ0FBQyxDQUFDLE9BQU9GLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyxrQ0FBa0MsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBQzNELE9BQU8sSUFBSTtRQUNiO01BQ0YsQ0FBQztNQUFBLFNBVmFYLG1CQUFtQkEsQ0FBQTtRQUFBLE9BQUFZLG9CQUFBLENBQUE5QyxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQW5CdUIsbUJBQW1CO0lBQUE7RUFBQTtJQUFBWCxHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBMkIsb0JBQUEsT0FBQXJCLGtCQUFBLENBQUEvQyxPQUFBLEVBZWpDLGFBQTREO1FBQzFELElBQUk7VUFDRixJQUFNb0QsWUFBWSxTQUFTLElBQUksQ0FBQ2Esa0JBQWtCLENBQ2hEL0IsV0FBVyxDQUFDbUMsaUJBQ2QsQ0FBQztVQUNELE9BQU9qQixZQUFZLEdBQUdlLFFBQVEsQ0FBQ2YsWUFBWSxDQUFDLEdBQUcsSUFBSTtRQUNyRCxDQUFDLENBQUMsT0FBT1UsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLGtDQUFrQyxFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDM0QsT0FBTyxJQUFJO1FBQ2I7TUFDRixDQUFDO01BQUEsU0FWYVQsbUJBQW1CQSxDQUFBO1FBQUEsT0FBQWUsb0JBQUEsQ0FBQW5ELEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBbkJ5QixtQkFBbUI7SUFBQTtFQUFBO0lBQUFiLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUE2Qix1QkFBQSxPQUFBdkIsa0JBQUEsQ0FBQS9DLE9BQUEsRUFlakMsYUFBc0Q7UUFDcEQsSUFBSTtVQUNGLE1BQU0sSUFBSSxDQUFDdUUsa0JBQWtCLENBQzNCckMsV0FBVyxDQUFDbUMsaUJBQWlCLEVBQzdCZCxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDLENBQUNrQixRQUFRLENBQUMsQ0FDdEIsQ0FBQztRQUNILENBQUMsQ0FBQyxPQUFPVixLQUFLLEVBQUU7VUFDZEwsWUFBTSxDQUFDSyxLQUFLLENBQUMscUNBQXFDLEVBQUU7WUFBRUEsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztRQUNoRTtNQUNGLENBQUM7TUFBQSxTQVRhRCxzQkFBc0JBLENBQUE7UUFBQSxPQUFBUyx1QkFBQSxDQUFBckQsS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUF0QmlDLHNCQUFzQjtJQUFBO0VBQUE7SUFBQXJCLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUFnQyxtQkFBQSxPQUFBMUIsa0JBQUEsQ0FBQS9DLE9BQUEsRUFjcEMsYUFBMEM7UUFDeEMsTUFBTSxJQUFJLENBQUM2RCxzQkFBc0IsQ0FBQyxDQUFDO01BQ3JDLENBQUM7TUFBQSxTQUZLYSxrQkFBa0JBLENBQUE7UUFBQSxPQUFBRCxtQkFBQSxDQUFBeEQsS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUFsQjhDLGtCQUFrQjtJQUFBO0VBQUE7SUFBQWxDLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUFrQyxhQUFBLE9BQUE1QixrQkFBQSxDQUFBL0MsT0FBQSxFQU94QixhQUF1QztRQUNyQyxJQUFJO1VBQ0YsSUFBTTRFLFlBQVksU0FBUyxJQUFJLENBQUNDLGVBQWUsQ0FBQyxDQUFDO1VBQ2pELElBQUksQ0FBQ0QsWUFBWSxFQUFFO1lBQ2pCLE9BQU8sS0FBSztVQUNkO1VBR0EsSUFBTUUsUUFBUSxTQUFTQyxRQUFHLENBQUNDLE9BQU8sQ0FBZSxxQkFBcUIsRUFBRTtZQUN0RUMsTUFBTSxFQUFFLE1BQU07WUFDZEMsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFUixZQUFZLEVBQVpBO1lBQWEsQ0FBQztVQUN2QyxDQUFDLENBQUM7VUFHRixNQUFNLElBQUksQ0FBQ1MsYUFBYSxDQUFDUCxRQUFRLENBQUM7VUFHbEMsTUFBTSxJQUFJLENBQUNQLGtCQUFrQixDQUMzQnJDLFdBQVcsQ0FBQ2dDLGlCQUFpQixFQUM3QlgsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQyxDQUFDa0IsUUFBUSxDQUFDLENBQ3RCLENBQUM7VUFFRGYsWUFBTSxDQUFDQyxJQUFJLENBQUMsNkJBQTZCLENBQUM7VUFDMUMsT0FBTyxJQUFJO1FBQ2IsQ0FBQyxDQUFDLE9BQU9JLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyx1QkFBdUIsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBRWhELE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUMsQ0FBQztVQUNuQixPQUFPLEtBQUs7UUFDZDtNQUNGLENBQUM7TUFBQSxTQTlCSzJCLFlBQVlBLENBQUE7UUFBQSxPQUFBWCxhQUFBLENBQUExRCxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQVowRCxZQUFZO0lBQUE7RUFBQTtJQUFBOUMsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQThDLHFCQUFBLE9BQUF4QyxrQkFBQSxDQUFBL0MsT0FBQSxFQW1DbEIsYUFHRztRQUNELElBQUk7VUFDRixJQUFNd0YsV0FBVyxTQUFTdEcsbUJBQW1CLENBQUN1RyxnQkFBZ0IsQ0FBQyxDQUFDO1VBQ2hFLElBQU1DLFVBQVUsU0FBU3hHLG1CQUFtQixDQUFDeUcsZUFBZSxDQUFDLENBQUM7VUFDOUQsSUFBTUMsY0FBYyxTQUNaMUcsbUJBQW1CLENBQUMyRyxpQ0FBaUMsQ0FBQyxDQUFDO1VBRS9ELE9BQU87WUFDTEMsU0FBUyxFQUFFTixXQUFXLElBQUlFLFVBQVU7WUFDcENLLEtBQUssRUFBRUg7VUFDVCxDQUFDO1FBQ0gsQ0FBQyxDQUFDLE9BQU85QixLQUFLLEVBQUU7VUFDZEwsWUFBTSxDQUFDSyxLQUFLLENBQUMsd0NBQXdDLEVBQUU7WUFBRUEsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztVQUNqRSxPQUFPO1lBQUVnQyxTQUFTLEVBQUUsS0FBSztZQUFFQyxLQUFLLEVBQUU7VUFBRyxDQUFDO1FBQ3hDO01BQ0YsQ0FBQztNQUFBLFNBbEJLQyxvQkFBb0JBLENBQUE7UUFBQSxPQUFBVCxxQkFBQSxDQUFBdEUsS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUFwQm9FLG9CQUFvQjtJQUFBO0VBQUE7SUFBQXhELEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUF3RCw4QkFBQSxPQUFBbEQsa0JBQUEsQ0FBQS9DLE9BQUEsRUF1QjFCLGFBQXdEO1FBQ3RELElBQUk7VUFDRixJQUFBa0cscUJBQUEsU0FBNEIsSUFBSSxDQUFDRixvQkFBb0IsQ0FBQyxDQUFDO1lBQS9DRixTQUFTLEdBQUFJLHFCQUFBLENBQVRKLFNBQVM7VUFDakIsSUFBSSxDQUFDQSxTQUFTLEVBQUU7WUFDZCxNQUFNLElBQUlLLFNBQVMsQ0FDakIsMERBQ0YsQ0FBQztVQUNIO1VBR0EsSUFBTUMsYUFBYSxTQUFTbEgsbUJBQW1CLENBQUNtSCxpQkFBaUIsQ0FBQztZQUNoRUMsYUFBYSxFQUFFLHdDQUF3QztZQUN2REMsYUFBYSxFQUFFLFNBQVM7WUFDeEJDLFdBQVcsRUFBRSxRQUFRO1lBQ3JCQyxxQkFBcUIsRUFBRTtVQUN6QixDQUFDLENBQUM7VUFFRixJQUFJLENBQUNMLGFBQWEsQ0FBQ00sT0FBTyxFQUFFO1lBQzFCLE1BQU0sSUFBSVAsU0FBUyxDQUFDLGlDQUFpQyxDQUFDO1VBQ3hEO1VBR0EsTUFBTSxJQUFJLENBQUM1QixrQkFBa0IsQ0FBQ3JDLFdBQVcsQ0FBQ3lFLHFCQUFxQixFQUFFLE1BQU0sQ0FBQztVQUd4RSxJQUFNQyxXQUFXLFNBQVMsSUFBSSxDQUFDQyxjQUFjLENBQUMsQ0FBQztVQUMvQyxJQUFJRCxXQUFXLEVBQUU7WUFDZixJQUFNRSxvQkFBMEMsR0FBRztjQUNqREMsS0FBSyxFQUFFSCxXQUFXLENBQUNHLEtBQUs7Y0FDeEJDLGNBQWMsRUFBRXpELElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUMsQ0FBQ2tCLFFBQVEsQ0FBQyxDQUFDLEdBQUd5QyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMxQyxRQUFRLENBQUMsRUFBRTtZQUNuRSxDQUFDO1lBRUQsTUFBTSxJQUFJLENBQUNELGtCQUFrQixDQUMzQnJDLFdBQVcsQ0FBQ2lGLHlCQUF5QixFQUNyQ2hDLElBQUksQ0FBQ0MsU0FBUyxDQUFDMEIsb0JBQW9CLENBQ3JDLENBQUM7VUFDSDtVQUVBckQsWUFBTSxDQUFDQyxJQUFJLENBQUMsa0NBQWtDLENBQUM7VUFDL0MsT0FBTyxJQUFJO1FBQ2IsQ0FBQyxDQUFDLE9BQU9JLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQywyQ0FBMkMsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBQ3BFLE1BQU0sSUFBSXFDLFNBQVMsQ0FBQywyQ0FBMkMsRUFBRXJDLEtBQUssQ0FBQztRQUN6RTtNQUNGLENBQUM7TUFBQSxTQTVDS3NELDZCQUE2QkEsQ0FBQTtRQUFBLE9BQUFuQiw4QkFBQSxDQUFBaEYsS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUE3QndGLDZCQUE2QjtJQUFBO0VBQUE7SUFBQTVFLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUE0RSwrQkFBQSxPQUFBdEUsa0JBQUEsQ0FBQS9DLE9BQUEsRUFpRG5DLGFBQXNEO1FBQ3BELElBQUk7VUFDRixNQUFNLElBQUksQ0FBQ3NILHFCQUFxQixDQUFDcEYsV0FBVyxDQUFDeUUscUJBQXFCLENBQUM7VUFDbkUsTUFBTSxJQUFJLENBQUNXLHFCQUFxQixDQUFDcEYsV0FBVyxDQUFDaUYseUJBQXlCLENBQUM7VUFDdkUxRCxZQUFNLENBQUNDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsT0FBT0ksS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLDRDQUE0QyxFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDckUsTUFBTSxJQUFJcUMsU0FBUyxDQUFDLDRDQUE0QyxFQUFFckMsS0FBSyxDQUFDO1FBQzFFO01BQ0YsQ0FBQztNQUFBLFNBVEt5RCw4QkFBOEJBLENBQUE7UUFBQSxPQUFBRiwrQkFBQSxDQUFBcEcsS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUE5QjJGLDhCQUE4QjtJQUFBO0VBQUE7SUFBQS9FLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUErRSxtQkFBQSxPQUFBekUsa0JBQUEsQ0FBQS9DLE9BQUEsRUFjcEMsYUFBNkM7UUFDM0MsSUFBSTtVQUNGLElBQU15SCxPQUFPLFNBQVMsSUFBSSxDQUFDeEQsa0JBQWtCLENBQzNDL0IsV0FBVyxDQUFDeUUscUJBQ2QsQ0FBQztVQUNELE9BQU9jLE9BQU8sS0FBSyxNQUFNO1FBQzNCLENBQUMsQ0FBQyxPQUFPM0QsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLGtDQUFrQyxFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDM0QsT0FBTyxLQUFLO1FBQ2Q7TUFDRixDQUFDO01BQUEsU0FWSzRELGtCQUFrQkEsQ0FBQTtRQUFBLE9BQUFGLG1CQUFBLENBQUF2RyxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQWxCOEYsa0JBQWtCO0lBQUE7RUFBQTtJQUFBbEYsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQWtGLG9CQUFBLE9BQUE1RSxrQkFBQSxDQUFBL0MsT0FBQSxFQWV4QixhQUFtRDtRQUNqRCxJQUFJO1VBQ0YsSUFBTTRILFNBQVMsU0FBUyxJQUFJLENBQUNGLGtCQUFrQixDQUFDLENBQUM7VUFDakQsSUFBSSxDQUFDRSxTQUFTLEVBQUU7WUFDZCxNQUFNLElBQUl6QixTQUFTLENBQUMseUNBQXlDLENBQUM7VUFDaEU7VUFFQSxJQUFBMEIsc0JBQUEsU0FBNEIsSUFBSSxDQUFDN0Isb0JBQW9CLENBQUMsQ0FBQztZQUEvQ0YsU0FBUyxHQUFBK0Isc0JBQUEsQ0FBVC9CLFNBQVM7VUFDakIsSUFBSSxDQUFDQSxTQUFTLEVBQUU7WUFDZCxNQUFNLElBQUlLLFNBQVMsQ0FBQywyQ0FBMkMsQ0FBQztVQUNsRTtVQUdBLElBQU1DLGFBQWEsU0FBU2xILG1CQUFtQixDQUFDbUgsaUJBQWlCLENBQUM7WUFDaEVDLGFBQWEsRUFBRSx1QkFBdUI7WUFDdENDLGFBQWEsRUFBRSxTQUFTO1lBQ3hCQyxXQUFXLEVBQUUsUUFBUTtZQUNyQkMscUJBQXFCLEVBQUU7VUFDekIsQ0FBQyxDQUFDO1VBRUYsSUFBSSxDQUFDTCxhQUFhLENBQUNNLE9BQU8sRUFBRTtZQUMxQixNQUFNLElBQUlQLFNBQVMsQ0FBQyxpQ0FBaUMsQ0FBQztVQUN4RDtVQUdBLElBQU0yQixpQkFBaUIsU0FBUyxJQUFJLENBQUM3RCxrQkFBa0IsQ0FDckQvQixXQUFXLENBQUNpRix5QkFDZCxDQUFDO1VBQ0QsSUFBSSxDQUFDVyxpQkFBaUIsRUFBRTtZQUN0QixNQUFNLElBQUkzQixTQUFTLENBQUMsZ0NBQWdDLENBQUM7VUFDdkQ7VUFFQSxJQUFNNEIsV0FBVyxHQUFHNUMsSUFBSSxDQUFDNkMsS0FBSyxDQUFDRixpQkFBaUIsQ0FBeUI7VUFHekUsSUFBTWhELFFBQVEsU0FBU0MsUUFBRyxDQUFDQyxPQUFPLENBQ2hDLHVCQUF1QixFQUN2QjtZQUNFQyxNQUFNLEVBQUUsTUFBTTtZQUNkQyxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO2NBQ25CMkIsS0FBSyxFQUFFZ0IsV0FBVyxDQUFDaEIsS0FBSztjQUN4QkMsY0FBYyxFQUFFZSxXQUFXLENBQUNmO1lBQzlCLENBQUM7VUFDSCxDQUNGLENBQUM7VUFHRCxNQUFNLElBQUksQ0FBQzNCLGFBQWEsQ0FBQ1AsUUFBUSxDQUFDO1VBRWxDckIsWUFBTSxDQUFDQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUU7WUFDNUN1RSxNQUFNLEVBQUVuRCxRQUFRLENBQUNvRCxJQUFJLENBQUNDO1VBQ3hCLENBQUMsQ0FBQztVQUNGLE9BQU9yRCxRQUFRO1FBQ2pCLENBQUMsQ0FBQyxPQUFPaEIsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLHdCQUF3QixFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDakQsTUFBTSxJQUFJcUMsU0FBUyxDQUNqQix3REFBd0QsRUFDeERyQyxLQUNGLENBQUM7UUFDSDtNQUNGLENBQUM7TUFBQSxTQTVES3NFLG1CQUFtQkEsQ0FBQTtRQUFBLE9BQUFULG9CQUFBLENBQUExRyxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQW5Cd0csbUJBQW1CO0lBQUE7RUFBQTtJQUFBNUYsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQTRGLE1BQUEsT0FBQXRGLGtCQUFBLENBQUEvQyxPQUFBLEVBaUV6QixXQUFZK0gsV0FBNkIsRUFBeUI7UUFDaEUsSUFBSTtVQUNGLElBQU1qRCxRQUFRLFNBQVNDLFFBQUcsQ0FBQ0MsT0FBTyxDQUFlLGFBQWEsRUFBRTtZQUM5REMsTUFBTSxFQUFFLE1BQU07WUFDZEMsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQzJDLFdBQVc7VUFDbEMsQ0FBQyxDQUFDO1VBR0YsTUFBTSxJQUFJLENBQUMxQyxhQUFhLENBQUNQLFFBQVEsQ0FBQztVQUVsQ3JCLFlBQU0sQ0FBQ0MsSUFBSSxDQUFDLDZCQUE2QixFQUFFO1lBQUV1RSxNQUFNLEVBQUVuRCxRQUFRLENBQUNvRCxJQUFJLENBQUNDO1VBQUcsQ0FBQyxDQUFDO1VBQ3hFLE9BQU9yRCxRQUFRO1FBQ2pCLENBQUMsQ0FBQyxPQUFPaEIsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLGNBQWMsRUFBRTtZQUFFQSxLQUFLLEVBQUxBLEtBQUs7WUFBRWlELEtBQUssRUFBRWdCLFdBQVcsQ0FBQ2hCO1VBQU0sQ0FBQyxDQUFDO1VBQ2pFLE1BQU0sSUFBSVosU0FBUyxDQUNqQiw0REFBNEQsRUFDNURyQyxLQUNGLENBQUM7UUFDSDtNQUNGLENBQUM7TUFBQSxTQW5CS3dFLEtBQUtBLENBQUFDLEVBQUE7UUFBQSxPQUFBRixNQUFBLENBQUFwSCxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQUwwRyxLQUFLO0lBQUE7RUFBQTtJQUFBOUYsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQStGLFNBQUEsT0FBQXpGLGtCQUFBLENBQUEvQyxPQUFBLEVBd0JYLFdBQWV5SSxJQUFrQixFQUF5QjtRQUN4RCxJQUFJO1VBRUYsSUFBSUEsSUFBSSxDQUFDQyxRQUFRLEtBQUtELElBQUksQ0FBQ0UsZUFBZSxFQUFFO1lBQzFDLE1BQU0sSUFBSXhDLFNBQVMsQ0FBQyx3QkFBd0IsQ0FBQztVQUMvQztVQUVBLElBQU15QyxZQUFZLEdBQUc7WUFDbkI3QixLQUFLLEVBQUUwQixJQUFJLENBQUMxQixLQUFLO1lBQ2pCMkIsUUFBUSxFQUFFRCxJQUFJLENBQUNDLFFBQVE7WUFDdkJHLElBQUksRUFBRUosSUFBSSxDQUFDSTtVQUNiLENBQUM7VUFDRCxJQUFNL0QsUUFBUSxTQUFTQyxRQUFHLENBQUNDLE9BQU8sQ0FBZSxnQkFBZ0IsRUFBRTtZQUNqRUMsTUFBTSxFQUFFLE1BQU07WUFDZEMsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ3dELFlBQVk7VUFDbkMsQ0FBQyxDQUFDO1VBR0YsTUFBTSxJQUFJLENBQUN2RCxhQUFhLENBQUNQLFFBQVEsQ0FBQztVQUVsQ3JCLFlBQU0sQ0FBQ0MsSUFBSSxDQUFDLDhCQUE4QixFQUFFO1lBQUV1RSxNQUFNLEVBQUVuRCxRQUFRLENBQUNvRCxJQUFJLENBQUNDO1VBQUcsQ0FBQyxDQUFDO1VBQ3pFLE9BQU9yRCxRQUFRO1FBQ2pCLENBQUMsQ0FBQyxPQUFPaEIsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLHFCQUFxQixFQUFFO1lBQUVBLEtBQUssRUFBTEEsS0FBSztZQUFFaUQsS0FBSyxFQUFFMEIsSUFBSSxDQUFDMUI7VUFBTSxDQUFDLENBQUM7VUFDakUsTUFBTSxJQUFJWixTQUFTLENBQUMsd0NBQXdDLEVBQUVyQyxLQUFLLENBQUM7UUFDdEU7TUFDRixDQUFDO01BQUEsU0ExQktnRixRQUFRQSxDQUFBQyxHQUFBO1FBQUEsT0FBQVAsU0FBQSxDQUFBdkgsS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUFSa0gsUUFBUTtJQUFBO0VBQUE7SUFBQXRHLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUF1RyxPQUFBLE9BQUFqRyxrQkFBQSxDQUFBL0MsT0FBQSxFQStCZCxhQUE4QjtRQUM1QixJQUFJO1VBQ0YsSUFBTTRFLFlBQVksU0FBUyxJQUFJLENBQUNDLGVBQWUsQ0FBQyxDQUFDO1VBQ2pELElBQUlELFlBQVksRUFBRTtZQUVoQixJQUFJO2NBQ0YsTUFBTUcsUUFBRyxDQUFDQyxPQUFPLENBQUMsY0FBYyxFQUFFO2dCQUNoQ0MsTUFBTSxFQUFFLE1BQU07Z0JBQ2RDLElBQUksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUM7a0JBQUVSLFlBQVksRUFBWkE7Z0JBQWEsQ0FBQztjQUN2QyxDQUFDLENBQUM7WUFDSixDQUFDLENBQUMsT0FBT2QsS0FBSyxFQUFFO2NBRWRMLFlBQU0sQ0FBQ3dGLElBQUksQ0FBQyxvREFBb0QsRUFBRTtnQkFDaEVuRixLQUFLLEVBQUxBO2NBQ0YsQ0FBQyxDQUFDO1lBQ0o7VUFDRjtVQUdBLE1BQU0sSUFBSSxDQUFDb0YsYUFBYSxDQUFDLENBQUM7VUFDMUJ6RixZQUFNLENBQUNDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQztRQUM3QyxDQUFDLENBQUMsT0FBT0ksS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLGVBQWUsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBRXhDLE1BQU0sSUFBSSxDQUFDb0YsYUFBYSxDQUFDLENBQUM7UUFDNUI7TUFDRixDQUFDO01BQUEsU0ExQkt2RixNQUFNQSxDQUFBO1FBQUEsT0FBQXFGLE9BQUEsQ0FBQS9ILEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBTitCLE1BQU07SUFBQTtFQUFBO0lBQUFuQixHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBMEcsYUFBQSxPQUFBcEcsa0JBQUEsQ0FBQS9DLE9BQUEsRUErQlosYUFBbUQ7UUFDakQsSUFBSTtVQUNGLElBQU00RSxjQUFZLFNBQVMsSUFBSSxDQUFDQyxlQUFlLENBQUMsQ0FBQztVQUNqRCxJQUFJLENBQUNELGNBQVksRUFBRTtZQUNqQixPQUFPLElBQUk7VUFDYjtVQUVBLElBQU1FLFFBQVEsU0FBU0MsUUFBRyxDQUFDQyxPQUFPLENBQWUsZUFBZSxFQUFFO1lBQ2hFQyxNQUFNLEVBQUUsTUFBTTtZQUNkQyxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO2NBQUVSLFlBQVksRUFBWkE7WUFBYSxDQUFDO1VBQ3ZDLENBQUMsQ0FBQztVQUdGLE1BQU0sSUFBSSxDQUFDUyxhQUFhLENBQUNQLFFBQVEsQ0FBQztVQUNsQyxPQUFPQSxRQUFRO1FBQ2pCLENBQUMsQ0FBQyxPQUFPaEIsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLHNCQUFzQixFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFFL0MsTUFBTSxJQUFJLENBQUNvRixhQUFhLENBQUMsQ0FBQztVQUMxQixPQUFPLElBQUk7UUFDYjtNQUNGLENBQUM7TUFBQSxTQXJCS3RFLFlBQVlBLENBQUE7UUFBQSxPQUFBdUUsYUFBQSxDQUFBbEksS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUFaZ0QsWUFBWTtJQUFBO0VBQUE7SUFBQXBDLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUEyRyxlQUFBLE9BQUFyRyxrQkFBQSxDQUFBL0MsT0FBQSxFQTBCbEIsV0FDRStHLEtBQWEsRUFDbUM7UUFDaEQsSUFBSTtVQUNGLElBQU1qQyxRQUFRLFNBQVNDLFFBQUcsQ0FBQ0MsT0FBTyxDQUNoQyx1QkFBdUIsRUFDdkI7WUFDRUMsTUFBTSxFQUFFLE1BQU07WUFDZEMsSUFBSSxFQUFFQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFMkIsS0FBSyxFQUFMQTtZQUFNLENBQUM7VUFDaEMsQ0FDRixDQUFDO1VBRUR0RCxZQUFNLENBQUNDLElBQUksQ0FBQywwQkFBMEIsRUFBRTtZQUFFcUQsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztVQUNsRCxPQUFPakMsUUFBUTtRQUNqQixDQUFDLENBQUMsT0FBT2hCLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyx3QkFBd0IsRUFBRTtZQUFFQSxLQUFLLEVBQUxBLEtBQUs7WUFBRWlELEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDeEQsTUFBTSxJQUFJWixTQUFTLENBQ2pCLHdEQUF3RCxFQUN4RHJDLEtBQ0YsQ0FBQztRQUNIO01BQ0YsQ0FBQztNQUFBLFNBckJLdUYsY0FBY0EsQ0FBQUMsR0FBQTtRQUFBLE9BQUFGLGVBQUEsQ0FBQW5JLEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBZHlILGNBQWM7SUFBQTtFQUFBO0lBQUE3RyxHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBOEcsY0FBQSxPQUFBeEcsa0JBQUEsQ0FBQS9DLE9BQUEsRUEwQnBCLFdBQ0V5SSxJQUF1QixFQUN5QjtRQUNoRCxJQUFJO1VBQ0YsSUFBSUEsSUFBSSxDQUFDQyxRQUFRLEtBQUtELElBQUksQ0FBQ0UsZUFBZSxFQUFFO1lBQzFDLE1BQU0sSUFBSXhDLFNBQVMsQ0FBQyx3QkFBd0IsQ0FBQztVQUMvQztVQUVBLElBQU1xRCxTQUFTLEdBQUc7WUFDaEJDLEtBQUssRUFBRWhCLElBQUksQ0FBQ2dCLEtBQUs7WUFDakJmLFFBQVEsRUFBRUQsSUFBSSxDQUFDQztVQUNqQixDQUFDO1VBQ0QsSUFBTTVELFFBQVEsU0FBU0MsUUFBRyxDQUFDQyxPQUFPLENBQ2hDLHNCQUFzQixFQUN0QjtZQUNFQyxNQUFNLEVBQUUsTUFBTTtZQUNkQyxJQUFJLEVBQUVDLElBQUksQ0FBQ0MsU0FBUyxDQUFDb0UsU0FBUztVQUNoQyxDQUNGLENBQUM7VUFFRC9GLFlBQU0sQ0FBQ0MsSUFBSSxDQUFDLDJCQUEyQixDQUFDO1VBQ3hDLE9BQU9vQixRQUFRO1FBQ2pCLENBQUMsQ0FBQyxPQUFPaEIsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLHVCQUF1QixFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDaEQsTUFBTSxJQUFJcUMsU0FBUyxDQUFDLDZDQUE2QyxFQUFFckMsS0FBSyxDQUFDO1FBQzNFO01BQ0YsQ0FBQztNQUFBLFNBMUJLNEYsYUFBYUEsQ0FBQUMsR0FBQTtRQUFBLE9BQUFKLGNBQUEsQ0FBQXRJLEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBYjhILGFBQWE7SUFBQTtFQUFBO0lBQUFsSCxHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBbUgsZUFBQSxPQUFBN0csa0JBQUEsQ0FBQS9DLE9BQUEsRUErQm5CLGFBQTZDO1FBQzNDLElBQUk7VUFDRixJQUFNNkosUUFBUSxTQUFTLElBQUksQ0FBQzVGLGtCQUFrQixDQUFDL0IsV0FBVyxDQUFDNEgsUUFBUSxDQUFDO1VBQ3BFLE9BQU9ELFFBQVEsR0FBSTFFLElBQUksQ0FBQzZDLEtBQUssQ0FBQzZCLFFBQVEsQ0FBQyxHQUFZLElBQUk7UUFDekQsQ0FBQyxDQUFDLE9BQU8vRixLQUFLLEVBQUU7VUFDZEwsWUFBTSxDQUFDSyxLQUFLLENBQUMsNEJBQTRCLEVBQUU7WUFBRUEsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztVQUNyRCxPQUFPLElBQUk7UUFDYjtNQUNGLENBQUM7TUFBQSxTQVJLK0MsY0FBY0EsQ0FBQTtRQUFBLE9BQUErQyxlQUFBLENBQUEzSSxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQWRpRixjQUFjO0lBQUE7RUFBQTtJQUFBckUsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQXNILGVBQUEsT0FBQWhILGtCQUFBLENBQUEvQyxPQUFBLEVBYXBCLGFBQStDO1FBQzdDLElBQUk7VUFDRixhQUFhLElBQUksQ0FBQ2lFLGtCQUFrQixDQUFDL0IsV0FBVyxDQUFDOEgsZ0JBQWdCLENBQUM7UUFDcEUsQ0FBQyxDQUFDLE9BQU9sRyxLQUFLLEVBQUU7VUFDZEwsWUFBTSxDQUFDSyxLQUFLLENBQUMsNEJBQTRCLEVBQUU7WUFBRUEsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztVQUNyRCxPQUFPLElBQUk7UUFDYjtNQUNGLENBQUM7TUFBQSxTQVBLbUcsY0FBY0EsQ0FBQTtRQUFBLE9BQUFGLGVBQUEsQ0FBQTlJLEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBZHFJLGNBQWM7SUFBQTtFQUFBO0lBQUF6SCxHQUFBO0lBQUFDLEtBQUE7TUFBQSxJQUFBeUgsZ0JBQUEsT0FBQW5ILGtCQUFBLENBQUEvQyxPQUFBLEVBWXBCLGFBQTBDO1FBQ3hDLElBQUk7VUFDRixJQUFNeUosS0FBSyxTQUFTLElBQUksQ0FBQ1EsY0FBYyxDQUFDLENBQUM7VUFDekMsSUFBTS9CLElBQUksU0FBUyxJQUFJLENBQUNyQixjQUFjLENBQUMsQ0FBQztVQUN4QyxPQUFPLENBQUMsRUFBRTRDLEtBQUssSUFBSXZCLElBQUksQ0FBQztRQUMxQixDQUFDLENBQUMsT0FBT3BFLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyw2QkFBNkIsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBQ3RELE9BQU8sS0FBSztRQUNkO01BQ0YsQ0FBQztNQUFBLFNBVEtkLGVBQWVBLENBQUE7UUFBQSxPQUFBa0gsZ0JBQUEsQ0FBQWpKLEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBZm9CLGVBQWU7SUFBQTtFQUFBO0lBQUFSLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUEwSCxXQUFBLE9BQUFwSCxrQkFBQSxDQUFBL0MsT0FBQSxFQWNyQixXQUFpQjZKLFFBQXVCLEVBQWlCO1FBQ3ZELElBQUk7VUFDRixJQUFNakQsV0FBVyxTQUFTLElBQUksQ0FBQ0MsY0FBYyxDQUFDLENBQUM7VUFDL0MsSUFBSSxDQUFDRCxXQUFXLEVBQUU7WUFDaEIsTUFBTSxJQUFJVCxTQUFTLENBQUMsNkJBQTZCLENBQUM7VUFDcEQ7VUFFQSxJQUFNaUUsV0FBVyxHQUFBekksYUFBQSxDQUFBQSxhQUFBLEtBQVFpRixXQUFXLEdBQUtpRCxRQUFRLENBQUU7VUFDbkQsTUFBTSxJQUFJLENBQUN0RixrQkFBa0IsQ0FDM0JyQyxXQUFXLENBQUM0SCxRQUFRLEVBQ3BCM0UsSUFBSSxDQUFDQyxTQUFTLENBQUNnRixXQUFXLENBQzVCLENBQUM7VUFDRDNHLFlBQU0sQ0FBQ0MsSUFBSSxDQUFDLG1CQUFtQixFQUFFO1lBQUV1RSxNQUFNLEVBQUVtQyxXQUFXLENBQUNqQztVQUFHLENBQUMsQ0FBQztRQUM5RCxDQUFDLENBQUMsT0FBT3JFLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyw0QkFBNEIsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBQ3JELE1BQU0sSUFBSXFDLFNBQVMsQ0FBQyw0QkFBNEIsRUFBRXJDLEtBQUssQ0FBQztRQUMxRDtNQUNGLENBQUM7TUFBQSxTQWpCS3VHLFVBQVVBLENBQUFDLEdBQUE7UUFBQSxPQUFBSCxXQUFBLENBQUFsSixLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQVZ5SSxVQUFVO0lBQUE7RUFBQTtJQUFBN0gsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQThILG1CQUFBLE9BQUF4SCxrQkFBQSxDQUFBL0MsT0FBQSxFQXFCaEIsV0FBaUN3QyxHQUFXLEVBQUVDLEtBQWEsRUFBaUI7UUFDMUUsSUFBSTtVQUVGLElBQUlELEdBQUcsQ0FBQ2dJLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSWhJLEdBQUcsQ0FBQ2dJLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNqRCxJQUFJO2NBQ0YsSUFBTUMsTUFBTSxTQUFTdEwsUUFBUSxDQUFDdUwsa0JBQWtCLENBQUMsY0FBYyxFQUFFakksS0FBSyxFQUFFO2dCQUN0RWtJLE9BQU8sRUFBRSxtQkFBbUI7Z0JBQzVCQyxhQUFhLEVBQUV6TCxRQUFRLENBQUMwTCxjQUFjLENBQUNDLCtCQUErQjtnQkFDdEVDLFVBQVUsRUFBRTVMLFFBQVEsQ0FBQzZMLFVBQVUsQ0FBQ0M7Y0FDbEMsQ0FBQyxDQUFDO2NBQ0YsSUFBSVIsTUFBTSxLQUFLLEtBQUssRUFBRTtnQkFDcEIsTUFBTSxJQUFJUyxLQUFLLENBQUMsNkJBQTZCLENBQUM7Y0FDaEQ7Y0FFQSxNQUFNbk0sV0FBVyxDQUFDb00sWUFBWSxDQUFDLEdBQUczSSxHQUFHLE1BQU0sRUFBRSxVQUFVLEVBQUU7Z0JBQ3ZENEksa0JBQWtCLEVBQUVyTSxXQUFXLENBQUNzTTtjQUNsQyxDQUFDLENBQUM7Y0FFRjtZQUNGLENBQUMsQ0FBQyxPQUFPQyxhQUFhLEVBQUU7Y0FFdEI3SCxZQUFNLENBQUN3RixJQUFJLENBQUMsb0RBQW9EekcsR0FBRyxFQUFFLEVBQUU7Z0JBQUVzQixLQUFLLEVBQUV3SDtjQUFjLENBQUMsQ0FBQztjQUNoRyxNQUFNdk0sV0FBVyxDQUFDb00sWUFBWSxDQUFDM0ksR0FBRyxFQUFFQyxLQUFLLEVBQUU7Z0JBQ3pDMkksa0JBQWtCLEVBQUVyTSxXQUFXLENBQUNzTTtjQUNsQyxDQUFDLENBQUM7Y0FFRixNQUFNdE0sV0FBVyxDQUFDb00sWUFBWSxDQUFDLEdBQUczSSxHQUFHLE1BQU0sRUFBRSxhQUFhLEVBQUU7Z0JBQzFENEksa0JBQWtCLEVBQUVyTSxXQUFXLENBQUNzTTtjQUNsQyxDQUFDLENBQUM7WUFDSjtVQUNGLENBQUMsTUFBTTtZQUVMLE1BQU10TSxXQUFXLENBQUNvTSxZQUFZLENBQUMzSSxHQUFHLEVBQUVDLEtBQUssRUFBRTtjQUN6QzJJLGtCQUFrQixFQUFFck0sV0FBVyxDQUFDc007WUFDbEMsQ0FBQyxDQUFDO1VBQ0o7UUFDRixDQUFDLENBQUMsT0FBT3ZILEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyw0QkFBNEJ0QixHQUFHLEVBQUUsRUFBRTtZQUFFc0IsS0FBSyxFQUFMQTtVQUFNLENBQUMsQ0FBQztVQUMxRCxNQUFNLElBQUlxQyxTQUFTLENBQUMsOENBQThDLEVBQUVyQyxLQUFLLENBQUM7UUFDNUU7TUFDRixDQUFDO01BQUEsU0F4Q2FTLGtCQUFrQkEsQ0FBQWdILEdBQUEsRUFBQUMsR0FBQTtRQUFBLE9BQUFqQixtQkFBQSxDQUFBdEosS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUFsQjJDLGtCQUFrQjtJQUFBO0VBQUE7SUFBQS9CLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUFnSixtQkFBQSxPQUFBMUksa0JBQUEsQ0FBQS9DLE9BQUEsRUEwQ2hDLFdBQWlDd0MsR0FBVyxFQUEwQjtRQUNwRSxJQUFJO1VBRUYsSUFBTWtKLE1BQU0sR0FBRyxHQUFHbEosR0FBRyxNQUFNO1VBQzNCLElBQU1tSixlQUFlLFNBQVM1TSxXQUFXLENBQUM2TSxZQUFZLENBQUNGLE1BQU0sQ0FBQztVQUU5RCxJQUFJQyxlQUFlLEtBQUssVUFBVSxFQUFFO1lBQ2xDLElBQUk7Y0FDRixJQUFNNUQsV0FBVyxTQUFTNUksUUFBUSxDQUFDME0sa0JBQWtCLENBQUM7Z0JBQ3BEbEIsT0FBTyxFQUFFO2NBQ1gsQ0FBQyxDQUFDO2NBQ0YsSUFBSTVDLFdBQVcsRUFBRTtnQkFFZixPQUFPQSxXQUFXLENBQUNXLFFBQVE7Y0FDN0I7Y0FDQSxPQUFPLElBQUk7WUFDYixDQUFDLENBQUMsT0FBTzRDLGFBQWEsRUFBRTtjQUV0QjdILFlBQU0sQ0FBQ3dGLElBQUksQ0FBQyw4REFBOER6RyxHQUFHLEVBQUUsRUFBRTtnQkFBRXNCLEtBQUssRUFBRXdIO2NBQWMsQ0FBQyxDQUFDO2NBQzFHLGFBQWF2TSxXQUFXLENBQUM2TSxZQUFZLENBQUNwSixHQUFHLENBQUM7WUFDNUM7VUFDRixDQUFDLE1BQU0sSUFBSW1KLGVBQWUsS0FBSyxhQUFhLEVBQUU7WUFFNUMsYUFBYTVNLFdBQVcsQ0FBQzZNLFlBQVksQ0FBQ3BKLEdBQUcsQ0FBQztVQUM1QyxDQUFDLE1BQU07WUFFTCxhQUFhekQsV0FBVyxDQUFDNk0sWUFBWSxDQUFDcEosR0FBRyxDQUFDO1VBQzVDO1FBQ0YsQ0FBQyxDQUFDLE9BQU9zQixLQUFLLEVBQUU7VUFDZEwsWUFBTSxDQUFDSyxLQUFLLENBQUMsK0JBQStCdEIsR0FBRyxFQUFFLEVBQUU7WUFBRXNCLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDN0QsT0FBTyxJQUFJO1FBQ2I7TUFDRixDQUFDO01BQUEsU0FoQ2FHLGtCQUFrQkEsQ0FBQTZILEdBQUE7UUFBQSxPQUFBTCxtQkFBQSxDQUFBeEssS0FBQSxPQUFBVyxTQUFBO01BQUE7TUFBQSxPQUFsQnFDLGtCQUFrQjtJQUFBO0VBQUE7SUFBQXpCLEdBQUE7SUFBQUMsS0FBQTtNQUFBLElBQUFzSixzQkFBQSxPQUFBaEosa0JBQUEsQ0FBQS9DLE9BQUEsRUFrQ2hDLFdBQW9Dd0MsR0FBVyxFQUFpQjtRQUM5RCxJQUFJO1VBRUYsSUFBTWtKLE1BQU0sR0FBRyxHQUFHbEosR0FBRyxNQUFNO1VBQzNCLElBQU1tSixlQUFlLFNBQVM1TSxXQUFXLENBQUM2TSxZQUFZLENBQUNGLE1BQU0sQ0FBQztVQUU5RCxJQUFJQyxlQUFlLEtBQUssVUFBVSxFQUFFO1lBQ2xDLElBQUk7Y0FFRixNQUFNeE0sUUFBUSxDQUFDNk0sb0JBQW9CLENBQUM7Z0JBQ2xDckIsT0FBTyxFQUFFO2NBQ1gsQ0FBQyxDQUFDO1lBQ0osQ0FBQyxDQUFDLE9BQU9XLGFBQWEsRUFBRTtjQUN0QjdILFlBQU0sQ0FBQ3dGLElBQUksQ0FBQyxtREFBbUQsRUFBRTtnQkFBRW5GLEtBQUssRUFBRXdIO2NBQWMsQ0FBQyxDQUFDO1lBQzVGO1lBRUEsTUFBTXZNLFdBQVcsQ0FBQ2tOLGVBQWUsQ0FBQ1AsTUFBTSxDQUFDO1VBQzNDLENBQUMsTUFBTSxJQUFJQyxlQUFlLEtBQUssYUFBYSxFQUFFO1lBRTVDLE1BQU01TSxXQUFXLENBQUNrTixlQUFlLENBQUN6SixHQUFHLENBQUM7WUFFdEMsTUFBTXpELFdBQVcsQ0FBQ2tOLGVBQWUsQ0FBQ1AsTUFBTSxDQUFDO1VBQzNDLENBQUMsTUFBTTtZQUVMLElBQUk7Y0FDRixNQUFNM00sV0FBVyxDQUFDa04sZUFBZSxDQUFDekosR0FBRyxDQUFDO1lBQ3hDLENBQUMsQ0FBQyxPQUFPc0IsS0FBSyxFQUFFLENBRWhCO1VBQ0Y7UUFDRixDQUFDLENBQUMsT0FBT0EsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLDZCQUE2QnRCLEdBQUcsRUFBRSxFQUFFO1lBQUVzQixLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1FBRTdEO01BQ0YsQ0FBQztNQUFBLFNBbENhd0QscUJBQXFCQSxDQUFBNEUsR0FBQTtRQUFBLE9BQUFILHNCQUFBLENBQUE5SyxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQXJCMEYscUJBQXFCO0lBQUE7RUFBQTtJQUFBOUUsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQTBKLGNBQUEsT0FBQXBKLGtCQUFBLENBQUEvQyxPQUFBLEVBc0NuQyxXQUE0QjhFLFFBQXNCLEVBQWlCO1FBQ2pFLElBQUk7VUFDRixNQUFNc0gsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FDaEIsSUFBSSxDQUFDOUgsa0JBQWtCLENBQ3JCckMsV0FBVyxDQUFDOEgsZ0JBQWdCLEVBQzVCbEYsUUFBUSxDQUFDd0gsV0FDWCxDQUFDLEVBQ0QsSUFBSSxDQUFDL0gsa0JBQWtCLENBQ3JCckMsV0FBVyxDQUFDcUssaUJBQWlCLEVBQzdCekgsUUFBUSxDQUFDRixZQUNYLENBQUMsRUFDRCxJQUFJLENBQUNMLGtCQUFrQixDQUNyQnJDLFdBQVcsQ0FBQzRILFFBQVEsRUFDcEIzRSxJQUFJLENBQUNDLFNBQVMsQ0FBQ04sUUFBUSxDQUFDb0QsSUFBSSxDQUM5QixDQUFDLEVBQ0QsSUFBSSxDQUFDM0Qsa0JBQWtCLENBQ3JCckMsV0FBVyxDQUFDZ0MsaUJBQWlCLEVBQzdCWCxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDLENBQUNrQixRQUFRLENBQUMsQ0FDdEIsQ0FBQyxFQUNELElBQUksQ0FBQ0Qsa0JBQWtCLENBQ3JCckMsV0FBVyxDQUFDbUMsaUJBQWlCLEVBQzdCZCxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDLENBQUNrQixRQUFRLENBQUMsQ0FDdEIsQ0FBQyxDQUNGLENBQUM7VUFHRixJQUFJLENBQUNsQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxPQUFPd0IsS0FBSyxFQUFFO1VBQ2RMLFlBQU0sQ0FBQ0ssS0FBSyxDQUFDLDJCQUEyQixFQUFFO1lBQUVBLEtBQUssRUFBTEE7VUFBTSxDQUFDLENBQUM7VUFDcEQsTUFBTSxJQUFJcUMsU0FBUyxDQUFDLG9DQUFvQyxFQUFFckMsS0FBSyxDQUFDO1FBQ2xFO01BQ0YsQ0FBQztNQUFBLFNBL0JhdUIsYUFBYUEsQ0FBQW1ILEdBQUE7UUFBQSxPQUFBTCxjQUFBLENBQUFsTCxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQWJ5RCxhQUFhO0lBQUE7RUFBQTtJQUFBN0MsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQWdLLGNBQUEsT0FBQTFKLGtCQUFBLENBQUEvQyxPQUFBLEVBaUMzQixhQUE2QztRQUMzQyxJQUFJO1VBQ0YsTUFBTW9NLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLENBQ2hCLElBQUksQ0FBQy9FLHFCQUFxQixDQUFDcEYsV0FBVyxDQUFDOEgsZ0JBQWdCLENBQUMsRUFDeEQsSUFBSSxDQUFDMUMscUJBQXFCLENBQUNwRixXQUFXLENBQUNxSyxpQkFBaUIsQ0FBQyxFQUN6RCxJQUFJLENBQUNqRixxQkFBcUIsQ0FBQ3BGLFdBQVcsQ0FBQzRILFFBQVEsQ0FBQyxFQUNoRCxJQUFJLENBQUN4QyxxQkFBcUIsQ0FBQ3BGLFdBQVcsQ0FBQ2dDLGlCQUFpQixDQUFDLEVBQ3pELElBQUksQ0FBQ29ELHFCQUFxQixDQUFDcEYsV0FBVyxDQUFDbUMsaUJBQWlCLENBQUMsQ0FDMUQsQ0FBQztVQUdGLElBQUksQ0FBQ3BCLHFCQUFxQixDQUFDLENBQUM7UUFDOUIsQ0FBQyxDQUFDLE9BQU9hLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQywyQkFBMkIsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1FBRXREO01BQ0YsQ0FBQztNQUFBLFNBaEJhb0YsYUFBYUEsQ0FBQTtRQUFBLE9BQUF1RCxjQUFBLENBQUF4TCxLQUFBLE9BQUFXLFNBQUE7TUFBQTtNQUFBLE9BQWJzSCxhQUFhO0lBQUE7RUFBQTtJQUFBMUcsR0FBQTtJQUFBQyxLQUFBO01BQUEsSUFBQWlLLGdCQUFBLE9BQUEzSixrQkFBQSxDQUFBL0MsT0FBQSxFQWtCM0IsYUFBd0Q7UUFDdEQsSUFBSTtVQUNGLGFBQWEsSUFBSSxDQUFDaUUsa0JBQWtCLENBQUMvQixXQUFXLENBQUNxSyxpQkFBaUIsQ0FBQztRQUNyRSxDQUFDLENBQUMsT0FBT3pJLEtBQUssRUFBRTtVQUNkTCxZQUFNLENBQUNLLEtBQUssQ0FBQyw2QkFBNkIsRUFBRTtZQUFFQSxLQUFLLEVBQUxBO1VBQU0sQ0FBQyxDQUFDO1VBQ3RELE9BQU8sSUFBSTtRQUNiO01BQ0YsQ0FBQztNQUFBLFNBUGFlLGVBQWVBLENBQUE7UUFBQSxPQUFBNkgsZ0JBQUEsQ0FBQXpMLEtBQUEsT0FBQVcsU0FBQTtNQUFBO01BQUEsT0FBZmlELGVBQWU7SUFBQTtFQUFBO0FBQUE7QUE1dEJ6QjNDLFdBQVcsQ0FDUzhILGdCQUFnQixHQUFHLG1CQUFtQjtBQUQxRDlILFdBQVcsQ0FFU3FLLGlCQUFpQixHQUFHLG9CQUFvQjtBQUY1RHJLLFdBQVcsQ0FHUzRILFFBQVEsR0FBRyxXQUFXO0FBSDFDNUgsV0FBVyxDQUlTeUUscUJBQXFCLEdBQUcsbUJBQW1CO0FBSi9EekUsV0FBVyxDQUtTaUYseUJBQXlCLEdBQUcsdUJBQXVCO0FBTHZFakYsV0FBVyxDQU1TZ0MsaUJBQWlCLEdBQUcsb0JBQW9CO0FBTjVEaEMsV0FBVyxDQU9TbUMsaUJBQWlCLEdBQUcsb0JBQW9CO0FBUDVEbkMsV0FBVyxDQVFTeUssWUFBWSxHQUFHLHlCQUF5QjtBQVI1RHpLLFdBQVcsQ0FXU3NCLGVBQWUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO0FBWHpEdEIsV0FBVyxDQVlTMEIsZ0JBQWdCLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJO0FBQUEsSUEydEI5Q3VDLFNBQVMsR0FBQXlHLE9BQUEsQ0FBQXpHLFNBQUEsYUFBQTBHLE1BQUE7RUFDcEIsU0FBQTFHLFVBQ0UyRyxPQUFlLEVBQ1JDLGFBQXVCLEVBQzlCO0lBQUEsSUFBQUMsTUFBQTtJQUFBLElBQUE3SyxnQkFBQSxDQUFBbkMsT0FBQSxRQUFBbUcsU0FBQTtJQUNBNkcsTUFBQSxHQUFBdE0sVUFBQSxPQUFBeUYsU0FBQSxHQUFNMkcsT0FBTztJQUFFRSxNQUFBLENBRlJELGFBQXVCLEdBQXZCQSxhQUF1QjtJQUc5QkMsTUFBQSxDQUFLbkUsSUFBSSxHQUFHLFdBQVc7SUFBQyxPQUFBbUUsTUFBQTtFQUMxQjtFQUFDLElBQUFDLFVBQUEsQ0FBQWpOLE9BQUEsRUFBQW1HLFNBQUEsRUFBQTBHLE1BQUE7RUFBQSxXQUFBdEssYUFBQSxDQUFBdkMsT0FBQSxFQUFBbUcsU0FBQTtBQUFBLE1BQUErRyxpQkFBQSxDQUFBbE4sT0FBQSxFQVA0QmtMLEtBQUs7QUFXN0IsSUFBTWlDLFdBQVcsR0FBQVAsT0FBQSxDQUFBTyxXQUFBLEdBQUcsSUFBSWpMLFdBQVcsQ0FBQyxDQUFDO0FBQUMsSUFBQWtMLFFBQUEsR0FBQVIsT0FBQSxDQUFBNU0sT0FBQSxHQUM5Qm1OLFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=