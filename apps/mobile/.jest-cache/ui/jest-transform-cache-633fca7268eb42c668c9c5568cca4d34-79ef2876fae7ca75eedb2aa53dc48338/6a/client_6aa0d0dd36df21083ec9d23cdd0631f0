52d71e57c283177f8b3a3fecfdd9a9ae
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function get() {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = void 0 && (void 0).__importStar || function () {
  var _ownKeys = function ownKeys(o) {
    _ownKeys = Object.getOwnPropertyNames || function (o) {
      var ar = [];
      for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
      return ar;
    };
    return _ownKeys(o);
  };
  return function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k = _ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
    __setModuleDefault(result, mod);
    return result;
  };
}();
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.apiClient = void 0;
var axios_1 = __importStar(require("axios"));
var environment_1 = require("../utils/environment");
var ApiClient = function () {
  function ApiClient() {
    var _process$env$NEXT_PUB;
    (0, _classCallCheck2.default)(this, ApiClient);
    this.client = axios_1.default.create({
      baseURL: (_process$env$NEXT_PUB = process.env['NEXT_PUBLIC_API_URL']) != null ? _process$env$NEXT_PUB : 'http://localhost:5000/api',
      timeout: 10000,
      headers: {
        'Content-Type': 'application/json'
      }
    });
    this.setupInterceptors();
  }
  return (0, _createClass2.default)(ApiClient, [{
    key: "setupInterceptors",
    value: function setupInterceptors() {
      this.client.interceptors.request.use(function (config) {
        var storage = (0, environment_1.getLocalStorage)();
        var token = storage == null ? void 0 : storage.getItem('accessToken');
        if (typeof token === 'string' && token.trim().length > 0) {
          var _config$headers;
          var bearerToken = `Bearer ${token.trim()}`;
          var headers = isAxiosHeaders(config.headers) ? config.headers : new axios_1.AxiosHeaders((_config$headers = config.headers) != null ? _config$headers : {});
          headers.set('Authorization', bearerToken);
          config.headers = headers;
        }
        return config;
      }, function (error) {
        return Promise.reject(new Error(extractErrorMessage(error, 'Request interceptor failed')));
      });
      this.client.interceptors.response.use(function (response) {
        return response;
      }, function (error) {
        console.error('Response interceptor error:', extractErrorMessage(error, 'Unknown error'));
        if (isAxiosErrorLike(error)) {
          var _error$response, _error$response2, _statusCode$toString;
          if (((_error$response = error.response) == null ? void 0 : _error$response.status) === 401) {
            var storage = (0, environment_1.getLocalStorage)();
            storage == null ? void 0 : storage.removeItem('accessToken');
            storage == null ? void 0 : storage.removeItem('refreshToken');
            (0, environment_1.redirectTo)('/login');
          }
          var statusCode = (_error$response2 = error.response) == null ? void 0 : _error$response2.status;
          return Promise.reject(new Error(`API request failed: ${(_statusCode$toString = statusCode == null ? void 0 : statusCode.toString()) != null ? _statusCode$toString : 'Unknown error'}`));
        }
        return Promise.reject(new Error(extractErrorMessage(error, 'Response interceptor failed')));
      });
    }
  }, {
    key: "get",
    value: function () {
      var _get = (0, _asyncToGenerator2.default)(function* (url, config) {
        try {
          var response = yield this.client.get(url, config);
          return response.data;
        } catch (error) {
          throw new Error(extractErrorMessage(error, 'Request failed'));
        }
      });
      function get(_x, _x2) {
        return _get.apply(this, arguments);
      }
      return get;
    }()
  }, {
    key: "post",
    value: function () {
      var _post = (0, _asyncToGenerator2.default)(function* (url, data, config) {
        try {
          var response = yield this.client.post(url, data, config);
          return response.data;
        } catch (error) {
          throw new Error(extractErrorMessage(error, 'Request failed'));
        }
      });
      function post(_x3, _x4, _x5) {
        return _post.apply(this, arguments);
      }
      return post;
    }()
  }, {
    key: "put",
    value: function () {
      var _put = (0, _asyncToGenerator2.default)(function* (url, data, config) {
        try {
          var response = yield this.client.put(url, data, config);
          return response.data;
        } catch (error) {
          throw new Error(extractErrorMessage(error, 'Request failed'));
        }
      });
      function put(_x6, _x7, _x8) {
        return _put.apply(this, arguments);
      }
      return put;
    }()
  }, {
    key: "patch",
    value: function () {
      var _patch = (0, _asyncToGenerator2.default)(function* (url, data, config) {
        try {
          var response = yield this.client.patch(url, data, config);
          return response.data;
        } catch (error) {
          throw new Error(extractErrorMessage(error, 'Request failed'));
        }
      });
      function patch(_x9, _x0, _x1) {
        return _patch.apply(this, arguments);
      }
      return patch;
    }()
  }, {
    key: "delete",
    value: function () {
      var _delete2 = (0, _asyncToGenerator2.default)(function* (url, config) {
        try {
          var response = yield this.client.delete(url, config);
          return response.data;
        } catch (error) {
          throw new Error(extractErrorMessage(error, 'Request failed'));
        }
      });
      function _delete(_x10, _x11) {
        return _delete2.apply(this, arguments);
      }
      return _delete;
    }()
  }, {
    key: "uploadFile",
    value: function () {
      var _uploadFile = (0, _asyncToGenerator2.default)(function* (url, config) {
        try {
          var formData = new FormData();
          formData.append('file', config.file);
          if (config.additionalData != null) {
            Object.entries(config.additionalData).forEach(function (_ref) {
              var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
                key = _ref2[0],
                value = _ref2[1];
              formData.append(key, String(value));
            });
          }
          var axiosConfig = {
            headers: {
              'Content-Type': 'multipart/form-data'
            }
          };
          if (config.onProgress != null) {
            axiosConfig.onUploadProgress = function (progressEvent) {
              if (progressEvent.total != null && progressEvent.total > 0) {
                var progress = Math.round(progressEvent.loaded * 100 / progressEvent.total);
                config.onProgress(progress);
              }
            };
          }
          var response = yield this.client.post(url, formData, axiosConfig);
          return response.data;
        } catch (error) {
          throw new Error(extractErrorMessage(error, 'Upload failed'));
        }
      });
      function uploadFile(_x12, _x13) {
        return _uploadFile.apply(this, arguments);
      }
      return uploadFile;
    }()
  }]);
}();
exports.apiClient = new ApiClient();
exports.default = exports.apiClient;
var isAxiosErrorLike = function isAxiosErrorLike(error) {
  return typeof error === 'object' && error !== null && 'response' in error;
};
var isAxiosHeaders = function isAxiosHeaders(headers) {
  return typeof headers === 'object' && headers !== null && 'set' in headers && typeof headers.set === 'function';
};
var extractErrorMessage = function extractErrorMessage(error, fallback) {
  if (isAxiosErrorLike(error)) {
    var _error$response$data$, _error$response3, _error$response3$data;
    var message = (_error$response$data$ = (_error$response3 = error.response) == null ? void 0 : (_error$response3$data = _error$response3.data) == null ? void 0 : _error$response3$data.message) != null ? _error$response$data$ : error.message;
    if (typeof message === 'string' && message.trim().length > 0) {
      return message;
    }
  }
  if (error instanceof Error && error.message.trim().length > 0) {
    return error.message;
  }
  if (typeof error === 'string' && error.trim().length > 0) {
    return error.trim();
  }
  return fallback;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9zbGljZWRUb0FycmF5MiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX19jcmVhdGVCaW5kaW5nIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJ1bmRlZmluZWQiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX19lc01vZHVsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsImRlZmluZVByb3BlcnR5IiwiX19zZXRNb2R1bGVEZWZhdWx0IiwidiIsInZhbHVlIiwiX19pbXBvcnRTdGFyIiwib3duS2V5cyIsImdldE93blByb3BlcnR5TmFtZXMiLCJhciIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImxlbmd0aCIsIm1vZCIsInJlc3VsdCIsImkiLCJleHBvcnRzIiwiYXBpQ2xpZW50IiwiYXhpb3NfMSIsImVudmlyb25tZW50XzEiLCJBcGlDbGllbnQiLCJfcHJvY2VzcyRlbnYkTkVYVF9QVUIiLCJkZWZhdWx0IiwiY2xpZW50IiwiYmFzZVVSTCIsInByb2Nlc3MiLCJlbnYiLCJ0aW1lb3V0IiwiaGVhZGVycyIsInNldHVwSW50ZXJjZXB0b3JzIiwia2V5IiwiaW50ZXJjZXB0b3JzIiwicmVxdWVzdCIsInVzZSIsImNvbmZpZyIsInN0b3JhZ2UiLCJnZXRMb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsImdldEl0ZW0iLCJ0cmltIiwiX2NvbmZpZyRoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJpc0F4aW9zSGVhZGVycyIsIkF4aW9zSGVhZGVycyIsInNldCIsImVycm9yIiwiUHJvbWlzZSIsInJlamVjdCIsIkVycm9yIiwiZXh0cmFjdEVycm9yTWVzc2FnZSIsInJlc3BvbnNlIiwiY29uc29sZSIsImlzQXhpb3NFcnJvckxpa2UiLCJfZXJyb3IkcmVzcG9uc2UiLCJfZXJyb3IkcmVzcG9uc2UyIiwiX3N0YXR1c0NvZGUkdG9TdHJpbmciLCJzdGF0dXMiLCJyZW1vdmVJdGVtIiwicmVkaXJlY3RUbyIsInN0YXR1c0NvZGUiLCJ0b1N0cmluZyIsIl9nZXQiLCJ1cmwiLCJkYXRhIiwiX3giLCJfeDIiLCJhcHBseSIsImFyZ3VtZW50cyIsIl9wb3N0IiwicG9zdCIsIl94MyIsIl94NCIsIl94NSIsIl9wdXQiLCJwdXQiLCJfeDYiLCJfeDciLCJfeDgiLCJfcGF0Y2giLCJwYXRjaCIsIl94OSIsIl94MCIsIl94MSIsIl9kZWxldGUyIiwiZGVsZXRlIiwiX3gxMCIsIl94MTEiLCJfdXBsb2FkRmlsZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJmaWxlIiwiYWRkaXRpb25hbERhdGEiLCJlbnRyaWVzIiwiZm9yRWFjaCIsIl9yZWYiLCJfcmVmMiIsIlN0cmluZyIsImF4aW9zQ29uZmlnIiwib25Qcm9ncmVzcyIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJwcm9ncmVzc0V2ZW50IiwidG90YWwiLCJwcm9ncmVzcyIsIk1hdGgiLCJyb3VuZCIsImxvYWRlZCIsInVwbG9hZEZpbGUiLCJfeDEyIiwiX3gxMyIsImZhbGxiYWNrIiwiX2Vycm9yJHJlc3BvbnNlJGRhdGEkIiwiX2Vycm9yJHJlc3BvbnNlMyIsIl9lcnJvciRyZXNwb25zZTMkZGF0YSIsIm1lc3NhZ2UiXSwic291cmNlcyI6WyJjbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG93bktleXMgPSBmdW5jdGlvbihvKSB7XG4gICAgICAgIG93bktleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgdmFyIGFyID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIG8pIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgaykpIGFyW2FyLmxlbmd0aF0gPSBrO1xuICAgICAgICAgICAgcmV0dXJuIGFyO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gb3duS2V5cyhvKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrID0gb3duS2V5cyhtb2QpLCBpID0gMDsgaSA8IGsubGVuZ3RoOyBpKyspIGlmIChrW2ldICE9PSBcImRlZmF1bHRcIikgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrW2ldKTtcbiAgICAgICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYXBpQ2xpZW50ID0gdm9pZCAwO1xuY29uc3QgYXhpb3NfMSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiYXhpb3NcIikpO1xuY29uc3QgZW52aXJvbm1lbnRfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9lbnZpcm9ubWVudFwiKTtcbmNsYXNzIEFwaUNsaWVudCB7XG4gICAgY2xpZW50O1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNsaWVudCA9IGF4aW9zXzEuZGVmYXVsdC5jcmVhdGUoe1xuICAgICAgICAgICAgYmFzZVVSTDogcHJvY2Vzcy5lbnZbJ05FWFRfUFVCTElDX0FQSV9VUkwnXSA/PyAnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaScsXG4gICAgICAgICAgICB0aW1lb3V0OiAxMDAwMCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0dXBJbnRlcmNlcHRvcnMoKTtcbiAgICB9XG4gICAgc2V0dXBJbnRlcmNlcHRvcnMoKSB7XG4gICAgICAgIC8vIFJlcXVlc3QgaW50ZXJjZXB0b3IgdG8gYWRkIGF1dGggdG9rZW5cbiAgICAgICAgdGhpcy5jbGllbnQuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKChjb25maWcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2UgPSAoMCwgZW52aXJvbm1lbnRfMS5nZXRMb2NhbFN0b3JhZ2UpKCk7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHN0b3JhZ2U/LmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJyAmJiB0b2tlbi50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJlYXJlclRva2VuID0gYEJlYXJlciAke3Rva2VuLnRyaW0oKX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBpc0F4aW9zSGVhZGVycyhjb25maWcuaGVhZGVycylcbiAgICAgICAgICAgICAgICAgICAgPyBjb25maWcuaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICA6IG5ldyBheGlvc18xLkF4aW9zSGVhZGVycyhjb25maWcuaGVhZGVycyA/PyB7fSk7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCBiZWFyZXJUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSwgKGVycm9yKSA9PiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShlcnJvciwgJ1JlcXVlc3QgaW50ZXJjZXB0b3IgZmFpbGVkJykpKSk7XG4gICAgICAgIC8vIFJlc3BvbnNlIGludGVyY2VwdG9yIGZvciBlcnJvciBoYW5kbGluZ1xuICAgICAgICB0aGlzLmNsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKChyZXNwb25zZSkgPT4gcmVzcG9uc2UsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUmVzcG9uc2UgaW50ZXJjZXB0b3IgZXJyb3I6JywgZXh0cmFjdEVycm9yTWVzc2FnZShlcnJvciwgJ1Vua25vd24gZXJyb3InKSk7XG4gICAgICAgICAgICBpZiAoaXNBeGlvc0Vycm9yTGlrZShlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2UgPSAoMCwgZW52aXJvbm1lbnRfMS5nZXRMb2NhbFN0b3JhZ2UpKCk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2U/LnJlbW92ZUl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2U/LnJlbW92ZUl0ZW0oJ3JlZnJlc2hUb2tlbicpO1xuICAgICAgICAgICAgICAgICAgICAoMCwgZW52aXJvbm1lbnRfMS5yZWRpcmVjdFRvKSgnL2xvZ2luJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBlcnJvci5yZXNwb25zZT8uc3RhdHVzO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYEFQSSByZXF1ZXN0IGZhaWxlZDogJHtzdGF0dXNDb2RlPy50b1N0cmluZygpID8/ICdVbmtub3duIGVycm9yJ31gKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyb3IsICdSZXNwb25zZSBpbnRlcmNlcHRvciBmYWlsZWQnKSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gR2VuZXJpYyByZXF1ZXN0IG1ldGhvZHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbiAgICBhc3luYyBnZXQodXJsLCBjb25maWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KHVybCwgY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyb3IsICdSZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwb3N0KHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnBvc3QodXJsLCBkYXRhLCBjb25maWcpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShlcnJvciwgJ1JlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHB1dCh1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5wdXQodXJsLCBkYXRhLCBjb25maWcpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShlcnJvciwgJ1JlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBhdGNoKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnBhdGNoKHVybCwgZGF0YSwgY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyb3IsICdSZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBkZWxldGUodXJsLCBjb25maWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuZGVsZXRlKHVybCwgY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGV4dHJhY3RFcnJvck1lc3NhZ2UoZXJyb3IsICdSZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBGaWxlIHVwbG9hZCBoZWxwZXIgd2l0aCBwcm9wZXIgdHlwaW5nXG4gICAgYXN5bmMgdXBsb2FkRmlsZSh1cmwsIGNvbmZpZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGNvbmZpZy5maWxlKTtcbiAgICAgICAgICAgIGlmIChjb25maWcuYWRkaXRpb25hbERhdGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbmZpZy5hZGRpdGlvbmFsRGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXhpb3NDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5vblByb2dyZXNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBheGlvc0NvbmZpZy5vblVwbG9hZFByb2dyZXNzID0gKHByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzRXZlbnQudG90YWwgIT0gbnVsbCAmJiBwcm9ncmVzc0V2ZW50LnRvdGFsID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKChwcm9ncmVzc0V2ZW50LmxvYWRlZCAqIDEwMCkgLyBwcm9ncmVzc0V2ZW50LnRvdGFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5vblByb2dyZXNzKHByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnBvc3QodXJsLCBmb3JtRGF0YSwgYXhpb3NDb25maWcpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXh0cmFjdEVycm9yTWVzc2FnZShlcnJvciwgJ1VwbG9hZCBmYWlsZWQnKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydHMuYXBpQ2xpZW50ID0gbmV3IEFwaUNsaWVudCgpO1xuZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5hcGlDbGllbnQ7XG5jb25zdCBpc0F4aW9zRXJyb3JMaWtlID0gKGVycm9yKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ3Jlc3BvbnNlJyBpbiBlcnJvcjtcbn07XG5jb25zdCBpc0F4aW9zSGVhZGVycyA9IChoZWFkZXJzKSA9PiB7XG4gICAgcmV0dXJuICh0eXBlb2YgaGVhZGVycyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaGVhZGVycyAhPT0gbnVsbCAmJlxuICAgICAgICAnc2V0JyBpbiBoZWFkZXJzICYmXG4gICAgICAgIHR5cGVvZiBoZWFkZXJzLnNldCA9PT0gJ2Z1bmN0aW9uJyk7XG59O1xuY29uc3QgZXh0cmFjdEVycm9yTWVzc2FnZSA9IChlcnJvciwgZmFsbGJhY2spID0+IHtcbiAgICBpZiAoaXNBeGlvc0Vycm9yTGlrZShlcnJvcikpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlID8/IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycgJiYgbWVzc2FnZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgJiYgZXJyb3IudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLnRyaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xufTtcbiJdLCJt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