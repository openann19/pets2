{"version":3,"names":["_native","require","_react","ImagePicker","_interopRequireWildcard","_reactNative","_core","_api","_useAIBio2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TONES","id","label","icon","color","useAIBioScreen","exports","navigation","useNavigation","_useAuthStore","useAuthStore","user","_useAIBio","useAIBio","generateAIBio","generateBio","isGenerating","lastGeneratedBio","bioHistory","addToHistory","clearHistory","_useState","useState","_useState2","_slicedToArray2","petName","setPetName","_useState3","_useState4","petBreed","setPetBreed","_useState5","_useState6","petAge","setPetAge","_useState7","_useState8","petPersonality","setPetPersonality","_useState9","_useState0","selectedTone","setSelectedTone","_useState1","_useState10","selectedPhoto","setSelectedPhoto","pickImage","_ref","_asyncToGenerator2","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","Alert","alert","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","canceled","assets","uri","apply","arguments","_ref2","trim","params","keywords","split","map","p","filter","length","tone","petType","age","parseInt","breed","error","logger","saveBio","_ref3","_id","_userPets$","userPets","api","getUserPets","updatePet","description","bio","goBack","handleGoBack","clearForm","generatedBio","tones"],"sources":["useAIBioScreen.ts"],"sourcesContent":["/**\n * useAIBioScreen Hook\n * Manages AI Bio Generator screen state and interactions\n */\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useState } from \"react\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport { Alert } from \"react-native\";\nimport { logger } from \"@pawfectmatch/core\";\nimport { useAuthStore } from \"@pawfectmatch/core\";\nimport { api } from \"../../services/api\";\nimport { useAIBio } from \"../domains/ai/useAIBio\";\n\ninterface UseAIBioScreenReturn {\n  // Form state\n  petName: string;\n  setPetName: (name: string) => void;\n  petBreed: string;\n  setPetBreed: (breed: string) => void;\n  petAge: string;\n  setPetAge: (age: string) => void;\n  petPersonality: string;\n  setPetPersonality: (personality: string) => void;\n  selectedTone: string;\n  setSelectedTone: (tone: string) => void;\n  selectedPhoto: string | null;\n  setSelectedPhoto: (photo: string | null) => void;\n\n  // UI state\n  isGenerating: boolean;\n  generatedBio: any | null;\n  bioHistory: any[];\n  tones: Array<{ id: string; label: string; icon: string; color: string }>;\n\n  // Actions\n  pickImage: () => Promise<void>;\n  generateBio: () => Promise<void>;\n  saveBio: () => Promise<void>;\n  handleGoBack: () => void;\n  clearForm: () => void;\n}\n\nconst TONES = [\n  { id: \"playful\", label: \"Playful\", icon: \"ðŸŽ¾\", color: \"#ff6b6b\" },\n  { id: \"professional\", label: \"Professional\", icon: \"ðŸ’¼\", color: \"#4dabf7\" },\n  { id: \"casual\", label: \"Casual\", icon: \"ðŸ˜Š\", color: \"#69db7c\" },\n  { id: \"romantic\", label: \"Romantic\", icon: \"ðŸ’•\", color: \"#f783ac\" },\n  { id: \"funny\", label: \"Funny\", icon: \"ðŸ˜„\", color: \"#ffd43b\" },\n];\n\nexport const useAIBioScreen = (): UseAIBioScreenReturn => {\n  const navigation = useNavigation();\n  const { user } = useAuthStore();\n  const {\n    generateBio: generateAIBio,\n    isGenerating,\n    lastGeneratedBio,\n    bioHistory,\n    addToHistory,\n    clearHistory,\n  } = useAIBio();\n\n  // Form state\n  const [petName, setPetName] = useState(\"\");\n  const [petBreed, setPetBreed] = useState(\"\");\n  const [petAge, setPetAge] = useState(\"\");\n  const [petPersonality, setPetPersonality] = useState(\"\");\n  const [selectedTone, setSelectedTone] = useState(\"playful\");\n  const [selectedPhoto, setSelectedPhoto] = useState<string | null>(null);\n\n  const pickImage = async () => {\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== \"granted\") {\n      Alert.alert(\n        \"Permission needed\",\n        \"We need camera roll permissions to analyze your pet photo\",\n      );\n      return;\n    }\n\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 0.8,\n    });\n\n    if (!result.canceled && result.assets && result.assets[0]) {\n      setSelectedPhoto(result.assets[0].uri);\n    }\n  };\n\n  const generateBio = async () => {\n    if (!petName.trim()) {\n      Alert.alert(\"Missing Information\", \"Please enter your pet's name\");\n      return;\n    }\n\n    try {\n      const params = {\n        petName: petName.trim(),\n        keywords: petPersonality\n          .trim()\n          .split(\",\")\n          .map((p) => p.trim())\n          .filter((p) => p.length > 0),\n        tone: selectedTone as\n          | \"playful\"\n          | \"professional\"\n          | \"casual\"\n          | \"romantic\"\n          | \"funny\",\n        length: \"medium\" as const,\n        petType: \"dog\" as const, // Could be made dynamic\n        age: parseInt(petAge.trim()) || 1,\n        breed: petBreed.trim(),\n      };\n\n      await generateAIBio(params);\n    } catch (error) {\n      logger.error(\"Bio generation failed\", { error });\n      // Error handling is done in the useAIBio hook\n    }\n  };\n\n  const saveBio = async () => {\n    if (!lastGeneratedBio) return;\n\n    try {\n      // Update pet profile with generated bio\n      if (user?._id && lastGeneratedBio) {\n        // Assuming we have a petId from route params or user's first pet\n        const userPets = await api.getUserPets();\n        if (userPets && userPets.length > 0 && userPets[0]?._id) {\n          await api.updatePet(userPets[0]._id, {\n            description: lastGeneratedBio.bio,\n          });\n\n          Alert.alert(\"Success\", \"Pet profile updated successfully!\");\n          navigation.goBack();\n        } else {\n          Alert.alert(\"Saved Locally\", \"Bio has been saved to your device\");\n        }\n      } else {\n        Alert.alert(\"Saved Locally\", \"Bio has been saved to your device\");\n      }\n    } catch (error) {\n      Alert.alert(\"Saved Locally\", \"Bio has been saved to your device\");\n    }\n  };\n\n  const handleGoBack = () => {\n    navigation.goBack();\n  };\n\n  const clearForm = () => {\n    setPetName(\"\");\n    setPetBreed(\"\");\n    setPetAge(\"\");\n    setPetPersonality(\"\");\n    setSelectedTone(\"playful\");\n    setSelectedPhoto(null);\n    clearHistory();\n  };\n\n  return {\n    // Form state\n    petName,\n    setPetName,\n    petBreed,\n    setPetBreed,\n    petAge,\n    setPetAge,\n    petPersonality,\n    setPetPersonality,\n    selectedTone,\n    setSelectedTone,\n    selectedPhoto,\n    setSelectedPhoto,\n\n    // UI state\n    isGenerating,\n    generatedBio: lastGeneratedBio,\n    bioHistory,\n    tones: TONES,\n\n    // Actions\n    pickImage,\n    generateBio,\n    saveBio,\n    handleGoBack,\n    clearForm,\n  };\n};\n"],"mappings":"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","ignoreList":[]}