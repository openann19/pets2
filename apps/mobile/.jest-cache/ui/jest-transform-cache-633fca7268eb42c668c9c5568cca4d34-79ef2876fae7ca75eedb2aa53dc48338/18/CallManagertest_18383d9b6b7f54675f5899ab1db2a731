90825a289cee1eea53661d1cea8ce814
"use strict";

_getJestObj().mock("../../../services/WebRTCService");
_getJestObj().mock("../../../hooks/useSocket");
_getJestObj().mock("react-native", function () {
  return {
    Alert: {
      alert: jest.fn()
    },
    AppState: {
      addEventListener: jest.fn(function () {
        return {
          remove: jest.fn()
        };
      })
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _reactNative = require("@testing-library/react-native");
var _react = _interopRequireDefault(require("react"));
var _reactNative2 = require("react-native");
var _useSocket = require("../../../hooks/useSocket");
var _WebRTCService = _interopRequireDefault(require("../../../services/WebRTCService"));
var _CallManager = _interopRequireWildcard(require("../CallManager"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockSocket = {
  on: jest.fn(),
  emit: jest.fn(),
  connected: true
};
var mockWebRTCService = _WebRTCService.default;
var mockUseSocket = _useSocket.useSocket;
describe("CallManager", function () {
  beforeEach(function () {
    jest.clearAllMocks();
    mockUseSocket.mockReturnValue(mockSocket);
    mockWebRTCService.getCallState.mockReturnValue({
      isActive: false,
      isConnected: false,
      isIncoming: false,
      isMuted: false,
      isVideoEnabled: true,
      callDuration: 0
    });
    mockWebRTCService.on = jest.fn();
    mockWebRTCService.off = jest.fn();
    mockWebRTCService.initialize = jest.fn();
  });
  it("should render children correctly", function () {
    var TestChild = function TestChild() {
      return (0, _jsxRuntime.jsx)(_reactNative2.Text, {
        testID: "test-child",
        children: "Test Child"
      });
    };
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
        children: (0, _jsxRuntime.jsx)(TestChild, {})
      })),
      getByTestId = _render.getByTestId;
    expect(getByTestId("test-child")).toBeTruthy();
  });
  it("should initialize WebRTC service with socket", function () {
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
      children: (0, _jsxRuntime.jsx)("div", {
        children: "Test"
      })
    }));
    expect(mockWebRTCService.initialize).toHaveBeenCalledWith(mockSocket);
  });
  it("should set up event listeners for call state changes", function () {
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
      children: (0, _jsxRuntime.jsx)("div", {
        children: "Test"
      })
    }));
    expect(mockWebRTCService.on).toHaveBeenCalledWith("callStateChanged", expect.any(Function));
    expect(mockWebRTCService.on).toHaveBeenCalledWith("callError", expect.any(Function));
  });
  it("should show incoming call modal when receiving incoming call", (0, _asyncToGenerator2.default)(function* () {
    var _mockWebRTCService$on;
    var mockCallData = {
      callId: "test-call-id",
      matchId: "test-match-id",
      callerId: "test-caller-id",
      callerName: "Test Caller",
      callType: "voice",
      timestamp: Date.now()
    };
    mockWebRTCService.getCallState.mockReturnValue({
      isActive: true,
      isConnected: false,
      isIncoming: true,
      callData: mockCallData,
      isMuted: false,
      isVideoEnabled: true,
      callDuration: 0
    });
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
        children: (0, _jsxRuntime.jsx)("div", {
          children: "Test"
        })
      })),
      rerender = _render2.rerender;
    var callStateHandler = (_mockWebRTCService$on = mockWebRTCService.on.mock.calls.find(function (call) {
      return call[0] === "callStateChanged";
    })) == null ? void 0 : _mockWebRTCService$on[1];
    if (callStateHandler) {
      yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
        callStateHandler({
          isActive: true,
          isConnected: false,
          isIncoming: true,
          callData: mockCallData,
          isMuted: false,
          isVideoEnabled: true,
          callDuration: 0
        });
      }));
    }
    expect(mockWebRTCService.on).toHaveBeenCalled();
  }));
  it("should handle call errors correctly", (0, _asyncToGenerator2.default)(function* () {
    var _mockWebRTCService$on2;
    var mockError = new Error("Test call error");
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
      children: (0, _jsxRuntime.jsx)("div", {
        children: "Test"
      })
    }));
    var errorHandler = (_mockWebRTCService$on2 = mockWebRTCService.on.mock.calls.find(function (call) {
      return call[0] === "callError";
    })) == null ? void 0 : _mockWebRTCService$on2[1];
    if (errorHandler) {
      yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
        errorHandler(mockError);
      }));
    }
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Call Error", "There was an issue with the call. Please try again.", [{
      text: "OK"
    }]);
  }));
  it("should clean up event listeners on unmount", function () {
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
        children: (0, _jsxRuntime.jsx)("div", {
          children: "Test"
        })
      })),
      unmount = _render3.unmount;
    unmount();
    expect(mockWebRTCService.off).toHaveBeenCalledWith("callStateChanged", expect.any(Function));
    expect(mockWebRTCService.off).toHaveBeenCalledWith("callError", expect.any(Function));
  });
});
describe("useCallManager hook", function () {
  var TestComponent = function TestComponent() {
    var _useCallManager = (0, _CallManager.useCallManager)(),
      startCall = _useCallManager.startCall,
      endCall = _useCallManager.endCall,
      isCallActive = _useCallManager.isCallActive,
      getCallState = _useCallManager.getCallState;
    return (0, _jsxRuntime.jsxs)(_reactNative2.View, {
      children: [(0, _jsxRuntime.jsx)(_reactNative2.TouchableOpacity, {
        testID: "start-voice-call",
        onPress: function onPress() {
          return startCall("test-match", "voice");
        },
        children: (0, _jsxRuntime.jsx)(_reactNative2.Text, {
          children: "Start Voice Call"
        })
      }), (0, _jsxRuntime.jsx)(_reactNative2.TouchableOpacity, {
        testID: "start-video-call",
        onPress: function onPress() {
          return startCall("test-match", "video");
        },
        children: (0, _jsxRuntime.jsx)(_reactNative2.Text, {
          children: "Start Video Call"
        })
      }), (0, _jsxRuntime.jsx)(_reactNative2.TouchableOpacity, {
        testID: "end-call",
        onPress: endCall,
        children: (0, _jsxRuntime.jsx)(_reactNative2.Text, {
          children: "End Call"
        })
      }), (0, _jsxRuntime.jsx)(_reactNative2.Text, {
        testID: "call-active",
        children: isCallActive() ? "Active" : "Inactive"
      })]
    });
  };
  beforeEach(function () {
    jest.clearAllMocks();
    mockWebRTCService.startCall = jest.fn();
    mockWebRTCService.endCall = jest.fn();
    mockWebRTCService.isCallActive = jest.fn();
    mockWebRTCService.getCallState = jest.fn();
  });
  it("should start voice call successfully", (0, _asyncToGenerator2.default)(function* () {
    mockWebRTCService.startCall.mockResolvedValue(true);
    var _render4 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render4.getByTestId;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByTestId("start-voice-call"));
    }));
    expect(mockWebRTCService.startCall).toHaveBeenCalledWith("test-match", "voice");
  }));
  it("should start video call successfully", (0, _asyncToGenerator2.default)(function* () {
    mockWebRTCService.startCall.mockResolvedValue(true);
    var _render5 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render5.getByTestId;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByTestId("start-video-call"));
    }));
    expect(mockWebRTCService.startCall).toHaveBeenCalledWith("test-match", "video");
  }));
  it("should handle call start failure", (0, _asyncToGenerator2.default)(function* () {
    mockWebRTCService.startCall.mockResolvedValue(false);
    var _render6 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render6.getByTestId;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByTestId("start-voice-call"));
    }));
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Error", "Failed to start call. Please check your permissions and try again.");
  }));
  it("should end call", function () {
    var _render7 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render7.getByTestId;
    _reactNative.fireEvent.press(getByTestId("end-call"));
    expect(mockWebRTCService.endCall).toHaveBeenCalled();
  });
  it("should check if call is active", function () {
    mockWebRTCService.isCallActive.mockReturnValue(true);
    var _render8 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render8.getByTestId;
    expect(getByTestId("call-active")).toHaveTextContent("Active");
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJBbGVydCIsImFsZXJ0IiwiamVzdCIsImZuIiwiQXBwU3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVhY3ROYXRpdmUiLCJfcmVhY3QiLCJfcmVhY3ROYXRpdmUyIiwiX3VzZVNvY2tldCIsIl9XZWJSVENTZXJ2aWNlIiwiX0NhbGxNYW5hZ2VyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfanN4UnVudGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX3JlcXVpcmUiLCJtb2NrU29ja2V0Iiwib24iLCJlbWl0IiwiY29ubmVjdGVkIiwibW9ja1dlYlJUQ1NlcnZpY2UiLCJXZWJSVENTZXJ2aWNlIiwibW9ja1VzZVNvY2tldCIsInVzZVNvY2tldCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmV0dXJuVmFsdWUiLCJnZXRDYWxsU3RhdGUiLCJpc0FjdGl2ZSIsImlzQ29ubmVjdGVkIiwiaXNJbmNvbWluZyIsImlzTXV0ZWQiLCJpc1ZpZGVvRW5hYmxlZCIsImNhbGxEdXJhdGlvbiIsIm9mZiIsImluaXRpYWxpemUiLCJpdCIsIlRlc3RDaGlsZCIsImpzeCIsIlRleHQiLCJ0ZXN0SUQiLCJjaGlsZHJlbiIsIl9yZW5kZXIiLCJyZW5kZXIiLCJnZXRCeVRlc3RJZCIsImV4cGVjdCIsInRvQmVUcnV0aHkiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImFueSIsIkZ1bmN0aW9uIiwiX21vY2tXZWJSVENTZXJ2aWNlJG9uIiwibW9ja0NhbGxEYXRhIiwiY2FsbElkIiwibWF0Y2hJZCIsImNhbGxlcklkIiwiY2FsbGVyTmFtZSIsImNhbGxUeXBlIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImNhbGxEYXRhIiwiX3JlbmRlcjIiLCJyZXJlbmRlciIsImNhbGxTdGF0ZUhhbmRsZXIiLCJjYWxscyIsImZpbmQiLCJhY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiX21vY2tXZWJSVENTZXJ2aWNlJG9uMiIsIm1vY2tFcnJvciIsIkVycm9yIiwiZXJyb3JIYW5kbGVyIiwidGV4dCIsIl9yZW5kZXIzIiwidW5tb3VudCIsIlRlc3RDb21wb25lbnQiLCJfdXNlQ2FsbE1hbmFnZXIiLCJ1c2VDYWxsTWFuYWdlciIsInN0YXJ0Q2FsbCIsImVuZENhbGwiLCJpc0NhbGxBY3RpdmUiLCJqc3hzIiwiVmlldyIsIlRvdWNoYWJsZU9wYWNpdHkiLCJvblByZXNzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJfcmVuZGVyNCIsImZpcmVFdmVudCIsInByZXNzIiwiX3JlbmRlcjUiLCJfcmVuZGVyNiIsIl9yZW5kZXI3IiwiX3JlbmRlcjgiLCJ0b0hhdmVUZXh0Q29udGVudCJdLCJzb3VyY2VzIjpbIkNhbGxNYW5hZ2VyLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFjdCwgZmlyZUV2ZW50LCByZW5kZXIgfSBmcm9tIFwiQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmVcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFsZXJ0LCBUZXh0LCBUb3VjaGFibGVPcGFjaXR5LCBWaWV3IH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xuXG5pbXBvcnQgeyB1c2VTb2NrZXQgfSBmcm9tIFwiLi4vLi4vLi4vaG9va3MvdXNlU29ja2V0XCI7XG5pbXBvcnQgV2ViUlRDU2VydmljZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvV2ViUlRDU2VydmljZVwiO1xuaW1wb3J0IENhbGxNYW5hZ2VyLCB7IHVzZUNhbGxNYW5hZ2VyIH0gZnJvbSBcIi4uL0NhbGxNYW5hZ2VyXCI7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soXCIuLi8uLi8uLi9zZXJ2aWNlcy9XZWJSVENTZXJ2aWNlXCIpO1xuamVzdC5tb2NrKFwiLi4vLi4vLi4vaG9va3MvdXNlU29ja2V0XCIpO1xuLy8gUmVhY3QgTmF0aXZlIGlzIGFscmVhZHkgbW9ja2VkIGluIGplc3Quc2V0dXAudHNcbmplc3QubW9jayhcInJlYWN0LW5hdGl2ZVwiLCAoKSA9PiAoe1xuICBBbGVydDoge1xuICAgIGFsZXJ0OiBqZXN0LmZuKCksXG4gIH0sXG4gIEFwcFN0YXRlOiB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigoKSA9PiAoeyByZW1vdmU6IGplc3QuZm4oKSB9KSksXG4gIH0sXG59KSk7XG5cbmNvbnN0IG1vY2tTb2NrZXQgPSB7XG4gIG9uOiBqZXN0LmZuKCksXG4gIGVtaXQ6IGplc3QuZm4oKSxcbiAgY29ubmVjdGVkOiB0cnVlLFxufTtcblxuY29uc3QgbW9ja1dlYlJUQ1NlcnZpY2UgPSBXZWJSVENTZXJ2aWNlIGFzIGplc3QuTW9ja2VkPHR5cGVvZiBXZWJSVENTZXJ2aWNlPjtcbmNvbnN0IG1vY2tVc2VTb2NrZXQgPSB1c2VTb2NrZXQgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgdXNlU29ja2V0PjtcblxuZGVzY3JpYmUoXCJDYWxsTWFuYWdlclwiLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIG1vY2tVc2VTb2NrZXQubW9ja1JldHVyblZhbHVlKG1vY2tTb2NrZXQgYXMgYW55KTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5nZXRDYWxsU3RhdGUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgIGlzQ29ubmVjdGVkOiBmYWxzZSxcbiAgICAgIGlzSW5jb21pbmc6IGZhbHNlLFxuICAgICAgaXNNdXRlZDogZmFsc2UsXG4gICAgICBpc1ZpZGVvRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGNhbGxEdXJhdGlvbjogMCxcbiAgICB9KTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5vbiA9IGplc3QuZm4oKTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5vZmYgPSBqZXN0LmZuKCk7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2UuaW5pdGlhbGl6ZSA9IGplc3QuZm4oKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgcmVuZGVyIGNoaWxkcmVuIGNvcnJlY3RseVwiLCAoKSA9PiB7XG4gICAgY29uc3QgVGVzdENoaWxkID0gKCkgPT4gPFRleHQgdGVzdElEPVwidGVzdC1jaGlsZFwiPlRlc3QgQ2hpbGQ8L1RleHQ+O1xuXG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPENhbGxNYW5hZ2VyPlxuICAgICAgICA8VGVzdENoaWxkIC8+XG4gICAgICA8L0NhbGxNYW5hZ2VyPixcbiAgICApO1xuXG4gICAgZXhwZWN0KGdldEJ5VGVzdElkKFwidGVzdC1jaGlsZFwiKSkudG9CZVRydXRoeSgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBpbml0aWFsaXplIFdlYlJUQyBzZXJ2aWNlIHdpdGggc29ja2V0XCIsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8Q2FsbE1hbmFnZXI+XG4gICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgPC9DYWxsTWFuYWdlcj4sXG4gICAgKTtcblxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5pbml0aWFsaXplKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrU29ja2V0KTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgY2FsbCBzdGF0ZSBjaGFuZ2VzXCIsICgpID0+IHtcbiAgICByZW5kZXIoXG4gICAgICA8Q2FsbE1hbmFnZXI+XG4gICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgPC9DYWxsTWFuYWdlcj4sXG4gICAgKTtcblxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcImNhbGxTdGF0ZUNoYW5nZWRcIixcbiAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pLFxuICAgICk7XG4gICAgZXhwZWN0KG1vY2tXZWJSVENTZXJ2aWNlLm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiY2FsbEVycm9yXCIsXG4gICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKSxcbiAgICApO1xuICB9KTtcblxuICBpdChcInNob3VsZCBzaG93IGluY29taW5nIGNhbGwgbW9kYWwgd2hlbiByZWNlaXZpbmcgaW5jb21pbmcgY2FsbFwiLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0NhbGxEYXRhID0ge1xuICAgICAgY2FsbElkOiBcInRlc3QtY2FsbC1pZFwiLFxuICAgICAgbWF0Y2hJZDogXCJ0ZXN0LW1hdGNoLWlkXCIsXG4gICAgICBjYWxsZXJJZDogXCJ0ZXN0LWNhbGxlci1pZFwiLFxuICAgICAgY2FsbGVyTmFtZTogXCJUZXN0IENhbGxlclwiLFxuICAgICAgY2FsbFR5cGU6IFwidm9pY2VcIiBhcyBjb25zdCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuXG4gICAgbW9ja1dlYlJUQ1NlcnZpY2UuZ2V0Q2FsbFN0YXRlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGlzQ29ubmVjdGVkOiBmYWxzZSxcbiAgICAgIGlzSW5jb21pbmc6IHRydWUsXG4gICAgICBjYWxsRGF0YTogbW9ja0NhbGxEYXRhLFxuICAgICAgaXNNdXRlZDogZmFsc2UsXG4gICAgICBpc1ZpZGVvRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGNhbGxEdXJhdGlvbjogMCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgIDxDYWxsTWFuYWdlcj5cbiAgICAgICAgPGRpdj5UZXN0PC9kaXY+XG4gICAgICA8L0NhbGxNYW5hZ2VyPixcbiAgICApO1xuXG4gICAgLy8gU2ltdWxhdGUgY2FsbCBzdGF0ZSBjaGFuZ2VcbiAgICBjb25zdCBjYWxsU3RhdGVIYW5kbGVyID0gbW9ja1dlYlJUQ1NlcnZpY2Uub24ubW9jay5jYWxscy5maW5kKFxuICAgICAgKGNhbGwpID0+IGNhbGxbMF0gPT09IFwiY2FsbFN0YXRlQ2hhbmdlZFwiLFxuICAgICk/LlsxXTtcblxuICAgIGlmIChjYWxsU3RhdGVIYW5kbGVyKSB7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjYWxsU3RhdGVIYW5kbGVyKHtcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsXG4gICAgICAgICAgaXNJbmNvbWluZzogdHJ1ZSxcbiAgICAgICAgICBjYWxsRGF0YTogbW9ja0NhbGxEYXRhLFxuICAgICAgICAgIGlzTXV0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzVmlkZW9FbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGNhbGxEdXJhdGlvbjogMCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbW9kYWwgc2hvdWxkIGJlIHNob3duICh0ZXN0ZWQgdmlhIHN0YXRlIGNoYW5nZXMpXG4gICAgZXhwZWN0KG1vY2tXZWJSVENTZXJ2aWNlLm9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGhhbmRsZSBjYWxsIGVycm9ycyBjb3JyZWN0bHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tFcnJvciA9IG5ldyBFcnJvcihcIlRlc3QgY2FsbCBlcnJvclwiKTtcblxuICAgIHJlbmRlcihcbiAgICAgIDxDYWxsTWFuYWdlcj5cbiAgICAgICAgPGRpdj5UZXN0PC9kaXY+XG4gICAgICA8L0NhbGxNYW5hZ2VyPixcbiAgICApO1xuXG4gICAgY29uc3QgZXJyb3JIYW5kbGVyID0gbW9ja1dlYlJUQ1NlcnZpY2Uub24ubW9jay5jYWxscy5maW5kKFxuICAgICAgKGNhbGwpID0+IGNhbGxbMF0gPT09IFwiY2FsbEVycm9yXCIsXG4gICAgKT8uWzFdO1xuXG4gICAgaWYgKGVycm9ySGFuZGxlcikge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZXJyb3JIYW5kbGVyKG1vY2tFcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJDYWxsIEVycm9yXCIsXG4gICAgICBcIlRoZXJlIHdhcyBhbiBpc3N1ZSB3aXRoIHRoZSBjYWxsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgW3sgdGV4dDogXCJPS1wiIH1dLFxuICAgICk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGNsZWFuIHVwIGV2ZW50IGxpc3RlbmVycyBvbiB1bm1vdW50XCIsICgpID0+IHtcbiAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgIDxDYWxsTWFuYWdlcj5cbiAgICAgICAgPGRpdj5UZXN0PC9kaXY+XG4gICAgICA8L0NhbGxNYW5hZ2VyPixcbiAgICApO1xuXG4gICAgdW5tb3VudCgpO1xuXG4gICAgZXhwZWN0KG1vY2tXZWJSVENTZXJ2aWNlLm9mZikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcImNhbGxTdGF0ZUNoYW5nZWRcIixcbiAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pLFxuICAgICk7XG4gICAgZXhwZWN0KG1vY2tXZWJSVENTZXJ2aWNlLm9mZikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcImNhbGxFcnJvclwiLFxuICAgICAgZXhwZWN0LmFueShGdW5jdGlvbiksXG4gICAgKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoXCJ1c2VDYWxsTWFuYWdlciBob29rXCIsICgpID0+IHtcbiAgY29uc3QgVGVzdENvbXBvbmVudCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHN0YXJ0Q2FsbCwgZW5kQ2FsbCwgaXNDYWxsQWN0aXZlLCBnZXRDYWxsU3RhdGUgfSA9IHVzZUNhbGxNYW5hZ2VyKCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXc+XG4gICAgICAgIDxUb3VjaGFibGVPcGFjaXR5XG4gICAgICAgICAgdGVzdElEPVwic3RhcnQtdm9pY2UtY2FsbFwiXG4gICAgICAgICAgb25QcmVzcz17KCkgPT4gc3RhcnRDYWxsKFwidGVzdC1tYXRjaFwiLCBcInZvaWNlXCIpfVxuICAgICAgICA+XG4gICAgICAgICAgPFRleHQ+U3RhcnQgVm9pY2UgQ2FsbDwvVGV4dD5cbiAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICAgICAgICA8VG91Y2hhYmxlT3BhY2l0eVxuICAgICAgICAgIHRlc3RJRD1cInN0YXJ0LXZpZGVvLWNhbGxcIlxuICAgICAgICAgIG9uUHJlc3M9eygpID0+IHN0YXJ0Q2FsbChcInRlc3QtbWF0Y2hcIiwgXCJ2aWRlb1wiKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUZXh0PlN0YXJ0IFZpZGVvIENhbGw8L1RleHQ+XG4gICAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cbiAgICAgICAgPFRvdWNoYWJsZU9wYWNpdHkgdGVzdElEPVwiZW5kLWNhbGxcIiBvblByZXNzPXtlbmRDYWxsfT5cbiAgICAgICAgICA8VGV4dD5FbmQgQ2FsbDwvVGV4dD5cbiAgICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxuICAgICAgICA8VGV4dCB0ZXN0SUQ9XCJjYWxsLWFjdGl2ZVwiPlxuICAgICAgICAgIHtpc0NhbGxBY3RpdmUoKSA/IFwiQWN0aXZlXCIgOiBcIkluYWN0aXZlXCJ9XG4gICAgICAgIDwvVGV4dD5cbiAgICAgIDwvVmlldz5cbiAgICApO1xuICB9O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIG1vY2tXZWJSVENTZXJ2aWNlLnN0YXJ0Q2FsbCA9IGplc3QuZm4oKTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5lbmRDYWxsID0gamVzdC5mbigpO1xuICAgIG1vY2tXZWJSVENTZXJ2aWNlLmlzQ2FsbEFjdGl2ZSA9IGplc3QuZm4oKTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5nZXRDYWxsU3RhdGUgPSBqZXN0LmZuKCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHN0YXJ0IHZvaWNlIGNhbGwgc3VjY2Vzc2Z1bGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5zdGFydENhbGwubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGZpcmVFdmVudC5wcmVzcyhnZXRCeVRlc3RJZChcInN0YXJ0LXZvaWNlLWNhbGxcIikpO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KG1vY2tXZWJSVENTZXJ2aWNlLnN0YXJ0Q2FsbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcInRlc3QtbWF0Y2hcIixcbiAgICAgIFwidm9pY2VcIixcbiAgICApO1xuICB9KTtcblxuICBpdChcInNob3VsZCBzdGFydCB2aWRlbyBjYWxsIHN1Y2Nlc3NmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2Uuc3RhcnRDYWxsLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBmaXJlRXZlbnQucHJlc3MoZ2V0QnlUZXN0SWQoXCJzdGFydC12aWRlby1jYWxsXCIpKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5zdGFydENhbGwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJ0ZXN0LW1hdGNoXCIsXG4gICAgICBcInZpZGVvXCIsXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgaGFuZGxlIGNhbGwgc3RhcnQgZmFpbHVyZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2Uuc3RhcnRDYWxsLm1vY2tSZXNvbHZlZFZhbHVlKGZhbHNlKTtcblxuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgZmlyZUV2ZW50LnByZXNzKGdldEJ5VGVzdElkKFwic3RhcnQtdm9pY2UtY2FsbFwiKSk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJFcnJvclwiLFxuICAgICAgXCJGYWlsZWQgdG8gc3RhcnQgY2FsbC4gUGxlYXNlIGNoZWNrIHlvdXIgcGVybWlzc2lvbnMgYW5kIHRyeSBhZ2Fpbi5cIixcbiAgICApO1xuICB9KTtcblxuICBpdChcInNob3VsZCBlbmQgY2FsbFwiLCAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgIGZpcmVFdmVudC5wcmVzcyhnZXRCeVRlc3RJZChcImVuZC1jYWxsXCIpKTtcblxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5lbmRDYWxsKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGNoZWNrIGlmIGNhbGwgaXMgYWN0aXZlXCIsICgpID0+IHtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5pc0NhbGxBY3RpdmUubW9ja1JldHVyblZhbHVlKHRydWUpO1xuXG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgIGV4cGVjdChnZXRCeVRlc3RJZChcImNhbGwtYWN0aXZlXCIpKS50b0hhdmVUZXh0Q29udGVudChcIkFjdGl2ZVwiKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFTQUEsV0FBQSxHQUFLQyxJQUFJLGtDQUFrQyxDQUFDO0FBQzVDRCxXQUFBLEdBQUtDLElBQUksMkJBQTJCLENBQUM7QUFFckNELFdBQUEsR0FBS0MsSUFBSSxDQUFDLGNBQWMsRUFBRTtFQUFBLE9BQU87SUFDL0JDLEtBQUssRUFBRTtNQUNMQyxLQUFLLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFDREMsUUFBUSxFQUFFO01BQ1JDLGdCQUFnQixFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBQztRQUFBLE9BQU87VUFBRUcsTUFBTSxFQUFFSixJQUFJLENBQUNDLEVBQUUsQ0FBQztRQUFFLENBQUM7TUFBQSxDQUFDO0lBQ3pEO0VBQ0YsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUFDLElBQUFJLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxrQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBbkJKLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLGFBQUEsR0FBQUosT0FBQTtBQUVBLElBQUFLLFVBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLGNBQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLFlBQUEsR0FBQUMsdUJBQUEsQ0FBQVIsT0FBQTtBQUE2RCxJQUFBUyxXQUFBLEdBQUFULE9BQUE7QUFBQSxTQUFBUSx3QkFBQUUsQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUosdUJBQUEsWUFBQUEsd0JBQUFFLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEs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