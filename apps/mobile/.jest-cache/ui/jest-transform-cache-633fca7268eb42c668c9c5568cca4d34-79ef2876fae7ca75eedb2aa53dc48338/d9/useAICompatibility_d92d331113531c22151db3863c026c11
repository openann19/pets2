1e9b3f2f9b60190bf514e88a06d44fd3
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useAICompatibility = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _core = require("@pawfectmatch/core");
var _api = require("../../../services/api");
var useAICompatibility = exports.useAICompatibility = function useAICompatibility() {
  var _useState = (0, _react.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    isAnalyzing = _useState2[0],
    setIsAnalyzing = _useState2[1];
  var _useState3 = (0, _react.useState)(null),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    compatibilityResult = _useState4[0],
    setCompatibilityResult = _useState4[1];
  var _useState5 = (0, _react.useState)(null),
    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
    error = _useState6[0],
    setError = _useState6[1];
  var _useState7 = (0, _react.useState)([]),
    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),
    availablePets = _useState8[0],
    setAvailablePets = _useState8[1];
  var _useState9 = (0, _react.useState)(false),
    _useState0 = (0, _slicedToArray2.default)(_useState9, 2),
    isLoadingPets = _useState0[0],
    setIsLoadingPets = _useState0[1];
  var _useState1 = (0, _react.useState)(null),
    _useState10 = (0, _slicedToArray2.default)(_useState1, 2),
    selectedPet1 = _useState10[0],
    setSelectedPet1 = _useState10[1];
  var _useState11 = (0, _react.useState)(null),
    _useState12 = (0, _slicedToArray2.default)(_useState11, 2),
    selectedPet2 = _useState12[0],
    setSelectedPet2 = _useState12[1];
  var loadAvailablePets = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    try {
      setIsLoadingPets(true);
      setError(null);
      var pets = yield _api.matchesAPI.getPets();
      var filteredPets = pets.filter(function (pet) {
        return true;
      });
      setAvailablePets(filteredPets);
      _core.logger.info("Available pets loaded", {
        count: filteredPets.length
      });
      return filteredPets;
    } catch (err) {
      var errorMessage = "Failed to load pets. Please try again.";
      setError(errorMessage);
      _core.logger.error("Error loading pets", {
        error: err
      });
      throw new Error(errorMessage);
    } finally {
      setIsLoadingPets(false);
    }
  }), []);
  var analyzeCompatibility = (0, _react.useCallback)(function () {
    var _ref2 = (0, _asyncToGenerator2.default)(function* (pet1Id, pet2Id) {
      if (!pet1Id || !pet2Id) {
        var errorMsg = "Please select two pets to analyze compatibility.";
        setError(errorMsg);
        throw new Error(errorMsg);
      }
      if (pet1Id === pet2Id) {
        var _errorMsg = "Please select two different pets.";
        setError(_errorMsg);
        throw new Error(_errorMsg);
      }
      setIsAnalyzing(true);
      setError(null);
      try {
        var result = yield _api.api.ai.analyzeCompatibility({
          pet1Id: pet1Id,
          pet2Id: pet2Id
        });
        setCompatibilityResult(result);
        _core.logger.info("Compatibility analysis completed", {
          pet1Id: pet1Id,
          pet2Id: pet2Id,
          score: result.compatibility_score
        });
        return result;
      } catch (err) {
        var errorMessage = err instanceof Error ? err.message : "Failed to analyze compatibility. Please try again.";
        setError(errorMessage);
        _core.logger.error("Compatibility analysis error", {
          error: err,
          pet1Id: pet1Id,
          pet2Id: pet2Id
        });
        var mockResult = {
          compatibility_score: 85,
          ai_analysis: "These pets show excellent compatibility! Both are energetic and social, making them perfect playmates.",
          breakdown: {
            personality_compatibility: 90,
            lifestyle_compatibility: 85,
            activity_compatibility: 88,
            social_compatibility: 82,
            environment_compatibility: 86
          },
          recommendations: {
            meeting_suggestions: ["Introduce them in a neutral outdoor space", "Keep initial meetings short (15-20 minutes)", "Have both owners present for supervision"],
            activity_recommendations: ["Daily walks together", "Joint play sessions in the park", "Shared grooming sessions"],
            supervision_requirements: ["Monitor for signs of stress", "Separate if either shows discomfort", "Gradually increase interaction time"],
            success_probability: 85
          }
        };
        setCompatibilityResult(mockResult);
        _core.logger.info("Using mock compatibility result");
        return mockResult;
      } finally {
        setIsAnalyzing(false);
      }
    });
    return function (_x, _x2) {
      return _ref2.apply(this, arguments);
    };
  }(), []);
  var resetAnalysis = (0, _react.useCallback)(function () {
    setSelectedPet1(null);
    setSelectedPet2(null);
    setCompatibilityResult(null);
    setError(null);
  }, []);
  var clearError = (0, _react.useCallback)(function () {
    setError(null);
  }, []);
  return {
    analyzeCompatibility: analyzeCompatibility,
    isAnalyzing: isAnalyzing,
    compatibilityResult: compatibilityResult,
    error: error,
    clearError: clearError,
    resetAnalysis: resetAnalysis,
    loadAvailablePets: loadAvailablePets,
    availablePets: availablePets,
    isLoadingPets: isLoadingPets,
    selectedPet1: selectedPet1,
    selectedPet2: selectedPet2,
    setSelectedPet1: setSelectedPet1,
    setSelectedPet2: setSelectedPet2
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2NvcmUiLCJfYXBpIiwidXNlQUlDb21wYXRpYmlsaXR5IiwiZXhwb3J0cyIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJpc0FuYWx5emluZyIsInNldElzQW5hbHl6aW5nIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJjb21wYXRpYmlsaXR5UmVzdWx0Iiwic2V0Q29tcGF0aWJpbGl0eVJlc3VsdCIsIl91c2VTdGF0ZTUiLCJfdXNlU3RhdGU2IiwiZXJyb3IiLCJzZXRFcnJvciIsIl91c2VTdGF0ZTciLCJfdXNlU3RhdGU4IiwiYXZhaWxhYmxlUGV0cyIsInNldEF2YWlsYWJsZVBldHMiLCJfdXNlU3RhdGU5IiwiX3VzZVN0YXRlMCIsImlzTG9hZGluZ1BldHMiLCJzZXRJc0xvYWRpbmdQZXRzIiwiX3VzZVN0YXRlMSIsIl91c2VTdGF0ZTEwIiwic2VsZWN0ZWRQZXQxIiwic2V0U2VsZWN0ZWRQZXQxIiwiX3VzZVN0YXRlMTEiLCJfdXNlU3RhdGUxMiIsInNlbGVjdGVkUGV0MiIsInNldFNlbGVjdGVkUGV0MiIsImxvYWRBdmFpbGFibGVQZXRzIiwidXNlQ2FsbGJhY2siLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJwZXRzIiwibWF0Y2hlc0FQSSIsImdldFBldHMiLCJmaWx0ZXJlZFBldHMiLCJmaWx0ZXIiLCJwZXQiLCJsb2dnZXIiLCJpbmZvIiwiY291bnQiLCJsZW5ndGgiLCJlcnIiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsImFuYWx5emVDb21wYXRpYmlsaXR5IiwiX3JlZjIiLCJwZXQxSWQiLCJwZXQySWQiLCJlcnJvck1zZyIsInJlc3VsdCIsImFwaSIsImFpIiwic2NvcmUiLCJjb21wYXRpYmlsaXR5X3Njb3JlIiwibWVzc2FnZSIsIm1vY2tSZXN1bHQiLCJhaV9hbmFseXNpcyIsImJyZWFrZG93biIsInBlcnNvbmFsaXR5X2NvbXBhdGliaWxpdHkiLCJsaWZlc3R5bGVfY29tcGF0aWJpbGl0eSIsImFjdGl2aXR5X2NvbXBhdGliaWxpdHkiLCJzb2NpYWxfY29tcGF0aWJpbGl0eSIsImVudmlyb25tZW50X2NvbXBhdGliaWxpdHkiLCJyZWNvbW1lbmRhdGlvbnMiLCJtZWV0aW5nX3N1Z2dlc3Rpb25zIiwiYWN0aXZpdHlfcmVjb21tZW5kYXRpb25zIiwic3VwZXJ2aXNpb25fcmVxdWlyZW1lbnRzIiwic3VjY2Vzc19wcm9iYWJpbGl0eSIsIl94IiwiX3gyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJyZXNldEFuYWx5c2lzIiwiY2xlYXJFcnJvciJdLCJzb3VyY2VzIjpbInVzZUFJQ29tcGF0aWJpbGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIHVzZUFJQ29tcGF0aWJpbGl0eSBIb29rXG4gKiBNYW5hZ2VzIEFJLXBvd2VyZWQgcGV0IGNvbXBhdGliaWxpdHkgYW5hbHlzaXNcbiAqL1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBbGVydCB9IGZyb20gXCJyZWFjdC1uYXRpdmVcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAcGF3ZmVjdG1hdGNoL2NvcmVcIjtcbmltcG9ydCB7IGFwaSwgbWF0Y2hlc0FQSSB9IGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9hcGlcIjtcblxuaW50ZXJmYWNlIFBldCB7XG4gIF9pZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHBob3Rvczogc3RyaW5nW107XG4gIGJyZWVkOiBzdHJpbmc7XG4gIGFnZTogbnVtYmVyO1xuICBzcGVjaWVzOiBzdHJpbmc7XG4gIG93bmVyOiB7XG4gICAgX2lkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgQ29tcGF0aWJpbGl0eVJlc3VsdCB7XG4gIGNvbXBhdGliaWxpdHlfc2NvcmU6IG51bWJlcjtcbiAgYWlfYW5hbHlzaXM6IHN0cmluZztcbiAgYnJlYWtkb3duOiB7XG4gICAgcGVyc29uYWxpdHlfY29tcGF0aWJpbGl0eTogbnVtYmVyO1xuICAgIGxpZmVzdHlsZV9jb21wYXRpYmlsaXR5OiBudW1iZXI7XG4gICAgYWN0aXZpdHlfY29tcGF0aWJpbGl0eTogbnVtYmVyO1xuICAgIHNvY2lhbF9jb21wYXRpYmlsaXR5OiBudW1iZXI7XG4gICAgZW52aXJvbm1lbnRfY29tcGF0aWJpbGl0eTogbnVtYmVyO1xuICB9O1xuICByZWNvbW1lbmRhdGlvbnM6IHtcbiAgICBtZWV0aW5nX3N1Z2dlc3Rpb25zOiBzdHJpbmdbXTtcbiAgICBhY3Rpdml0eV9yZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICAgIHN1cGVydmlzaW9uX3JlcXVpcmVtZW50czogc3RyaW5nW107XG4gICAgc3VjY2Vzc19wcm9iYWJpbGl0eTogbnVtYmVyO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgVXNlQUlDb21wYXRpYmlsaXR5UmV0dXJuIHtcbiAgYW5hbHl6ZUNvbXBhdGliaWxpdHk6IChcbiAgICBwZXQxSWQ6IHN0cmluZyxcbiAgICBwZXQySWQ6IHN0cmluZyxcbiAgKSA9PiBQcm9taXNlPENvbXBhdGliaWxpdHlSZXN1bHQ+O1xuICBpc0FuYWx5emluZzogYm9vbGVhbjtcbiAgY29tcGF0aWJpbGl0eVJlc3VsdDogQ29tcGF0aWJpbGl0eVJlc3VsdCB8IG51bGw7XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xuICBjbGVhckVycm9yOiAoKSA9PiB2b2lkO1xuICByZXNldEFuYWx5c2lzOiAoKSA9PiB2b2lkO1xuICBsb2FkQXZhaWxhYmxlUGV0czogKCkgPT4gUHJvbWlzZTxQZXRbXT47XG4gIGF2YWlsYWJsZVBldHM6IFBldFtdO1xuICBpc0xvYWRpbmdQZXRzOiBib29sZWFuO1xuICBzZWxlY3RlZFBldDE6IFBldCB8IG51bGw7XG4gIHNlbGVjdGVkUGV0MjogUGV0IHwgbnVsbDtcbiAgc2V0U2VsZWN0ZWRQZXQxOiAocGV0OiBQZXQgfCBudWxsKSA9PiB2b2lkO1xuICBzZXRTZWxlY3RlZFBldDI6IChwZXQ6IFBldCB8IG51bGwpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCB1c2VBSUNvbXBhdGliaWxpdHkgPSAoKTogVXNlQUlDb21wYXRpYmlsaXR5UmV0dXJuID0+IHtcbiAgY29uc3QgW2lzQW5hbHl6aW5nLCBzZXRJc0FuYWx5emluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjb21wYXRpYmlsaXR5UmVzdWx0LCBzZXRDb21wYXRpYmlsaXR5UmVzdWx0XSA9XG4gICAgdXNlU3RhdGU8Q29tcGF0aWJpbGl0eVJlc3VsdCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYXZhaWxhYmxlUGV0cywgc2V0QXZhaWxhYmxlUGV0c10gPSB1c2VTdGF0ZTxQZXRbXT4oW10pO1xuICBjb25zdCBbaXNMb2FkaW5nUGV0cywgc2V0SXNMb2FkaW5nUGV0c10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFBldDEsIHNldFNlbGVjdGVkUGV0MV0gPSB1c2VTdGF0ZTxQZXQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkUGV0Miwgc2V0U2VsZWN0ZWRQZXQyXSA9IHVzZVN0YXRlPFBldCB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGxvYWRBdmFpbGFibGVQZXRzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCk6IFByb21pc2U8UGV0W10+ID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNMb2FkaW5nUGV0cyh0cnVlKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgICBjb25zdCBwZXRzID0gYXdhaXQgbWF0Y2hlc0FQSS5nZXRQZXRzKCk7XG5cbiAgICAgIC8vIEZpbHRlciBvdXQgY3VycmVudCB1c2VyJ3MgcGV0cyAoc2ltcGxpZmllZCAtIGluIHJlYWwgYXBwIHlvdSdkIGdldCBjdXJyZW50IHVzZXIpXG4gICAgICBjb25zdCBmaWx0ZXJlZFBldHMgPSBwZXRzLmZpbHRlcigocGV0KSA9PiB7XG4gICAgICAgIC8vIFRoaXMgd291bGQgbm9ybWFsbHkgZmlsdGVyIG91dCB1c2VyJ3Mgb3duIHBldHNcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZvciBkZW1vIHB1cnBvc2VzLCBzaG93IGFsbFxuICAgICAgfSk7XG5cbiAgICAgIHNldEF2YWlsYWJsZVBldHMoZmlsdGVyZWRQZXRzIGFzIHVua25vd24gYXMgUGV0W10pO1xuXG4gICAgICBsb2dnZXIuaW5mbyhcIkF2YWlsYWJsZSBwZXRzIGxvYWRlZFwiLCB7IGNvdW50OiBmaWx0ZXJlZFBldHMubGVuZ3RoIH0pO1xuICAgICAgcmV0dXJuIGZpbHRlcmVkUGV0cyBhcyB1bmtub3duIGFzIFBldFtdO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gXCJGYWlsZWQgdG8gbG9hZCBwZXRzLiBQbGVhc2UgdHJ5IGFnYWluLlwiO1xuICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGxvYWRpbmcgcGV0c1wiLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nUGV0cyhmYWxzZSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgY29uc3QgYW5hbHl6ZUNvbXBhdGliaWxpdHkgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAocGV0MUlkOiBzdHJpbmcsIHBldDJJZDogc3RyaW5nKTogUHJvbWlzZTxDb21wYXRpYmlsaXR5UmVzdWx0PiA9PiB7XG4gICAgICBpZiAoIXBldDFJZCB8fCAhcGV0MklkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gXCJQbGVhc2Ugc2VsZWN0IHR3byBwZXRzIHRvIGFuYWx5emUgY29tcGF0aWJpbGl0eS5cIjtcbiAgICAgICAgc2V0RXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGV0MUlkID09PSBwZXQySWQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBcIlBsZWFzZSBzZWxlY3QgdHdvIGRpZmZlcmVudCBwZXRzLlwiO1xuICAgICAgICBzZXRFcnJvcihlcnJvck1zZyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgICB9XG5cbiAgICAgIHNldElzQW5hbHl6aW5nKHRydWUpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5haS5hbmFseXplQ29tcGF0aWJpbGl0eSh7XG4gICAgICAgICAgcGV0MUlkLFxuICAgICAgICAgIHBldDJJZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0Q29tcGF0aWJpbGl0eVJlc3VsdChyZXN1bHQpO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKFwiQ29tcGF0aWJpbGl0eSBhbmFseXNpcyBjb21wbGV0ZWRcIiwge1xuICAgICAgICAgIHBldDFJZCxcbiAgICAgICAgICBwZXQySWQsXG4gICAgICAgICAgc2NvcmU6IHJlc3VsdC5jb21wYXRpYmlsaXR5X3Njb3JlLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgICAgZXJyIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgID8gZXJyLm1lc3NhZ2VcbiAgICAgICAgICAgIDogXCJGYWlsZWQgdG8gYW5hbHl6ZSBjb21wYXRpYmlsaXR5LiBQbGVhc2UgdHJ5IGFnYWluLlwiO1xuICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJDb21wYXRpYmlsaXR5IGFuYWx5c2lzIGVycm9yXCIsIHtcbiAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgIHBldDFJZCxcbiAgICAgICAgICBwZXQySWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZvciBkZW1vIHB1cnBvc2VzLCByZXR1cm4gYSBtb2NrIHJlc3VsdFxuICAgICAgICBjb25zdCBtb2NrUmVzdWx0OiBDb21wYXRpYmlsaXR5UmVzdWx0ID0ge1xuICAgICAgICAgIGNvbXBhdGliaWxpdHlfc2NvcmU6IDg1LFxuICAgICAgICAgIGFpX2FuYWx5c2lzOlxuICAgICAgICAgICAgXCJUaGVzZSBwZXRzIHNob3cgZXhjZWxsZW50IGNvbXBhdGliaWxpdHkhIEJvdGggYXJlIGVuZXJnZXRpYyBhbmQgc29jaWFsLCBtYWtpbmcgdGhlbSBwZXJmZWN0IHBsYXltYXRlcy5cIixcbiAgICAgICAgICBicmVha2Rvd246IHtcbiAgICAgICAgICAgIHBlcnNvbmFsaXR5X2NvbXBhdGliaWxpdHk6IDkwLFxuICAgICAgICAgICAgbGlmZXN0eWxlX2NvbXBhdGliaWxpdHk6IDg1LFxuICAgICAgICAgICAgYWN0aXZpdHlfY29tcGF0aWJpbGl0eTogODgsXG4gICAgICAgICAgICBzb2NpYWxfY29tcGF0aWJpbGl0eTogODIsXG4gICAgICAgICAgICBlbnZpcm9ubWVudF9jb21wYXRpYmlsaXR5OiA4NixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uczoge1xuICAgICAgICAgICAgbWVldGluZ19zdWdnZXN0aW9uczogW1xuICAgICAgICAgICAgICBcIkludHJvZHVjZSB0aGVtIGluIGEgbmV1dHJhbCBvdXRkb29yIHNwYWNlXCIsXG4gICAgICAgICAgICAgIFwiS2VlcCBpbml0aWFsIG1lZXRpbmdzIHNob3J0ICgxNS0yMCBtaW51dGVzKVwiLFxuICAgICAgICAgICAgICBcIkhhdmUgYm90aCBvd25lcnMgcHJlc2VudCBmb3Igc3VwZXJ2aXNpb25cIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhY3Rpdml0eV9yZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgICAgICAgICAgXCJEYWlseSB3YWxrcyB0b2dldGhlclwiLFxuICAgICAgICAgICAgICBcIkpvaW50IHBsYXkgc2Vzc2lvbnMgaW4gdGhlIHBhcmtcIixcbiAgICAgICAgICAgICAgXCJTaGFyZWQgZ3Jvb21pbmcgc2Vzc2lvbnNcIixcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzdXBlcnZpc2lvbl9yZXF1aXJlbWVudHM6IFtcbiAgICAgICAgICAgICAgXCJNb25pdG9yIGZvciBzaWducyBvZiBzdHJlc3NcIixcbiAgICAgICAgICAgICAgXCJTZXBhcmF0ZSBpZiBlaXRoZXIgc2hvd3MgZGlzY29tZm9ydFwiLFxuICAgICAgICAgICAgICBcIkdyYWR1YWxseSBpbmNyZWFzZSBpbnRlcmFjdGlvbiB0aW1lXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3VjY2Vzc19wcm9iYWJpbGl0eTogODUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBzZXRDb21wYXRpYmlsaXR5UmVzdWx0KG1vY2tSZXN1bHQpO1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlVzaW5nIG1vY2sgY29tcGF0aWJpbGl0eSByZXN1bHRcIik7XG4gICAgICAgIHJldHVybiBtb2NrUmVzdWx0O1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW10sXG4gICk7XG5cbiAgY29uc3QgcmVzZXRBbmFseXNpcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRTZWxlY3RlZFBldDEobnVsbCk7XG4gICAgc2V0U2VsZWN0ZWRQZXQyKG51bGwpO1xuICAgIHNldENvbXBhdGliaWxpdHlSZXN1bHQobnVsbCk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjbGVhckVycm9yID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEVycm9yKG51bGwpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbmFseXplQ29tcGF0aWJpbGl0eSxcbiAgICBpc0FuYWx5emluZyxcbiAgICBjb21wYXRpYmlsaXR5UmVzdWx0LFxuICAgIGVycm9yLFxuICAgIGNsZWFyRXJyb3IsXG4gICAgcmVzZXRBbmFseXNpcyxcbiAgICBsb2FkQXZhaWxhYmxlUGV0cyxcbiAgICBhdmFpbGFibGVQZXRzLFxuICAgIGlzTG9hZGluZ1BldHMsXG4gICAgc2VsZWN0ZWRQZXQxLFxuICAgIHNlbGVjdGVkUGV0MixcbiAgICBzZXRTZWxlY3RlZFBldDEsXG4gICAgc2V0U2VsZWN0ZWRQZXQyLFxuICB9O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBSUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBRUEsSUFBQUMsS0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsSUFBQSxHQUFBRixPQUFBO0FBb0RPLElBQU1HLGtCQUFrQixHQUFBQyxPQUFBLENBQUFELGtCQUFBLEdBQUcsU0FBckJBLGtCQUFrQkEsQ0FBQSxFQUFtQztFQUNoRSxJQUFBRSxTQUFBLEdBQXNDLElBQUFDLGVBQVEsRUFBQyxLQUFLLENBQUM7SUFBQUMsVUFBQSxPQUFBQyxlQUFBLENBQUFDLE9BQUEsRUFBQUosU0FBQTtJQUE5Q0ssV0FBVyxHQUFBSCxVQUFBO0lBQUVJLGNBQWMsR0FBQUosVUFBQTtFQUNsQyxJQUFBSyxVQUFBLEdBQ0UsSUFBQU4sZUFBUSxFQUE2QixJQUFJLENBQUM7SUFBQU8sVUFBQSxPQUFBTCxlQUFBLENBQUFDLE9BQUEsRUFBQUcsVUFBQTtJQURyQ0UsbUJBQW1CLEdBQUFELFVBQUE7SUFBRUUsc0JBQXNCLEdBQUFGLFVBQUE7RUFFbEQsSUFBQUcsVUFBQSxHQUEwQixJQUFBVixlQUFRLEVBQWdCLElBQUksQ0FBQztJQUFBVyxVQUFBLE9BQUFULGVBQUEsQ0FBQUMsT0FBQSxFQUFBTyxVQUFBO0lBQWhERSxLQUFLLEdBQUFE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