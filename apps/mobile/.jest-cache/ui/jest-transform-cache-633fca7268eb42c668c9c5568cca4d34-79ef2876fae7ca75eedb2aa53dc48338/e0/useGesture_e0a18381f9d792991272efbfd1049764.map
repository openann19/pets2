{"version":3,"names":["Object","defineProperty","exports","value","useGesture","react_1","require","environment_1","onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","startPos","useRef","x","y","time","currentPos","lastPos","handleTouchStart","useCallback","e","touches","length","touch","current","clientX","clientY","Date","now","handleTouchMove","handleTouchEnd","_e","deltaTime","deltaX","deltaY","distance","Math","sqrt","abs","useEffect","element","getDocumentElement","undefined","addEventListenerSafely","removeEventListenerSafely"],"sources":["useGesture.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGesture = useGesture;\nconst react_1 = require(\"react\");\nconst environment_1 = require(\"../utils/environment\");\nfunction useGesture(onSwipeLeft, onSwipeRight, onSwipeUp, onSwipeDown) {\n    const startPos = (0, react_1.useRef)({ x: 0, y: 0, time: 0 });\n    const currentPos = (0, react_1.useRef)({ x: 0, y: 0, time: 0 });\n    const lastPos = (0, react_1.useRef)({ x: 0, y: 0, time: 0 });\n    const handleTouchStart = (0, react_1.useCallback)((e) => {\n        if (e.touches.length > 0) {\n            const touch = e.touches[0];\n            if (touch != null) {\n                startPos.current = { x: touch.clientX, y: touch.clientY, time: Date.now() };\n                currentPos.current = { x: touch.clientX, y: touch.clientY, time: Date.now() };\n                lastPos.current = { x: touch.clientX, y: touch.clientY, time: Date.now() };\n            }\n        }\n    }, []);\n    const handleTouchMove = (0, react_1.useCallback)((e) => {\n        if (e.touches.length > 0) {\n            const touch = e.touches[0];\n            if (touch != null) {\n                lastPos.current = currentPos.current;\n                currentPos.current = { x: touch.clientX, y: touch.clientY, time: Date.now() };\n            }\n        }\n    }, []);\n    const handleTouchEnd = (0, react_1.useCallback)((_e) => {\n        const now = Date.now();\n        const deltaTime = now - startPos.current.time;\n        // Only consider swipes that are quick enough (under 300ms)\n        if (deltaTime > 300)\n            return;\n        const deltaX = currentPos.current.x - startPos.current.x;\n        const deltaY = currentPos.current.y - startPos.current.y;\n        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        // Only consider significant movements (over 50px)\n        if (distance < 50)\n            return;\n        // Determine primary direction\n        if (Math.abs(deltaX) > Math.abs(deltaY)) {\n            // Horizontal swipe\n            if (deltaX > 0 && onSwipeRight != null) {\n                onSwipeRight();\n            }\n            else if (deltaX < 0 && onSwipeLeft != null) {\n                onSwipeLeft();\n            }\n        }\n        else {\n            // Vertical swipe\n            if (deltaY > 0 && onSwipeDown != null) {\n                onSwipeDown();\n            }\n            else if (deltaY < 0 && onSwipeUp != null) {\n                onSwipeUp();\n            }\n        }\n    }, [onSwipeLeft, onSwipeRight, onSwipeUp, onSwipeDown]);\n    (0, react_1.useEffect)(() => {\n        const element = (0, environment_1.getDocumentElement)();\n        if (element == null) {\n            return undefined;\n        }\n        (0, environment_1.addEventListenerSafely)(element, 'touchstart', handleTouchStart);\n        (0, environment_1.addEventListenerSafely)(element, 'touchmove', handleTouchMove);\n        (0, environment_1.addEventListenerSafely)(element, 'touchend', handleTouchEnd);\n        return () => {\n            (0, environment_1.removeEventListenerSafely)(element, 'touchstart', handleTouchStart);\n            (0, environment_1.removeEventListenerSafely)(element, 'touchmove', handleTouchMove);\n            (0, environment_1.removeEventListenerSafely)(element, 'touchend', handleTouchEnd);\n        };\n    }, [handleTouchStart, handleTouchMove, handleTouchEnd]);\n    return {\n        handleTouchStart,\n        handleTouchMove,\n        handleTouchEnd\n    };\n}\n"],"mappings":"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","ignoreList":[]}