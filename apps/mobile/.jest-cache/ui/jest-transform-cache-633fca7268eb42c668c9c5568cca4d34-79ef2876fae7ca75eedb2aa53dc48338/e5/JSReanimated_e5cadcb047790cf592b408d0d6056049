6090508a34519bc31f9b5f252f1319ac
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Platform = void 0;
exports.createJSReanimatedModule = createJSReanimatedModule;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _commonTypes = require("../../commonTypes");
var _errors = require("../../errors");
var _logger = require("../../logger");
var _mockedRequestAnimationFrame = require("../../mockedRequestAnimationFrame");
var _PlatformChecker = require("../../PlatformChecker");
var _worklets = require("../../worklets");
function createJSReanimatedModule() {
  return new JSReanimated();
}
var requestAnimationFrameImpl = (0, _PlatformChecker.isJest)() || !globalThis.requestAnimationFrame ? _mockedRequestAnimationFrame.mockedRequestAnimationFrame : globalThis.requestAnimationFrame;
var _workletsModule = (0, _classPrivateFieldLooseKey2.default)("workletsModule");
var JSReanimated = function () {
  function JSReanimated() {
    var _this = this;
    (0, _classCallCheck2.default)(this, JSReanimated);
    Object.defineProperty(this, _workletsModule, {
      writable: true,
      value: _worklets.WorkletsModule
    });
    this.nextSensorId = 0;
    this.sensors = new Map();
    this.platform = undefined;
    this.getSensorCallback = function (sensor, sensorType, eventHandler) {
      switch (sensorType) {
        case _commonTypes.SensorType.ACCELEROMETER:
        case _commonTypes.SensorType.GRAVITY:
          return function () {
            var x = sensor.x,
              y = sensor.y,
              z = sensor.z;
            if (_this.platform === Platform.WEB_ANDROID) {
              var _ref = [-x, -y, -z];
              x = _ref[0];
              y = _ref[1];
              z = _ref[2];
            }
            eventHandler({
              x: x,
              y: y,
              z: z,
              interfaceOrientation: 0
            });
          };
        case _commonTypes.SensorType.GYROSCOPE:
        case _commonTypes.SensorType.MAGNETIC_FIELD:
          return function () {
            var x = sensor.x,
              y = sensor.y,
              z = sensor.z;
            eventHandler({
              x: x,
              y: y,
              z: z,
              interfaceOrientation: 0
            });
          };
        case _commonTypes.SensorType.ROTATION:
          return function () {
            var _sensor$quaternion = (0, _slicedToArray2.default)(sensor.quaternion, 4),
              qw = _sensor$quaternion[0],
              qx = _sensor$quaternion[1],
              qy = _sensor$quaternion[2],
              qz = _sensor$quaternion[3];
            if (_this.platform === Platform.WEB_ANDROID) {
              var _ref2 = [qz, -qy];
              qy = _ref2[0];
              qz = _ref2[1];
            }
            var yaw = -Math.atan2(2.0 * (qy * qz + qw * qx), qw * qw - qx * qx - qy * qy + qz * qz);
            var pitch = Math.sin(-2.0 * (qx * qz - qw * qy));
            var roll = -Math.atan2(2.0 * (qx * qy + qw * qz), qw * qw + qx * qx - qy * qy - qz * qz);
            eventHandler({
              qw: qw,
              qx: qx,
              qy: qy,
              qz: qz,
              yaw: yaw,
              pitch: pitch,
              roll: roll,
              interfaceOrientation: 0
            });
          };
      }
    };
  }
  return (0, _createClass2.default)(JSReanimated, [{
    key: "scheduleOnUI",
    value: function scheduleOnUI(worklet) {
      requestAnimationFrameImpl(worklet);
    }
  }, {
    key: "createWorkletRuntime",
    value: function createWorkletRuntime(_name, _initializer) {
      throw new _errors.ReanimatedError('createWorkletRuntime is not available in JSReanimated.');
    }
  }, {
    key: "scheduleOnRuntime",
    value: function scheduleOnRuntime() {
      throw new _errors.ReanimatedError('scheduleOnRuntime is not available in JSReanimated.');
    }
  }, {
    key: "registerEventHandler",
    value: function registerEventHandler(_eventHandler, _eventName, _emitterReactTag) {
      throw new _errors.ReanimatedError('registerEventHandler is not available in JSReanimated.');
    }
  }, {
    key: "unregisterEventHandler",
    value: function unregisterEventHandler(_) {
      throw new _errors.ReanimatedError('unregisterEventHandler is not available in JSReanimated.');
    }
  }, {
    key: "enableLayoutAnimations",
    value: function enableLayoutAnimations() {
      if ((0, _PlatformChecker.isWeb)()) {
        _logger.logger.warn('Layout Animations are not supported on web yet.');
      } else if ((0, _PlatformChecker.isJest)()) {
        _logger.logger.warn('Layout Animations are no-ops when using Jest.');
      } else if ((0, _PlatformChecker.isChromeDebugger)()) {
        _logger.logger.warn('Layout Animations are no-ops when using Chrome Debugger.');
      } else {
        _logger.logger.warn('Layout Animations are not supported on this configuration.');
      }
    }
  }, {
    key: "configureLayoutAnimationBatch",
    value: function configureLayoutAnimationBatch() {}
  }, {
    key: "setShouldAnimateExitingForTag",
    value: function setShouldAnimateExitingForTag() {}
  }, {
    key: "registerSensor",
    value: function registerSensor(sensorType, interval, _iosReferenceFrame, eventHandler) {
      if (!(0, _PlatformChecker.isWindowAvailable)()) {
        return -1;
      }
      if (this.platform === undefined) {
        this.detectPlatform();
      }
      if (!(this.getSensorName(sensorType) in window)) {
        _logger.logger.warn('Sensor is not available.' + ((0, _PlatformChecker.isWeb)() && location.protocol !== 'https:' ? ' Make sure you use secure origin with `npx expo start --web --https`.' : '') + (this.platform === Platform.WEB_IOS ? ' For iOS web, you will also have to also grant permission in the browser: https://dev.to/li/how-to-requestpermission-for-devicemotion-and-deviceorientation-events-in-ios-13-46g2.' : ''));
        return -1;
      }
      if (this.platform === undefined) {
        this.detectPlatform();
      }
      var sensor = this.initializeSensor(sensorType, interval);
      sensor.addEventListener('reading', this.getSensorCallback(sensor, sensorType, eventHandler));
      sensor.start();
      this.sensors.set(this.nextSensorId, sensor);
      return this.nextSensorId++;
    }
  }, {
    key: "unregisterSensor",
    value: function unregisterSensor(id) {
      var sensor = this.sensors.get(id);
      if (sensor !== undefined) {
        sensor.stop();
        this.sensors.delete(id);
      }
    }
  }, {
    key: "subscribeForKeyboardEvents",
    value: function subscribeForKeyboardEvents(_) {
      if ((0, _PlatformChecker.isWeb)()) {
        _logger.logger.warn('useAnimatedKeyboard is not available on web yet.');
      } else if ((0, _PlatformChecker.isJest)()) {
        _logger.logger.warn('useAnimatedKeyboard is not available when using Jest.');
      } else if ((0, _PlatformChecker.isChromeDebugger)()) {
        _logger.logger.warn('useAnimatedKeyboard is not available when using Chrome Debugger.');
      } else {
        _logger.logger.warn('useAnimatedKeyboard is not available on this configuration.');
      }
      return -1;
    }
  }, {
    key: "unsubscribeFromKeyboardEvents",
    value: function unsubscribeFromKeyboardEvents(_) {}
  }, {
    key: "initializeSensor",
    value: function initializeSensor(sensorType, interval) {
      var config = interval <= 0 ? {
        referenceFrame: 'device'
      } : {
        frequency: 1000 / interval
      };
      switch (sensorType) {
        case _commonTypes.SensorType.ACCELEROMETER:
          return new window.Accelerometer(config);
        case _commonTypes.SensorType.GYROSCOPE:
          return new window.Gyroscope(config);
        case _commonTypes.SensorType.GRAVITY:
          return new window.GravitySensor(config);
        case _commonTypes.SensorType.MAGNETIC_FIELD:
          return new window.Magnetometer(config);
        case _commonTypes.SensorType.ROTATION:
          return new window.AbsoluteOrientationSensor(config);
      }
    }
  }, {
    key: "getSensorName",
    value: function getSensorName(sensorType) {
      switch (sensorType) {
        case _commonTypes.SensorType.ACCELEROMETER:
          return 'Accelerometer';
        case _commonTypes.SensorType.GRAVITY:
          return 'GravitySensor';
        case _commonTypes.SensorType.GYROSCOPE:
          return 'Gyroscope';
        case _commonTypes.SensorType.MAGNETIC_FIELD:
          return 'Magnetometer';
        case _commonTypes.SensorType.ROTATION:
          return 'AbsoluteOrientationSensor';
      }
    }
  }, {
    key: "detectPlatform",
    value: function detectPlatform() {
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;
      if (userAgent === undefined) {
        this.platform = Platform.UNKNOWN;
      } else if (/iPad|iPhone|iPod/.test(userAgent)) {
        this.platform = Platform.WEB_IOS;
      } else if (/android/i.test(userAgent)) {
        this.platform = Platform.WEB_ANDROID;
      } else {
        this.platform = Platform.WEB;
      }
    }
  }, {
    key: "getViewProp",
    value: function getViewProp(_viewTag, _propName, _component, _callback) {
      throw new _errors.ReanimatedError('getViewProp is not available in JSReanimated.');
    }
  }, {
    key: "configureProps",
    value: function configureProps() {
      throw new _errors.ReanimatedError('configureProps is not available in JSReanimated.');
    }
  }, {
    key: "executeOnUIRuntimeSync",
    value: function executeOnUIRuntimeSync(_shareable) {
      throw new _errors.ReanimatedError('`executeOnUIRuntimeSync` is not available in JSReanimated.');
    }
  }, {
    key: "markNodeAsRemovable",
    value: function markNodeAsRemovable(_shadowNodeWrapper) {
      throw new _errors.ReanimatedError('markNodeAsRemovable is not available in JSReanimated.');
    }
  }, {
    key: "unmarkNodeAsRemovable",
    value: function unmarkNodeAsRemovable(_viewTag) {
      throw new _errors.ReanimatedError('unmarkNodeAsRemovable is not available in JSReanimated.');
    }
  }]);
}();
var Platform = exports.Platform = function (Platform) {
  Platform["WEB_IOS"] = "web iOS";
  Platform["WEB_ANDROID"] = "web Android";
  Platform["WEB"] = "web";
  Platform["UNKNOWN"] = "unknown";
  return Platform;
}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUGxhdGZvcm0iLCJjcmVhdGVKU1JlYW5pbWF0ZWRNb2R1bGUiLCJfc2xpY2VkVG9BcnJheTIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX2NyZWF0ZUNsYXNzMiIsIl9jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5MiIsIl9jb21tb25UeXBlcyIsIl9lcnJvcnMiLCJfbG9nZ2VyIiwiX21vY2tlZFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9QbGF0Zm9ybUNoZWNrZXIiLCJfd29ya2xldHMiLCJKU1JlYW5pbWF0ZWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVJbXBsIiwiaXNKZXN0IiwiZ2xvYmFsVGhpcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1vY2tlZFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl93b3JrbGV0c01vZHVsZSIsImRlZmF1bHQiLCJfdGhpcyIsIndyaXRhYmxlIiwiV29ya2xldHNNb2R1bGUiLCJuZXh0U2Vuc29ySWQiLCJzZW5zb3JzIiwiTWFwIiwicGxhdGZvcm0iLCJ1bmRlZmluZWQiLCJnZXRTZW5zb3JDYWxsYmFjayIsInNlbnNvciIsInNlbnNvclR5cGUiLCJldmVudEhhbmRsZXIiLCJTZW5zb3JUeXBlIiwiQUNDRUxFUk9NRVRFUiIsIkdSQVZJVFkiLCJ4IiwieSIsInoiLCJXRUJfQU5EUk9JRCIsIl9yZWYiLCJpbnRlcmZhY2VPcmllbnRhdGlvbiIsIkdZUk9TQ09QRSIsIk1BR05FVElDX0ZJRUxEIiwiUk9UQVRJT04iLCJfc2Vuc29yJHF1YXRlcm5pb24iLCJxdWF0ZXJuaW9uIiwicXciLCJxeCIsInF5IiwicXoiLCJfcmVmMiIsInlhdyIsIk1hdGgiLCJhdGFuMiIsInBpdGNoIiwic2luIiwicm9sbCIsImtleSIsInNjaGVkdWxlT25VSSIsIndvcmtsZXQiLCJjcmVhdGVXb3JrbGV0UnVudGltZSIsIl9uYW1lIiwiX2luaXRpYWxpemVyIiwiUmVhbmltYXRlZEVycm9yIiwic2NoZWR1bGVPblJ1bnRpbWUiLCJyZWdpc3RlckV2ZW50SGFuZGxlciIsIl9ldmVudEhhbmRsZXIiLCJfZXZlbnROYW1lIiwiX2VtaXR0ZXJSZWFjdFRhZyIsInVucmVnaXN0ZXJFdmVudEhhbmRsZXIiLCJfIiwiZW5hYmxlTGF5b3V0QW5pbWF0aW9ucyIsImlzV2ViIiwibG9nZ2VyIiwid2FybiIsImlzQ2hyb21lRGVidWdnZXIiLCJjb25maWd1cmVMYXlvdXRBbmltYXRpb25CYXRjaCIsInNldFNob3VsZEFuaW1hdGVFeGl0aW5nRm9yVGFnIiwicmVnaXN0ZXJTZW5zb3IiLCJpbnRlcnZhbCIsIl9pb3NSZWZlcmVuY2VGcmFtZSIsImlzV2luZG93QXZhaWxhYmxlIiwiZGV0ZWN0UGxhdGZvcm0iLCJnZXRTZW5zb3JOYW1lIiwid2luZG93IiwibG9jYXRpb24iLCJwcm90b2NvbCIsIldFQl9JT1MiLCJpbml0aWFsaXplU2Vuc29yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXJ0Iiwic2V0IiwidW5yZWdpc3RlclNlbnNvciIsImlkIiwiZ2V0Iiwic3RvcCIsImRlbGV0ZSIsInN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzIiwidW5zdWJzY3JpYmVGcm9tS2V5Ym9hcmRFdmVudHMiLCJjb25maWciLCJyZWZlcmVuY2VGcmFtZSIsImZyZXF1ZW5jeSIsIkFjY2VsZXJvbWV0ZXIiLCJHeXJvc2NvcGUiLCJHcmF2aXR5U2Vuc29yIiwiTWFnbmV0b21ldGVyIiwiQWJzb2x1dGVPcmllbnRhdGlvblNlbnNvciIsInVzZXJBZ2VudCIsIm5hdmlnYXRvciIsInZlbmRvciIsIm9wZXJhIiwiVU5LTk9XTiIsInRlc3QiLCJXRUIiLCJnZXRWaWV3UHJvcCIsIl92aWV3VGFnIiwiX3Byb3BOYW1lIiwiX2NvbXBvbmVudCIsIl9jYWxsYmFjayIsImNvbmZpZ3VyZVByb3BzIiwiZXhlY3V0ZU9uVUlSdW50aW1lU3luYyIsIl9zaGFyZWFibGUiLCJtYXJrTm9kZUFzUmVtb3ZhYmxlIiwiX3NoYWRvd05vZGVXcmFwcGVyIiwidW5tYXJrTm9kZUFzUmVtb3ZhYmxlIl0sInNvdXJjZXMiOlsiSlNSZWFuaW1hdGVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB0eXBlIHtcbiAgSVJlYW5pbWF0ZWRNb2R1bGUsXG4gIElXb3JrbGV0c01vZHVsZSxcbiAgU2hhZG93Tm9kZVdyYXBwZXIsXG4gIFNoYXJlYWJsZVJlZixcbiAgVmFsdWUzRCxcbiAgVmFsdWVSb3RhdGlvbixcbiAgV29ya2xldEZ1bmN0aW9uLFxufSBmcm9tICcuLi8uLi9jb21tb25UeXBlcyc7XG5pbXBvcnQgeyBTZW5zb3JUeXBlIH0gZnJvbSAnLi4vLi4vY29tbW9uVHlwZXMnO1xuaW1wb3J0IHsgUmVhbmltYXRlZEVycm9yIH0gZnJvbSAnLi4vLi4vZXJyb3JzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBtb2NrZWRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfSBmcm9tICcuLi8uLi9tb2NrZWRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnO1xuaW1wb3J0IHtcbiAgaXNDaHJvbWVEZWJ1Z2dlcixcbiAgaXNKZXN0LFxuICBpc1dlYixcbiAgaXNXaW5kb3dBdmFpbGFibGUsXG59IGZyb20gJy4uLy4uL1BsYXRmb3JtQ2hlY2tlcic7XG5pbXBvcnQgdHlwZSB7IFdvcmtsZXRSdW50aW1lIH0gZnJvbSAnLi4vLi4vcnVudGltZXMnO1xuaW1wb3J0IHsgV29ya2xldHNNb2R1bGUgfSBmcm9tICcuLi8uLi93b3JrbGV0cyc7XG5pbXBvcnQgdHlwZSB7IFdlYlNlbnNvciB9IGZyb20gJy4vV2ViU2Vuc29yJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUpTUmVhbmltYXRlZE1vZHVsZSgpOiBJUmVhbmltYXRlZE1vZHVsZSB7XG4gIHJldHVybiBuZXcgSlNSZWFuaW1hdGVkKCk7XG59XG5cbi8vIEluIE5vZGUuanMgZW52aXJvbm1lbnRzIChsaWtlIHdoZW4gc3RhdGljIHJlbmRlcmluZyB3aXRoIEV4cG8gUm91dGVyKVxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGlzIHVuYXZhaWxhYmxlLCBzbyB3ZSB1c2Ugb3VyIG1vY2suXG4vLyBJdCBhbHNvIGhhcyB0byBiZSBtb2NrZWQgZm9yIEplc3QgcHVycG9zZXMgKHNlZSBgaW5pdGlhbGl6ZVVJUnVudGltZWApLlxuY29uc3QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lSW1wbCA9XG4gIGlzSmVzdCgpIHx8ICFnbG9iYWxUaGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgID8gbW9ja2VkUmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgOiBnbG9iYWxUaGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuY2xhc3MgSlNSZWFuaW1hdGVkIGltcGxlbWVudHMgSVJlYW5pbWF0ZWRNb2R1bGUge1xuICAvKipcbiAgICogV2Uga2VlcCB0aGUgaW5zdGFuY2Ugb2YgYFdvcmtsZXRzTW9kdWxlYCBoZXJlIHRvIGtlZXAgY29ycmVjdCBjb3VwbGluZyBvZlxuICAgKiB0aGUgbW9kdWxlcyBhbmQgaW5pdGlhbGl6YXRpb24gb3JkZXIuXG4gICAqL1xuICAjd29ya2xldHNNb2R1bGU6IElXb3JrbGV0c01vZHVsZSA9IFdvcmtsZXRzTW9kdWxlO1xuICBuZXh0U2Vuc29ySWQgPSAwO1xuICBzZW5zb3JzID0gbmV3IE1hcDxudW1iZXIsIFdlYlNlbnNvcj4oKTtcbiAgcGxhdGZvcm0/OiBQbGF0Zm9ybSA9IHVuZGVmaW5lZDtcblxuICBzY2hlZHVsZU9uVUk8VD4od29ya2xldDogU2hhcmVhYmxlUmVmPFQ+KSB7XG4gICAgLy8gQHRzLWlnbm9yZSB3ZWIgaW1wbGVtZW50YXRpb24gaGFzIHN0aWxsIG5vdCBiZWVuIHVwZGF0ZWQgYWZ0ZXIgdGhlIHJld3JpdGUsIHRoaXMgd2lsbCBiZSBhZGRyZXNzZWQgb25jZSB0aGUgd2ViIGltcGxlbWVudGF0aW9uIHVwZGF0ZXMgYXJlIHJlYWR5XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lSW1wbCh3b3JrbGV0KTtcbiAgfVxuXG4gIGNyZWF0ZVdvcmtsZXRSdW50aW1lKFxuICAgIF9uYW1lOiBzdHJpbmcsXG4gICAgX2luaXRpYWxpemVyOiBTaGFyZWFibGVSZWY8KCkgPT4gdm9pZD5cbiAgKTogV29ya2xldFJ1bnRpbWUge1xuICAgIHRocm93IG5ldyBSZWFuaW1hdGVkRXJyb3IoXG4gICAgICAnY3JlYXRlV29ya2xldFJ1bnRpbWUgaXMgbm90IGF2YWlsYWJsZSBpbiBKU1JlYW5pbWF0ZWQuJ1xuICAgICk7XG4gIH1cblxuICBzY2hlZHVsZU9uUnVudGltZSgpIHtcbiAgICB0aHJvdyBuZXcgUmVhbmltYXRlZEVycm9yKFxuICAgICAgJ3NjaGVkdWxlT25SdW50aW1lIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgcmVnaXN0ZXJFdmVudEhhbmRsZXI8VD4oXG4gICAgX2V2ZW50SGFuZGxlcjogU2hhcmVhYmxlUmVmPFQ+LFxuICAgIF9ldmVudE5hbWU6IHN0cmluZyxcbiAgICBfZW1pdHRlclJlYWN0VGFnOiBudW1iZXJcbiAgKTogbnVtYmVyIHtcbiAgICB0aHJvdyBuZXcgUmVhbmltYXRlZEVycm9yKFxuICAgICAgJ3JlZ2lzdGVyRXZlbnRIYW5kbGVyIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgdW5yZWdpc3RlckV2ZW50SGFuZGxlcihfOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgUmVhbmltYXRlZEVycm9yKFxuICAgICAgJ3VucmVnaXN0ZXJFdmVudEhhbmRsZXIgaXMgbm90IGF2YWlsYWJsZSBpbiBKU1JlYW5pbWF0ZWQuJ1xuICAgICk7XG4gIH1cblxuICBlbmFibGVMYXlvdXRBbmltYXRpb25zKCkge1xuICAgIGlmIChpc1dlYigpKSB7XG4gICAgICBsb2dnZXIud2FybignTGF5b3V0IEFuaW1hdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgb24gd2ViIHlldC4nKTtcbiAgICB9IGVsc2UgaWYgKGlzSmVzdCgpKSB7XG4gICAgICBsb2dnZXIud2FybignTGF5b3V0IEFuaW1hdGlvbnMgYXJlIG5vLW9wcyB3aGVuIHVzaW5nIEplc3QuJyk7XG4gICAgfSBlbHNlIGlmIChpc0Nocm9tZURlYnVnZ2VyKCkpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdMYXlvdXQgQW5pbWF0aW9ucyBhcmUgbm8tb3BzIHdoZW4gdXNpbmcgQ2hyb21lIERlYnVnZ2VyLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIud2FybignTGF5b3V0IEFuaW1hdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBjb25maWd1cmF0aW9uLicpO1xuICAgIH1cbiAgfVxuXG4gIGNvbmZpZ3VyZUxheW91dEFuaW1hdGlvbkJhdGNoKCkge1xuICAgIC8vIG5vLW9wXG4gIH1cblxuICBzZXRTaG91bGRBbmltYXRlRXhpdGluZ0ZvclRhZygpIHtcbiAgICAvLyBuby1vcFxuICB9XG5cbiAgcmVnaXN0ZXJTZW5zb3IoXG4gICAgc2Vuc29yVHlwZTogU2Vuc29yVHlwZSxcbiAgICBpbnRlcnZhbDogbnVtYmVyLFxuICAgIF9pb3NSZWZlcmVuY2VGcmFtZTogbnVtYmVyLFxuICAgIGV2ZW50SGFuZGxlcjogU2hhcmVhYmxlUmVmPChkYXRhOiBWYWx1ZTNEIHwgVmFsdWVSb3RhdGlvbikgPT4gdm9pZD5cbiAgKTogbnVtYmVyIHtcbiAgICBpZiAoIWlzV2luZG93QXZhaWxhYmxlKCkpIHtcbiAgICAgIC8vIHRoZSB3aW5kb3cgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIHdoZW4gYnVpbGRpbmcgdGhlIHNlcnZlciBwb3J0aW9uIG9mIGEgc2l0ZSB0aGF0IHVzZXMgU1NHXG4gICAgICAvLyB0aGlzIGNoZWNrIGlzIGhlcmUgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBidWlsZCB3b24ndCBmYWlsXG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhdGZvcm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5kZXRlY3RQbGF0Zm9ybSgpO1xuICAgIH1cblxuICAgIGlmICghKHRoaXMuZ2V0U2Vuc29yTmFtZShzZW5zb3JUeXBlKSBpbiB3aW5kb3cpKSB7XG4gICAgICAvLyBodHRwczovL3czYy5naXRodWIuaW8vc2Vuc29ycy8jc2VjdXJlLWNvbnRleHRcbiAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAnU2Vuc29yIGlzIG5vdCBhdmFpbGFibGUuJyArXG4gICAgICAgICAgKGlzV2ViKCkgJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICdodHRwczonXG4gICAgICAgICAgICA/ICcgTWFrZSBzdXJlIHlvdSB1c2Ugc2VjdXJlIG9yaWdpbiB3aXRoIGBucHggZXhwbyBzdGFydCAtLXdlYiAtLWh0dHBzYC4nXG4gICAgICAgICAgICA6ICcnKSArXG4gICAgICAgICAgKHRoaXMucGxhdGZvcm0gPT09IFBsYXRmb3JtLldFQl9JT1NcbiAgICAgICAgICAgID8gJyBGb3IgaU9TIHdlYiwgeW91IHdpbGwgYWxzbyBoYXZlIHRvIGFsc28gZ3JhbnQgcGVybWlzc2lvbiBpbiB0aGUgYnJvd3NlcjogaHR0cHM6Ly9kZXYudG8vbGkvaG93LXRvLXJlcXVlc3RwZXJtaXNzaW9uLWZvci1kZXZpY2Vtb3Rpb24tYW5kLWRldmljZW9yaWVudGF0aW9uLWV2ZW50cy1pbi1pb3MtMTMtNDZnMi4nXG4gICAgICAgICAgICA6ICcnKVxuICAgICAgKTtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGF0Zm9ybSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmRldGVjdFBsYXRmb3JtKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2Vuc29yOiBXZWJTZW5zb3IgPSB0aGlzLmluaXRpYWxpemVTZW5zb3Ioc2Vuc29yVHlwZSwgaW50ZXJ2YWwpO1xuICAgIHNlbnNvci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3JlYWRpbmcnLFxuICAgICAgdGhpcy5nZXRTZW5zb3JDYWxsYmFjayhzZW5zb3IsIHNlbnNvclR5cGUsIGV2ZW50SGFuZGxlcilcbiAgICApO1xuICAgIHNlbnNvci5zdGFydCgpO1xuXG4gICAgdGhpcy5zZW5zb3JzLnNldCh0aGlzLm5leHRTZW5zb3JJZCwgc2Vuc29yKTtcbiAgICByZXR1cm4gdGhpcy5uZXh0U2Vuc29ySWQrKztcbiAgfVxuXG4gIGdldFNlbnNvckNhbGxiYWNrID0gKFxuICAgIHNlbnNvcjogV2ViU2Vuc29yLFxuICAgIHNlbnNvclR5cGU6IFNlbnNvclR5cGUsXG4gICAgZXZlbnRIYW5kbGVyOiBTaGFyZWFibGVSZWY8KGRhdGE6IFZhbHVlM0QgfCBWYWx1ZVJvdGF0aW9uKSA9PiB2b2lkPlxuICApID0+IHtcbiAgICBzd2l0Y2ggKHNlbnNvclR5cGUpIHtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5BQ0NFTEVST01FVEVSOlxuICAgICAgY2FzZSBTZW5zb3JUeXBlLkdSQVZJVFk6XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgbGV0IHsgeCwgeSwgeiB9ID0gc2Vuc29yO1xuXG4gICAgICAgICAgLy8gV2ViIEFuZHJvaWQgc2Vuc29ycyBoYXZlIGEgZGlmZmVyZW50IGNvb3JkaW5hdGUgc3lzdGVtIHRoYW4gaU9TXG4gICAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0gPT09IFBsYXRmb3JtLldFQl9BTkRST0lEKSB7XG4gICAgICAgICAgICBbeCwgeSwgel0gPSBbLXgsIC15LCAtel07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFRPRE8gVFlQRVNDUklQVCBvbiB3ZWIgU2hhcmVhYmxlUmVmIGlzIHRoZSB2YWx1ZSBpdHNlbGYgc28gd2UgY2FsbCBpdCBkaXJlY3RseVxuICAgICAgICAgIChldmVudEhhbmRsZXIgYXMgYW55KSh7IHgsIHksIHosIGludGVyZmFjZU9yaWVudGF0aW9uOiAwIH0pO1xuICAgICAgICB9O1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLkdZUk9TQ09QRTpcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5NQUdORVRJQ19GSUVMRDpcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHgsIHksIHogfSA9IHNlbnNvcjtcbiAgICAgICAgICAvLyBUT0RPIFRZUEVTQ1JJUFQgb24gd2ViIFNoYXJlYWJsZVJlZiBpcyB0aGUgdmFsdWUgaXRzZWxmIHNvIHdlIGNhbGwgaXQgZGlyZWN0bHlcbiAgICAgICAgICAoZXZlbnRIYW5kbGVyIGFzIGFueSkoeyB4LCB5LCB6LCBpbnRlcmZhY2VPcmllbnRhdGlvbjogMCB9KTtcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5ST1RBVElPTjpcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBsZXQgW3F3LCBxeCwgcXksIHF6XSA9IHNlbnNvci5xdWF0ZXJuaW9uO1xuXG4gICAgICAgICAgLy8gQW5kcm9pZCBzZW5zb3JzIGhhdmUgYSBkaWZmZXJlbnQgY29vcmRpbmF0ZSBzeXN0ZW0gdGhhbiBpT1NcbiAgICAgICAgICBpZiAodGhpcy5wbGF0Zm9ybSA9PT0gUGxhdGZvcm0uV0VCX0FORFJPSUQpIHtcbiAgICAgICAgICAgIFtxeSwgcXpdID0gW3F6LCAtcXldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlZmVyZW5jZTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTc4MjY1OC9leHRyYWN0aW5nLXlhdy1mcm9tLWEtcXVhdGVybmlvblxuICAgICAgICAgIGNvbnN0IHlhdyA9IC1NYXRoLmF0YW4yKFxuICAgICAgICAgICAgMi4wICogKHF5ICogcXogKyBxdyAqIHF4KSxcbiAgICAgICAgICAgIHF3ICogcXcgLSBxeCAqIHF4IC0gcXkgKiBxeSArIHF6ICogcXpcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IHBpdGNoID0gTWF0aC5zaW4oLTIuMCAqIChxeCAqIHF6IC0gcXcgKiBxeSkpO1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSAtTWF0aC5hdGFuMihcbiAgICAgICAgICAgIDIuMCAqIChxeCAqIHF5ICsgcXcgKiBxeiksXG4gICAgICAgICAgICBxdyAqIHF3ICsgcXggKiBxeCAtIHF5ICogcXkgLSBxeiAqIHF6XG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBUT0RPIFRZUEVTQ1JJUFQgb24gd2ViIFNoYXJlYWJsZVJlZiBpcyB0aGUgdmFsdWUgaXRzZWxmIHNvIHdlIGNhbGwgaXQgZGlyZWN0bHlcbiAgICAgICAgICAoZXZlbnRIYW5kbGVyIGFzIGFueSkoe1xuICAgICAgICAgICAgcXcsXG4gICAgICAgICAgICBxeCxcbiAgICAgICAgICAgIHF5LFxuICAgICAgICAgICAgcXosXG4gICAgICAgICAgICB5YXcsXG4gICAgICAgICAgICBwaXRjaCxcbiAgICAgICAgICAgIHJvbGwsXG4gICAgICAgICAgICBpbnRlcmZhY2VPcmllbnRhdGlvbjogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgdW5yZWdpc3RlclNlbnNvcihpZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgc2Vuc29yOiBXZWJTZW5zb3IgfCB1bmRlZmluZWQgPSB0aGlzLnNlbnNvcnMuZ2V0KGlkKTtcbiAgICBpZiAoc2Vuc29yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNlbnNvci5zdG9wKCk7XG4gICAgICB0aGlzLnNlbnNvcnMuZGVsZXRlKGlkKTtcbiAgICB9XG4gIH1cblxuICBzdWJzY3JpYmVGb3JLZXlib2FyZEV2ZW50cyhfOiBTaGFyZWFibGVSZWY8V29ya2xldEZ1bmN0aW9uPik6IG51bWJlciB7XG4gICAgaWYgKGlzV2ViKCkpIHtcbiAgICAgIGxvZ2dlci53YXJuKCd1c2VBbmltYXRlZEtleWJvYXJkIGlzIG5vdCBhdmFpbGFibGUgb24gd2ViIHlldC4nKTtcbiAgICB9IGVsc2UgaWYgKGlzSmVzdCgpKSB7XG4gICAgICBsb2dnZXIud2FybigndXNlQW5pbWF0ZWRLZXlib2FyZCBpcyBub3QgYXZhaWxhYmxlIHdoZW4gdXNpbmcgSmVzdC4nKTtcbiAgICB9IGVsc2UgaWYgKGlzQ2hyb21lRGVidWdnZXIoKSkge1xuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICd1c2VBbmltYXRlZEtleWJvYXJkIGlzIG5vdCBhdmFpbGFibGUgd2hlbiB1c2luZyBDaHJvbWUgRGVidWdnZXIuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICd1c2VBbmltYXRlZEtleWJvYXJkIGlzIG5vdCBhdmFpbGFibGUgb24gdGhpcyBjb25maWd1cmF0aW9uLidcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlRnJvbUtleWJvYXJkRXZlbnRzKF86IG51bWJlcik6IHZvaWQge1xuICAgIC8vIG5vb3BcbiAgfVxuXG4gIGluaXRpYWxpemVTZW5zb3Ioc2Vuc29yVHlwZTogU2Vuc29yVHlwZSwgaW50ZXJ2YWw6IG51bWJlcik6IFdlYlNlbnNvciB7XG4gICAgY29uc3QgY29uZmlnID1cbiAgICAgIGludGVydmFsIDw9IDBcbiAgICAgICAgPyB7IHJlZmVyZW5jZUZyYW1lOiAnZGV2aWNlJyB9XG4gICAgICAgIDogeyBmcmVxdWVuY3k6IDEwMDAgLyBpbnRlcnZhbCB9O1xuICAgIHN3aXRjaCAoc2Vuc29yVHlwZSkge1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLkFDQ0VMRVJPTUVURVI6XG4gICAgICAgIHJldHVybiBuZXcgd2luZG93LkFjY2VsZXJvbWV0ZXIoY29uZmlnKTtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5HWVJPU0NPUEU6XG4gICAgICAgIHJldHVybiBuZXcgd2luZG93Lkd5cm9zY29wZShjb25maWcpO1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLkdSQVZJVFk6XG4gICAgICAgIHJldHVybiBuZXcgd2luZG93LkdyYXZpdHlTZW5zb3IoY29uZmlnKTtcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5NQUdORVRJQ19GSUVMRDpcbiAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuTWFnbmV0b21ldGVyKGNvbmZpZyk7XG4gICAgICBjYXNlIFNlbnNvclR5cGUuUk9UQVRJT046XG4gICAgICAgIHJldHVybiBuZXcgd2luZG93LkFic29sdXRlT3JpZW50YXRpb25TZW5zb3IoY29uZmlnKTtcbiAgICB9XG4gIH1cblxuICBnZXRTZW5zb3JOYW1lKHNlbnNvclR5cGU6IFNlbnNvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc2Vuc29yVHlwZSkge1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLkFDQ0VMRVJPTUVURVI6XG4gICAgICAgIHJldHVybiAnQWNjZWxlcm9tZXRlcic7XG4gICAgICBjYXNlIFNlbnNvclR5cGUuR1JBVklUWTpcbiAgICAgICAgcmV0dXJuICdHcmF2aXR5U2Vuc29yJztcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5HWVJPU0NPUEU6XG4gICAgICAgIHJldHVybiAnR3lyb3Njb3BlJztcbiAgICAgIGNhc2UgU2Vuc29yVHlwZS5NQUdORVRJQ19GSUVMRDpcbiAgICAgICAgcmV0dXJuICdNYWduZXRvbWV0ZXInO1xuICAgICAgY2FzZSBTZW5zb3JUeXBlLlJPVEFUSU9OOlxuICAgICAgICByZXR1cm4gJ0Fic29sdXRlT3JpZW50YXRpb25TZW5zb3InO1xuICAgIH1cbiAgfVxuXG4gIGRldGVjdFBsYXRmb3JtKCkge1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7XG4gICAgaWYgKHVzZXJBZ2VudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnBsYXRmb3JtID0gUGxhdGZvcm0uVU5LTk9XTjtcbiAgICB9IGVsc2UgaWYgKC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KHVzZXJBZ2VudCkpIHtcbiAgICAgIHRoaXMucGxhdGZvcm0gPSBQbGF0Zm9ybS5XRUJfSU9TO1xuICAgIH0gZWxzZSBpZiAoL2FuZHJvaWQvaS50ZXN0KHVzZXJBZ2VudCkpIHtcbiAgICAgIHRoaXMucGxhdGZvcm0gPSBQbGF0Zm9ybS5XRUJfQU5EUk9JRDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGF0Zm9ybSA9IFBsYXRmb3JtLldFQjtcbiAgICB9XG4gIH1cblxuICBnZXRWaWV3UHJvcDxUPihcbiAgICBfdmlld1RhZzogbnVtYmVyLFxuICAgIF9wcm9wTmFtZTogc3RyaW5nLFxuICAgIF9jb21wb25lbnQ/OiBSZWFjdC5Db21wb25lbnQsXG4gICAgX2NhbGxiYWNrPzogKHJlc3VsdDogVCkgPT4gdm9pZFxuICApOiBQcm9taXNlPFQ+IHtcbiAgICB0aHJvdyBuZXcgUmVhbmltYXRlZEVycm9yKCdnZXRWaWV3UHJvcCBpcyBub3QgYXZhaWxhYmxlIGluIEpTUmVhbmltYXRlZC4nKTtcbiAgfVxuXG4gIGNvbmZpZ3VyZVByb3BzKCkge1xuICAgIHRocm93IG5ldyBSZWFuaW1hdGVkRXJyb3IoXG4gICAgICAnY29uZmlndXJlUHJvcHMgaXMgbm90IGF2YWlsYWJsZSBpbiBKU1JlYW5pbWF0ZWQuJ1xuICAgICk7XG4gIH1cblxuICBleGVjdXRlT25VSVJ1bnRpbWVTeW5jPFQsIFI+KF9zaGFyZWFibGU6IFNoYXJlYWJsZVJlZjxUPik6IFIge1xuICAgIHRocm93IG5ldyBSZWFuaW1hdGVkRXJyb3IoXG4gICAgICAnYGV4ZWN1dGVPblVJUnVudGltZVN5bmNgIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgbWFya05vZGVBc1JlbW92YWJsZShfc2hhZG93Tm9kZVdyYXBwZXI6IFNoYWRvd05vZGVXcmFwcGVyKTogdm9pZCB7XG4gICAgdGhyb3cgbmV3IFJlYW5pbWF0ZWRFcnJvcihcbiAgICAgICdtYXJrTm9kZUFzUmVtb3ZhYmxlIGlzIG5vdCBhdmFpbGFibGUgaW4gSlNSZWFuaW1hdGVkLidcbiAgICApO1xuICB9XG5cbiAgdW5tYXJrTm9kZUFzUmVtb3ZhYmxlKF92aWV3VGFnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgUmVhbmltYXRlZEVycm9yKFxuICAgICAgJ3VubWFya05vZGVBc1JlbW92YWJsZSBpcyBub3QgYXZhaWxhYmxlIGluIEpTUmVhbmltYXRlZC4nXG4gICAgKTtcbiAgfVxufVxuXG4vLyBMYWNrIG9mIHRoaXMgZXhwb3J0IGJyZWFrcyBUeXBlU2NyaXB0IGdlbmVyYXRpb24gc2luY2Vcbi8vIGFuIGVudW0gdHJhbnNwaWxlcyBpbnRvIEphdmFTY3JpcHQgY29kZS5cbi8vIHRzLXBydW5lLWlnbm9yZS1uZXh0XG5leHBvcnQgZW51bSBQbGF0Zm9ybSB7XG4gIFdFQl9JT1MgPSAnd2ViIGlPUycsXG4gIFdFQl9BTkRST0lEID0gJ3dlYiBBbmRyb2lkJyxcbiAgV0VCID0gJ3dlYicsXG4gIFVOS05PV04gPSAndW5rbm93bicsXG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIE5hdmlnYXRvciB7XG4gICAgdXNlckFnZW50OiBzdHJpbmc7XG4gICAgdmVuZG9yOiBzdHJpbmc7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUFDLE1BQUEsQ0FBQUMsY0FBQSxDQUFBQyxPQUFBO0VBQUFDLEtBQUE7QUFBQTtBQUFBRCxPQUFBLENBQUFFLFFBQUE7QUFBQUYsT0FBQSxDQUFBRyx3QkFBQSxHQUFBQSx3QkFBQTtBQUFBLElBQUFDLGVBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFRLGdCQUFBLEdBQUFULHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBUyxhQUFBLEdBQUFWLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBVSwyQkFBQSxHQUFBWCxzQkFBQSxDQUFBQyxPQUFBO0FBVWIsSUFBQVcsWUFBQSxHQUFBWCxPQUFBO0FBQ0EsSUFBQVksT0FBQSxHQUFBWixPQUFBO0FBQ0EsSUFBQWEsT0FBQSxHQUFB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