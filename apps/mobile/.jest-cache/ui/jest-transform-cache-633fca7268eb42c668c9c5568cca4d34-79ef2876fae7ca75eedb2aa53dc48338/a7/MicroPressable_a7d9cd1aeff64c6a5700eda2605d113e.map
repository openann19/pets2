{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","Haptics","_A11yHelpers","_jsxRuntime","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","_worklet_13026151603687_init_data","code","location","sourceMap","_worklet_6999366343294_init_data","MicroPressable","_ref","children","onPress","style","disabled","_ref$rippleColor","rippleColor","_ref$haptics","haptics","_ref$scaleFrom","scaleFrom","accessibilityProps","_objectWithoutProperties2","reduceMotion","useReducedMotion","_useState","useState","w","h","_useState2","_slicedToArray2","layout","setLayout","x","useSharedValue","y","prog","scale","pressingRef","useRef","animationDuration","onPressIn","current","_e$nativeEvent","nativeEvent","locationX","locationY","value","withTiming","duration","withSpring","damping","stiffness","mass","impactAsync","ImpactFeedbackStyle","Light","onPressOut","circle","useAnimatedStyle","_e","global","Error","_f","Math","max","position","top","left","width","height","borderRadius","opacity","transform","interpolate","backgroundColor","_closure","__initData","__workletHash","__stackDetails","__version","wrap","jsx","Pressable","onLayout","_e$nativeEvent$layout","View","jsxs","styles","overflow","pointerEvents","StyleSheet","create"],"sources":["MicroPressable.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { Pressable, View, StyleSheet, type ViewStyle, type AccessibilityProps, type PressableProps } from \"react-native\";\nimport type { NativeSyntheticEvent, NativeTouchEvent } from \"react-native\";\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming, withSpring, interpolate } from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\nimport { useReducedMotion } from \"../../utils/A11yHelpers\";\n\ntype Props = {\n  children: React.ReactNode;\n  onPress?: () => void | Promise<void>;\n  style?: ViewStyle | ViewStyle[];\n  disabled?: boolean;\n  rippleColor?: string;      // e.g. \"rgba(236,72,153,0.35)\" (Theme pink)\n  haptics?: boolean;\n  scaleFrom?: number;        // 0.98 default\n} & AccessibilityProps;\n\nexport default function MicroPressable({\n  children,\n  onPress,\n  style,\n  disabled,\n  rippleColor = \"rgba(236,72,153,0.35)\",\n  haptics = true,\n  scaleFrom = 0.98,\n  ...accessibilityProps\n}: Props) {\n  const reduceMotion = useReducedMotion();\n  const [layout, setLayout] = useState({ w: 0, h: 0 });\n  const x = useSharedValue(0);\n  const y = useSharedValue(0);\n  const prog = useSharedValue(0);\n  const scale = useSharedValue(1);\n  const pressingRef = useRef(false);\n\n  const animationDuration = reduceMotion ? 0 : 450;\n\n  const onPressIn = (e: NativeSyntheticEvent<NativeTouchEvent & { locationX: number; locationY: number }>) => {\n    pressingRef.current = true;\n    const { locationX, locationY } = e.nativeEvent;\n    x.value = locationX;\n    y.value = locationY;\n    prog.value = 0;\n    prog.value = withTiming(1, { duration: animationDuration });\n    scale.value = withSpring(scaleFrom, { damping: 18, stiffness: 420, mass: 0.6 });\n    if (haptics && !reduceMotion) Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n  };\n\n  const onPressOut = () => {\n    pressingRef.current = false;\n    if (!reduceMotion) {\n      scale.value = withSpring(1, { damping: 18, stiffness: 300 });\n    }\n  };\n\n  const circle = useAnimatedStyle(() => {\n    const r = Math.max(layout.w, layout.h) * 0.75;\n    return {\n      position: \"absolute\" as const,\n      top: y.value - r,\n      left: x.value - r,\n      width: r * 2,\n      height: r * 2,\n      borderRadius: r,\n      opacity: 1 - prog.value,\n      transform: [{ scale: interpolate(prog.value, [0, 1], [0.1, 1.8]) }],\n      backgroundColor: rippleColor,\n    };\n  });\n\n  const wrap = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  return (\n    <Pressable\n      onPress={onPress}\n      onPressIn={onPressIn}\n      onPressOut={onPressOut}\n      disabled={disabled}\n      style={style}\n      onLayout={e => {\n        const { width, height } = e.nativeEvent.layout;\n        setLayout({ w: width, h: height });\n      }}\n      {...accessibilityProps}\n    >\n      <Animated.View style={wrap}>\n        <View style={styles.overflow}>\n          <Animated.View style={circle} pointerEvents=\"none\" />\n          {children}\n        </View>\n      </Animated.View>\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  overflow: { overflow: \"hidden\", borderRadius: 9999 },\n});\n\n"],"mappings":"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","ignoreList":[]}