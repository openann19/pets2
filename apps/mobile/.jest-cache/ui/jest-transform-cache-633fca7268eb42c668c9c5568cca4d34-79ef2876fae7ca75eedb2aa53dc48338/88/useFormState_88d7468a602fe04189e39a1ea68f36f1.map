{"version":3,"names":["_react","require","_logger","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","useFormState","_ref","initialValues","validateFn","validate","_useState","useState","_useState2","_slicedToArray2","values","setValuesState","_useState3","_useState4","errors","setErrors","_useState5","_useState6","touched","setTouched","setValue","useCallback","name","value","prev","newErrors","setValues","newValues","setError","error","setFieldTouched","touchedValue","undefined","validationErrors","allTouched","key","reset","handleSubmit","onSubmit","_ref2","_asyncToGenerator2","preventDefault","errorObj","Error","logger","_x","isValid"],"sources":["useFormState.ts"],"sourcesContent":["import { useCallback, useState } from \"react\";\nimport { logger } from \"../../services/logger\";\n\nexport interface FormFieldState<T> {\n  value: T;\n  error: string | null;\n  touched: boolean;\n}\n\nexport interface UseFormStateOptions<T> {\n  initialValues: T;\n  validate?: (values: T) => Partial<Record<keyof T, string>>;\n}\n\nexport interface UseFormStateReturn<T> {\n  values: T;\n  errors: Partial<Record<keyof T, string>>;\n  touched: Partial<Record<keyof T, boolean>>;\n  isValid: boolean;\n  setValue: (name: keyof T, value: T[keyof T]) => void;\n  setValues: (values: Partial<T>) => void;\n  setError: (name: keyof T, error: string | null) => void;\n  setFieldTouched: (name: keyof T, touched?: boolean) => void;\n  validate: () => boolean;\n  reset: () => void;\n  handleSubmit: (\n    onSubmit: (values: T) => void | Promise<void>,\n  ) => (e?: any) => void | Promise<void>;\n}\n\n/**\n * Generic form state management hook with validation\n *\n * @example\n * const { values, errors, setValue, handleSubmit } = useFormState({\n *   initialValues: { email: '', password: '' },\n *   validate: (values) => {\n *     const errors = {};\n *     if (!values.email) errors.email = 'Email is required';\n *     if (!values.password) errors.password = 'Password is required';\n *     return errors;\n *   }\n * });\n */\nexport function useFormState<T extends Record<string, any>>({\n  initialValues,\n  validate: validateFn,\n}: UseFormStateOptions<T>): UseFormStateReturn<T> {\n  const [values, setValuesState] = useState<T>(initialValues);\n  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({});\n  const [touched, setTouched] = useState<Partial<Record<keyof T, boolean>>>({});\n\n  const setValue = useCallback((name: keyof T, value: T[keyof T]) => {\n    setValuesState((prev) => ({ ...prev, [name]: value }));\n    // Clear error when field changes\n    setErrors((prev) => {\n      const newErrors = { ...prev };\n      if (newErrors[name]) {\n        delete newErrors[name];\n      }\n      return newErrors;\n    });\n  }, []);\n\n  const setValues = useCallback((newValues: Partial<T>) => {\n    setValuesState((prev) => ({ ...prev, ...newValues }));\n  }, []);\n\n  const setError = useCallback((name: keyof T, error: string | null) => {\n    setErrors((prev) => {\n      if (error) {\n        return { ...prev, [name]: error };\n      }\n      const newErrors = { ...prev };\n      delete newErrors[name];\n      return newErrors;\n    });\n  }, []);\n\n  const setFieldTouched = useCallback(\n    (name: keyof T, touchedValue: boolean = true) => {\n      setTouched((prev) => ({ ...prev, [name]: touchedValue }));\n    },\n    [],\n  );\n\n  const validate = useCallback((): boolean => {\n    if (!validateFn) return true;\n\n    const validationErrors = validateFn(values);\n    setErrors(validationErrors);\n\n    // Mark all fields as touched when validating\n    const allTouched: Partial<Record<keyof T, boolean>> = {};\n    Object.keys(values).forEach((key) => {\n      allTouched[key as keyof T] = true;\n    });\n    setTouched(allTouched);\n\n    return Object.keys(validationErrors).length === 0;\n  }, [values, validateFn]);\n\n  const reset = useCallback(() => {\n    setValuesState(initialValues);\n    setErrors({});\n    setTouched({});\n  }, [initialValues]);\n\n  const handleSubmit = useCallback(\n    (onSubmit: (values: T) => void | Promise<void>) => async (e?: any) => {\n      e?.preventDefault?.();\n\n      if (!validate()) {\n        return;\n      }\n\n      try {\n        await onSubmit(values);\n      } catch (error) {\n        const errorObj = error instanceof Error ? error : new Error('Form submission failed');\n        logger.error(\"Form submission error\", { error: errorObj });\n      }\n    },\n    [values, validate],\n  );\n\n  const isValid = Object.keys(errors).length === 0;\n\n  return {\n    values,\n    errors,\n    touched,\n    isValid,\n    setValue,\n    setValues,\n    setError,\n    setFieldTouched,\n    validate,\n    reset,\n    handleSubmit,\n  };\n}\n"],"mappings":"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","ignoreList":[]}