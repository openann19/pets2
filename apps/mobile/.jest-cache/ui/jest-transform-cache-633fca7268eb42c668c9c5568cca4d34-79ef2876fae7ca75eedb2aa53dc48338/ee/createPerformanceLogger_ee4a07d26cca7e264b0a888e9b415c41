ead82336f83aad2d1331437c07db9e11
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createPerformanceLogger;
exports.getCurrentTimestamp = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var Systrace = _interopRequireWildcard(require("../Performance/Systrace"));
var _Performance = _interopRequireDefault(require("../WebPerformance/Performance"));
var _infoLog = _interopRequireDefault(require("./infoLog"));
var _global$nativeQPLTime;
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var _cookies = {};
var PRINT_TO_CONSOLE = false;
var WEB_PERFORMANCE_PREFIX = 'global_perf_';
var performance = new _Performance.default();
var getCurrentTimestamp = exports.getCurrentTimestamp = (_global$nativeQPLTime = global.nativeQPLTimestamp) != null ? _global$nativeQPLTime : global.performance.now.bind(global.performance);
var PerformanceLogger = function () {
  function PerformanceLogger(isLoggingForWebPerformance) {
    (0, _classCallCheck2.default)(this, PerformanceLogger);
    this._timespans = {};
    this._extras = {};
    this._points = {};
    this._pointExtras = {};
    this._closed = false;
    this._isLoggingForWebPerformance = false;
    this._isLoggingForWebPerformance = isLoggingForWebPerformance === true;
  }
  return (0, _createClass2.default)(PerformanceLogger, [{
    key: "addTimespan",
    value: function addTimespan(key, startTime, endTime, startExtras, endExtras) {
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: addTimespan - has closed ignoring: ', key);
        }
        return;
      }
      if (this._timespans[key]) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to add a timespan that already exists ', key);
        }
        return;
      }
      this._timespans[key] = {
        startTime: startTime,
        endTime: endTime,
        totalTime: endTime - (startTime || 0),
        startExtras: startExtras,
        endExtras: endExtras
      };
      if (this._isLoggingForWebPerformance) {
        performance.measure(`${WEB_PERFORMANCE_PREFIX}_${key}`, {
          start: startTime,
          end: endTime
        });
      }
    }
  }, {
    key: "append",
    value: function append(performanceLogger) {
      this._timespans = _objectSpread(_objectSpread({}, performanceLogger.getTimespans()), this._timespans);
      this._extras = _objectSpread(_objectSpread({}, performanceLogger.getExtras()), this._extras);
      this._points = _objectSpread(_objectSpread({}, performanceLogger.getPoints()), this._points);
      this._pointExtras = _objectSpread(_objectSpread({}, performanceLogger.getPointExtras()), this._pointExtras);
    }
  }, {
    key: "clear",
    value: function clear() {
      this._timespans = {};
      this._extras = {};
      this._points = {};
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'clear');
      }
    }
  }, {
    key: "clearCompleted",
    value: function clearCompleted() {
      for (var _key in this._timespans) {
        var _this$_timespans$_key;
        if (((_this$_timespans$_key = this._timespans[_key]) == null ? void 0 : _this$_timespans$_key.totalTime) != null) {
          delete this._timespans[_key];
        }
      }
      this._extras = {};
      this._points = {};
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'clearCompleted');
      }
    }
  }, {
    key: "close",
    value: function close() {
      this._closed = true;
    }
  }, {
    key: "currentTimestamp",
    value: function currentTimestamp() {
      return getCurrentTimestamp();
    }
  }, {
    key: "getExtras",
    value: function getExtras() {
      return this._extras;
    }
  }, {
    key: "getPoints",
    value: function getPoints() {
      return this._points;
    }
  }, {
    key: "getPointExtras",
    value: function getPointExtras() {
      return this._pointExtras;
    }
  }, {
    key: "getTimespans",
    value: function getTimespans() {
      return this._timespans;
    }
  }, {
    key: "hasTimespan",
    value: function hasTimespan(key) {
      return !!this._timespans[key];
    }
  }, {
    key: "isClosed",
    value: function isClosed() {
      return this._closed;
    }
  }, {
    key: "logEverything",
    value: function logEverything() {
      if (PRINT_TO_CONSOLE) {
        for (var _key2 in this._timespans) {
          var _this$_timespans$_key2;
          if (((_this$_timespans$_key2 = this._timespans[_key2]) == null ? void 0 : _this$_timespans$_key2.totalTime) != null) {
            (0, _infoLog.default)(_key2 + ': ' + this._timespans[_key2].totalTime + 'ms');
          }
        }
        (0, _infoLog.default)(this._extras);
        for (var _key3 in this._points) {
          if (this._points[_key3] != null) {
            (0, _infoLog.default)(_key3 + ': ' + this._points[_key3] + 'ms');
          }
        }
      }
    }
  }, {
    key: "markPoint",
    value: function markPoint(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: markPoint - has closed ignoring: ', key);
        }
        return;
      }
      if (this._points[key] != null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to mark a point that has been already logged ', key);
        }
        return;
      }
      this._points[key] = timestamp;
      if (extras) {
        this._pointExtras[key] = extras;
      }
      if (this._isLoggingForWebPerformance) {
        performance.mark(`${WEB_PERFORMANCE_PREFIX}_${key}`, {
          startTime: timestamp
        });
      }
    }
  }, {
    key: "removeExtra",
    value: function removeExtra(key) {
      var value = this._extras[key];
      delete this._extras[key];
      return value;
    }
  }, {
    key: "setExtra",
    value: function setExtra(key, value) {
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: setExtra - has closed ignoring: ', key);
        }
        return;
      }
      if (this._extras.hasOwnProperty(key)) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to set an extra that already exists ', {
            key: key,
            currentValue: this._extras[key],
            attemptedValue: value
          });
        }
        return;
      }
      this._extras[key] = value;
    }
  }, {
    key: "startTimespan",
    value: function startTimespan(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: startTimespan - has closed ignoring: ', key);
        }
        return;
      }
      if (this._timespans[key]) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to start a timespan that already exists ', key);
        }
        return;
      }
      this._timespans[key] = {
        startTime: timestamp,
        startExtras: extras
      };
      _cookies[key] = Systrace.beginAsyncEvent(key);
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'start: ' + key);
      }
      if (this._isLoggingForWebPerformance) {
        performance.mark(`${WEB_PERFORMANCE_PREFIX}_timespan_start_${key}`, {
          startTime: timestamp
        });
      }
    }
  }, {
    key: "stopTimespan",
    value: function stopTimespan(key) {
      var timestamp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getCurrentTimestamp();
      var extras = arguments.length > 2 ? arguments[2] : undefined;
      if (this._closed) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: stopTimespan - has closed ignoring: ', key);
        }
        return;
      }
      var timespan = this._timespans[key];
      if (!timespan || timespan.startTime == null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to end a timespan that has not started ', key);
        }
        return;
      }
      if (timespan.endTime != null) {
        if (PRINT_TO_CONSOLE && __DEV__) {
          (0, _infoLog.default)('PerformanceLogger: Attempting to end a timespan that has already ended ', key);
        }
        return;
      }
      timespan.endExtras = extras;
      timespan.endTime = timestamp;
      timespan.totalTime = timespan.endTime - (timespan.startTime || 0);
      if (PRINT_TO_CONSOLE) {
        (0, _infoLog.default)('PerformanceLogger.js', 'end: ' + key);
      }
      if (_cookies[key] != null) {
        Systrace.endAsyncEvent(key, _cookies[key]);
        delete _cookies[key];
      }
      if (this._isLoggingForWebPerformance) {
        performance.measure(`${WEB_PERFORMANCE_PREFIX}_${key}`, {
          start: `${WEB_PERFORMANCE_PREFIX}_timespan_start_${key}`,
          end: timestamp
        });
      }
    }
  }]);
}();
function createPerformanceLogger(isLoggingForWebPerformance) {
  return new PerformanceLogger(isLoggingForWebPerformance);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTeXN0cmFjZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9QZXJmb3JtYW5jZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5mb0xvZyIsIl9nbG9iYWwkbmF0aXZlUVBMVGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJfY29va2llcyIsIlBSSU5UX1RPX0NPTlNPTEUiLCJXRUJfUEVSRk9STUFOQ0VfUFJFRklYIiwicGVyZm9ybWFuY2UiLCJQZXJmb3JtYW5jZSIsImdldEN1cnJlbnRUaW1lc3RhbXAiLCJleHBvcnRzIiwiZ2xvYmFsIiwibmF0aXZlUVBMVGltZXN0YW1wIiwibm93IiwiYmluZCIsIlBlcmZvcm1hbmNlTG9nZ2VyIiwiaXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2UiLCJfY2xhc3NDYWxsQ2hlY2syIiwiX3RpbWVzcGFucyIsIl9leHRyYXMiLCJfcG9pbnRzIiwiX3BvaW50RXh0cmFzIiwiX2Nsb3NlZCIsIl9pc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsImFkZFRpbWVzcGFuIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInN0YXJ0RXh0cmFzIiwiZW5kRXh0cmFzIiwiX19ERVZfXyIsImluZm9Mb2ciLCJ0b3RhbFRpbWUiLCJtZWFzdXJlIiwic3RhcnQiLCJlbmQiLCJhcHBlbmQiLCJwZXJmb3JtYW5jZUxvZ2dlciIsImdldFRpbWVzcGFucyIsImdldEV4dHJhcyIsImdldFBvaW50cyIsImdldFBvaW50RXh0cmFzIiwiY2xlYXIiLCJjbGVhckNvbXBsZXRlZCIsIl90aGlzJF90aW1lc3BhbnMkX2tleSIsImNsb3NlIiwiY3VycmVudFRpbWVzdGFtcCIsImhhc1RpbWVzcGFuIiwiaXNDbG9zZWQiLCJsb2dFdmVyeXRoaW5nIiwiX3RoaXMkX3RpbWVzcGFucyRfa2V5MiIsIm1hcmtQb2ludCIsInRpbWVzdGFtcCIsInVuZGVmaW5lZCIsImV4dHJhcyIsIm1hcmsiLCJyZW1vdmVFeHRyYSIsInNldEV4dHJhIiwiY3VycmVudFZhbHVlIiwiYXR0ZW1wdGVkVmFsdWUiLCJzdGFydFRpbWVzcGFuIiwiYmVnaW5Bc3luY0V2ZW50Iiwic3RvcFRpbWVzcGFuIiwidGltZXNwYW4iLCJlbmRBc3luY0V2ZW50IiwiY3JlYXRlUGVyZm9ybWFuY2VMb2dnZXIiXSwic291cmNlcyI6WyJjcmVhdGVQZXJmb3JtYW5jZUxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBFeHRyYXMsXG4gIEV4dHJhVmFsdWUsXG4gIElQZXJmb3JtYW5jZUxvZ2dlcixcbiAgVGltZXNwYW4sXG59IGZyb20gJy4vSVBlcmZvcm1hbmNlTG9nZ2VyJztcblxuaW1wb3J0ICogYXMgU3lzdHJhY2UgZnJvbSAnLi4vUGVyZm9ybWFuY2UvU3lzdHJhY2UnO1xuaW1wb3J0IFBlcmZvcm1hbmNlIGZyb20gJy4uL1dlYlBlcmZvcm1hbmNlL1BlcmZvcm1hbmNlJztcbmltcG9ydCBpbmZvTG9nIGZyb20gJy4vaW5mb0xvZyc7XG5cbmNvbnN0IF9jb29raWVzOiB7W2tleTogc3RyaW5nXTogbnVtYmVyLCAuLi59ID0ge307XG5cbmNvbnN0IFBSSU5UX1RPX0NPTlNPTEU6IGZhbHNlID0gZmFsc2U7IC8vIFR5cGUgYXMgZmFsc2UgdG8gcHJldmVudCBhY2NpZGVudGFsbHkgY29tbWl0dGluZyBgdHJ1ZWA7XG5cbi8vIFRoaXMgaXMgdGhlIHByZWZpeCBmb3Igb3B0aW9uYWwgbG9nZ2luZyBwb2ludHMvdGltZXNwYW5zIGFzIG1hcmtzL21lYXN1cmVzIHZpYSBQZXJmb3JtYW5jZSBBUEksXG4vLyB1c2VkIHRvIHNlcGFyYXRlIHRoZXNlIGludGVybmFsbHkgZnJvbSBvdGhlciBtYXJrcy9tZWFzdXJlc1xuY29uc3QgV0VCX1BFUkZPUk1BTkNFX1BSRUZJWCA9ICdnbG9iYWxfcGVyZl8nO1xuXG4vLyBUT0RPOiBSZW1vdmUgb25jZSBUMTQzMDcwNDE5IGlzIGRvbmVcbmNvbnN0IHBlcmZvcm1hbmNlID0gbmV3IFBlcmZvcm1hbmNlKCk7XG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VGltZXN0YW1wOiAoKSA9PiBudW1iZXIgPVxuICBnbG9iYWwubmF0aXZlUVBMVGltZXN0YW1wID8/IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3cuYmluZChnbG9iYWwucGVyZm9ybWFuY2UpO1xuXG5jbGFzcyBQZXJmb3JtYW5jZUxvZ2dlciBpbXBsZW1lbnRzIElQZXJmb3JtYW5jZUxvZ2dlciB7XG4gIF90aW1lc3BhbnM6IHtba2V5OiBzdHJpbmddOiA/VGltZXNwYW59ID0ge307XG4gIF9leHRyYXM6IHtba2V5OiBzdHJpbmddOiA/RXh0cmFWYWx1ZX0gPSB7fTtcbiAgX3BvaW50czoge1trZXk6IHN0cmluZ106ID9udW1iZXJ9ID0ge307XG4gIF9wb2ludEV4dHJhczoge1trZXk6IHN0cmluZ106ID9FeHRyYXMsIC4uLn0gPSB7fTtcbiAgX2Nsb3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBfaXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihpc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZT86IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9pc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSA9IGlzTG9nZ2luZ0ZvcldlYlBlcmZvcm1hbmNlID09PSB0cnVlO1xuICB9XG5cbiAgYWRkVGltZXNwYW4oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgc3RhcnRUaW1lOiBudW1iZXIsXG4gICAgZW5kVGltZTogbnVtYmVyLFxuICAgIHN0YXJ0RXh0cmFzPzogRXh0cmFzLFxuICAgIGVuZEV4dHJhcz86IEV4dHJhcyxcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogYWRkVGltZXNwYW4gLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fdGltZXNwYW5zW2tleV0pIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gYWRkIGEgdGltZXNwYW4gdGhhdCBhbHJlYWR5IGV4aXN0cyAnLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl90aW1lc3BhbnNba2V5XSA9IHtcbiAgICAgIHN0YXJ0VGltZSxcbiAgICAgIGVuZFRpbWUsXG4gICAgICB0b3RhbFRpbWU6IGVuZFRpbWUgLSAoc3RhcnRUaW1lIHx8IDApLFxuICAgICAgc3RhcnRFeHRyYXMsXG4gICAgICBlbmRFeHRyYXMsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLl9pc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSkge1xuICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShgJHtXRUJfUEVSRk9STUFOQ0VfUFJFRklYfV8ke2tleX1gLCB7XG4gICAgICAgIHN0YXJ0OiBzdGFydFRpbWUsXG4gICAgICAgIGVuZDogZW5kVGltZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFwcGVuZChwZXJmb3JtYW5jZUxvZ2dlcjogSVBlcmZvcm1hbmNlTG9nZ2VyKSB7XG4gICAgdGhpcy5fdGltZXNwYW5zID0ge1xuICAgICAgLi4ucGVyZm9ybWFuY2VMb2dnZXIuZ2V0VGltZXNwYW5zKCksXG4gICAgICAuLi50aGlzLl90aW1lc3BhbnMsXG4gICAgfTtcbiAgICB0aGlzLl9leHRyYXMgPSB7Li4ucGVyZm9ybWFuY2VMb2dnZXIuZ2V0RXh0cmFzKCksIC4uLnRoaXMuX2V4dHJhc307XG4gICAgdGhpcy5fcG9pbnRzID0gey4uLnBlcmZvcm1hbmNlTG9nZ2VyLmdldFBvaW50cygpLCAuLi50aGlzLl9wb2ludHN9O1xuICAgIHRoaXMuX3BvaW50RXh0cmFzID0ge1xuICAgICAgLi4ucGVyZm9ybWFuY2VMb2dnZXIuZ2V0UG9pbnRFeHRyYXMoKSxcbiAgICAgIC4uLnRoaXMuX3BvaW50RXh0cmFzLFxuICAgIH07XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl90aW1lc3BhbnMgPSB7fTtcbiAgICB0aGlzLl9leHRyYXMgPSB7fTtcbiAgICB0aGlzLl9wb2ludHMgPSB7fTtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXIuanMnLCAnY2xlYXInKTtcbiAgICB9XG4gIH1cblxuICBjbGVhckNvbXBsZXRlZCgpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl90aW1lc3BhbnMpIHtcbiAgICAgIGlmICh0aGlzLl90aW1lc3BhbnNba2V5XT8udG90YWxUaW1lICE9IG51bGwpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3RpbWVzcGFuc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9leHRyYXMgPSB7fTtcbiAgICB0aGlzLl9wb2ludHMgPSB7fTtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgaW5mb0xvZygnUGVyZm9ybWFuY2VMb2dnZXIuanMnLCAnY2xlYXJDb21wbGV0ZWQnKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICB9XG5cbiAgY3VycmVudFRpbWVzdGFtcCgpOiBudW1iZXIge1xuICAgIHJldHVybiBnZXRDdXJyZW50VGltZXN0YW1wKCk7XG4gIH1cblxuICBnZXRFeHRyYXMoKToge1trZXk6IHN0cmluZ106ID9FeHRyYVZhbHVlfSB7XG4gICAgcmV0dXJuIHRoaXMuX2V4dHJhcztcbiAgfVxuXG4gIGdldFBvaW50cygpOiB7W2tleTogc3RyaW5nXTogP251bWJlcn0ge1xuICAgIHJldHVybiB0aGlzLl9wb2ludHM7XG4gIH1cblxuICBnZXRQb2ludEV4dHJhcygpOiB7W2tleTogc3RyaW5nXTogP0V4dHJhc30ge1xuICAgIHJldHVybiB0aGlzLl9wb2ludEV4dHJhcztcbiAgfVxuXG4gIGdldFRpbWVzcGFucygpOiB7W2tleTogc3RyaW5nXTogP1RpbWVzcGFufSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpbWVzcGFucztcbiAgfVxuXG4gIGhhc1RpbWVzcGFuKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5fdGltZXNwYW5zW2tleV07XG4gIH1cblxuICBpc0Nsb3NlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VkO1xuICB9XG5cbiAgbG9nRXZlcnl0aGluZygpIHtcbiAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSkge1xuICAgICAgLy8gbG9nIHRpbWVzcGFuc1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5fdGltZXNwYW5zKSB7XG4gICAgICAgIGlmICh0aGlzLl90aW1lc3BhbnNba2V5XT8udG90YWxUaW1lICE9IG51bGwpIHtcbiAgICAgICAgICBpbmZvTG9nKGtleSArICc6ICcgKyB0aGlzLl90aW1lc3BhbnNba2V5XS50b3RhbFRpbWUgKyAnbXMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBsb2cgZXh0cmFzXG4gICAgICBpbmZvTG9nKHRoaXMuX2V4dHJhcyk7XG5cbiAgICAgIC8vIGxvZyBwb2ludHNcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX3BvaW50cykge1xuICAgICAgICBpZiAodGhpcy5fcG9pbnRzW2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgIGluZm9Mb2coa2V5ICsgJzogJyArIHRoaXMuX3BvaW50c1trZXldICsgJ21zJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtYXJrUG9pbnQoXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdGltZXN0YW1wPzogbnVtYmVyID0gZ2V0Q3VycmVudFRpbWVzdGFtcCgpLFxuICAgIGV4dHJhcz86IEV4dHJhcyxcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlcjogbWFya1BvaW50IC0gaGFzIGNsb3NlZCBpZ25vcmluZzogJywga2V5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3BvaW50c1trZXldICE9IG51bGwpIHtcbiAgICAgIGlmIChQUklOVF9UT19DT05TT0xFICYmIF9fREVWX18pIHtcbiAgICAgICAgaW5mb0xvZyhcbiAgICAgICAgICAnUGVyZm9ybWFuY2VMb2dnZXI6IEF0dGVtcHRpbmcgdG8gbWFyayBhIHBvaW50IHRoYXQgaGFzIGJlZW4gYWxyZWFkeSBsb2dnZWQgJyxcbiAgICAgICAgICBrZXksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3BvaW50c1trZXldID0gdGltZXN0YW1wO1xuICAgIGlmIChleHRyYXMpIHtcbiAgICAgIHRoaXMuX3BvaW50RXh0cmFzW2tleV0gPSBleHRyYXM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2lzTG9nZ2luZ0ZvcldlYlBlcmZvcm1hbmNlKSB7XG4gICAgICBwZXJmb3JtYW5jZS5tYXJrKGAke1dFQl9QRVJGT1JNQU5DRV9QUkVGSVh9XyR7a2V5fWAsIHtcbiAgICAgICAgc3RhcnRUaW1lOiB0aW1lc3RhbXAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVFeHRyYShrZXk6IHN0cmluZyk6ID9FeHRyYVZhbHVlIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX2V4dHJhc1trZXldO1xuICAgIGRlbGV0ZSB0aGlzLl9leHRyYXNba2V5XTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBzZXRFeHRyYShrZXk6IHN0cmluZywgdmFsdWU6IEV4dHJhVmFsdWUpIHtcbiAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coJ1BlcmZvcm1hbmNlTG9nZ2VyOiBzZXRFeHRyYSAtIGhhcyBjbG9zZWQgaWdub3Jpbmc6ICcsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V4dHJhcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coXG4gICAgICAgICAgJ1BlcmZvcm1hbmNlTG9nZ2VyOiBBdHRlbXB0aW5nIHRvIHNldCBhbiBleHRyYSB0aGF0IGFscmVhZHkgZXhpc3RzICcsXG4gICAgICAgICAge2tleSwgY3VycmVudFZhbHVlOiB0aGlzLl9leHRyYXNba2V5XSwgYXR0ZW1wdGVkVmFsdWU6IHZhbHVlfSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZXh0cmFzW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHN0YXJ0VGltZXNwYW4oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdGltZXN0YW1wPzogbnVtYmVyID0gZ2V0Q3VycmVudFRpbWVzdGFtcCgpLFxuICAgIGV4dHJhcz86IEV4dHJhcyxcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKFxuICAgICAgICAgICdQZXJmb3JtYW5jZUxvZ2dlcjogc3RhcnRUaW1lc3BhbiAtIGhhcyBjbG9zZWQgaWdub3Jpbmc6ICcsXG4gICAgICAgICAga2V5LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl90aW1lc3BhbnNba2V5XSkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKFxuICAgICAgICAgICdQZXJmb3JtYW5jZUxvZ2dlcjogQXR0ZW1wdGluZyB0byBzdGFydCBhIHRpbWVzcGFuIHRoYXQgYWxyZWFkeSBleGlzdHMgJyxcbiAgICAgICAgICBrZXksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdGltZXNwYW5zW2tleV0gPSB7XG4gICAgICBzdGFydFRpbWU6IHRpbWVzdGFtcCxcbiAgICAgIHN0YXJ0RXh0cmFzOiBleHRyYXMsXG4gICAgfTtcbiAgICBfY29va2llc1trZXldID0gU3lzdHJhY2UuYmVnaW5Bc3luY0V2ZW50KGtleSk7XG4gICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUpIHtcbiAgICAgIGluZm9Mb2coJ1BlcmZvcm1hbmNlTG9nZ2VyLmpzJywgJ3N0YXJ0OiAnICsga2V5KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNMb2dnaW5nRm9yV2ViUGVyZm9ybWFuY2UpIHtcbiAgICAgIHBlcmZvcm1hbmNlLm1hcmsoYCR7V0VCX1BFUkZPUk1BTkNFX1BSRUZJWH1fdGltZXNwYW5fc3RhcnRfJHtrZXl9YCwge1xuICAgICAgICBzdGFydFRpbWU6IHRpbWVzdGFtcCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0b3BUaW1lc3BhbihcbiAgICBrZXk6IHN0cmluZyxcbiAgICB0aW1lc3RhbXA/OiBudW1iZXIgPSBnZXRDdXJyZW50VGltZXN0YW1wKCksXG4gICAgZXh0cmFzPzogRXh0cmFzLFxuICApIHtcbiAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICBpZiAoUFJJTlRfVE9fQ09OU09MRSAmJiBfX0RFVl9fKSB7XG4gICAgICAgIGluZm9Mb2coJ1BlcmZvcm1hbmNlTG9nZ2VyOiBzdG9wVGltZXNwYW4gLSBoYXMgY2xvc2VkIGlnbm9yaW5nOiAnLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRpbWVzcGFuID0gdGhpcy5fdGltZXNwYW5zW2tleV07XG4gICAgaWYgKCF0aW1lc3BhbiB8fCB0aW1lc3Bhbi5zdGFydFRpbWUgPT0gbnVsbCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKFxuICAgICAgICAgICdQZXJmb3JtYW5jZUxvZ2dlcjogQXR0ZW1wdGluZyB0byBlbmQgYSB0aW1lc3BhbiB0aGF0IGhhcyBub3Qgc3RhcnRlZCAnLFxuICAgICAgICAgIGtleSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRpbWVzcGFuLmVuZFRpbWUgIT0gbnVsbCkge1xuICAgICAgaWYgKFBSSU5UX1RPX0NPTlNPTEUgJiYgX19ERVZfXykge1xuICAgICAgICBpbmZvTG9nKFxuICAgICAgICAgICdQZXJmb3JtYW5jZUxvZ2dlcjogQXR0ZW1wdGluZyB0byBlbmQgYSB0aW1lc3BhbiB0aGF0IGhhcyBhbHJlYWR5IGVuZGVkICcsXG4gICAgICAgICAga2V5LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRpbWVzcGFuLmVuZEV4dHJhcyA9IGV4dHJhcztcbiAgICB0aW1lc3Bhbi5lbmRUaW1lID0gdGltZXN0YW1wO1xuICAgIHRpbWVzcGFuLnRvdGFsVGltZSA9IHRpbWVzcGFuLmVuZFRpbWUgLSAodGltZXNwYW4uc3RhcnRUaW1lIHx8IDApO1xuICAgIGlmIChQUklOVF9UT19DT05TT0xFKSB7XG4gICAgICBpbmZvTG9nKCdQZXJmb3JtYW5jZUxvZ2dlci5qcycsICdlbmQ6ICcgKyBrZXkpO1xuICAgIH1cblxuICAgIGlmIChfY29va2llc1trZXldICE9IG51bGwpIHtcbiAgICAgIFN5c3RyYWNlLmVuZEFzeW5jRXZlbnQoa2V5LCBfY29va2llc1trZXldKTtcbiAgICAgIGRlbGV0ZSBfY29va2llc1trZXldO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZSkge1xuICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShgJHtXRUJfUEVSRk9STUFOQ0VfUFJFRklYfV8ke2tleX1gLCB7XG4gICAgICAgIHN0YXJ0OiBgJHtXRUJfUEVSRk9STUFOQ0VfUFJFRklYfV90aW1lc3Bhbl9zdGFydF8ke2tleX1gLFxuICAgICAgICBlbmQ6IHRpbWVzdGFtcCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vLyBSZS1leHBvcnRpbmcgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggYWxsIHRoZSBjbGllbnRzIHRoYXRcbi8vIG1heSBzdGlsbCBpbXBvcnQgaXQgZnJvbSB0aGlzIG1vZHVsZS5cbmV4cG9ydCB0eXBlIHtFeHRyYXMsIEV4dHJhVmFsdWUsIElQZXJmb3JtYW5jZUxvZ2dlciwgVGltZXNwYW59O1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY3JlYXRlcyBwZXJmb3JtYW5jZSBsb2dnZXJzIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29sbGVjdCBhbmQgbG9nXG4gKiB2YXJpb3VzIHBlcmZvcm1hbmNlIGRhdGEgc3VjaCBhcyB0aW1lc3BhbnMsIHBvaW50cyBhbmQgZXh0cmFzLlxuICogVGhlIGxvZ2dlcnMgbmVlZCB0byBoYXZlIG1pbmltYWwgb3ZlcmhlYWQgc2luY2UgdGhleSdyZSB1c2VkIGluIHByb2R1Y3Rpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyKFxuICBpc0xvZ2dpbmdGb3JXZWJQZXJmb3JtYW5jZT86IGJvb2xlYW4sXG4pOiBJUGVyZm9ybWFuY2VMb2dnZXIge1xuICByZXR1cm4gbmV3IFBlcmZvcm1hbmNlTG9nZ2VyKGlzTG9nZ2luZ0ZvcldlYlBlcmZvcm1hbmNlKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFpQkEsSUFBQUEsUUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBQWdDLElBQUFJLHFCQUFBO0FBQUEsU0FBQUwsd0JBQUFNLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFSLHVCQUFBLFlBQUFBLHdCQUFBTSxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFB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LEVBQUU7VUFDL0IsSUFBQUMsZ0JBQU8sRUFBQyx5REFBeUQsRUFBRVIsR0FBRyxDQUFDO1FBQ3pFO1FBQ0E7TUFDRjtNQUVBLElBQU13QyxRQUFRLEdBQUcsSUFBSSxDQUFDL0MsVUFBVSxDQUFDTyxHQUFHLENBQUM7TUFDckMsSUFBSSxDQUFDd0MsUUFBUSxJQUFJQSxRQUFRLENBQUNyQyxTQUFTLElBQUksSUFBSSxFQUFFO1FBQzNDLElBQUl2QixnQkFBZ0IsSUFBSTJCLE9BQU8sRUFBRTtVQUMvQixJQUFBQyxnQkFBTyxFQUNMLHVFQUF1RSxFQUN2RVIsR0FDRixDQUFDO1FBQ0g7UUFDQTtNQUNGO01BQ0EsSUFBSXdDLFFBQVEsQ0FBQ3BDLE9BQU8sSUFBSSxJQUFJLEVBQUU7UUFDNUIsSUFBSXhCLGdCQUFnQixJQUFJMkIsT0FBTyxFQUFFO1VBQy9CLElBQUFDLGdCQUFPLEVBQ0wseUVBQXlFLEVBQ3pFUixHQUNGLENBQUM7UUFDSDtRQUNBO01BQ0Y7TUFFQXdDLFFBQVEsQ0FBQ2xDLFNBQVMsR0FBR3lCLE1BQU07TUFDM0JTLFFBQVEsQ0FBQ3BDLE9BQU8sR0FBR3lCLFNBQVM7TUFDNUJXLFFBQVEsQ0FBQy9CLFNBQVMsR0FBRytCLFFBQVEsQ0FBQ3BDLE9BQU8sSUFBSW9DLFFBQVEsQ0FBQ3JDLFNBQVMsSUFBSSxDQUFDLENBQUM7TUFDakUsSUFBSXZCLGdCQUFnQixFQUFFO1FBQ3BCLElBQUE0QixnQkFBTyxFQUFDLHNCQUFzQixFQUFFLE9BQU8sR0FBR1IsR0FBRyxDQUFDO01BQ2hEO01BRUEsSUFBSXJCLFFBQVEsQ0FBQ3FCLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRTtRQUN6QjlELFFBQVEsQ0FBQ3VHLGFBQWEsQ0FBQ3pDLEdBQUcsRUFBRXJCLFFBQVEsQ0FBQ3FCLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLE9BQU9yQixRQUFRLENBQUNxQixHQUFHLENBQUM7TUFDdEI7TUFFQSxJQUFJLElBQUksQ0FBQ0YsMkJBQTJCLEVBQUU7UUFDcENoQixXQUFXLENBQUM0QixPQUFPLENBQUMsR0FBRzdCLHNCQUFzQixJQUFJbUIsR0FBRyxFQUFFLEVBQUU7VUFDdERXLEtBQUssRUFBRSxHQUFHOUIsc0JBQXNCLG1CQUFtQm1CLEdBQUcsRUFBRTtVQUN4RFksR0FBRyxFQUFFaUI7UUFDUCxDQUFDLENBQUM7TUFDSjtJQUNGO0VBQUM7QUFBQTtBQVlZLFNBQVNhLHVCQUF1QkEsQ0FDN0NuRCwwQkFBb0MsRUFDaEI7RUFDcEIsT0FBTyxJQUFJRCxpQkFBaUIsQ0FBQ0MsMEJBQTBCLENBQUM7QUFDMUQiLCJpZ25vcmVMaXN0IjpbXX0=