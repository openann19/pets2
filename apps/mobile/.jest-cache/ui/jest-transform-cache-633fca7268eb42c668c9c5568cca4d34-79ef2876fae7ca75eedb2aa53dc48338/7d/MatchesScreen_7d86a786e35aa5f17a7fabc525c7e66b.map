{"version":3,"names":["_reactNative","require","_react","_ScreenShell","_haptics","_AdvancedHeader","_MatchCard","_MatchesTabs","_useMatchesData2","_logger","_unifiedTheme","_useScrollOffsetTracker","_useTabReselectRefresh","_jsxRuntime","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","MatchesScreen","_ref","navigation","_useMatchesData","useMatchesData","matches","likedYou","selectedTab","refreshing","onRefresh","setSelectedTab","handleScroll","setFilter","_useState","useState","_useState2","_slicedToArray2","filterOpen","setFilterOpen","listRef","useRef","_useScrollOffsetTrack","useScrollOffsetTracker","onScroll","getOffset","useTabReselectRefresh","topThreshold","cooldownMs","handleMatchPress","matchId","petName","haptic","confirm","navigate","handleFilterPress","tap","logger","info","handleSearchPress","jsxs","ScreenShell","header","jsx","AdvancedHeader","HeaderConfigs","glass","title","rightButtons","type","onPress","variant","apiActions","_filter","_asyncToGenerator2","search","_search","children","MatchesTabs","onTabChange","FlatList","ref","data","renderItem","_ref2","item","MatchCard","match","_id","keyExtractor","style","styles","list","contentContainerStyle","listContent","nativeEvent","contentOffset","y","scrollEventThrottle","refreshControl","RefreshControl","tintColor","Theme","colors","primary","StyleSheet","create","flex","padding","spacing","md"],"sources":["MatchesScreen.tsx"],"sourcesContent":["import { FlatList, RefreshControl, StyleSheet } from \"react-native\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport type { FlatList as FlatListType } from \"react-native\";\nimport { useRef, useState } from \"react\";\nimport { ScreenShell } from '../ui/layout/ScreenShell';\nimport { haptic } from '../ui/haptics';\n\nimport {\n  AdvancedHeader,\n  HeaderConfigs,\n} from \"../components/Advanced/AdvancedHeader\";\nimport { MatchCard } from \"../components/matches/MatchCard\";\nimport { MatchesTabs } from \"../components/matches/MatchesTabs\";\nimport MatchesFilterModal from \"../components/matches/MatchesFilterModal\";\nimport { useMatchesData } from \"../hooks/useMatchesData\";\nimport { logger } from \"../services/logger\";\nimport type { Match } from \"../hooks/useMatchesData\";\nimport { Theme } from '../theme/unified-theme';\nimport { useScrollOffsetTracker } from \"../hooks/navigation/useScrollOffsetTracker\";\nimport { useTabReselectRefresh } from \"../hooks/navigation/useTabReselectRefresh\";\n\ninterface MatchesScreenProps {\n  navigation: {\n    navigate: (\n      screen: string,\n      params: { matchId: string; petName: string },\n    ) => void;\n  };\n}\n\nexport default function MatchesScreen({ navigation }: MatchesScreenProps) {\n  const {\n    matches,\n    likedYou,\n    selectedTab,\n    refreshing,\n    onRefresh,\n    setSelectedTab,\n    handleScroll,\n    filter,\n    setFilter,\n  } = useMatchesData();\n  const [filterOpen, setFilterOpen] = useState(false);\n\n  const listRef = useRef<FlatListType<Match>>(null);\n  const { onScroll, getOffset } = useScrollOffsetTracker();\n\n  useTabReselectRefresh({\n    listRef,\n    onRefresh,\n    getOffset,\n    topThreshold: 120,\n    cooldownMs: 700,\n  });\n\n  const handleMatchPress = (matchId: string, petName: string) => {\n    haptic.confirm();\n    navigation.navigate(\"Chat\", { matchId, petName });\n  };\n  \n  const handleFilterPress = () => {\n    haptic.tap();\n    setFilterOpen(true);\n    logger.info(\"Filter matches button pressed\");\n  };\n  \n  const handleSearchPress = () => {\n    haptic.tap();\n    logger.info(\"Search matches button pressed\");\n  };\n\n  return (\n    <ScreenShell\n      header={\n        <AdvancedHeader\n          {...HeaderConfigs.glass({\n            title: \"Matches\",\n            rightButtons: [\n              {\n                type: \"filter\",\n                onPress: handleFilterPress,\n                variant: \"glass\",\n                haptic: \"light\",\n              },\n              {\n                type: \"search\",\n                onPress: handleSearchPress,\n                variant: \"minimal\",\n                haptic: \"light\",\n              },\n            ],\n            apiActions: {\n              filter: async () => {\n                logger.info(\"Filter API action triggered\");\n              },\n              search: async () => {\n                logger.info(\"Search API action triggered\");\n              },\n            },\n          })}\n        />\n      }\n    >\n      <MatchesTabs selectedTab={selectedTab} onTabChange={setSelectedTab} />\n\n      <FlatList\n        ref={listRef}\n        data={selectedTab === \"matches\" ? matches : likedYou}\n        renderItem={({ item }) => (\n          <MatchCard\n            match={item}\n            onPress={() => {\n              handleMatchPress(item._id, item.petName);\n            }}\n          />\n        )}\n        keyExtractor={(item) => item._id}\n        style={styles.list}\n        contentContainerStyle={styles.listContent}\n        onScroll={(e) => {\n          onScroll(e);       // track offset for smart reselect\n          handleScroll(e.nativeEvent.contentOffset.y); // persistence\n        }}\n        scrollEventThrottle={120}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={onRefresh}\n            tintColor={Theme.colors.primary[500]}\n          />\n        }\n      />\n    </ScreenShell>\n  );\n}\n\nconst styles = StyleSheet.create({\n  list: {\n    flex: 1,\n  },\n  listContent: {\n    padding: Theme.spacing.md,\n  },\n});\n"],"mappings":"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","ignoreList":[]}