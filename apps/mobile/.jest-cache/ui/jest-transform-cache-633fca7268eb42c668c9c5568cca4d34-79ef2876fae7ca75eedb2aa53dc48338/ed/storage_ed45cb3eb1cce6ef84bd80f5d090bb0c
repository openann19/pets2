4b6bf6bf2d4aad9c5b1c05112e5298fd
"use strict";
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.secureStorage = void 0;
exports.getAccessToken = getAccessToken;
exports.setAccessToken = setAccessToken;
exports.removeAccessToken = removeAccessToken;
exports.getRefreshToken = getRefreshToken;
exports.setRefreshToken = setRefreshToken;
exports.removeRefreshToken = removeRefreshToken;
var environment_1 = require("./environment");
var WebStorageImpl = function () {
  function WebStorageImpl() {
    var getStorage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : environment_1.getLocalStorage;
    var getNavigator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : environment_1.getNavigatorObject;
    (0, _classCallCheck2.default)(this, WebStorageImpl);
    this.getStorage = getStorage;
    this.getNavigator = getNavigator;
  }
  return (0, _createClass2.default)(WebStorageImpl, [{
    key: "encryptData",
    value: function encryptData(data, key) {
      try {
        var encrypted = '';
        for (var i = 0; i < data.length; i++) {
          var charCode = data.charCodeAt(i) ^ key.charCodeAt(i % key.length);
          encrypted += String.fromCharCode(charCode);
        }
        return btoa(encrypted);
      } catch (error) {
        console.error('Encryption error:', error);
        return data;
      }
    }
  }, {
    key: "decryptData",
    value: function decryptData(encryptedData, key) {
      try {
        var decoded = atob(encryptedData);
        var decrypted = '';
        for (var i = 0; i < decoded.length; i++) {
          var charCode = decoded.charCodeAt(i) ^ key.charCodeAt(i % key.length);
          decrypted += String.fromCharCode(charCode);
        }
        return decrypted;
      } catch (error) {
        console.error('Decryption error:', error);
        return '';
      }
    }
  }, {
    key: "generateStorageKey",
    value: function generateStorageKey() {
      var _navigator$userAgent;
      var navigator = this.getNavigator();
      var userAgent = (_navigator$userAgent = navigator == null ? void 0 : navigator.userAgent) != null ? _navigator$userAgent : 'unknown_agent';
      var timestamp = Date.now().toString(36);
      var baseKey = `${userAgent}-${timestamp}`;
      return btoa(baseKey).slice(0, 16);
    }
  }, {
    key: "getItem",
    value: function getItem(key) {
      var storage = this.getStorage();
      if (storage == null) return Promise.resolve(null);
      try {
        var item = storage.getItem(key);
        if (item == null) return Promise.resolve(null);
        var storageKey = this.generateStorageKey();
        var decrypted = this.decryptData(item, storageKey);
        return Promise.resolve(decrypted);
      } catch (error) {
        console.error('Web storage get error:', error);
        return Promise.resolve(null);
      }
    }
  }, {
    key: "setItem",
    value: function setItem(key, value) {
      var storage = this.getStorage();
      if (storage == null) return Promise.resolve();
      try {
        var storageKey = this.generateStorageKey();
        var encrypted = this.encryptData(value, storageKey);
        storage.setItem(key, encrypted);
        return Promise.resolve();
      } catch (error) {
        console.error('Web storage set error:', error);
        return Promise.resolve();
      }
    }
  }, {
    key: "removeItem",
    value: function removeItem(key) {
      var storage = this.getStorage();
      if (storage == null) return Promise.resolve();
      try {
        storage.removeItem(key);
        return Promise.resolve();
      } catch (error) {
        console.error('Web storage remove error:', error);
        return Promise.resolve();
      }
    }
  }]);
}();
var MobileStorageImpl = function () {
  function MobileStorageImpl() {
    (0, _classCallCheck2.default)(this, MobileStorageImpl);
    this.secureStore = null;
    try {
      if (typeof window === 'undefined') {}
    } catch (_unused) {
      console.warn('expo-secure-store not available, falling back to AsyncStorage');
    }
  }
  return (0, _createClass2.default)(MobileStorageImpl, [{
    key: "getItem",
    value: function () {
      var _getItem = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          if (this.secureStore !== null) {
            return yield this.secureStore.getItemAsync(key);
          } else {
            try {
              var AsyncStorageModule = yield Promise.resolve().then(function () {
                return require('@react-native-async-storage/async-storage');
              });
              var AsyncStorage = AsyncStorageModule.default;
              return yield AsyncStorage.getItem(key);
            } catch (_unused2) {
              console.warn('AsyncStorage not available');
              return null;
            }
          }
        } catch (_unused3) {
          console.error('Mobile storage get error');
          return null;
        }
      });
      function getItem(_x) {
        return _getItem.apply(this, arguments);
      }
      return getItem;
    }()
  }, {
    key: "setItem",
    value: function () {
      var _setItem = (0, _asyncToGenerator2.default)(function* (key, value) {
        try {
          if (this.secureStore !== null) {
            yield this.secureStore.setItemAsync(key, value);
          } else {
            try {
              var AsyncStorageModule = yield Promise.resolve().then(function () {
                return require('@react-native-async-storage/async-storage');
              });
              var AsyncStorage = AsyncStorageModule.default;
              yield AsyncStorage.setItem(key, value);
            } catch (_unused4) {
              console.warn('AsyncStorage not available');
            }
          }
        } catch (_unused5) {
          console.error('Mobile storage set error');
        }
      });
      function setItem(_x2, _x3) {
        return _setItem.apply(this, arguments);
      }
      return setItem;
    }()
  }, {
    key: "removeItem",
    value: function () {
      var _removeItem = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          if (this.secureStore !== null) {
            yield this.secureStore.deleteItemAsync(key);
          } else {
            try {
              var AsyncStorageModule = yield Promise.resolve().then(function () {
                return require('@react-native-async-storage/async-storage');
              });
              var AsyncStorage = AsyncStorageModule.default;
              yield AsyncStorage.removeItem(key);
            } catch (_unused6) {
              console.warn('AsyncStorage not available');
            }
          }
        } catch (_unused7) {
          console.error('Mobile storage remove error');
        }
      });
      function removeItem(_x4) {
        return _removeItem.apply(this, arguments);
      }
      return removeItem;
    }()
  }]);
}();
var createStorageImplementation = function createStorageImplementation() {
  if ((0, environment_1.isBrowserEnvironment)()) {
    return new WebStorageImpl();
  }
  return new MobileStorageImpl();
};
exports.secureStorage = createStorageImplementation();
function getAccessToken() {
  return _getAccessToken.apply(this, arguments);
}
function _getAccessToken() {
  _getAccessToken = (0, _asyncToGenerator2.default)(function* () {
    return yield exports.secureStorage.getItem('accessToken');
  });
  return _getAccessToken.apply(this, arguments);
}
function setAccessToken(_x5) {
  return _setAccessToken.apply(this, arguments);
}
function _setAccessToken() {
  _setAccessToken = (0, _asyncToGenerator2.default)(function* (token) {
    yield exports.secureStorage.setItem('accessToken', token);
  });
  return _setAccessToken.apply(this, arguments);
}
function removeAccessToken() {
  return _removeAccessToken.apply(this, arguments);
}
function _removeAccessToken() {
  _removeAccessToken = (0, _asyncToGenerator2.default)(function* () {
    yield exports.secureStorage.removeItem('accessToken');
  });
  return _removeAccessToken.apply(this, arguments);
}
function getRefreshToken() {
  return _getRefreshToken.apply(this, arguments);
}
function _getRefreshToken() {
  _getRefreshToken = (0, _asyncToGenerator2.default)(function* () {
    return yield exports.secureStorage.getItem('refreshToken');
  });
  return _getRefreshToken.apply(this, arguments);
}
function setRefreshToken(_x6) {
  return _setRefreshToken.apply(this, arguments);
}
function _setRefreshToken() {
  _setRefreshToken = (0, _asyncToGenerator2.default)(function* (token) {
    yield exports.secureStorage.setItem('refreshToken', token);
  });
  return _setRefreshToken.apply(this, arguments);
}
function removeRefreshToken() {
  return _removeRefreshToken.apply(this, arguments);
}
function _removeRefreshToken() {
  _removeRefreshToken = (0, _asyncToGenerator2.default)(function* () {
    yield exports.secureStorage.removeItem('refreshToken');
  });
  return _removeRefreshToken.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJzZWN1cmVTdG9yYWdlIiwiZ2V0QWNjZXNzVG9rZW4iLCJzZXRBY2Nlc3NUb2tlbiIsInJlbW92ZUFjY2Vzc1Rva2VuIiwiZ2V0UmVmcmVzaFRva2VuIiwic2V0UmVmcmVzaFRva2VuIiwicmVtb3ZlUmVmcmVzaFRva2VuIiwiZW52aXJvbm1lbnRfMSIsIldlYlN0b3JhZ2VJbXBsIiwiZ2V0U3RvcmFnZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImdldExvY2FsU3RvcmFnZSIsImdldE5hdmlnYXRvciIsImdldE5hdmlnYXRvck9iamVjdCIsImRlZmF1bHQiLCJrZXkiLCJlbmNyeXB0RGF0YSIsImRhdGEiLCJlbmNyeXB0ZWQiLCJpIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYnRvYSIsImVycm9yIiwiY29uc29sZSIsImRlY3J5cHREYXRhIiwiZW5jcnlwdGVkRGF0YSIsImRlY29kZWQiLCJhdG9iIiwiZGVjcnlwdGVkIiwiZ2VuZXJhdGVTdG9yYWdlS2V5IiwiX25hdmlnYXRvciR1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJiYXNlS2V5Iiwic2xpY2UiLCJnZXRJdGVtIiwic3RvcmFnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiaXRlbSIsInN0b3JhZ2VLZXkiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsIk1vYmlsZVN0b3JhZ2VJbXBsIiwic2VjdXJlU3RvcmUiLCJ3aW5kb3ciLCJfdW51c2VkIiwid2FybiIsIl9nZXRJdGVtIiwiZ2V0SXRlbUFzeW5jIiwiQXN5bmNTdG9yYWdlTW9kdWxlIiwidGhlbiIsIkFzeW5jU3RvcmFnZSIsIl91bnVzZWQyIiwiX3VudXNlZDMiLCJfeCIsImFwcGx5IiwiX3NldEl0ZW0iLCJzZXRJdGVtQXN5bmMiLCJfdW51c2VkNCIsIl91bnVzZWQ1IiwiX3gyIiwiX3gzIiwiX3JlbW92ZUl0ZW0iLCJkZWxldGVJdGVtQXN5bmMiLCJfdW51c2VkNiIsIl91bnVzZWQ3IiwiX3g0IiwiY3JlYXRlU3RvcmFnZUltcGxlbWVudGF0aW9uIiwiaXNCcm93c2VyRW52aXJvbm1lbnQiLCJfZ2V0QWNjZXNzVG9rZW4iLCJfeDUiLCJfc2V0QWNjZXNzVG9rZW4iLCJ0b2tlbiIsIl9yZW1vdmVBY2Nlc3NUb2tlbiIsIl9nZXRSZWZyZXNoVG9rZW4iLCJfeDYiLCJfc2V0UmVmcmVzaFRva2VuIiwiX3JlbW92ZVJlZnJlc2hUb2tlbiJdLCJzb3VyY2VzIjpbInN0b3JhZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENyb3NzLXBsYXRmb3JtIHNlY3VyZSBzdG9yYWdlIHV0aWxpdHlcbiAqIFByb3ZpZGVzIGEgY29uc2lzdGVudCBpbnRlcmZhY2UgZm9yIHdlYiBhbmQgbW9iaWxlIHRva2VuIHN0b3JhZ2VcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zZWN1cmVTdG9yYWdlID0gdm9pZCAwO1xuZXhwb3J0cy5nZXRBY2Nlc3NUb2tlbiA9IGdldEFjY2Vzc1Rva2VuO1xuZXhwb3J0cy5zZXRBY2Nlc3NUb2tlbiA9IHNldEFjY2Vzc1Rva2VuO1xuZXhwb3J0cy5yZW1vdmVBY2Nlc3NUb2tlbiA9IHJlbW92ZUFjY2Vzc1Rva2VuO1xuZXhwb3J0cy5nZXRSZWZyZXNoVG9rZW4gPSBnZXRSZWZyZXNoVG9rZW47XG5leHBvcnRzLnNldFJlZnJlc2hUb2tlbiA9IHNldFJlZnJlc2hUb2tlbjtcbmV4cG9ydHMucmVtb3ZlUmVmcmVzaFRva2VuID0gcmVtb3ZlUmVmcmVzaFRva2VuO1xuLy8gTm90ZTogV2ViU3RvcmFnZSBhbmQgTW9iaWxlU3RvcmFnZSBpbnRlcmZhY2VzIGFyZSBkZWZpbmVkIGlubGluZSBpbiB0aGVpciBpbXBsZW1lbnRhdGlvbnNcbi8vIHRvIGF2b2lkIHVudXNlZCBpbnRlcmZhY2Ugd2FybmluZ3Ncbi8vIENyb3NzLXBsYXRmb3JtIHN0b3JhZ2UgaW50ZXJmYWNlXG5jb25zdCBlbnZpcm9ubWVudF8xID0gcmVxdWlyZShcIi4vZW52aXJvbm1lbnRcIik7XG4vKipcbiAqIFdlYiBzdG9yYWdlIGltcGxlbWVudGF0aW9uIHVzaW5nIGxvY2FsU3RvcmFnZSB3aXRoIGVuY3J5cHRpb25cbiAqL1xuY2xhc3MgV2ViU3RvcmFnZUltcGwge1xuICAgIGdldFN0b3JhZ2U7XG4gICAgZ2V0TmF2aWdhdG9yO1xuICAgIGNvbnN0cnVjdG9yKGdldFN0b3JhZ2UgPSBlbnZpcm9ubWVudF8xLmdldExvY2FsU3RvcmFnZSwgZ2V0TmF2aWdhdG9yID0gZW52aXJvbm1lbnRfMS5nZXROYXZpZ2F0b3JPYmplY3QpIHtcbiAgICAgICAgdGhpcy5nZXRTdG9yYWdlID0gZ2V0U3RvcmFnZTtcbiAgICAgICAgdGhpcy5nZXROYXZpZ2F0b3IgPSBnZXROYXZpZ2F0b3I7XG4gICAgfVxuICAgIGVuY3J5cHREYXRhKGRhdGEsIGtleSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGVuY3J5cHRlZCA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhckNvZGUgPSBkYXRhLmNoYXJDb2RlQXQoaSkgXiBrZXkuY2hhckNvZGVBdChpICUga2V5Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZW5jcnlwdGVkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoZW5jcnlwdGVkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VuY3J5cHRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjcnlwdERhdGEoZW5jcnlwdGVkRGF0YSwga2V5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkZWNvZGVkID0gYXRvYihlbmNyeXB0ZWREYXRhKTtcbiAgICAgICAgICAgIGxldCBkZWNyeXB0ZWQgPSAnJztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVjb2RlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJDb2RlID0gZGVjb2RlZC5jaGFyQ29kZUF0KGkpIF4ga2V5LmNoYXJDb2RlQXQoaSAlIGtleS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGRlY3J5cHRlZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWNyeXB0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEZWNyeXB0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZW5lcmF0ZVN0b3JhZ2VLZXkoKSB7XG4gICAgICAgIGNvbnN0IG5hdmlnYXRvciA9IHRoaXMuZ2V0TmF2aWdhdG9yKCk7XG4gICAgICAgIGNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvcj8udXNlckFnZW50ID8/ICd1bmtub3duX2FnZW50JztcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKS50b1N0cmluZygzNik7XG4gICAgICAgIGNvbnN0IGJhc2VLZXkgPSBgJHt1c2VyQWdlbnR9LSR7dGltZXN0YW1wfWA7XG4gICAgICAgIHJldHVybiBidG9hKGJhc2VLZXkpLnNsaWNlKDAsIDE2KTtcbiAgICB9XG4gICAgZ2V0SXRlbShrZXkpIHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuZ2V0U3RvcmFnZSgpO1xuICAgICAgICBpZiAoc3RvcmFnZSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmIChpdGVtID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSB0aGlzLmdlbmVyYXRlU3RvcmFnZUtleSgpO1xuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gdGhpcy5kZWNyeXB0RGF0YShpdGVtLCBzdG9yYWdlS2V5KTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVjcnlwdGVkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYiBzdG9yYWdlIGdldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gdGhpcy5nZXRTdG9yYWdlKCk7XG4gICAgICAgIGlmIChzdG9yYWdlID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlS2V5ID0gdGhpcy5nZW5lcmF0ZVN0b3JhZ2VLZXkoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IHRoaXMuZW5jcnlwdERhdGEodmFsdWUsIHN0b3JhZ2VLZXkpO1xuICAgICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKGtleSwgZW5jcnlwdGVkKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYiBzdG9yYWdlIHNldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlSXRlbShrZXkpIHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHRoaXMuZ2V0U3RvcmFnZSgpO1xuICAgICAgICBpZiAoc3RvcmFnZSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdXZWIgc3RvcmFnZSByZW1vdmUgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgTW9iaWxlU3RvcmFnZUltcGwge1xuICAgIHNlY3VyZVN0b3JlID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVHJ5IHRvIGltcG9ydCBleHBvLXNlY3VyZS1zdG9yZSBvbmx5IGluIG1vYmlsZSBlbnZpcm9ubWVudFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgd29yayBpbiBSZWFjdCBOYXRpdmUgZW52aXJvbm1lbnRcbiAgICAgICAgICAgICAgICAvLyBEeW5hbWljIGltcG9ydCB3aWxsIGJlIHVzZWQgaW4gYXN5bmMgbWV0aG9kc1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignZXhwby1zZWN1cmUtc3RvcmUgbm90IGF2YWlsYWJsZSwgZmFsbGluZyBiYWNrIHRvIEFzeW5jU3RvcmFnZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldEl0ZW0oa2V5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWN1cmVTdG9yZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlY3VyZVN0b3JlLmdldEl0ZW1Bc3luYyhrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gQXN5bmNTdG9yYWdlIGlmIGV4cG8tc2VjdXJlLXN0b3JlIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGR5bmFtaWMgaW1wb3J0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEFzeW5jU3RvcmFnZU1vZHVsZSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gcmVxdWlyZSgnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEFzeW5jU3RvcmFnZSA9IEFzeW5jU3RvcmFnZU1vZHVsZS5kZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNb2JpbGUgc3RvcmFnZSBnZXQgZXJyb3InKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VjdXJlU3RvcmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNlY3VyZVN0b3JlLnNldEl0ZW1Bc3luYyhrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIEFzeW5jU3RvcmFnZSBpZiBleHBvLXNlY3VyZS1zdG9yZSBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEFzeW5jU3RvcmFnZU1vZHVsZSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gcmVxdWlyZSgnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEFzeW5jU3RvcmFnZSA9IEFzeW5jU3RvcmFnZU1vZHVsZS5kZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBBc3luY1N0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vYmlsZSBzdG9yYWdlIHNldCBlcnJvcicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZUl0ZW0oa2V5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWN1cmVTdG9yZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VjdXJlU3RvcmUuZGVsZXRlSXRlbUFzeW5jKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byBBc3luY1N0b3JhZ2UgaWYgZXhwby1zZWN1cmUtc3RvcmUgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBBc3luY1N0b3JhZ2VNb2R1bGUgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHJlcXVpcmUoJ0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlJykpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBBc3luY1N0b3JhZ2UgPSBBc3luY1N0b3JhZ2VNb2R1bGUuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vYmlsZSBzdG9yYWdlIHJlbW92ZSBlcnJvcicpO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgY3JlYXRlU3RvcmFnZUltcGxlbWVudGF0aW9uID0gKCkgPT4ge1xuICAgIGlmICgoMCwgZW52aXJvbm1lbnRfMS5pc0Jyb3dzZXJFbnZpcm9ubWVudCkoKSkge1xuICAgICAgICByZXR1cm4gbmV3IFdlYlN0b3JhZ2VJbXBsKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgTW9iaWxlU3RvcmFnZUltcGwoKTtcbn07XG5leHBvcnRzLnNlY3VyZVN0b3JhZ2UgPSBjcmVhdGVTdG9yYWdlSW1wbGVtZW50YXRpb24oKTtcbi8vIENvbnZlbmllbmNlIG1ldGhvZHMgZm9yIGF1dGggdG9rZW5zXG5hc3luYyBmdW5jdGlvbiBnZXRBY2Nlc3NUb2tlbigpIHtcbiAgICByZXR1cm4gYXdhaXQgZXhwb3J0cy5zZWN1cmVTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyk7XG59XG5hc3luYyBmdW5jdGlvbiBzZXRBY2Nlc3NUb2tlbih0b2tlbikge1xuICAgIGF3YWl0IGV4cG9ydHMuc2VjdXJlU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NUb2tlbicsIHRva2VuKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZUFjY2Vzc1Rva2VuKCkge1xuICAgIGF3YWl0IGV4cG9ydHMuc2VjdXJlU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NUb2tlbicpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKCkge1xuICAgIHJldHVybiBhd2FpdCBleHBvcnRzLnNlY3VyZVN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaFRva2VuJyk7XG59XG5hc3luYyBmdW5jdGlvbiBzZXRSZWZyZXNoVG9rZW4odG9rZW4pIHtcbiAgICBhd2FpdCBleHBvcnRzLnNlY3VyZVN0b3JhZ2Uuc2V0SXRlbSgncmVmcmVzaFRva2VuJywgdG9rZW4pO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlUmVmcmVzaFRva2VuKCkge1xuICAgIGF3YWl0IGV4cG9ydHMuc2VjdXJlU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWZyZXNoVG9rZW4nKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTtBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxrQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUUsZ0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFHLGFBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUtiSSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFDN0RELE9BQU8sQ0FBQ0UsYUFBYSxHQUFHLEtBQUssQ0FBQztBQUM5QkYsT0FBTyxDQUFDRyxjQUFjLEdBQUdBLGNBQWM7QUFDdkNILE9BQU8sQ0FBQ0ksY0FBYyxHQUFHQSxjQUFjO0FBQ3ZDSixPQUFPLENBQUNLLGlCQUFpQixHQUFHQSxpQkFBaUI7QUFDN0NMLE9BQU8sQ0FBQ00sZUFBZSxHQUFHQSxlQUFlO0FBQ3pDTixPQUFPLENBQUNPLGVBQWUsR0FBR0EsZUFBZTtBQUN6Q1AsT0FBTyxDQUFDUSxrQkFBa0IsR0FBR0Esa0JBQWtCO0FBSS9DLElBQU1DLGFBQWEsR0FBR2YsT0FBTyxnQkFBZ0IsQ0FBQztBQUFDLElBSXpDZ0IsY0FBYztFQUdoQixTQUFBQSxlQUFBLEVBQXlHO0lBQUEsSUFBN0ZDLFVBQVUsR0FBQUMsU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUdILGFBQWEsQ0FBQ00sZUFBZTtJQUFBLElBQUVDLFlBQVksR0FBQUosU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUdI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TUFBTXBGLE9BQU8sQ0FBQ0UsYUFBYSxDQUFDa0QsT0FBTyxDQUFDLGFBQWEsRUFBRWdDLEtBQUssQ0FBQztFQUM3RCxDQUFDO0VBQUEsT0FBQUQsZUFBQSxDQUFBaEIsS0FBQSxPQUFBdkQsU0FBQTtBQUFBO0FBQUEsU0FDY1AsaUJBQWlCQSxDQUFBO0VBQUEsT0FBQWdGLGtCQUFBLENBQUFsQixLQUFBLE9BQUF2RCxTQUFBO0FBQUE7QUFBQSxTQUFBeUUsbUJBQUE7RUFBQUEsa0JBQUEsT0FBQTFGLGtCQUFBLENBQUF1QixPQUFBLEVBQWhDLGFBQW1DO0lBQy9CLE1BQU1sQixPQUFPLENBQUNFLGFBQWEsQ0FBQ21ELFVBQVUsQ0FBQyxhQUFhLENBQUM7RUFDekQsQ0FBQztFQUFBLE9BQUFnQyxrQkFBQSxDQUFBbEIsS0FBQSxPQUFBdkQsU0FBQTtBQUFBO0FBQUEsU0FDY04sZUFBZUEsQ0FBQTtFQUFBLE9BQUFnRixnQkFBQSxDQUFBbkIsS0FBQSxPQUFBdkQsU0FBQTtBQUFBO0FBQUEsU0FBQTBFLGlCQUFBO0VBQUFBLGdCQUFBLE9BQUEzRixrQkFBQSxDQUFBdUIsT0FBQSxFQUE5QixhQUFpQztJQUM3QixhQUFhbEIsT0FBTyxDQUFDRSxhQUFhLENBQUM0QyxPQUFPLENBQUMsY0FBYyxDQUFDO0VBQzlELENBQUM7RUFBQSxPQUFBd0MsZ0JBQUEsQ0FBQW5CLEtBQUEsT0FBQXZELFNBQUE7QUFBQTtBQUFBLFNBQ2NMLGVBQWVBLENBQUFnRixHQUFBO0VBQUEsT0FBQUMsZ0JBQUEsQ0FBQXJCLEtBQUEsT0FBQXZELFNBQUE7QUFBQTtBQUFBLFNBQUE0RSxpQkFBQTtFQUFBQSxnQkFBQSxPQUFBN0Ysa0JBQUEsQ0FBQXVCLE9BQUEsRUFBOUIsV0FBK0JrRSxLQUFLLEVBQUU7SUFDbEMsTUFBTXBGLE9BQU8sQ0FBQ0UsYUFBYSxDQUFDa0QsT0FBTyxDQUFDLGNBQWMsRUFBRWdDLEtBQUssQ0FBQztFQUM5RCxDQUFDO0VBQUEsT0FBQUksZ0JBQUEsQ0FBQXJCLEtBQUEsT0FBQXZELFNBQUE7QUFBQTtBQUFBLFNBQ2NKLGtCQUFrQkEsQ0FBQTtFQUFBLE9BQUFpRixtQkFBQSxDQUFBdEIsS0FBQSxPQUFBdkQsU0FBQTtBQUFBO0FBQUEsU0FBQTZFLG9CQUFBO0VBQUFBLG1CQUFBLE9BQUE5RixrQkFBQSxDQUFBdUIsT0FBQSxFQUFqQyxhQUFvQztJQUNoQyxNQUFNbEIsT0FBTyxDQUFDRSxhQUFhLENBQUNtRCxVQUFVLENBQUMsY0FBYyxDQUFDO0VBQzFELENBQUM7RUFBQSxPQUFBb0MsbUJBQUEsQ0FBQXRCLEtBQUEsT0FBQXZELFNBQUE7QUFBQSIsImlnbm9yZUxpc3QiOltdfQ==