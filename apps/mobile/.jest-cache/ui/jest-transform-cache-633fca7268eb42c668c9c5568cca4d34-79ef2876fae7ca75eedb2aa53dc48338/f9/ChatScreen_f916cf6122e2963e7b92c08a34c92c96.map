{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_ScreenShell","_AdvancedHeader","_MessageList","_MessageInput","_QuickReplies","_ReactionBarMagnetic","_useChatScreen2","_Provider","_jsxRuntime","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","ChatScreen","_ref","navigation","route","_route$params","params","matchId","petName","_useTheme","useTheme","isDark","_useChatScreen","useChatScreen","inputText","setInputText","isTyping","showReactions","data","actions","flatListRef","inputRef","handleSendMessage","handleTypingChange","handleScroll","handleQuickReplySelect","handleMessageLongPress","handleReactionSelect","handleReactionCancel","handleVoiceCall","handleVideoCall","handleMoreOptions","quickReplies","jsxs","ScreenShell","header","jsx","AdvancedHeader","HeaderConfigs","glass","title","subtitle","isOnline","showBackButton","onBackPress","goBack","rightButtons","type","icon","onPress","variant","haptic","customComponent","undefined","children","KeyboardAvoidingView","style","styles","chatContainer","behavior","Platform","OS","MessageList","messages","typingUsers","otherUserTyping","currentUserId","onRetryMessage","retryMessage","onScroll","QuickReplies","replies","onReplySelect","visible","MessageInput","value","onChangeText","onSend","onTypingChange","isSending","View","reactionOverlay","onSelect","onCancel","influenceRadius","baseSize","backgroundColor","borderColor","StyleSheet","create","flex","position","bottom","left","right","alignItems","zIndex"],"sources":["ChatScreen.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  KeyboardAvoidingView,\n  Platform,\n  StyleSheet,\n  View,\n} from \"react-native\";\n\nimport { ScreenShell } from \"../ui/layout/ScreenShell\";\nimport {\n  AdvancedHeader,\n  HeaderConfigs,\n} from \"../components/Advanced/AdvancedHeader\";\nimport { MessageList } from \"../components/chat/MessageList\";\nimport { MessageInput } from \"../components/chat/MessageInput\";\nimport { QuickReplies } from \"../components/chat/QuickReplies\";\nimport ReactionBarMagnetic from \"../components/chat/ReactionBarMagnetic\";\nimport { useChatScreen } from \"../hooks/screens/useChatScreen\";\nimport { useTheme } from \"../theme/Provider\";\nimport type { RootStackScreenProps } from \"../navigation/types\";\n\ntype ChatScreenProps = RootStackScreenProps<\"Chat\">;\n\nexport default function ChatScreen({ navigation, route }: ChatScreenProps) {\n  const { matchId, petName } = route.params;\n  const { isDark } = useTheme();\n\n  const {\n    inputText,\n    setInputText,\n    isTyping,\n    showReactions,\n    data,\n    actions,\n    flatListRef,\n    inputRef,\n    handleSendMessage,\n    handleTypingChange,\n    handleScroll,\n    handleQuickReplySelect,\n    handleMessageLongPress,\n    handleReactionSelect,\n    handleReactionCancel,\n    handleVoiceCall,\n    handleVideoCall,\n    handleMoreOptions,\n    quickReplies,\n  } = useChatScreen({ matchId, petName, navigation });\n\n  return (\n    <ScreenShell\n      header={\n        <AdvancedHeader\n          {...HeaderConfigs.glass({\n            title: petName,\n            subtitle: data.isOnline ? \"Online now\" : \"Last seen recently\",\n            showBackButton: true,\n            onBackPress: () => navigation.goBack(),\n            rightButtons: [\n              {\n                type: \"custom\",\n                icon: \"call-outline\",\n                onPress: handleVoiceCall,\n                variant: \"glass\",\n                haptic: \"medium\",\n                customComponent: undefined,\n              },\n              {\n                type: \"custom\",\n                icon: \"videocam-outline\",\n                onPress: handleVideoCall,\n                variant: \"glass\",\n                haptic: \"medium\",\n                customComponent: undefined,\n              },\n              {\n                type: \"custom\",\n                icon: \"ellipsis-vertical-outline\",\n                onPress: handleMoreOptions,\n                variant: \"glass\",\n                haptic: \"light\",\n                customComponent: undefined,\n              },\n            ],\n          })}\n        />\n      }\n    >\n      {/* Messages */}\n      <KeyboardAvoidingView\n        style={styles.chatContainer}\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      >\n        <MessageList\n          messages={data.messages}\n          typingUsers={data.otherUserTyping ? [\"Other User\"] : []}\n          isOnline={data.isOnline}\n          currentUserId=\"current-user\"\n          matchId={matchId}\n          onRetryMessage={actions.retryMessage}\n          flatListRef={flatListRef}\n          onScroll={handleScroll}\n        />\n\n        {/* Quick Replies */}\n        {data.messages.length > 0 && (\n          <QuickReplies\n            replies={quickReplies}\n            onReplySelect={handleQuickReplySelect}\n            visible={true}\n          />\n        )}\n\n        {/* Input */}\n        <MessageInput\n          value={inputText}\n          onChangeText={setInputText}\n          onSend={handleSendMessage}\n          onTypingChange={handleTypingChange}\n          isSending={data.isSending}\n          inputRef={inputRef}\n          matchId={matchId}\n        />\n      </KeyboardAvoidingView>\n\n      {/* Reaction Bar Overlay */}\n      {showReactions && (\n        <View style={styles.reactionOverlay}>\n          <ReactionBarMagnetic\n            onSelect={handleReactionSelect}\n            onCancel={handleReactionCancel}\n            influenceRadius={100}\n            baseSize={32}\n            backgroundColor={isDark ? \"#2a2a2a\" : \"#ffffff\"}\n            borderColor={isDark ? \"rgba(255,255,255,0.1)\" : \"rgba(0,0,0,0.1)\"}\n          />\n        </View>\n      )}\n    </ScreenShell>\n  );\n}\n\nconst styles = StyleSheet.create({\n  chatContainer: {\n    flex: 1,\n  },\n  reactionOverlay: {\n    position: 'absolute',\n    bottom: 120,\n    left: 0,\n    right: 0,\n    alignItems: 'center',\n    zIndex: 1000,\n  },\n});\n"],"mappings":"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","ignoreList":[]}