9e0e1afbf6a69bebcbc6344866a49525
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _NativeEventEmitter = _interopRequireDefault(require("../EventEmitter/NativeEventEmitter"));
var _Platform = _interopRequireDefault(require("../Utilities/Platform"));
var _NativePushNotificationManagerIOS = _interopRequireDefault(require("./NativePushNotificationManagerIOS"));
var _invariant = _interopRequireDefault(require("invariant"));
var PushNotificationEmitter = new _NativeEventEmitter.default(_Platform.default.OS !== 'ios' ? null : _NativePushNotificationManagerIOS.default);
var _notifHandlers = new Map();
var DEVICE_NOTIF_EVENT = 'remoteNotificationReceived';
var NOTIF_REGISTER_EVENT = 'remoteNotificationsRegistered';
var NOTIF_REGISTRATION_ERROR_EVENT = 'remoteNotificationRegistrationError';
var DEVICE_LOCAL_NOTIF_EVENT = 'localNotificationReceived';
var PushNotificationIOS = function () {
  function PushNotificationIOS(nativeNotif) {
    var _this = this;
    (0, _classCallCheck2.default)(this, PushNotificationIOS);
    this._data = {};
    this._remoteNotificationCompleteCallbackCalled = false;
    this._isRemote = nativeNotif.remote;
    if (this._isRemote) {
      this._notificationId = nativeNotif.notificationId;
    }
    if (nativeNotif.remote) {
      Object.keys(nativeNotif).forEach(function (notifKey) {
        var notifVal = nativeNotif[notifKey];
        if (notifKey === 'aps') {
          _this._alert = notifVal.alert;
          _this._sound = notifVal.sound;
          _this._badgeCount = notifVal.badge;
          _this._category = notifVal.category;
          _this._contentAvailable = notifVal['content-available'];
          _this._threadID = notifVal['thread-id'];
        } else {
          _this._data[notifKey] = notifVal;
        }
      });
    } else {
      this._badgeCount = nativeNotif.applicationIconBadgeNumber;
      this._sound = nativeNotif.soundName;
      this._alert = nativeNotif.alertBody;
      this._data = nativeNotif.userInfo;
      this._category = nativeNotif.category;
    }
  }
  return (0, _createClass2.default)(PushNotificationIOS, [{
    key: "finish",
    value: function finish(fetchResult) {
      if (!this._isRemote || !this._notificationId || this._remoteNotificationCompleteCallbackCalled) {
        return;
      }
      this._remoteNotificationCompleteCallbackCalled = true;
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.onFinishRemoteNotification(this._notificationId, fetchResult);
    }
  }, {
    key: "getMessage",
    value: function getMessage() {
      return this._alert;
    }
  }, {
    key: "getSound",
    value: function getSound() {
      return this._sound;
    }
  }, {
    key: "getCategory",
    value: function getCategory() {
      return this._category;
    }
  }, {
    key: "getAlert",
    value: function getAlert() {
      return this._alert;
    }
  }, {
    key: "getContentAvailable",
    value: function getContentAvailable() {
      return this._contentAvailable;
    }
  }, {
    key: "getBadgeCount",
    value: function getBadgeCount() {
      return this._badgeCount;
    }
  }, {
    key: "getData",
    value: function getData() {
      return this._data;
    }
  }, {
    key: "getThreadID",
    value: function getThreadID() {
      return this._threadID;
    }
  }], [{
    key: "presentLocalNotification",
    value: function presentLocalNotification(details) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.presentLocalNotification(details);
    }
  }, {
    key: "scheduleLocalNotification",
    value: function scheduleLocalNotification(details) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.scheduleLocalNotification(details);
    }
  }, {
    key: "cancelAllLocalNotifications",
    value: function cancelAllLocalNotifications() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.cancelAllLocalNotifications();
    }
  }, {
    key: "removeAllDeliveredNotifications",
    value: function removeAllDeliveredNotifications() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.removeAllDeliveredNotifications();
    }
  }, {
    key: "getDeliveredNotifications",
    value: function getDeliveredNotifications(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getDeliveredNotifications(callback);
    }
  }, {
    key: "removeDeliveredNotifications",
    value: function removeDeliveredNotifications(identifiers) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.removeDeliveredNotifications(identifiers);
    }
  }, {
    key: "setApplicationIconBadgeNumber",
    value: function setApplicationIconBadgeNumber(number) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.setApplicationIconBadgeNumber(number);
    }
  }, {
    key: "getApplicationIconBadgeNumber",
    value: function getApplicationIconBadgeNumber(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getApplicationIconBadgeNumber(callback);
    }
  }, {
    key: "cancelLocalNotifications",
    value: function cancelLocalNotifications(userInfo) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.cancelLocalNotifications(userInfo);
    }
  }, {
    key: "getScheduledLocalNotifications",
    value: function getScheduledLocalNotifications(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getScheduledLocalNotifications(callback);
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(type, handler) {
      (0, _invariant.default)(type === 'notification' || type === 'register' || type === 'registrationError' || type === 'localNotification', 'PushNotificationIOS only supports `notification`, `register`, `registrationError`, and `localNotification` events');
      var listener;
      if (type === 'notification') {
        listener = PushNotificationEmitter.addListener(DEVICE_NOTIF_EVENT, function (notifData) {
          handler(new PushNotificationIOS(notifData));
        });
      } else if (type === 'localNotification') {
        listener = PushNotificationEmitter.addListener(DEVICE_LOCAL_NOTIF_EVENT, function (notifData) {
          handler(new PushNotificationIOS(notifData));
        });
      } else if (type === 'register') {
        listener = PushNotificationEmitter.addListener(NOTIF_REGISTER_EVENT, function (registrationInfo) {
          handler(registrationInfo.deviceToken);
        });
      } else if (type === 'registrationError') {
        listener = PushNotificationEmitter.addListener(NOTIF_REGISTRATION_ERROR_EVENT, function (errorInfo) {
          handler(errorInfo);
        });
      }
      _notifHandlers.set(type, listener);
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(type, handler) {
      (0, _invariant.default)(type === 'notification' || type === 'register' || type === 'registrationError' || type === 'localNotification', 'PushNotificationIOS only supports `notification`, `register`, `registrationError`, and `localNotification` events');
      var listener = _notifHandlers.get(type);
      if (!listener) {
        return;
      }
      listener.remove();
      _notifHandlers.delete(type);
    }
  }, {
    key: "requestPermissions",
    value: function requestPermissions(permissions) {
      var requestedPermissions = {
        alert: true,
        badge: true,
        sound: true
      };
      if (permissions) {
        requestedPermissions = {
          alert: !!permissions.alert,
          badge: !!permissions.badge,
          sound: !!permissions.sound
        };
      }
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      return _NativePushNotificationManagerIOS.default.requestPermissions(requestedPermissions);
    }
  }, {
    key: "abandonPermissions",
    value: function abandonPermissions() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.abandonPermissions();
    }
  }, {
    key: "checkPermissions",
    value: function checkPermissions(callback) {
      (0, _invariant.default)(typeof callback === 'function', 'Must provide a valid callback');
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.checkPermissions(callback);
    }
  }, {
    key: "getInitialNotification",
    value: function getInitialNotification() {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      return _NativePushNotificationManagerIOS.default.getInitialNotification().then(function (notification) {
        return notification && new PushNotificationIOS(notification);
      });
    }
  }, {
    key: "getAuthorizationStatus",
    value: function getAuthorizationStatus(callback) {
      (0, _invariant.default)(_NativePushNotificationManagerIOS.default, 'PushNotificationManager is not available.');
      _NativePushNotificationManagerIOS.default.getAuthorizationStatus(callback);
    }
  }]);
}();
PushNotificationIOS.FetchResult = {
  NewData: 'UIBackgroundFetchResultNewData',
  NoData: 'UIBackgroundFetchResultNoData',
  ResultFailed: 'UIBackgroundFetchResultFailed'
};
module.exports = PushNotificationIOS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlRXZlbnRFbWl0dGVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfUGxhdGZvcm0iLCJfTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MiLCJfaW52YXJpYW50IiwiUHVzaE5vdGlmaWNhdGlvbkVtaXR0ZXIiLCJOYXRpdmVFdmVudEVtaXR0ZXIiLCJQbGF0Zm9ybSIsIk9TIiwiTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MiLCJfbm90aWZIYW5kbGVycyIsIk1hcCIsIkRFVklDRV9OT1RJRl9FVkVOVCIsIk5PVElGX1JFR0lTVEVSX0VWRU5UIiwiTk9USUZfUkVHSVNUUkFUSU9OX0VSUk9SX0VWRU5UIiwiREVWSUNFX0xPQ0FMX05PVElGX0VWRU5UIiwiUHVzaE5vdGlmaWNhdGlvbklPUyIsIm5hdGl2ZU5vdGlmIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsIl9kYXRhIiwiX3JlbW90ZU5vdGlmaWNhdGlvbkNvbXBsZXRlQ2FsbGJhY2tDYWxsZWQiLCJfaXNSZW1vdGUiLCJyZW1vdGUiLCJfbm90aWZpY2F0aW9uSWQiLCJub3RpZmljYXRpb25JZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwibm90aWZLZXkiLCJub3RpZlZhbCIsIl9hbGVydCIsImFsZXJ0IiwiX3NvdW5kIiwic291bmQiLCJfYmFkZ2VDb3VudCIsImJhZGdlIiwiX2NhdGVnb3J5IiwiY2F0ZWdvcnkiLCJfY29udGVudEF2YWlsYWJsZSIsIl90aHJlYWRJRCIsImFwcGxpY2F0aW9uSWNvbkJhZGdlTnVtYmVyIiwic291bmROYW1lIiwiYWxlcnRCb2R5IiwidXNlckluZm8iLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJmaW5pc2giLCJmZXRjaFJlc3VsdCIsImludmFyaWFudCIsIm9uRmluaXNoUmVtb3RlTm90aWZpY2F0aW9uIiwiZ2V0TWVzc2FnZSIsImdldFNvdW5kIiwiZ2V0Q2F0ZWdvcnkiLCJnZXRBbGVydCIsImdldENvbnRlbnRBdmFpbGFibGUiLCJnZXRCYWRnZUNvdW50IiwiZ2V0RGF0YSIsImdldFRocmVhZElEIiwicHJlc2VudExvY2FsTm90aWZpY2F0aW9uIiwiZGV0YWlscyIsInNjaGVkdWxlTG9jYWxOb3RpZmljYXRpb24iLCJjYW5jZWxBbGxMb2NhbE5vdGlmaWNhdGlvbnMiLCJyZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zIiwiZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsImNhbGxiYWNrIiwicmVtb3ZlRGVsaXZlcmVkTm90aWZpY2F0aW9ucyIsImlkZW50aWZpZXJzIiwic2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIiLCJudW1iZXIiLCJnZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlciIsImNhbmNlbExvY2FsTm90aWZpY2F0aW9ucyIsImdldFNjaGVkdWxlZExvY2FsTm90aWZpY2F0aW9ucyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwiaGFuZGxlciIsImxpc3RlbmVyIiwiYWRkTGlzdGVuZXIiLCJub3RpZkRhdGEiLCJyZWdpc3RyYXRpb25JbmZvIiwiZGV2aWNlVG9rZW4iLCJlcnJvckluZm8iLCJzZXQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0IiwicmVtb3ZlIiwiZGVsZXRlIiwicmVxdWVzdFBlcm1pc3Npb25zIiwicGVybWlzc2lvbnMiLCJyZXF1ZXN0ZWRQZXJtaXNzaW9ucyIsImFiYW5kb25QZXJtaXNzaW9ucyIsImNoZWNrUGVybWlzc2lvbnMiLCJnZXRJbml0aWFsTm90aWZpY2F0aW9uIiwidGhlbiIsIm5vdGlmaWNhdGlvbiIsImdldEF1dGhvcml6YXRpb25TdGF0dXMiLCJGZXRjaFJlc3VsdCIsIk5ld0RhdGEiLCJOb0RhdGEiLCJSZXN1bHRGYWlsZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiUHVzaE5vdGlmaWNhdGlvbklPUy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3dcbiAqL1xuXG5pbXBvcnQgdHlwZSB7RXZlbnRTdWJzY3JpcHRpb259IGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0V2ZW50RW1pdHRlcic7XG5cbmltcG9ydCBOYXRpdmVFdmVudEVtaXR0ZXIgZnJvbSAnLi4vRXZlbnRFbWl0dGVyL05hdGl2ZUV2ZW50RW1pdHRlcic7XG5pbXBvcnQgUGxhdGZvcm0gZnJvbSAnLi4vVXRpbGl0aWVzL1BsYXRmb3JtJztcbmltcG9ydCBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyBmcm9tICcuL05hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcblxudHlwZSBOYXRpdmVQdXNoTm90aWZpY2F0aW9uSU9TRXZlbnREZWZpbml0aW9ucyA9IHtcbiAgcmVtb3RlTm90aWZpY2F0aW9uUmVjZWl2ZWQ6IFtcbiAgICB7XG4gICAgICBub3RpZmljYXRpb25JZDogc3RyaW5nLFxuICAgICAgcmVtb3RlOiBib29sZWFuLFxuICAgICAgLi4uXG4gICAgfSxcbiAgXSxcbiAgcmVtb3RlTm90aWZpY2F0aW9uc1JlZ2lzdGVyZWQ6IFtcbiAgICB7XG4gICAgICBkZXZpY2VUb2tlbj86ID9zdHJpbmcsXG4gICAgICAuLi5cbiAgICB9LFxuICBdLFxuICByZW1vdGVOb3RpZmljYXRpb25SZWdpc3RyYXRpb25FcnJvcjogW1xuICAgIHtcbiAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgIGNvZGU6IG51bWJlcixcbiAgICAgIGRldGFpbHM6IHsuLi59LFxuICAgIH0sXG4gIF0sXG4gIGxvY2FsTm90aWZpY2F0aW9uUmVjZWl2ZWQ6IFt7Li4ufV0sXG59O1xuXG5jb25zdCBQdXNoTm90aWZpY2F0aW9uRW1pdHRlciA9XG4gIG5ldyBOYXRpdmVFdmVudEVtaXR0ZXI8TmF0aXZlUHVzaE5vdGlmaWNhdGlvbklPU0V2ZW50RGVmaW5pdGlvbnM+KFxuICAgIC8vIFQ4ODcxNTA2MzogTmF0aXZlRXZlbnRFbWl0dGVyIG9ubHkgdXNlZCB0aGlzIHBhcmFtZXRlciBvbiBpT1MuIE5vdyBpdCB1c2VzIGl0IG9uIGFsbCBwbGF0Zm9ybXMsIHNvIHRoaXMgY29kZSB3YXMgbW9kaWZpZWQgYXV0b21hdGljYWxseSB0byBwcmVzZXJ2ZSBpdHMgYmVoYXZpb3JcbiAgICAvLyBJZiB5b3Ugd2FudCB0byB1c2UgdGhlIG5hdGl2ZSBtb2R1bGUgb24gb3RoZXIgcGxhdGZvcm1zLCBwbGVhc2UgcmVtb3ZlIHRoaXMgY29uZGl0aW9uIGFuZCB0ZXN0IGl0cyBiZWhhdmlvclxuICAgIFBsYXRmb3JtLk9TICE9PSAnaW9zJyA/IG51bGwgOiBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgKTtcblxuY29uc3QgX25vdGlmSGFuZGxlcnMgPSBuZXcgTWFwPHN0cmluZywgdm9pZCB8IEV2ZW50U3Vic2NyaXB0aW9uPigpO1xuXG5jb25zdCBERVZJQ0VfTk9USUZfRVZFTlQgPSAncmVtb3RlTm90aWZpY2F0aW9uUmVjZWl2ZWQnO1xuY29uc3QgTk9USUZfUkVHSVNURVJfRVZFTlQgPSAncmVtb3RlTm90aWZpY2F0aW9uc1JlZ2lzdGVyZWQnO1xuY29uc3QgTk9USUZfUkVHSVNUUkFUSU9OX0VSUk9SX0VWRU5UID0gJ3JlbW90ZU5vdGlmaWNhdGlvblJlZ2lzdHJhdGlvbkVycm9yJztcbmNvbnN0IERFVklDRV9MT0NBTF9OT1RJRl9FVkVOVCA9ICdsb2NhbE5vdGlmaWNhdGlvblJlY2VpdmVkJztcblxuZXhwb3J0IHR5cGUgQ29udGVudEF2YWlsYWJsZSA9IDEgfCBudWxsIHwgdm9pZDtcblxuZXhwb3J0IHR5cGUgRmV0Y2hSZXN1bHQgPSB7XG4gIE5ld0RhdGE6IHN0cmluZyxcbiAgTm9EYXRhOiBzdHJpbmcsXG4gIFJlc3VsdEZhaWxlZDogc3RyaW5nLFxuICAuLi5cbn07XG5cbi8qKlxuICogQW4gZXZlbnQgZW1pdHRlZCBieSBQdXNoTm90aWZpY2F0aW9uSU9TLlxuICovXG5leHBvcnQgdHlwZSBQdXNoTm90aWZpY2F0aW9uRXZlbnROYW1lID0gJEtleXM8e1xuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIHJlbW90ZSBub3RpZmljYXRpb24gaXMgcmVjZWl2ZWQuIFRoZSBoYW5kbGVyIHdpbGwgYmUgaW52b2tlZFxuICAgKiB3aXRoIGFuIGluc3RhbmNlIG9mIGBQdXNoTm90aWZpY2F0aW9uSU9TYC5cbiAgICovXG4gIG5vdGlmaWNhdGlvbjogc3RyaW5nLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiBhIGxvY2FsIG5vdGlmaWNhdGlvbiBpcyByZWNlaXZlZC4gVGhlIGhhbmRsZXIgd2lsbCBiZSBpbnZva2VkXG4gICAqIHdpdGggYW4gaW5zdGFuY2Ugb2YgYFB1c2hOb3RpZmljYXRpb25JT1NgLlxuICAgKi9cbiAgbG9jYWxOb3RpZmljYXRpb246IHN0cmluZyxcbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHVzZXIgcmVnaXN0ZXJzIGZvciByZW1vdGUgbm90aWZpY2F0aW9ucy4gVGhlIGhhbmRsZXIgd2lsbCBiZVxuICAgKiBpbnZva2VkIHdpdGggYSBoZXggc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGV2aWNlVG9rZW4uXG4gICAqL1xuICByZWdpc3Rlcjogc3RyaW5nLFxuICAvKipcbiAgICogRmlyZWQgd2hlbiB0aGUgdXNlciBmYWlscyB0byByZWdpc3RlciBmb3IgcmVtb3RlIG5vdGlmaWNhdGlvbnMuIFR5cGljYWxseVxuICAgKiBvY2N1cnMgd2hlbiBBUE5TIGlzIGhhdmluZyBpc3N1ZXMsIG9yIHRoZSBkZXZpY2UgaXMgYSBzaW11bGF0b3IuIFRoZVxuICAgKiBoYW5kbGVyIHdpbGwgYmUgaW52b2tlZCB3aXRoIHttZXNzYWdlOiBzdHJpbmcsIGNvZGU6IG51bWJlciwgZGV0YWlsczogYW55fS5cbiAgICovXG4gIHJlZ2lzdHJhdGlvbkVycm9yOiBzdHJpbmcsXG4gIC4uLlxufT47XG5cbi8qKlxuICpcbiAqIEhhbmRsZSBwdXNoIG5vdGlmaWNhdGlvbnMgZm9yIHlvdXIgYXBwLCBpbmNsdWRpbmcgcGVybWlzc2lvbiBoYW5kbGluZyBhbmRcbiAqIGljb24gYmFkZ2UgbnVtYmVyLlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3NcbiAqL1xuY2xhc3MgUHVzaE5vdGlmaWNhdGlvbklPUyB7XG4gIF9kYXRhOiBPYmplY3Q7XG4gIF9hbGVydDogc3RyaW5nIHwgT2JqZWN0O1xuICBfc291bmQ6IHN0cmluZztcbiAgX2NhdGVnb3J5OiBzdHJpbmc7XG4gIF9jb250ZW50QXZhaWxhYmxlOiBDb250ZW50QXZhaWxhYmxlO1xuICBfYmFkZ2VDb3VudDogbnVtYmVyO1xuICBfbm90aWZpY2F0aW9uSWQ6IHN0cmluZztcbiAgX2lzUmVtb3RlOiBib29sZWFuO1xuICBfcmVtb3RlTm90aWZpY2F0aW9uQ29tcGxldGVDYWxsYmFja0NhbGxlZDogYm9vbGVhbjtcbiAgX3RocmVhZElEOiBzdHJpbmc7XG5cbiAgc3RhdGljIEZldGNoUmVzdWx0OiBGZXRjaFJlc3VsdCA9IHtcbiAgICBOZXdEYXRhOiAnVUlCYWNrZ3JvdW5kRmV0Y2hSZXN1bHROZXdEYXRhJyxcbiAgICBOb0RhdGE6ICdVSUJhY2tncm91bmRGZXRjaFJlc3VsdE5vRGF0YScsXG4gICAgUmVzdWx0RmFpbGVkOiAnVUlCYWNrZ3JvdW5kRmV0Y2hSZXN1bHRGYWlsZWQnLFxuICB9O1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZXMgdGhlIGxvY2FsTm90aWZpY2F0aW9uIGZvciBpbW1lZGlhdGUgcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3ByZXNlbnRsb2NhbG5vdGlmaWNhdGlvblxuICAgKi9cbiAgc3RhdGljIHByZXNlbnRMb2NhbE5vdGlmaWNhdGlvbihkZXRhaWxzOiBPYmplY3QpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5wcmVzZW50TG9jYWxOb3RpZmljYXRpb24oZGV0YWlscyk7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGVzIHRoZSBsb2NhbE5vdGlmaWNhdGlvbiBmb3IgZnV0dXJlIHByZXNlbnRhdGlvbi5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNzY2hlZHVsZWxvY2Fsbm90aWZpY2F0aW9uXG4gICAqL1xuICBzdGF0aWMgc2NoZWR1bGVMb2NhbE5vdGlmaWNhdGlvbihkZXRhaWxzOiBPYmplY3QpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5zY2hlZHVsZUxvY2FsTm90aWZpY2F0aW9uKGRldGFpbHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYWxsIHNjaGVkdWxlZCBsb2NhbE5vdGlmaWNhdGlvbnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjY2FuY2VsYWxsbG9jYWxub3RpZmljYXRpb25zXG4gICAqL1xuICBzdGF0aWMgY2FuY2VsQWxsTG9jYWxOb3RpZmljYXRpb25zKCk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLmNhbmNlbEFsbExvY2FsTm90aWZpY2F0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgZGVsaXZlcmVkIG5vdGlmaWNhdGlvbnMgZnJvbSBOb3RpZmljYXRpb24gQ2VudGVyLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlbW92ZWFsbGRlbGl2ZXJlZG5vdGlmaWNhdGlvbnNcbiAgICovXG4gIHN0YXRpYyByZW1vdmVBbGxEZWxpdmVyZWROb3RpZmljYXRpb25zKCk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLnJlbW92ZUFsbERlbGl2ZXJlZE5vdGlmaWNhdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyB5b3Ugd2l0aCBhIGxpc3Qgb2YgdGhlIGFwcOKAmXMgbm90aWZpY2F0aW9ucyB0aGF0IGFyZSBzdGlsbCBkaXNwbGF5ZWQgaW4gTm90aWZpY2F0aW9uIENlbnRlci5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNnZXRkZWxpdmVyZWRub3RpZmljYXRpb25zXG4gICAqL1xuICBzdGF0aWMgZ2V0RGVsaXZlcmVkTm90aWZpY2F0aW9ucyhcbiAgICBjYWxsYmFjazogKG5vdGlmaWNhdGlvbnM6IEFycmF5PE9iamVjdD4pID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLmdldERlbGl2ZXJlZE5vdGlmaWNhdGlvbnMoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBub3RpZmljYXRpb25zIGZyb20gTm90aWZpY2F0aW9uIENlbnRlclxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlbW92ZWRlbGl2ZXJlZG5vdGlmaWNhdGlvbnNcbiAgICovXG4gIHN0YXRpYyByZW1vdmVEZWxpdmVyZWROb3RpZmljYXRpb25zKGlkZW50aWZpZXJzOiBBcnJheTxzdHJpbmc+KTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MucmVtb3ZlRGVsaXZlcmVkTm90aWZpY2F0aW9ucyhpZGVudGlmaWVycyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYmFkZ2UgbnVtYmVyIGZvciB0aGUgYXBwIGljb24gb24gdGhlIGhvbWUgc2NyZWVuLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3NldGFwcGxpY2F0aW9uaWNvbmJhZGdlbnVtYmVyXG4gICAqL1xuICBzdGF0aWMgc2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIobnVtYmVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5zZXRBcHBsaWNhdGlvbkljb25CYWRnZU51bWJlcihudW1iZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgYmFkZ2UgbnVtYmVyIGZvciB0aGUgYXBwIGljb24gb24gdGhlIGhvbWUgc2NyZWVuLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGFwcGxpY2F0aW9uaWNvbmJhZGdlbnVtYmVyXG4gICAqL1xuICBzdGF0aWMgZ2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuZ2V0QXBwbGljYXRpb25JY29uQmFkZ2VOdW1iZXIoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBsb2NhbCBub3RpZmljYXRpb25zLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2NhbmNlbGxvY2Fsbm90aWZpY2F0aW9uXG4gICAqL1xuICBzdGF0aWMgY2FuY2VsTG9jYWxOb3RpZmljYXRpb25zKHVzZXJJbmZvOiBPYmplY3QpOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5jYW5jZWxMb2NhbE5vdGlmaWNhdGlvbnModXNlckluZm8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGxvY2FsIG5vdGlmaWNhdGlvbnMgdGhhdCBhcmUgY3VycmVudGx5IHNjaGVkdWxlZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNnZXRzY2hlZHVsZWRsb2NhbG5vdGlmaWNhdGlvbnNcbiAgICovXG4gIHN0YXRpYyBnZXRTY2hlZHVsZWRMb2NhbE5vdGlmaWNhdGlvbnMoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuZ2V0U2NoZWR1bGVkTG9jYWxOb3RpZmljYXRpb25zKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyBhIGxpc3RlbmVyIHRvIHJlbW90ZSBvciBsb2NhbCBub3RpZmljYXRpb24gZXZlbnRzIHdoaWxlIHRoZSBhcHBcbiAgICogaXMgcnVubmluZyBpbiB0aGUgZm9yZWdyb3VuZCBvciB0aGUgYmFja2dyb3VuZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNhZGRldmVudGxpc3RlbmVyXG4gICAqL1xuICBzdGF0aWMgYWRkRXZlbnRMaXN0ZW5lcihcbiAgICB0eXBlOiBQdXNoTm90aWZpY2F0aW9uRXZlbnROYW1lLFxuICAgIGhhbmRsZXI6IEZ1bmN0aW9uLFxuICApOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0eXBlID09PSAnbm90aWZpY2F0aW9uJyB8fFxuICAgICAgICB0eXBlID09PSAncmVnaXN0ZXInIHx8XG4gICAgICAgIHR5cGUgPT09ICdyZWdpc3RyYXRpb25FcnJvcicgfHxcbiAgICAgICAgdHlwZSA9PT0gJ2xvY2FsTm90aWZpY2F0aW9uJyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uSU9TIG9ubHkgc3VwcG9ydHMgYG5vdGlmaWNhdGlvbmAsIGByZWdpc3RlcmAsIGByZWdpc3RyYXRpb25FcnJvcmAsIGFuZCBgbG9jYWxOb3RpZmljYXRpb25gIGV2ZW50cycsXG4gICAgKTtcbiAgICBsZXQgbGlzdGVuZXI7XG4gICAgaWYgKHR5cGUgPT09ICdub3RpZmljYXRpb24nKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBERVZJQ0VfTk9USUZfRVZFTlQsXG4gICAgICAgIG5vdGlmRGF0YSA9PiB7XG4gICAgICAgICAgaGFuZGxlcihuZXcgUHVzaE5vdGlmaWNhdGlvbklPUyhub3RpZkRhdGEpKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnbG9jYWxOb3RpZmljYXRpb24nKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBERVZJQ0VfTE9DQUxfTk9USUZfRVZFTlQsXG4gICAgICAgIG5vdGlmRGF0YSA9PiB7XG4gICAgICAgICAgaGFuZGxlcihuZXcgUHVzaE5vdGlmaWNhdGlvbklPUyhub3RpZkRhdGEpKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVnaXN0ZXInKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBOT1RJRl9SRUdJU1RFUl9FVkVOVCxcbiAgICAgICAgcmVnaXN0cmF0aW9uSW5mbyA9PiB7XG4gICAgICAgICAgaGFuZGxlcihyZWdpc3RyYXRpb25JbmZvLmRldmljZVRva2VuKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVnaXN0cmF0aW9uRXJyb3InKSB7XG4gICAgICBsaXN0ZW5lciA9IFB1c2hOb3RpZmljYXRpb25FbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICBOT1RJRl9SRUdJU1RSQVRJT05fRVJST1JfRVZFTlQsXG4gICAgICAgIGVycm9ySW5mbyA9PiB7XG4gICAgICAgICAgaGFuZGxlcihlcnJvckluZm8pO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG4gICAgX25vdGlmSGFuZGxlcnMuc2V0KHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lci4gRG8gdGhpcyBpbiBgY29tcG9uZW50V2lsbFVubW91bnRgIHRvIHByZXZlbnRcbiAgICogbWVtb3J5IGxlYWtzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlbW92ZWV2ZW50bGlzdGVuZXJcbiAgICovXG4gIHN0YXRpYyByZW1vdmVFdmVudExpc3RlbmVyKFxuICAgIHR5cGU6IFB1c2hOb3RpZmljYXRpb25FdmVudE5hbWUsXG4gICAgaGFuZGxlcjogRnVuY3Rpb24sXG4gICk6IHZvaWQge1xuICAgIGludmFyaWFudChcbiAgICAgIHR5cGUgPT09ICdub3RpZmljYXRpb24nIHx8XG4gICAgICAgIHR5cGUgPT09ICdyZWdpc3RlcicgfHxcbiAgICAgICAgdHlwZSA9PT0gJ3JlZ2lzdHJhdGlvbkVycm9yJyB8fFxuICAgICAgICB0eXBlID09PSAnbG9jYWxOb3RpZmljYXRpb24nLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25JT1Mgb25seSBzdXBwb3J0cyBgbm90aWZpY2F0aW9uYCwgYHJlZ2lzdGVyYCwgYHJlZ2lzdHJhdGlvbkVycm9yYCwgYW5kIGBsb2NhbE5vdGlmaWNhdGlvbmAgZXZlbnRzJyxcbiAgICApO1xuICAgIGNvbnN0IGxpc3RlbmVyID0gX25vdGlmSGFuZGxlcnMuZ2V0KHR5cGUpO1xuICAgIGlmICghbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGlzdGVuZXIucmVtb3ZlKCk7XG4gICAgX25vdGlmSGFuZGxlcnMuZGVsZXRlKHR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3RzIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9ucyBmcm9tIGlPUywgcHJvbXB0aW5nIHRoZSB1c2VyJ3NcbiAgICogZGlhbG9nIGJveC4gQnkgZGVmYXVsdCwgaXQgd2lsbCByZXF1ZXN0IGFsbCBub3RpZmljYXRpb24gcGVybWlzc2lvbnMsIGJ1dFxuICAgKiBhIHN1YnNldCBvZiB0aGVzZSBjYW4gYmUgcmVxdWVzdGVkIGJ5IHBhc3NpbmcgYSBtYXAgb2YgcmVxdWVzdGVkXG4gICAqIHBlcm1pc3Npb25zLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI3JlcXVlc3RwZXJtaXNzaW9uc1xuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RQZXJtaXNzaW9ucyhwZXJtaXNzaW9ucz86IHtcbiAgICBhbGVydD86IGJvb2xlYW4sXG4gICAgYmFkZ2U/OiBib29sZWFuLFxuICAgIHNvdW5kPzogYm9vbGVhbixcbiAgICAuLi5cbiAgfSk6IFByb21pc2U8e1xuICAgIGFsZXJ0OiBib29sZWFuLFxuICAgIGJhZGdlOiBib29sZWFuLFxuICAgIHNvdW5kOiBib29sZWFuLFxuICAgIC4uLlxuICB9PiB7XG4gICAgbGV0IHJlcXVlc3RlZFBlcm1pc3Npb25zID0ge1xuICAgICAgYWxlcnQ6IHRydWUsXG4gICAgICBiYWRnZTogdHJ1ZSxcbiAgICAgIHNvdW5kOiB0cnVlLFxuICAgIH07XG4gICAgaWYgKHBlcm1pc3Npb25zKSB7XG4gICAgICByZXF1ZXN0ZWRQZXJtaXNzaW9ucyA9IHtcbiAgICAgICAgYWxlcnQ6ICEhcGVybWlzc2lvbnMuYWxlcnQsXG4gICAgICAgIGJhZGdlOiAhIXBlcm1pc3Npb25zLmJhZGdlLFxuICAgICAgICBzb3VuZDogISFwZXJtaXNzaW9ucy5zb3VuZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIE5hdGl2ZVB1c2hOb3RpZmljYXRpb25NYW5hZ2VySU9TLFxuICAgICAgJ1B1c2hOb3RpZmljYXRpb25NYW5hZ2VyIGlzIG5vdCBhdmFpbGFibGUuJyxcbiAgICApO1xuICAgIHJldHVybiBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5yZXF1ZXN0UGVybWlzc2lvbnMoXG4gICAgICByZXF1ZXN0ZWRQZXJtaXNzaW9ucyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgZm9yIGFsbCByZW1vdGUgbm90aWZpY2F0aW9ucyByZWNlaXZlZCB2aWEgQXBwbGUgUHVzaCBOb3RpZmljYXRpb24gc2VydmljZS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNhYmFuZG9ucGVybWlzc2lvbnNcbiAgICovXG4gIHN0YXRpYyBhYmFuZG9uUGVybWlzc2lvbnMoKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuYWJhbmRvblBlcm1pc3Npb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VlIHdoYXQgcHVzaCBwZXJtaXNzaW9ucyBhcmUgY3VycmVudGx5IGVuYWJsZWQuIGBjYWxsYmFja2Agd2lsbCBiZVxuICAgKiBpbnZva2VkIHdpdGggYSBgcGVybWlzc2lvbnNgIG9iamVjdC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvcHVzaG5vdGlmaWNhdGlvbmlvcyNjaGVja3Blcm1pc3Npb25zXG4gICAqL1xuICBzdGF0aWMgY2hlY2tQZXJtaXNzaW9ucyhjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICBpbnZhcmlhbnQodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nLCAnTXVzdCBwcm92aWRlIGEgdmFsaWQgY2FsbGJhY2snKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5jaGVja1Blcm1pc3Npb25zKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGVpdGhlciB0aGUgbm90aWZpY2F0aW9uXG4gICAqIG9iamVjdCBpZiB0aGUgYXBwIHdhcyBsYXVuY2hlZCBieSBhIHB1c2ggbm90aWZpY2F0aW9uLCBvciBgbnVsbGAgb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGluaXRpYWxub3RpZmljYXRpb25cbiAgICovXG4gIHN0YXRpYyBnZXRJbml0aWFsTm90aWZpY2F0aW9uKCk6IFByb21pc2U8P1B1c2hOb3RpZmljYXRpb25JT1M+IHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUyxcbiAgICAgICdQdXNoTm90aWZpY2F0aW9uTWFuYWdlciBpcyBub3QgYXZhaWxhYmxlLicsXG4gICAgKTtcbiAgICByZXR1cm4gTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MuZ2V0SW5pdGlhbE5vdGlmaWNhdGlvbigpLnRoZW4oXG4gICAgICBub3RpZmljYXRpb24gPT4ge1xuICAgICAgICByZXR1cm4gbm90aWZpY2F0aW9uICYmIG5ldyBQdXNoTm90aWZpY2F0aW9uSU9TKG5vdGlmaWNhdGlvbik7XG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBub3RpZmljYXRpb24gYXV0aG9yaXphdGlvbiBzdGF0dXMuXG4gICAqL1xuICBzdGF0aWMgZ2V0QXV0aG9yaXphdGlvblN0YXR1cyhcbiAgICBjYWxsYmFjazogKGF1dGhvcml6YXRpb25TdGF0dXM6IG51bWJlcikgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG5cbiAgICBOYXRpdmVQdXNoTm90aWZpY2F0aW9uTWFuYWdlcklPUy5nZXRBdXRob3JpemF0aW9uU3RhdHVzKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBZb3Ugd2lsbCBuZXZlciBuZWVkIHRvIGluc3RhbnRpYXRlIGBQdXNoTm90aWZpY2F0aW9uSU9TYCB5b3Vyc2VsZi5cbiAgICogTGlzdGVuaW5nIHRvIHRoZSBgbm90aWZpY2F0aW9uYCBldmVudCBhbmQgaW52b2tpbmdcbiAgICogYGdldEluaXRpYWxOb3RpZmljYXRpb25gIGlzIHN1ZmZpY2llbnRcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKG5hdGl2ZU5vdGlmOiBPYmplY3QpIHtcbiAgICB0aGlzLl9kYXRhID0ge307XG4gICAgdGhpcy5fcmVtb3RlTm90aWZpY2F0aW9uQ29tcGxldGVDYWxsYmFja0NhbGxlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2lzUmVtb3RlID0gbmF0aXZlTm90aWYucmVtb3RlO1xuICAgIGlmICh0aGlzLl9pc1JlbW90ZSkge1xuICAgICAgdGhpcy5fbm90aWZpY2F0aW9uSWQgPSBuYXRpdmVOb3RpZi5ub3RpZmljYXRpb25JZDtcbiAgICB9XG5cbiAgICBpZiAobmF0aXZlTm90aWYucmVtb3RlKSB7XG4gICAgICAvLyBFeHRyYWN0IGRhdGEgZnJvbSBBcHBsZSdzIGBhcHNgIGRpY3QgYXMgZGVmaW5lZDpcbiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9saWJyYXJ5L2lvcy9kb2N1bWVudGF0aW9uL05ldHdvcmtpbmdJbnRlcm5ldC9Db25jZXB0dWFsL1JlbW90ZU5vdGlmaWNhdGlvbnNQRy9DaGFwdGVycy9BcHBsZVB1c2hTZXJ2aWNlXG4gICAgICBPYmplY3Qua2V5cyhuYXRpdmVOb3RpZikuZm9yRWFjaChub3RpZktleSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdGlmVmFsID0gbmF0aXZlTm90aWZbbm90aWZLZXldO1xuICAgICAgICBpZiAobm90aWZLZXkgPT09ICdhcHMnKSB7XG4gICAgICAgICAgdGhpcy5fYWxlcnQgPSBub3RpZlZhbC5hbGVydDtcbiAgICAgICAgICB0aGlzLl9zb3VuZCA9IG5vdGlmVmFsLnNvdW5kO1xuICAgICAgICAgIHRoaXMuX2JhZGdlQ291bnQgPSBub3RpZlZhbC5iYWRnZTtcbiAgICAgICAgICB0aGlzLl9jYXRlZ29yeSA9IG5vdGlmVmFsLmNhdGVnb3J5O1xuICAgICAgICAgIHRoaXMuX2NvbnRlbnRBdmFpbGFibGUgPSBub3RpZlZhbFsnY29udGVudC1hdmFpbGFibGUnXTtcbiAgICAgICAgICB0aGlzLl90aHJlYWRJRCA9IG5vdGlmVmFsWyd0aHJlYWQtaWQnXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9kYXRhW25vdGlmS2V5XSA9IG5vdGlmVmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG9jYWwgbm90aWZpY2F0aW9ucyBhcmVuJ3QgYmVpbmcgc2VudCBkb3duIHdpdGggYGFwc2AgZGljdC5cbiAgICAgIHRoaXMuX2JhZGdlQ291bnQgPSBuYXRpdmVOb3RpZi5hcHBsaWNhdGlvbkljb25CYWRnZU51bWJlcjtcbiAgICAgIHRoaXMuX3NvdW5kID0gbmF0aXZlTm90aWYuc291bmROYW1lO1xuICAgICAgdGhpcy5fYWxlcnQgPSBuYXRpdmVOb3RpZi5hbGVydEJvZHk7XG4gICAgICB0aGlzLl9kYXRhID0gbmF0aXZlTm90aWYudXNlckluZm87XG4gICAgICB0aGlzLl9jYXRlZ29yeSA9IG5hdGl2ZU5vdGlmLmNhdGVnb3J5O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBhdmFpbGFibGUgZm9yIHJlbW90ZSBub3RpZmljYXRpb25zIHRoYXQgaGF2ZSBiZWVuIHJlY2VpdmVkIHZpYTpcbiAgICogYGFwcGxpY2F0aW9uOmRpZFJlY2VpdmVSZW1vdGVOb3RpZmljYXRpb246ZmV0Y2hDb21wbGV0aW9uSGFuZGxlcjpgXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZmluaXNoXG4gICAqL1xuICBmaW5pc2goZmV0Y2hSZXN1bHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgICF0aGlzLl9pc1JlbW90ZSB8fFxuICAgICAgIXRoaXMuX25vdGlmaWNhdGlvbklkIHx8XG4gICAgICB0aGlzLl9yZW1vdGVOb3RpZmljYXRpb25Db21wbGV0ZUNhbGxiYWNrQ2FsbGVkXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3JlbW90ZU5vdGlmaWNhdGlvbkNvbXBsZXRlQ2FsbGJhY2tDYWxsZWQgPSB0cnVlO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1MsXG4gICAgICAnUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXIgaXMgbm90IGF2YWlsYWJsZS4nLFxuICAgICk7XG4gICAgTmF0aXZlUHVzaE5vdGlmaWNhdGlvbk1hbmFnZXJJT1Mub25GaW5pc2hSZW1vdGVOb3RpZmljYXRpb24oXG4gICAgICB0aGlzLl9ub3RpZmljYXRpb25JZCxcbiAgICAgIGZldGNoUmVzdWx0LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQW4gYWxpYXMgZm9yIGBnZXRBbGVydGAgdG8gZ2V0IHRoZSBub3RpZmljYXRpb24ncyBtYWluIG1lc3NhZ2Ugc3RyaW5nXG4gICAqL1xuICBnZXRNZXNzYWdlKCk6ID9zdHJpbmcgfCA/T2JqZWN0IHtcbiAgICAvLyBhbGlhcyBiZWNhdXNlIFwiYWxlcnRcIiBpcyBhbiBhbWJpZ3VvdXMgbmFtZVxuICAgIHJldHVybiB0aGlzLl9hbGVydDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzb3VuZCBzdHJpbmcgZnJvbSB0aGUgYGFwc2Agb2JqZWN0XG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0c291bmRcbiAgICovXG4gIGdldFNvdW5kKCk6ID9zdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9zb3VuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjYXRlZ29yeSBzdHJpbmcgZnJvbSB0aGUgYGFwc2Agb2JqZWN0XG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0Y2F0ZWdvcnlcbiAgICovXG4gIGdldENhdGVnb3J5KCk6ID9zdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jYXRlZ29yeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBub3RpZmljYXRpb24ncyBtYWluIG1lc3NhZ2UgZnJvbSB0aGUgYGFwc2Agb2JqZWN0XG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0YWxlcnRcbiAgICovXG4gIGdldEFsZXJ0KCk6ID9zdHJpbmcgfCA/T2JqZWN0IHtcbiAgICByZXR1cm4gdGhpcy5fYWxlcnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY29udGVudC1hdmFpbGFibGUgbnVtYmVyIGZyb20gdGhlIGBhcHNgIG9iamVjdFxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGNvbnRlbnRhdmFpbGFibGVcbiAgICovXG4gIGdldENvbnRlbnRBdmFpbGFibGUoKTogQ29udGVudEF2YWlsYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRBdmFpbGFibGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYmFkZ2UgY291bnQgbnVtYmVyIGZyb20gdGhlIGBhcHNgIG9iamVjdFxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9wdXNobm90aWZpY2F0aW9uaW9zI2dldGJhZGdlY291bnRcbiAgICovXG4gIGdldEJhZGdlQ291bnQoKTogP251bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2JhZGdlQ291bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGF0YSBvYmplY3Qgb24gdGhlIG5vdGlmXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0ZGF0YVxuICAgKi9cbiAgZ2V0RGF0YSgpOiA/T2JqZWN0IHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0aHJlYWQgSUQgb24gdGhlIG5vdGlmXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL3B1c2hub3RpZmljYXRpb25pb3MjZ2V0dGhyZWFkaWRcbiAgICovXG4gIGdldFRocmVhZElEKCk6ID9zdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl90aHJlYWRJRDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFB1c2hOb3RpZmljYXRpb25JT1M7XG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBWUEsSUFBQUEsbUJBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGlDQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxVQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUEwQkEsSUFBTUksdUJBQXVCLEdBQzNCLElBQUlDLDJCQUFrQixDQUdwQkMsaUJBQVEsQ0FBQ0MsRUFBRSxLQUFLLEtBQUssR0FBRyxJQUFJLEdBQUdDLHlDQUNqQyxDQUFDO0FBRUgsSUFBTUMsY0FBYyxHQUFHLElBQUlDLEdBQUcsQ0FBbUMsQ0FBQztBQUVsRSxJQUFNQyxrQkFBa0IsR0FBRyw0QkFBNEI7QUFDdkQsSUFBTUMsb0JBQW9CLEdBQUcsK0JBQStCO0FBQzVELElBQU1DLDhCQUE4QixHQUFHLHFDQUFxQztBQUM1RSxJQUFNQyx3QkFBd0IsR0FBRywyQkFBMkI7QUFBQyxJQThDdkRDLG1CQUFtQjtFQTJVdkIsU0FBQUEsb0JBQVlDLFdBQW1CLEVBQUU7SUFBQSxJQUFBQyxLQUFBO0lBQUEsSUFBQUMsZ0JBQUEsQ0FBQUMsT0FBQSxRQUFBSixtQkFBQTtJQUMvQixJQUFJLENBQUNLLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZixJQUFJLENBQUNDLHlDQUF5QyxHQUFHLEtBQUs7SUFDdEQsSUFBSSxDQUFDQyxTQUFTLEdBQUdOLFdBQVcsQ0FBQ08s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