{"version":3,"names":["_react","require","_gdprService","_interopRequireDefault","_core","useGDPRStatus","_useState","useState","isPending","daysRemaining","gracePeriodEndsAt","canCancel","_useState2","_slicedToArray2","default","status","setStatus","_useState3","_useState4","isLoading","setIsLoading","refresh","useCallback","_asyncToGenerator2","result","gdprService","getAccountStatus","success","_result$daysRemaining","_result$scheduledDele","_result$canCancel","scheduledDeletionDate","error","logger","useEffect"],"sources":["useGDPRStatus.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nimport gdprService from \"../../../services/gdprService\";\nimport { logger } from \"@pawfectmatch/core\";\n\nexport interface GDPRStatus {\n  isPending: boolean;\n  daysRemaining: number | null;\n  gracePeriodEndsAt: string | null;\n  canCancel: boolean;\n}\n\nexport interface UseGDPRStatusReturn {\n  status: GDPRStatus;\n  isLoading: boolean;\n  refresh: () => Promise<void>;\n}\n\n/**\n * Hook for checking GDPR deletion status\n */\nexport function useGDPRStatus(): UseGDPRStatusReturn {\n  const [status, setStatus] = useState<GDPRStatus>({\n    isPending: false,\n    daysRemaining: null,\n    gracePeriodEndsAt: null,\n    canCancel: false,\n  });\n  const [isLoading, setIsLoading] = useState(true);\n\n  const refresh = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const result = await gdprService.getAccountStatus();\n      \n      if (result.success && result.status === 'pending') {\n        setStatus({\n          isPending: true,\n          daysRemaining: result.daysRemaining ?? 30,\n          gracePeriodEndsAt: result.scheduledDeletionDate ?? null,\n          canCancel: result.canCancel ?? true,\n        });\n      } else {\n        setStatus({\n          isPending: false,\n          daysRemaining: null,\n          gracePeriodEndsAt: null,\n          canCancel: false,\n        });\n      }\n    } catch (error) {\n      logger.error(\"Failed to check GDPR status:\", { error });\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    void refresh();\n  }, [refresh]);\n\n  return {\n    status,\n    isLoading,\n    refresh,\n  };\n}\n"],"mappings":";;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AAkBO,SAASI,aAAaA,CAAA,EAAwB;EACnD,IAAAC,SAAA,GAA4B,IAAAC,eAAQ,EAAa;MAC/CC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE,IAAI;MACnBC,iBAAiB,EAAE,IAAI;MACvBC,SAAS,EAAE;IACb,CAAC,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAR,SAAA;IALKS,MAAM,GAAAH,UAAA;IAAEI,SAAS,GAAAJ,UAAA;EAMxB,IAAAK,UAAA,GAAkC,IAAAV,eAAQ,EAAC,IAAI,CAAC;IAAAW,UAAA,OAAAL,eAAA,CAAAC,OAAA,EAAAG,UAAA;IAAzCE,SAAS,GAAAD,UAAA;IAAEE,YAAY,GAAAF,UAAA;EAE9B,IAAMG,OAAO,GAAG,IAAAC,kBAAW,MAAAC,kBAAA,CAAAT,OAAA,EAAC,aAAY;IACtCM,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,IAAMI,MAAM,SAASC,oBAAW,CAACC,gBAAgB,CAAC,CAAC;MAEnD,IAAIF,MAAM,CAACG,OAAO,IAAIH,MAAM,CAACT,MAAM,KAAK,SAAS,EAAE;QAAA,IAAAa,qBAAA,EAAAC,qBAAA,EAAAC,iBAAA;QACjDd,SAAS,CAAC;UACRR,SAAS,EAAE,IAAI;UACfC,aAAa,GAAAmB,qBAAA,GAAEJ,MAAM,CAACf,aAAa,YAAAmB,qBAAA,GAAI,EAAE;UACzClB,iBAAiB,GAAAmB,qBAAA,GAAEL,MAAM,CAACO,qBAAqB,YAAAF,qBAAA,GAAI,IAAI;UACvDlB,SAAS,GAAAmB,iBAAA,GAAEN,MAAM,CAACb,SAAS,YAAAmB,iBAAA,GAAI;QACjC,CAAC,CAAC;MACJ,CAAC,MAAM;QACLd,SAAS,CAAC;UACRR,SAAS,EAAE,KAAK;UAChBC,aAAa,EAAE,IAAI;UACnBC,iBAAiB,EAAE,IAAI;UACvBC,SAAS,EAAE;QACb,CAAC,CAAC;MACJ;IACF,CAAC,CAAC,OAAOqB,KAAK,EAAE;MACdC,YAAM,CAACD,KAAK,CAAC,8BAA8B,EAAE;QAAEA,KAAK,EAALA;MAAM,CAAC,CAAC;IACzD,CAAC,SAAS;MACRZ,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,GAAE,EAAE,CAAC;EAEN,IAAAc,gBAAS,EAAC,YAAM;IACd,KAAKb,OAAO,CAAC,CAAC;EAChB,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,OAAO;IACLN,MAAM,EAANA,MAAM;IACNI,SAAS,EAATA,SAAS;IACTE,OAAO,EAAPA;EACF,CAAC;AACH","ignoreList":[]}