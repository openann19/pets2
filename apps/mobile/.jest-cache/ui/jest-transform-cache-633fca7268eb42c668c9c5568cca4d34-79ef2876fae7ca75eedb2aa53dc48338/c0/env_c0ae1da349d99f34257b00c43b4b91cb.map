{"version":3,"names":["Object","defineProperty","exports","value","getSafeSessionStorage","getSafeLocalStorage","getSafeNavigator","getSafeDocument","getSafeWindow","isNode","isBrowser","getLocalStorageItem","setLocalStorageItem","removeLocalStorageItem","getSessionStorageItem","setSessionStorageItem","safeRequestAnimationFrame","safeCancelAnimationFrame","safeMatchMedia","prefersReducedMotion","hasPointerFine","hasTouchSupport","window","document","process","versions","node","undefined","navigator","localStorage","_unused","sessionStorage","_unused2","key","storage","_storage$getItem","getItem","_unused3","setItem","_unused4","removeItem","_unused5","_storage$getItem2","_unused6","_unused7","callback","requestAnimationFrame","handle","cancelAnimationFrame","query","matchMedia","_mediaQuery$matches","mediaQuery","matches","_mediaQuery$matches2","nav","maxTouchPoints"],"sources":["env.js"],"sourcesContent":["\"use strict\";\n/// <reference lib=\"dom\" />\n/**\n * Isomorphic environment guards for universal code\n * Safe to use in both Node and browser contexts\n *\n * Note: This file uses DOM types via triple-slash reference\n * but guards all DOM access with runtime checks for Node safety\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSafeSessionStorage = exports.getSafeLocalStorage = exports.getSafeNavigator = exports.getSafeDocument = exports.getSafeWindow = exports.isNode = exports.isBrowser = void 0;\nexports.getLocalStorageItem = getLocalStorageItem;\nexports.setLocalStorageItem = setLocalStorageItem;\nexports.removeLocalStorageItem = removeLocalStorageItem;\nexports.getSessionStorageItem = getSessionStorageItem;\nexports.setSessionStorageItem = setSessionStorageItem;\nexports.safeRequestAnimationFrame = safeRequestAnimationFrame;\nexports.safeCancelAnimationFrame = safeCancelAnimationFrame;\nexports.safeMatchMedia = safeMatchMedia;\nexports.prefersReducedMotion = prefersReducedMotion;\nexports.hasPointerFine = hasPointerFine;\nexports.hasTouchSupport = hasTouchSupport;\n/** Runtime check for browser environment */\nconst isBrowser = () => typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\nexports.isBrowser = isBrowser;\n/** Runtime check for Node environment */\nconst isNode = () => typeof process !== \"undefined\" &&\n    process.versions != null &&\n    process.versions.node != null;\nexports.isNode = isNode;\n/** Safe window access (undefined in Node) */\nconst getSafeWindow = () => (0, exports.isBrowser)() ? window : undefined;\nexports.getSafeWindow = getSafeWindow;\n/** Safe document access (undefined in Node) */\nconst getSafeDocument = () => (0, exports.isBrowser)() ? window.document : undefined;\nexports.getSafeDocument = getSafeDocument;\n/** Safe navigator access (undefined in Node) */\nconst getSafeNavigator = () => (0, exports.isBrowser)() ? window.navigator : undefined;\nexports.getSafeNavigator = getSafeNavigator;\n/** Safe localStorage access with error handling */\nconst getSafeLocalStorage = () => {\n    if (!(0, exports.isBrowser)())\n        return undefined;\n    try {\n        return window.localStorage;\n    }\n    catch {\n        return undefined;\n    }\n};\nexports.getSafeLocalStorage = getSafeLocalStorage;\n/** Safe sessionStorage access with error handling */\nconst getSafeSessionStorage = () => {\n    if (!(0, exports.isBrowser)())\n        return undefined;\n    try {\n        return window.sessionStorage;\n    }\n    catch {\n        return undefined;\n    }\n};\nexports.getSafeSessionStorage = getSafeSessionStorage;\n/** Get localStorage item (returns undefined in Node or on error) */\nfunction getLocalStorageItem(key) {\n    const storage = (0, exports.getSafeLocalStorage)();\n    if (!storage)\n        return undefined;\n    try {\n        return storage.getItem(key) ?? undefined;\n    }\n    catch {\n        return undefined;\n    }\n}\n/** Set localStorage item (no-op in Node or on error) */\nfunction setLocalStorageItem(key, value) {\n    const storage = (0, exports.getSafeLocalStorage)();\n    if (!storage)\n        return false;\n    try {\n        storage.setItem(key, value);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n/** Remove localStorage item (no-op in Node or on error) */\nfunction removeLocalStorageItem(key) {\n    const storage = (0, exports.getSafeLocalStorage)();\n    if (!storage)\n        return false;\n    try {\n        storage.removeItem(key);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n/** Get sessionStorage item (returns undefined in Node or on error) */\nfunction getSessionStorageItem(key) {\n    const storage = (0, exports.getSafeSessionStorage)();\n    if (!storage)\n        return undefined;\n    try {\n        return storage.getItem(key) ?? undefined;\n    }\n    catch {\n        return undefined;\n    }\n}\n/** Set sessionStorage item (no-op in Node or on error) */\nfunction setSessionStorageItem(key, value) {\n    const storage = (0, exports.getSafeSessionStorage)();\n    if (!storage)\n        return false;\n    try {\n        storage.setItem(key, value);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n/** Safe requestAnimationFrame (no-op in Node) */\nfunction safeRequestAnimationFrame(callback) {\n    if (!(0, exports.isBrowser)())\n        return undefined;\n    return window.requestAnimationFrame(callback);\n}\n/** Safe cancelAnimationFrame (no-op in Node) */\nfunction safeCancelAnimationFrame(handle) {\n    if (!(0, exports.isBrowser)())\n        return;\n    window.cancelAnimationFrame(handle);\n}\n/** Safe matchMedia (returns null in Node) */\nfunction safeMatchMedia(query) {\n    if (!(0, exports.isBrowser)())\n        return undefined;\n    return window.matchMedia(query);\n}\n/** Check if user prefers reduced motion */\nfunction prefersReducedMotion() {\n    const mediaQuery = safeMatchMedia(\"(prefers-reduced-motion: reduce)\");\n    return mediaQuery?.matches ?? false;\n}\n/** Check if device has pointer:fine (mouse/trackpad) */\nfunction hasPointerFine() {\n    const mediaQuery = safeMatchMedia(\"(pointer: fine)\");\n    return mediaQuery?.matches ?? false;\n}\n/** Check if device has touch support */\nfunction hasTouchSupport() {\n    if (!(0, exports.isBrowser)())\n        return false;\n    const nav = (0, exports.getSafeNavigator)();\n    return (nav != null &&\n        (\"ontouchstart\" in window ||\n            (nav.maxTouchPoints != null && nav.maxTouchPoints > 0)));\n}\n"],"mappings":"AAAA,YAAY;AASZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,qBAAqB,GAAGF,OAAO,CAACG,mBAAmB,GAAGH,OAAO,CAACI,gBAAgB,GAAGJ,OAAO,CAACK,eAAe,GAAGL,OAAO,CAACM,aAAa,GAAGN,OAAO,CAACO,MAAM,GAAGP,OAAO,CAACQ,SAAS,GAAG,KAAK,CAAC;AACtLR,OAAO,CAACS,mBAAmB,GAAGA,mBAAmB;AACjDT,OAAO,CAACU,mBAAmB,GAAGA,mBAAmB;AACjDV,OAAO,CAACW,sBAAsB,GAAGA,sBAAsB;AACvDX,OAAO,CAACY,qBAAqB,GAAGA,qBAAqB;AACrDZ,OAAO,CAACa,qBAAqB,GAAGA,qBAAqB;AACrDb,OAAO,CAACc,yBAAyB,GAAGA,yBAAyB;AAC7Dd,OAAO,CAACe,wBAAwB,GAAGA,wBAAwB;AAC3Df,OAAO,CAACgB,cAAc,GAAGA,cAAc;AACvChB,OAAO,CAACiB,oBAAoB,GAAGA,oBAAoB;AACnDjB,OAAO,CAACkB,cAAc,GAAGA,cAAc;AACvClB,OAAO,CAACmB,eAAe,GAAGA,eAAe;AAEzC,IAAMX,SAAS,GAAG,SAAZA,SAASA,CAAA;EAAA,OAAS,OAAOY,MAAM,KAAK,WAAW,IAAI,OAAOA,MAAM,CAACC,QAAQ,KAAK,WAAW;AAAA;AAC/FrB,OAAO,CAACQ,SAAS,GAAGA,SAAS;AAE7B,IAAMD,MAAM,GAAG,SAATA,MAAMA,CAAA;EAAA,OAAS,OAAOe,OAAO,KAAK,WAAW,IAC/CA,OAAO,CAACC,QAAQ,IAAI,IAAI,IACxBD,OAAO,CAACC,QAAQ,CAACC,IAAI,IAAI,IAAI;AAAA;AACjCxB,OAAO,CAACO,MAAM,GAAGA,MAAM;AAEvB,IAAMD,aAAa,GAAG,SAAhBA,aAAaA,CAAA;EAAA,OAAS,CAAC,CAAC,EAAEN,OAAO,CAACQ,SAAS,EAAE,CAAC,GAAGY,MAAM,GAAGK,SAAS;AAAA;AACzEzB,OAAO,CAACM,aAAa,GAAGA,aAAa;AAErC,IAAMD,eAAe,GAAG,SAAlBA,eAAeA,CAAA;EAAA,OAAS,CAAC,CAAC,EAAEL,OAAO,CAACQ,SAAS,EAAE,CAAC,GAAGY,MAAM,CAACC,QAAQ,GAAGI,SAAS;AAAA;AACpFzB,OAAO,CAACK,eAAe,GAAGA,eAAe;AAEzC,IAAMD,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;EAAA,OAAS,CAAC,CAAC,EAAEJ,OAAO,CAACQ,SAAS,EAAE,CAAC,GAAGY,MAAM,CAACM,SAAS,GAAGD,SAAS;AAAA;AACtFzB,OAAO,CAACI,gBAAgB,GAAGA,gBAAgB;AAE3C,IAAMD,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;EAC9B,IAAI,CAAC,CAAC,CAAC,EAAEH,OAAO,CAACQ,SAAS,EAAE,CAAC,EACzB,OAAOiB,SAAS;EACpB,IAAI;IACA,OAAOL,MAAM,CAACO,YAAY;EAC9B,CAAC,CACD,OAAAC,OAAA,EAAM;IACF,OAAOH,SAAS;EACpB;AACJ,CAAC;AACDzB,OAAO,CAACG,mBAAmB,GAAGA,mBAAmB;AAEjD,IAAMD,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAA,EAAS;EAChC,IAAI,CAAC,CAAC,CAAC,EAAEF,OAAO,CAACQ,SAAS,EAAE,CAAC,EACzB,OAAOiB,SAAS;EACpB,IAAI;IACA,OAAOL,MAAM,CAACS,cAAc;EAChC,CAAC,CACD,OAAAC,QAAA,EAAM;IACF,OAAOL,SAAS;EACpB;AACJ,CAAC;AACDzB,OAAO,CAACE,qBAAqB,GAAGA,qBAAqB;AAErD,SAASO,mBAAmBA,CAACsB,GAAG,EAAE;EAC9B,IAAMC,OAAO,GAAG,CAAC,CAAC,EAAEhC,OAAO,CAACG,mBAAmB,EAAE,CAAC;EAClD,IAAI,CAAC6B,OAAO,EACR,OAAOP,SAAS;EACpB,IAAI;IAAA,IAAAQ,gBAAA;IACA,QAAAA,gBAAA,GAAOD,OAAO,CAACE,OAAO,CAACH,GAAG,CAAC,YAAAE,gBAAA,GAAIR,SAAS;EAC5C,CAAC,CACD,OAAAU,QAAA,EAAM;IACF,OAAOV,SAAS;EACpB;AACJ;AAEA,SAASf,mBAAmBA,CAACqB,GAAG,EAAE9B,KAAK,EAAE;EACrC,IAAM+B,OAAO,GAAG,CAAC,CAAC,EAAEhC,OAAO,CAACG,mBAAmB,EAAE,CAAC;EAClD,IAAI,CAAC6B,OAAO,EACR,OAAO,KAAK;EAChB,IAAI;IACAA,OAAO,CAACI,OAAO,CAACL,GAAG,EAAE9B,KAAK,CAAC;IAC3B,OAAO,IAAI;EACf,CAAC,CACD,OAAAoC,QAAA,EAAM;IACF,OAAO,KAAK;EAChB;AACJ;AAEA,SAAS1B,sBAAsBA,CAACoB,GAAG,EAAE;EACjC,IAAMC,OAAO,GAAG,CAAC,CAAC,EAAEhC,OAAO,CAACG,mBAAmB,EAAE,CAAC;EAClD,IAAI,CAAC6B,OAAO,EACR,OAAO,KAAK;EAChB,IAAI;IACAA,OAAO,CAACM,UAAU,CAACP,GAAG,CAAC;IACvB,OAAO,IAAI;EACf,CAAC,CACD,OAAAQ,QAAA,EAAM;IACF,OAAO,KAAK;EAChB;AACJ;AAEA,SAAS3B,qBAAqBA,CAACmB,GAAG,EAAE;EAChC,IAAMC,OAAO,GAAG,CAAC,CAAC,EAAEhC,OAAO,CAACE,qBAAqB,EAAE,CAAC;EACpD,IAAI,CAAC8B,OAAO,EACR,OAAOP,SAAS;EACpB,IAAI;IAAA,IAAAe,iBAAA;IACA,QAAAA,iBAAA,GAAOR,OAAO,CAACE,OAAO,CAACH,GAAG,CAAC,YAAAS,iBAAA,GAAIf,SAAS;EAC5C,CAAC,CACD,OAAAgB,QAAA,EAAM;IACF,OAAOhB,SAAS;EACpB;AACJ;AAEA,SAASZ,qBAAqBA,CAACkB,GAAG,EAAE9B,KAAK,EAAE;EACvC,IAAM+B,OAAO,GAAG,CAAC,CAAC,EAAEhC,OAAO,CAACE,qBAAqB,EAAE,CAAC;EACpD,IAAI,CAAC8B,OAAO,EACR,OAAO,KAAK;EAChB,IAAI;IACAA,OAAO,CAACI,OAAO,CAACL,GAAG,EAAE9B,KAAK,CAAC;IAC3B,OAAO,IAAI;EACf,CAAC,CACD,OAAAyC,QAAA,EAAM;IACF,OAAO,KAAK;EAChB;AACJ;AAEA,SAAS5B,yBAAyBA,CAAC6B,QAAQ,EAAE;EACzC,IAAI,CAAC,CAAC,CAAC,EAAE3C,OAAO,CAACQ,SAAS,EAAE,CAAC,EACzB,OAAOiB,SAAS;EACpB,OAAOL,MAAM,CAACwB,qBAAqB,CAACD,QAAQ,CAAC;AACjD;AAEA,SAAS5B,wBAAwBA,CAAC8B,MAAM,EAAE;EACtC,IAAI,CAAC,CAAC,CAAC,EAAE7C,OAAO,CAACQ,SAAS,EAAE,CAAC,EACzB;EACJY,MAAM,CAAC0B,oBAAoB,CAACD,MAAM,CAAC;AACvC;AAEA,SAAS7B,cAAcA,CAAC+B,KAAK,EAAE;EAC3B,IAAI,CAAC,CAAC,CAAC,EAAE/C,OAAO,CAACQ,SAAS,EAAE,CAAC,EACzB,OAAOiB,SAAS;EACpB,OAAOL,MAAM,CAAC4B,UAAU,CAACD,KAAK,CAAC;AACnC;AAEA,SAAS9B,oBAAoBA,CAAA,EAAG;EAAA,IAAAgC,mBAAA;EAC5B,IAAMC,UAAU,GAAGlC,cAAc,CAAC,kCAAkC,CAAC;EACrE,QAAAiC,mBAAA,GAAOC,UAAU,oBAAVA,UAAU,CAAEC,OAAO,YAAAF,mBAAA,GAAI,KAAK;AACvC;AAEA,SAAS/B,cAAcA,CAAA,EAAG;EAAA,IAAAkC,oBAAA;EACtB,IAAMF,UAAU,GAAGlC,cAAc,CAAC,iBAAiB,CAAC;EACpD,QAAAoC,oBAAA,GAAOF,UAAU,oBAAVA,UAAU,CAAEC,OAAO,YAAAC,oBAAA,GAAI,KAAK;AACvC;AAEA,SAASjC,eAAeA,CAAA,EAAG;EACvB,IAAI,CAAC,CAAC,CAAC,EAAEnB,OAAO,CAACQ,SAAS,EAAE,CAAC,EACzB,OAAO,KAAK;EAChB,IAAM6C,GAAG,GAAG,CAAC,CAAC,EAAErD,OAAO,CAACI,gBAAgB,EAAE,CAAC;EAC3C,OAAQiD,GAAG,IAAI,IAAI,KACd,cAAc,IAAIjC,MAAM,IACpBiC,GAAG,CAACC,cAAc,IAAI,IAAI,IAAID,GAAG,CAACC,cAAc,GAAG,CAAE,CAAC;AACnE","ignoreList":[]}