{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_Shimmer","_interopRequireDefault","_jsxRuntime","_excluded","_excluded2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","_worklet_6964944486089_init_data","code","location","sourceMap","SmartImage","exports","memo","_ref","_ref$previewBlurRadiu","previewBlurRadius","style","onLoad","onError","_ref$rounded","rounded","_ref$useShimmer","useShimmer","rest","_objectWithoutProperties2","_useState","useState","_useState2","_slicedToArray2","loaded","setLoaded","_useState3","_useState4","errored","setErrored","useSharedValue","useEffect","value","withTiming","duration","as","useAnimatedStyle","_e","global","Error","_f","opacity","_closure","__initData","__workletHash","__stackDetails","__version","_ref2","resizeMode","imageProps","jsxs","View","styles","wrap","borderRadius","children","jsx","radius","Image","StyleSheet","absoluteFillObject","fallback","blurRadius","create","overflow","position","flex","backgroundColor","_default"],"sources":["SmartImage.tsx"],"sourcesContent":["import React, { useEffect, useState, memo } from \"react\";\nimport { Image, View, StyleSheet, type ImageProps } from \"react-native\";\nimport Animated, { useSharedValue, withTiming, useAnimatedStyle } from \"react-native-reanimated\";\nimport Shimmer from \"../micro/Shimmer\";\n\ntype Props = ImageProps & { previewBlurRadius?: number; rounded?: number; useShimmer?: boolean };\n\nconst SmartImage = memo(function SmartImage({ \n  previewBlurRadius = 16, \n  style, \n  onLoad, \n  onError,\n  rounded = 12,\n  useShimmer = false,\n  ...rest \n}: Props) {\n  const [loaded, setLoaded] = useState(false);\n  const [errored, setErrored] = useState(false);\n  const o = useSharedValue(0);\n\n  useEffect(() => {\n    if (loaded) o.value = withTiming(1, { duration: 260 });\n  }, [loaded, o]);\n\n  const as = useAnimatedStyle(() => ({ opacity: o.value }));\n\n  // Extract resizeMode if provided\n  const { resizeMode, ...imageProps } = rest as any;\n\n  if (useShimmer) {\n    return (\n      <View style={[styles.wrap, { borderRadius: rounded }, style]}>\n        {!errored && <Shimmer radius={rounded} />}\n        {!errored && (\n          <Animated.Image\n            {...imageProps}\n            resizeMode={resizeMode}\n            onLoad={(e) => { setLoaded(true); onLoad?.(e); }}\n            onError={(e) => { setErrored(true); onError?.(e); }}\n            style={[StyleSheet.absoluteFillObject, as]}\n          />\n        )}\n        {errored && (\n          <View style={[styles.fallback, { borderRadius: rounded }]}>\n            {/* fallback - could show icon here */}\n          </View>\n        )}\n      </View>\n    );\n  }\n\n  return (\n    <View style={[styles.wrap, style]}>\n      {/* Low-fi placeholder */}\n      <Image\n        {...imageProps}\n        resizeMode={resizeMode}\n        blurRadius={previewBlurRadius}\n        style={StyleSheet.absoluteFillObject}\n      />\n      {/* Full res crossfade */}\n      <Animated.Image\n        {...imageProps}\n        resizeMode={resizeMode}\n        onLoad={(e) => { setLoaded(true); onLoad?.(e); }}\n        onError={(e) => { setErrored(true); onError?.(e); }}\n        style={[StyleSheet.absoluteFillObject, as]}\n      />\n    </View>\n  );\n});\n\nconst styles = StyleSheet.create({ \n  wrap: { overflow: \"hidden\", position: \"relative\" },\n  fallback: { flex: 1, backgroundColor: \"rgba(0,0,0,0.08)\" },\n});\nexport { SmartImage };\nexport default SmartImage;\n\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,sBAAA,GAAAH,uBAAA,CAAAC,OAAA;AACA,IAAAG,QAAA,GAAAC,sBAAA,CAAAJ,OAAA;AAAuC,IAAAK,WAAA,GAAAL,OAAA;AAAA,IAAAM,SAAA;EAAAC,UAAA;AAAA,SAAAR,wBAAAS,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAX,uBAAA,YAAAA,wBAAAS,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,GAAA,IAAAd,CAAA,gBAAAc,GAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,GAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,GAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,GAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,GAAA,IAAAd,CAAA,CAAAc,GAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAAA,SAAAmB,QAAApB,CAAA,EAAAG,CAAA,QAAAF,CAAA,GAAAgB,MAAA,CAAAI,IAAA,CAAArB,CAAA,OAAAiB,MAAA,CAAAK,qBAAA,QAAAhB,CAAA,GAAAW,MAAA,CAAAK,qBAAA,CAAAtB,CAAA,GAAAG,CAAA,KAAAG,CAAA,GAAAA,CAAA,CAAAiB,MAAA,WAAApB,CAAA,WAAAc,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAG,CAAA,EAAAqB,UAAA,OAAAvB,CAAA,CAAAwB,IAAA,CAAAC,KAAA,CAAAzB,CAAA,EAAAK,CAAA,YAAAL,CAAA;AAAA,SAAA0B,cAAA3B,CAAA,aAAAG,CAAA,MAAAA,CAAA,GAAAyB,SAAA,CAAAC,MAAA,EAAA1B,CAAA,UAAAF,CAAA,WAAA2B,SAAA,CAAAzB,CAAA,IAAAyB,SAAA,CAAAzB,CAAA,QAAAA,CAAA,OAAAiB,OAAA,CAAAH,MAAA,CAAAhB,CAAA,OAAA6B,OAAA,WAAA3B,CAAA,QAAA4B,gBAAA,CAAArB,OAAA,EAAAV,CAAA,EAAAG,CAAA,EAAAF,CAAA,CAAAE,CAAA,SAAAc,MAAA,CAAAe,yBAAA,GAAAf,MAAA,CAAAgB,gBAAA,CAAAjC,CAAA,EAAAiB,MAAA,CAAAe,yBAAA,CAAA/B,CAAA,KAAAmB,OAAA,CAAAH,MAAA,CAAAhB,CAAA,GAAA6B,OAAA,WAAA3B,CAAA,IAAAc,MAAA,CAAAC,cAAA,CAAAlB,CAAA,EAAAG,CAAA,EAAAc,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAE,CAAA,iBAAAH,CAAA;AAAA,IAAAkC,gCAAA;EAAAC,IAAA;EAAAC,QAAA;EAAAC,SAAA;AAAA;AAIvC,IAAMC,UAAU,GAAAC,OAAA,CAAAD,UAAA,GAAG,IAAAE,WAAI,EAAC,SAASF,UAAUA,CAAAG,IAAA,EAQjC;EAAA,IAAAC,qBAAA,GAAAD,IAAA,CAPRE,iBAAiB;IAAjBA,iBAAiB,GAAAD,qBAAA,cAAG,EAAE,GAAAA,qBAAA;IACtBE,KAAK,GAAAH,IAAA,CAALG,KAAK;IACLC,OAAM,GAAAJ,IAAA,CAANI,MAAM;IACNC,QAAO,GAAAL,IAAA,CAAPK,OAAO;IAAAC,YAAA,GAAAN,IAAA,CACPO,OAAO;IAAPA,OAAO,GAAAD,YAAA,cAAG,EAAE,GAAAA,YAAA;IAAAE,eAAA,GAAAR,IAAA,CACZS,UAAU;IAAVA,UAAU,GAAAD,eAAA,cAAG,KAAK,GAAAA,eAAA;IACfE,IAAI,OAAAC,yBAAA,CAAA1C,OAAA,EAAA+B,IAAA,EAAA3C,SAAA;EAEP,IAAAuD,SAAA,GAA4B,IAAAC,eAAQ,EAAC,KAAK,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAA9C,OAAA,EAAA2C,SAAA;IAApCI,MAAM,GAAAF,UAAA;IAAEG,SAAS,GAAAH,UAAA;EACxB,IAAAI,UAAA,GAA8B,IAAAL,eAAQ,EAAC,KAAK,CAAC;IAAAM,UAAA,OAAAJ,eAAA,CAAA9C,OAAA,EAAAiD,UAAA;IAAtCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAC1B,IAAMtD,CAAC,GAAG,IAAAyD,qCAAc,EAAC,CAAC,CAAC;EAE3B,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAIP,MAAM,EAAEnD,CAAC,CAAC2D,KAAK,GAAG,IAAAC,iCAAU,EAAC,CAAC,EAAE;MAAEC,QAAQ,EAAE;IAAI,CAAC,CAAC;EACxD,CAAC,EAAE,CAACV,MAAM,EAAEnD,CAAC,CAAC,CAAC;EAEf,IAAM8D,EAAE,GAAG,IAAAC,uCAAgB;IAAA,IAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA;IAAA,IAAAC,EAAA,GAAC,SAAAA,GAAA;MAAA,OAAO;QAAEC,OAAO,EAAEpE,CAAC,CAAC2D;MAAM,CAAC;IAAA,CAAC;IAAAQ,EAAA,CAAAE,QAAA;MAAArE,CAAA,EAvB/CA;IAAC;IAAAmE,EAAA,CAAAG,UAAA,GAAA1C,gCAAA;IAAAuC,EAAA,CAAAI,aAAA;IAAAJ,EAAA,CAAAK,cAAA,GAAAR,EAAA;IAAAG,EAAA,CAAAM,SAAA;IAAA,OAAAN,EAAA;EAAA,GAuB8C,CAAC;EAGzD,IAAAO,KAAA,GAAsC7B,IAAI;IAAlC8B,UAAU,GAAAD,KAAA,CAAVC,UAAU;IAAKC,UAAU,OAAA9B,yBAAA,CAAA1C,OAAA,EAAAsE,KAAA,EAAAjF,UAAA;EAEjC,IAAImD,UAAU,EAAE;IACd,OACE,IAAArD,WAAA,CAAAsF,IAAA,EAAC1F,YAAA,CAAA2F,IAAI;MAACxC,KAAK,EAAE,CAACyC,MAAM,CAACC,IAAI,EAAE;QAAEC,YAAY,EAAEvC;MAAQ,CAAC,EAAEJ,KAAK,CAAE;MAAA4C,QAAA,GAC1D,CAAC3B,OAAO,IAAI,IAAAhE,WAAA,CAAA4F,GAAA,EAAC9F,QAAA,CAAAe,OAAO;QAACgF,MAAM,EAAE1C;MAAQ,CAAE,CAAC,EACxC,CAACa,OAAO,IACP,IAAAhE,WAAA,CAAA4F,GAAA,EAAC/F,sBAAA,CAAAgB,OAAQ,CAACiF,KAAK,EAAAhE,aAAA,CAAAA,aAAA,KACTuD,UAAU;QACdD,UAAU,EAAEA,UAAW;QACvBpC,MAAM,EAAE,SAARA,MAAMA,CAAG7C,CAAC,EAAK;UAAE0D,SAAS,CAAC,IAAI,CAAC;UAAEb,OAAM,oBAANA,OAAM,CAAG7C,CAAC,CAAC;QAAE,CAAE;QACjD8C,OAAO,EAAE,SAATA,OAAOA,CAAG9C,CAAC,EAAK;UAAE8D,UAAU,CAAC,IAAI,CAAC;UAAEhB,QAAO,oBAAPA,QAAO,CAAG9C,CAAC,CAAC;QAAE,CAAE;QACpD4C,KAAK,EAAE,CAACgD,uBAAU,CAACC,kBAAkB,EAAEzB,EAAE;MAAE,EAC5C,CACF,EACAP,OAAO,IACN,IAAAhE,WAAA,CAAA4F,GAAA,EAAChG,YAAA,CAAA2F,IAAI;QAACxC,KAAK,EAAE,CAACyC,MAAM,CAACS,QAAQ,EAAE;UAAEP,YAAY,EAAEvC;QAAQ,CAAC;MAAE,CAEpD,CACP;IAAA,CACG,CAAC;EAEX;EAEA,OACE,IAAAnD,WAAA,CAAAsF,IAAA,EAAC1F,YAAA,CAAA2F,IAAI;IAACxC,KAAK,EAAE,CAACyC,MAAM,CAACC,IAAI,EAAE1C,KAAK,CAAE;IAAA4C,QAAA,GAEhC,IAAA3F,WAAA,CAAA4F,GAAA,EAAChG,YAAA,CAAAkG,KAAK,EAAAhE,aAAA,CAAAA,aAAA,KACAuD,UAAU;MACdD,UAAU,EAAEA,UAAW;MACvBc,UAAU,EAAEpD,iBAAkB;MAC9BC,KAAK,EAAEgD,uBAAU,CAACC;IAAmB,EACtC,CAAC,EAEF,IAAAhG,WAAA,CAAA4F,GAAA,EAAC/F,sBAAA,CAAAgB,OAAQ,CAACiF,KAAK,EAAAhE,aAAA,CAAAA,aAAA,KACTuD,UAAU;MACdD,UAAU,EAAEA,UAAW;MACvBpC,MAAM,EAAE,SAARA,MAAMA,CAAG7C,CAAC,EAAK;QAAE0D,SAAS,CAAC,IAAI,CAAC;QAAEb,OAAM,oBAANA,OAAM,CAAG7C,CAAC,CAAC;MAAE,CAAE;MACjD8C,OAAO,EAAE,SAATA,OAAOA,CAAG9C,CAAC,EAAK;QAAE8D,UAAU,CAAC,IAAI,CAAC;QAAEhB,QAAO,oBAAPA,QAAO,CAAG9C,CAAC,CAAC;MAAE,CAAE;MACpD4C,KAAK,EAAE,CAACgD,uBAAU,CAACC,kBAAkB,EAAEzB,EAAE;IAAE,EAC5C,CAAC;EAAA,CACE,CAAC;AAEX,CAAC,CAAC;AAEF,IAAMiB,MAAM,GAAGO,uBAAU,CAACI,MAAM,CAAC;EAC/BV,IAAI,EAAE;IAAEW,QAAQ,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAW,CAAC;EAClDJ,QAAQ,EAAE;IAAEK,IAAI,EAAE,CAAC;IAAEC,eAAe,EAAE;EAAmB;AAC3D,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAA9D,OAAA,CAAA7B,OAAA,GAEY4B,UAAU","ignoreList":[]}