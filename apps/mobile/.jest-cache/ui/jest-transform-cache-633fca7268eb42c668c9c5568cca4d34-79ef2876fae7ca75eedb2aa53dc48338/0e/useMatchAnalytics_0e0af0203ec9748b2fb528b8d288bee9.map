{"version":3,"names":["_interopRequireDefault","require","_asyncToGenerator2","_slicedToArray2","Object","defineProperty","exports","value","useMatchAnalytics","react_1","logger_1","env_1","options","arguments","length","undefined","userId","_options$timeframe","timeframe","_ref","useState","_ref2","default","insights","setInsights","_ref3","_ref4","trends","setTrends","_ref5","_ref6","isLoading","setIsLoading","_ref7","_ref8","error","setError","fetchAnalytics","useCallback","_ref0","response","fetch","headers","getLocalStorageItem","ok","Error","statusText","data","json","success","message","err","errorMessage","logger","useEffect","refresh"],"sources":["useMatchAnalytics.js"],"sourcesContent":["\"use strict\";\n/**\n * Match Analytics Hook\n * Tracks match-related analytics and insights\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useMatchAnalytics = useMatchAnalytics;\nconst react_1 = require(\"react\");\nconst logger_1 = require(\"../utils/logger\");\nconst env_1 = require(\"../utils/env\");\n/**\n * Hook to fetch match analytics and insights\n */\nfunction useMatchAnalytics(options = {}) {\n    const { userId, timeframe = 'weekly' } = options;\n    const [insights, setInsights] = (0, react_1.useState)(null);\n    const [trends, setTrends] = (0, react_1.useState)(null);\n    const [isLoading, setIsLoading] = (0, react_1.useState)(true);\n    const [error, setError] = (0, react_1.useState)(null);\n    const fetchAnalytics = (0, react_1.useCallback)(async () => {\n        if (!userId) {\n            setIsLoading(false);\n            return;\n        }\n        try {\n            setIsLoading(true);\n            setError(null);\n            const response = await fetch(`/api/analytics/matches/${userId}?timeframe=${timeframe}`, {\n                headers: {\n                    'Authorization': `Bearer ${(0, env_1.getLocalStorageItem)('accessToken') ?? ''}`,\n                },\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch match analytics: ${response.statusText}`);\n            }\n            const data = await response.json();\n            if (data.success) {\n                setInsights(data.data.insights);\n                setTrends(data.data.trends);\n            }\n            else {\n                throw new Error(data.message || 'Failed to fetch match analytics');\n            }\n        }\n        catch (err) {\n            const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n            setError(errorMessage);\n            logger_1.logger.error('Failed to fetch match analytics', { error: errorMessage, userId });\n        }\n        finally {\n            setIsLoading(false);\n        }\n    }, [userId, timeframe]);\n    (0, react_1.useEffect)(() => {\n        void fetchAnalytics();\n    }, [fetchAnalytics]);\n    return {\n        insights,\n        trends,\n        isLoading,\n        error,\n        refresh: fetchAnalytics,\n    };\n}\n"],"mappings":"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","ignoreList":[]}