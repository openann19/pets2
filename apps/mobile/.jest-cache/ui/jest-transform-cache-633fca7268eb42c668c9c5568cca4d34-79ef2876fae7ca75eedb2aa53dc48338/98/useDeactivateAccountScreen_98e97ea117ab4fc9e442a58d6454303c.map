{"version":3,"names":["_native","require","_react","_reactNative","Haptics","_interopRequireWildcard","_core","_gdprService","_interopRequireDefault","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","DEACTIVATION_REASONS","useDeactivateAccountScreen","exports","navigation","useNavigation","_useState","useState","_useState2","_slicedToArray2","reason","setReason","_useState3","_useState4","confirmText","setConfirmText","_useState5","_useState6","loading","setLoading","selectReason","useCallback","selectedReason","selectionAsync","catch","handleDeactivate","_asyncToGenerator2","Alert","alert","toLowerCase","impactAsync","ImpactFeedbackStyle","Heavy","gdprService","deleteAccount","password","feedback","logger","info","text","onPress","goBack","error","handleGoBack","reasons"],"sources":["useDeactivateAccountScreen.ts"],"sourcesContent":["/**\n * useDeactivateAccountScreen Hook\n * Manages Deactivate Account screen state and interactions\n */\nimport { useNavigation } from \"@react-navigation/native\";\nimport { useCallback, useState } from \"react\";\nimport { Alert } from \"react-native\";\nimport * as Haptics from \"expo-haptics\";\nimport { logger } from \"@pawfectmatch/core\";\nimport gdprService from \"../../services/gdprService\";\n\ninterface UseDeactivateAccountScreenReturn {\n  reason: string;\n  confirmText: string;\n  loading: boolean;\n  reasons: string[];\n  selectReason: (reason: string) => void;\n  setConfirmText: (text: string) => void;\n  handleDeactivate: () => Promise<void>;\n  handleGoBack: () => void;\n}\n\nconst DEACTIVATION_REASONS = [\n  \"Taking a break from dating\",\n  \"Found a partner\",\n  \"Not enjoying the app\",\n  \"Privacy concerns\",\n  \"Too many notifications\",\n  \"Other\",\n];\n\nexport const useDeactivateAccountScreen = (): UseDeactivateAccountScreenReturn => {\n  const navigation = useNavigation();\n  const [reason, setReason] = useState(\"\");\n  const [confirmText, setConfirmText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const selectReason = useCallback((selectedReason: string) => {\n    Haptics.selectionAsync().catch(() => {});\n    setReason(selectedReason);\n  }, []);\n\n  const handleDeactivate = useCallback(async () => {\n    if (!reason) {\n      Alert.alert(\"Required\", \"Please select a reason for deactivation.\");\n      return;\n    }\n\n    if (confirmText.toLowerCase() !== \"deactivate\") {\n      Alert.alert(\n        \"Confirmation Required\",\n        'Please type \"deactivate\" to confirm.',\n      );\n      return;\n    }\n\n    setLoading(true);\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy).catch(() => {});\n\n    try {\n      // Use GDPR service for account deactivation\n      await gdprService.deleteAccount({\n        password: \"N/A\", // Not required for deactivation\n        reason,\n        feedback: confirmText,\n      });\n\n      logger.info(\"Account deactivated\", { reason });\n\n      Alert.alert(\n        \"Account Deactivated\",\n        \"Your account has been temporarily deactivated. You can reactivate it anytime by logging back in.\",\n        [\n          {\n            text: \"OK\",\n            onPress: () => {\n              navigation.goBack();\n            },\n          },\n        ],\n      );\n    } catch (error) {\n      logger.error(\"Failed to deactivate account\", { error });\n      Alert.alert(\"Error\", \"Failed to deactivate account. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }, [reason, confirmText, navigation]);\n\n  const handleGoBack = useCallback(() => {\n    navigation.goBack();\n  }, [navigation]);\n\n  return {\n    reason,\n    confirmText,\n    loading,\n    reasons: DEACTIVATION_REASONS,\n    selectReason,\n    setConfirmText,\n    handleDeactivate,\n    handleGoBack,\n  };\n};\n\n"],"mappings":"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","ignoreList":[]}