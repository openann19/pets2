981ca7a44d2ed617094639dc7bddac37
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useNotifications = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = _interopRequireDefault(require("react"));
var _notifications = require("../services/notifications");
var useNotifications = exports.useNotifications = function useNotifications() {
  var _React$useState = _react.default.useState(false),
    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
    isInitialized = _React$useState2[0],
    setIsInitialized = _React$useState2[1];
  var _React$useState3 = _react.default.useState(null),
    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),
    pushToken = _React$useState4[0],
    setPushToken = _React$useState4[1];
  _react.default.useEffect(function () {
    var initializeNotifications = function () {
      var _ref = (0, _asyncToGenerator2.default)(function* () {
        var token = yield (0, _notifications.initializeNotificationsService)();
        setPushToken(token);
        setIsInitialized(true);
      });
      return function initializeNotifications() {
        return _ref.apply(this, arguments);
      };
    }();
    initializeNotifications();
    return function () {
      _notifications.notificationService.cleanup();
    };
  }, []);
  return {
    isInitialized: isInitialized,
    pushToken: pushToken,
    sendMatchNotification: _notifications.notificationService.sendMatchNotification.bind(_notifications.notificationService),
    sendMessageNotification: _notifications.notificationService.sendMessageNotification.bind(_notifications.notificationService),
    sendLikeNotification: _notifications.notificationService.sendLikeNotification.bind(_notifications.notificationService),
    scheduleReminderNotification: _notifications.notificationService.scheduleReminderNotification.bind(_notifications.notificationService),
    setBadgeCount: _notifications.notificationService.setBadgeCount.bind(_notifications.notificationService),
    clearBadge: _notifications.notificationService.clearBadge.bind(_notifications.notificationService)
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9ub3RpZmljYXRpb25zIiwidXNlTm90aWZpY2F0aW9ucyIsImV4cG9ydHMiLCJfUmVhY3QkdXNlU3RhdGUiLCJSZWFjdCIsInVzZVN0YXRlIiwiX1JlYWN0JHVzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJpc0luaXRpYWxpemVkIiwic2V0SXNJbml0aWFsaXplZCIsIl9SZWFjdCR1c2VTdGF0ZTMiLCJfUmVhY3QkdXNlU3RhdGU0IiwicHVzaFRva2VuIiwic2V0UHVzaFRva2VuIiwidXNlRWZmZWN0IiwiaW5pdGlhbGl6ZU5vdGlmaWNhdGlvbnMiLCJfcmVmIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwidG9rZW4iLCJpbml0aWFsaXplTm90aWZpY2F0aW9uc1NlcnZpY2UiLCJhcHBseSIsImFyZ3VtZW50cyIsIm5vdGlmaWNhdGlvblNlcnZpY2UiLCJjbGVhbnVwIiwic2VuZE1hdGNoTm90aWZpY2F0aW9uIiwiYmluZCIsInNlbmRNZXNzYWdlTm90aWZpY2F0aW9uIiwic2VuZExpa2VOb3RpZmljYXRpb24iLCJzY2hlZHVsZVJlbWluZGVyTm90aWZpY2F0aW9uIiwic2V0QmFkZ2VDb3VudCIsImNsZWFyQmFkZ2UiXSwic291cmNlcyI6WyJ1c2VOb3RpZmljYXRpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxpemVOb3RpZmljYXRpb25zU2VydmljZSxcbiAgbm90aWZpY2F0aW9uU2VydmljZSxcbn0gZnJvbSBcIi4uL3NlcnZpY2VzL25vdGlmaWNhdGlvbnNcIjtcblxuLyoqXG4gKiBSZWFjdCBIb29rIGZvciBub3RpZmljYXRpb25zIG1hbmFnZW1lbnRcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byBub3RpZmljYXRpb24gZnVuY3Rpb25hbGl0eSBhbmQgc3RhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZU5vdGlmaWNhdGlvbnMgPSAoKSA9PiB7XG4gIGNvbnN0IFtpc0luaXRpYWxpemVkLCBzZXRJc0luaXRpYWxpemVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3B1c2hUb2tlbiwgc2V0UHVzaFRva2VuXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZU5vdGlmaWNhdGlvbnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGluaXRpYWxpemVOb3RpZmljYXRpb25zU2VydmljZSgpO1xuICAgICAgc2V0UHVzaFRva2VuKHRva2VuKTtcbiAgICAgIHNldElzSW5pdGlhbGl6ZWQodHJ1ZSk7XG4gICAgfTtcblxuICAgIGluaXRpYWxpemVOb3RpZmljYXRpb25zKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5jbGVhbnVwKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgaXNJbml0aWFsaXplZCxcbiAgICBwdXNoVG9rZW4sXG4gICAgc2VuZE1hdGNoTm90aWZpY2F0aW9uOlxuICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zZW5kTWF0Y2hOb3RpZmljYXRpb24uYmluZChub3RpZmljYXRpb25TZXJ2aWNlKSxcbiAgICBzZW5kTWVzc2FnZU5vdGlmaWNhdGlvbjpcbiAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZE1lc3NhZ2VOb3RpZmljYXRpb24uYmluZChub3RpZmljYXRpb25TZXJ2aWNlKSxcbiAgICBzZW5kTGlrZU5vdGlmaWNhdGlvbjpcbiAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2VuZExpa2VOb3RpZmljYXRpb24uYmluZChub3RpZmljYXRpb25TZXJ2aWNlKSxcbiAgICBzY2hlZHVsZVJlbWluZGVyTm90aWZpY2F0aW9uOlxuICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zY2hlZHVsZVJlbWluZGVyTm90aWZpY2F0aW9uLmJpbmQoXG4gICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2UsXG4gICAgICApLFxuICAgIHNldEJhZGdlQ291bnQ6IG5vdGlmaWNhdGlvblNlcnZpY2Uuc2V0QmFkZ2VDb3VudC5iaW5kKG5vdGlmaWNhdGlvblNlcnZpY2UpLFxuICAgIGNsZWFyQmFkZ2U6IG5vdGlmaWNhdGlvblNlcnZpY2UuY2xlYXJCYWRnZS5iaW5kKG5vdGlmaWNhdGlvblNlcnZpY2UpLFxuICB9O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBU08sSUFBTUUsZ0JBQWdCLEdBQUFDLE9BQUEsQ0FBQUQsZ0JBQUEsR0FBRyxTQUFuQkEsZ0JBQWdCQSxDQUFBLEVBQVM7RUFDcEMsSUFBQUUsZUFBQSxHQUEwQ0MsY0FBSyxDQUFDQyxRQUFRLENBQUMsS0FBSyxDQUFDO0lBQUFDLGdCQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBTCxlQUFBO0lBQXhETSxhQUFhLEdBQUFILGdCQUFBO0lBQUVJLGdCQUFnQixHQUFBSixnQkFBQTtFQUN0QyxJQUFBSyxnQkFBQSxHQUFrQ1AsY0FBSyxDQUFDQyxRQUFRLENBQWdCLElBQUksQ0FBQztJQUFBTyxnQkFBQSxPQUFBTCxlQUFBLENBQUFDLE9BQUEsRUFBQUcsZ0JBQUE7SUFBOURFLFNBQVMsR0FBQUQsZ0JBQUE7SUFBRUUsWUFBWSxHQUFBRixnQkFBQTtFQUU5QlIsY0FBSyxDQUFDVyxTQUFTLENBQUMsWUFBTTtJQUNwQixJQUFNQyx1QkFBdUI7TUFBQSxJQUFBQyxJQUFBLE9BQUFDLGtCQUFBLENBQUFWLE9BQUEsRUFBRyxhQUFZO1FBQzFDLElBQU1XLEtBQUssU0FBUyxJQUFBQyw2Q0FBOEIsRUFBQyxDQUFDO1FBQ3BETixZQUFZLENBQUNLLEtBQUssQ0FBQztRQUNuQlQsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO01BQ3hCLENBQUM7TUFBQSxnQkFKS00sdUJBQXVCQSxDQUFBO1FBQUEsT0FBQUMsSUFBQSxDQUFBSSxLQUFBLE9BQUFDLFNBQUE7TUFBQTtJQUFBLEdBSTVCO0lBRUROLHVCQUF1QixDQUFDLENBQUM7SUFFekIsT0FBTyxZQUFNO01BQ1hPLGtDQUFtQixDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDO0VBQ0gsQ0FBQyxFQUFFLEVBQUUsQ0FBQztFQUVOLE9BQU87SUFDTGYsYUFBYSxFQUFiQSxhQUFhO0lBQ2JJLFNBQVMsRUFBVEEsU0FBUztJQUNUWSxxQkFBcUIsRUFDbkJGLGtDQUFtQixDQUFDRSxxQkFBcUIsQ0FBQ0MsSUFBSSxDQUFDSCxrQ0FBbUIsQ0FBQztJQUNyRUksdUJBQXVCLEVBQ3JCSixrQ0FBbUIsQ0FBQ0ksdUJBQXVCLENBQUNELElBQUksQ0FBQ0gsa0NBQW1CLENBQUM7SUFDdkVLLG9CQUFvQixFQUNsQkwsa0NBQW1CLENBQUNLLG9CQUFvQixDQUFDRixJQUFJLENBQUNILGtDQUFtQixDQUFDO0lBQ3BFTSw0QkFBNEIsRUFDMUJOLGtDQUFtQixDQUFDTSw0QkFBNEIsQ0FBQ0gsSUFBSSxDQUNuREgsa0NBQ0YsQ0FBQztJQUNITyxhQUFhLEVBQUVQLGtDQUFtQixDQUFDTyxhQUFhLENBQUNKLElBQUksQ0FBQ0gsa0NBQW1CLENBQUM7SUFDMUVRLFVBQVUsRUFBRVIsa0NBQW1CLENBQUNRLFVBQVUsQ0FBQ0wsSUFBSSxDQUFDSCxrQ0FBbUI7RUFDckUsQ0FBQztBQUNILENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=