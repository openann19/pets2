2b850e6bfb2dbc9c8d12618642d381ae
"use strict";

_getJestObj().mock("../../../services/WebRTCService");
_getJestObj().mock("../../../hooks/useSocket");
_getJestObj().mock("react-native", function () {
  return {
    Alert: {
      alert: jest.fn()
    },
    AppState: {
      addEventListener: jest.fn(function () {
        return {
          remove: jest.fn()
        };
      })
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _reactNative = require("@testing-library/react-native");
var _react = _interopRequireDefault(require("react"));
var _reactNative2 = require("react-native");
var _useSocket = require("../../../hooks/useSocket");
var _WebRTCService = _interopRequireDefault(require("../../../services/WebRTCService"));
var _CallManager = _interopRequireWildcard(require("../CallManager"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t2 in e) "default" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]); return f; })(e, t); }
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockSocket = {
  on: jest.fn(),
  emit: jest.fn(),
  connected: true
};
var mockWebRTCService = _WebRTCService.default;
var mockUseSocket = _useSocket.useSocket;
describe("CallManager", function () {
  beforeEach(function () {
    jest.clearAllMocks();
    mockUseSocket.mockReturnValue(mockSocket);
    mockWebRTCService.getCallState.mockReturnValue({
      isActive: false,
      isConnected: false,
      isIncoming: false,
      isMuted: false,
      isVideoEnabled: true,
      callDuration: 0
    });
    mockWebRTCService.on = jest.fn();
    mockWebRTCService.off = jest.fn();
    mockWebRTCService.initialize = jest.fn();
  });
  it("should render children correctly", function () {
    var TestChild = function TestChild() {
      return (0, _jsxRuntime.jsx)(_reactNative2.Text, {
        testID: "test-child",
        children: "Test Child"
      });
    };
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
        children: (0, _jsxRuntime.jsx)(TestChild, {})
      })),
      getByTestId = _render.getByTestId;
    expect(getByTestId("test-child")).toBeTruthy();
  });
  it("should initialize WebRTC service with socket", function () {
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
      children: (0, _jsxRuntime.jsx)("div", {
        children: "Test"
      })
    }));
    expect(mockWebRTCService.initialize).toHaveBeenCalledWith(mockSocket);
  });
  it("should set up event listeners for call state changes", function () {
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
      children: (0, _jsxRuntime.jsx)("div", {
        children: "Test"
      })
    }));
    expect(mockWebRTCService.on).toHaveBeenCalledWith("callStateChanged", expect.any(Function));
    expect(mockWebRTCService.on).toHaveBeenCalledWith("callError", expect.any(Function));
  });
  it("should show incoming call modal when receiving incoming call", (0, _asyncToGenerator2.default)(function* () {
    var _mockWebRTCService$on;
    var mockCallData = {
      callId: "test-call-id",
      matchId: "test-match-id",
      callerId: "test-caller-id",
      callerName: "Test Caller",
      callType: "voice",
      timestamp: Date.now()
    };
    mockWebRTCService.getCallState.mockReturnValue({
      isActive: true,
      isConnected: false,
      isIncoming: true,
      callData: mockCallData,
      isMuted: false,
      isVideoEnabled: true,
      callDuration: 0
    });
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
        children: (0, _jsxRuntime.jsx)("div", {
          children: "Test"
        })
      })),
      rerender = _render2.rerender;
    var callStateHandler = (_mockWebRTCService$on = mockWebRTCService.on.mock.calls.find(function (call) {
      return call[0] === "callStateChanged";
    })) == null ? void 0 : _mockWebRTCService$on[1];
    if (callStateHandler) {
      yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
        callStateHandler({
          isActive: true,
          isConnected: false,
          isIncoming: true,
          callData: mockCallData,
          isMuted: false,
          isVideoEnabled: true,
          callDuration: 0
        });
      }));
    }
    expect(mockWebRTCService.on).toHaveBeenCalled();
  }));
  it("should handle call errors correctly", (0, _asyncToGenerator2.default)(function* () {
    var _mockWebRTCService$on2;
    var mockError = new Error("Test call error");
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
      children: (0, _jsxRuntime.jsx)("div", {
        children: "Test"
      })
    }));
    var errorHandler = (_mockWebRTCService$on2 = mockWebRTCService.on.mock.calls.find(function (call) {
      return call[0] === "callError";
    })) == null ? void 0 : _mockWebRTCService$on2[1];
    if (errorHandler) {
      yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
        errorHandler(mockError);
      }));
    }
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Call Error", "There was an issue with the call. Please try again.", [{
      text: "OK"
    }]);
  }));
  it("should clean up event listeners on unmount", function () {
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_CallManager.default, {
        children: (0, _jsxRuntime.jsx)("div", {
          children: "Test"
        })
      })),
      unmount = _render3.unmount;
    unmount();
    expect(mockWebRTCService.off).toHaveBeenCalledWith("callStateChanged", expect.any(Function));
    expect(mockWebRTCService.off).toHaveBeenCalledWith("callError", expect.any(Function));
  });
});
describe("useCallManager hook", function () {
  var TestComponent = function TestComponent() {
    var _useCallManager = (0, _CallManager.useCallManager)(),
      startCall = _useCallManager.startCall,
      endCall = _useCallManager.endCall,
      isCallActive = _useCallManager.isCallActive,
      getCallState = _useCallManager.getCallState;
    return (0, _jsxRuntime.jsxs)(_reactNative2.View, {
      children: [(0, _jsxRuntime.jsx)(_reactNative2.TouchableOpacity, {
        testID: "start-voice-call",
        onPress: function onPress() {
          return startCall("test-match", "voice");
        },
        children: (0, _jsxRuntime.jsx)(_reactNative2.Text, {
          children: "Start Voice Call"
        })
      }), (0, _jsxRuntime.jsx)(_reactNative2.TouchableOpacity, {
        testID: "start-video-call",
        onPress: function onPress() {
          return startCall("test-match", "video");
        },
        children: (0, _jsxRuntime.jsx)(_reactNative2.Text, {
          children: "Start Video Call"
        })
      }), (0, _jsxRuntime.jsx)(_reactNative2.TouchableOpacity, {
        testID: "end-call",
        onPress: endCall,
        children: (0, _jsxRuntime.jsx)(_reactNative2.Text, {
          children: "End Call"
        })
      }), (0, _jsxRuntime.jsx)(_reactNative2.Text, {
        testID: "call-active",
        children: isCallActive() ? "Active" : "Inactive"
      })]
    });
  };
  beforeEach(function () {
    jest.clearAllMocks();
    mockWebRTCService.startCall = jest.fn();
    mockWebRTCService.endCall = jest.fn();
    mockWebRTCService.isCallActive = jest.fn();
    mockWebRTCService.getCallState = jest.fn();
  });
  it("should start voice call successfully", (0, _asyncToGenerator2.default)(function* () {
    mockWebRTCService.startCall.mockResolvedValue(true);
    var _render4 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render4.getByTestId;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByTestId("start-voice-call"));
    }));
    expect(mockWebRTCService.startCall).toHaveBeenCalledWith("test-match", "voice");
  }));
  it("should start video call successfully", (0, _asyncToGenerator2.default)(function* () {
    mockWebRTCService.startCall.mockResolvedValue(true);
    var _render5 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render5.getByTestId;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByTestId("start-video-call"));
    }));
    expect(mockWebRTCService.startCall).toHaveBeenCalledWith("test-match", "video");
  }));
  it("should handle call start failure", (0, _asyncToGenerator2.default)(function* () {
    mockWebRTCService.startCall.mockResolvedValue(false);
    var _render6 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render6.getByTestId;
    yield (0, _reactNative.act)((0, _asyncToGenerator2.default)(function* () {
      _reactNative.fireEvent.press(getByTestId("start-voice-call"));
    }));
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Error", "Failed to start call. Please check your permissions and try again.");
  }));
  it("should end call", function () {
    var _render7 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render7.getByTestId;
    _reactNative.fireEvent.press(getByTestId("end-call"));
    expect(mockWebRTCService.endCall).toHaveBeenCalled();
  });
  it("should check if call is active", function () {
    mockWebRTCService.isCallActive.mockReturnValue(true);
    var _render8 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(TestComponent, {})),
      getByTestId = _render8.getByTestId;
    expect(getByTestId("call-active")).toHaveTextContent("Active");
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJBbGVydCIsImFsZXJ0IiwiamVzdCIsImZuIiwiQXBwU3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVhY3ROYXRpdmUiLCJfcmVhY3QiLCJfcmVhY3ROYXRpdmUyIiwiX3VzZVNvY2tldCIsIl9XZWJSVENTZXJ2aWNlIiwiX0NhbGxNYW5hZ2VyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfanN4UnVudGltZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdDIiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9yZXF1aXJlIiwibW9ja1NvY2tldCIsIm9uIiwiZW1pdCIsImNvbm5lY3RlZCIsIm1vY2tXZWJSVENTZXJ2aWNlIiwiV2ViUlRDU2VydmljZSIsIm1vY2tVc2VTb2NrZXQiLCJ1c2VTb2NrZXQiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwiZ2V0Q2FsbFN0YXRlIiwiaXNBY3RpdmUiLCJpc0Nvbm5lY3RlZCIsImlzSW5jb21pbmciLCJpc011dGVkIiwiaXNWaWRlb0VuYWJsZWQiLCJjYWxsRHVyYXRpb24iLCJvZmYiLCJpbml0aWFsaXplIiwiaXQiLCJUZXN0Q2hpbGQiLCJqc3giLCJUZXh0IiwidGVzdElEIiwiY2hpbGRyZW4iLCJfcmVuZGVyIiwicmVuZGVyIiwiZ2V0QnlUZXN0SWQiLCJleHBlY3QiLCJ0b0JlVHJ1dGh5IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnkiLCJGdW5jdGlvbiIsIl9tb2NrV2ViUlRDU2VydmljZSRvbiIsIm1vY2tDYWxsRGF0YSIsImNhbGxJZCIsIm1hdGNoSWQiLCJjYWxsZXJJZCIsImNhbGxlck5hbWUiLCJjYWxsVHlwZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJjYWxsRGF0YSIsIl9yZW5kZXIyIiwicmVyZW5kZXIiLCJjYWxsU3RhdGVIYW5kbGVyIiwiY2FsbHMiLCJmaW5kIiwiYWN0IiwidG9IYXZlQmVlbkNhbGxlZCIsIl9tb2NrV2ViUlRDU2VydmljZSRvbjIiLCJtb2NrRXJyb3IiLCJFcnJvciIsImVycm9ySGFuZGxlciIsInRleHQiLCJfcmVuZGVyMyIsInVubW91bnQiLCJUZXN0Q29tcG9uZW50IiwiX3VzZUNhbGxNYW5hZ2VyIiwidXNlQ2FsbE1hbmFnZXIiLCJzdGFydENhbGwiLCJlbmRDYWxsIiwiaXNDYWxsQWN0aXZlIiwianN4cyIsIlZpZXciLCJUb3VjaGFibGVPcGFjaXR5Iiwib25QcmVzcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiX3JlbmRlcjQiLCJmaXJlRXZlbnQiLCJwcmVzcyIsIl9yZW5kZXI1IiwiX3JlbmRlcjYiLCJfcmVuZGVyNyIsIl9yZW5kZXI4IiwidG9IYXZlVGV4dENvbnRlbnQiXSwic291cmNlcyI6WyJDYWxsTWFuYWdlci50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY3QsIGZpcmVFdmVudCwgcmVuZGVyIH0gZnJvbSBcIkB0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBbGVydCwgVGV4dCwgVG91Y2hhYmxlT3BhY2l0eSwgVmlldyB9IGZyb20gXCJyZWFjdC1uYXRpdmVcIjtcblxuaW1wb3J0IHsgdXNlU29ja2V0IH0gZnJvbSBcIi4uLy4uLy4uL2hvb2tzL3VzZVNvY2tldFwiO1xuaW1wb3J0IFdlYlJUQ1NlcnZpY2UgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL1dlYlJUQ1NlcnZpY2VcIjtcbmltcG9ydCBDYWxsTWFuYWdlciwgeyB1c2VDYWxsTWFuYWdlciB9IGZyb20gXCIuLi9DYWxsTWFuYWdlclwiO1xuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKFwiLi4vLi4vLi4vc2VydmljZXMvV2ViUlRDU2VydmljZVwiKTtcbmplc3QubW9jayhcIi4uLy4uLy4uL2hvb2tzL3VzZVNvY2tldFwiKTtcbi8vIFJlYWN0IE5hdGl2ZSBpcyBhbHJlYWR5IG1vY2tlZCBpbiBqZXN0LnNldHVwLnRzXG5qZXN0Lm1vY2soXCJyZWFjdC1uYXRpdmVcIiwgKCkgPT4gKHtcbiAgQWxlcnQ6IHtcbiAgICBhbGVydDogamVzdC5mbigpLFxuICB9LFxuICBBcHBTdGF0ZToge1xuICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKCkgPT4gKHsgcmVtb3ZlOiBqZXN0LmZuKCkgfSkpLFxuICB9LFxufSkpO1xuXG5jb25zdCBtb2NrU29ja2V0ID0ge1xuICBvbjogamVzdC5mbigpLFxuICBlbWl0OiBqZXN0LmZuKCksXG4gIGNvbm5lY3RlZDogdHJ1ZSxcbn07XG5cbmNvbnN0IG1vY2tXZWJSVENTZXJ2aWNlID0gV2ViUlRDU2VydmljZSBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgV2ViUlRDU2VydmljZT47XG5jb25zdCBtb2NrVXNlU29ja2V0ID0gdXNlU29ja2V0IGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVNvY2tldD47XG5cbmRlc2NyaWJlKFwiQ2FsbE1hbmFnZXJcIiwgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBtb2NrVXNlU29ja2V0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrU29ja2V0IGFzIGFueSk7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2UuZ2V0Q2FsbFN0YXRlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsXG4gICAgICBpc0luY29taW5nOiBmYWxzZSxcbiAgICAgIGlzTXV0ZWQ6IGZhbHNlLFxuICAgICAgaXNWaWRlb0VuYWJsZWQ6IHRydWUsXG4gICAgICBjYWxsRHVyYXRpb246IDAsXG4gICAgfSk7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2Uub24gPSBqZXN0LmZuKCk7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2Uub2ZmID0gamVzdC5mbigpO1xuICAgIG1vY2tXZWJSVENTZXJ2aWNlLmluaXRpYWxpemUgPSBqZXN0LmZuKCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHJlbmRlciBjaGlsZHJlbiBjb3JyZWN0bHlcIiwgKCkgPT4ge1xuICAgIGNvbnN0IFRlc3RDaGlsZCA9ICgpID0+IDxUZXh0IHRlc3RJRD1cInRlc3QtY2hpbGRcIj5UZXN0IENoaWxkPC9UZXh0PjtcblxuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxDYWxsTWFuYWdlcj5cbiAgICAgICAgPFRlc3RDaGlsZCAvPlxuICAgICAgPC9DYWxsTWFuYWdlcj4sXG4gICAgKTtcblxuICAgIGV4cGVjdChnZXRCeVRlc3RJZChcInRlc3QtY2hpbGRcIikpLnRvQmVUcnV0aHkoKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgaW5pdGlhbGl6ZSBXZWJSVEMgc2VydmljZSB3aXRoIHNvY2tldFwiLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPENhbGxNYW5hZ2VyPlxuICAgICAgICA8ZGl2PlRlc3Q8L2Rpdj5cbiAgICAgIDwvQ2FsbE1hbmFnZXI+LFxuICAgICk7XG5cbiAgICBleHBlY3QobW9ja1dlYlJUQ1NlcnZpY2UuaW5pdGlhbGl6ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1NvY2tldCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGNhbGwgc3RhdGUgY2hhbmdlc1wiLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgPENhbGxNYW5hZ2VyPlxuICAgICAgICA8ZGl2PlRlc3Q8L2Rpdj5cbiAgICAgIDwvQ2FsbE1hbmFnZXI+LFxuICAgICk7XG5cbiAgICBleHBlY3QobW9ja1dlYlJUQ1NlcnZpY2Uub24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJjYWxsU3RhdGVDaGFuZ2VkXCIsXG4gICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKSxcbiAgICApO1xuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcImNhbGxFcnJvclwiLFxuICAgICAgZXhwZWN0LmFueShGdW5jdGlvbiksXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc2hvdyBpbmNvbWluZyBjYWxsIG1vZGFsIHdoZW4gcmVjZWl2aW5nIGluY29taW5nIGNhbGxcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tDYWxsRGF0YSA9IHtcbiAgICAgIGNhbGxJZDogXCJ0ZXN0LWNhbGwtaWRcIixcbiAgICAgIG1hdGNoSWQ6IFwidGVzdC1tYXRjaC1pZFwiLFxuICAgICAgY2FsbGVySWQ6IFwidGVzdC1jYWxsZXItaWRcIixcbiAgICAgIGNhbGxlck5hbWU6IFwiVGVzdCBDYWxsZXJcIixcbiAgICAgIGNhbGxUeXBlOiBcInZvaWNlXCIgYXMgY29uc3QsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfTtcblxuICAgIG1vY2tXZWJSVENTZXJ2aWNlLmdldENhbGxTdGF0ZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBpc0Nvbm5lY3RlZDogZmFsc2UsXG4gICAgICBpc0luY29taW5nOiB0cnVlLFxuICAgICAgY2FsbERhdGE6IG1vY2tDYWxsRGF0YSxcbiAgICAgIGlzTXV0ZWQ6IGZhbHNlLFxuICAgICAgaXNWaWRlb0VuYWJsZWQ6IHRydWUsXG4gICAgICBjYWxsRHVyYXRpb246IDAsXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoXG4gICAgICA8Q2FsbE1hbmFnZXI+XG4gICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgPC9DYWxsTWFuYWdlcj4sXG4gICAgKTtcblxuICAgIC8vIFNpbXVsYXRlIGNhbGwgc3RhdGUgY2hhbmdlXG4gICAgY29uc3QgY2FsbFN0YXRlSGFuZGxlciA9IG1vY2tXZWJSVENTZXJ2aWNlLm9uLm1vY2suY2FsbHMuZmluZChcbiAgICAgIChjYWxsKSA9PiBjYWxsWzBdID09PSBcImNhbGxTdGF0ZUNoYW5nZWRcIixcbiAgICApPy5bMV07XG5cbiAgICBpZiAoY2FsbFN0YXRlSGFuZGxlcikge1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY2FsbFN0YXRlSGFuZGxlcih7XG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgaXNDb25uZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzSW5jb21pbmc6IHRydWUsXG4gICAgICAgICAgY2FsbERhdGE6IG1vY2tDYWxsRGF0YSxcbiAgICAgICAgICBpc011dGVkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZpZGVvRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBjYWxsRHVyYXRpb246IDAsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIG1vZGFsIHNob3VsZCBiZSBzaG93biAodGVzdGVkIHZpYSBzdGF0ZSBjaGFuZ2VzKVxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5vbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBoYW5kbGUgY2FsbCBlcnJvcnMgY29ycmVjdGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrRXJyb3IgPSBuZXcgRXJyb3IoXCJUZXN0IGNhbGwgZXJyb3JcIik7XG5cbiAgICByZW5kZXIoXG4gICAgICA8Q2FsbE1hbmFnZXI+XG4gICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgPC9DYWxsTWFuYWdlcj4sXG4gICAgKTtcblxuICAgIGNvbnN0IGVycm9ySGFuZGxlciA9IG1vY2tXZWJSVENTZXJ2aWNlLm9uLm1vY2suY2FsbHMuZmluZChcbiAgICAgIChjYWxsKSA9PiBjYWxsWzBdID09PSBcImNhbGxFcnJvclwiLFxuICAgICk/LlsxXTtcblxuICAgIGlmIChlcnJvckhhbmRsZXIpIHtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGVycm9ySGFuZGxlcihtb2NrRXJyb3IpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiQ2FsbCBFcnJvclwiLFxuICAgICAgXCJUaGVyZSB3YXMgYW4gaXNzdWUgd2l0aCB0aGUgY2FsbC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgICAgIFt7IHRleHQ6IFwiT0tcIiB9XSxcbiAgICApO1xuICB9KTtcblxuICBpdChcInNob3VsZCBjbGVhbiB1cCBldmVudCBsaXN0ZW5lcnMgb24gdW5tb3VudFwiLCAoKSA9PiB7XG4gICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoXG4gICAgICA8Q2FsbE1hbmFnZXI+XG4gICAgICAgIDxkaXY+VGVzdDwvZGl2PlxuICAgICAgPC9DYWxsTWFuYWdlcj4sXG4gICAgKTtcblxuICAgIHVubW91bnQoKTtcblxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5vZmYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJjYWxsU3RhdGVDaGFuZ2VkXCIsXG4gICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKSxcbiAgICApO1xuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5vZmYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJjYWxsRXJyb3JcIixcbiAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pLFxuICAgICk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwidXNlQ2FsbE1hbmFnZXIgaG9va1wiLCAoKSA9PiB7XG4gIGNvbnN0IFRlc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzdGFydENhbGwsIGVuZENhbGwsIGlzQ2FsbEFjdGl2ZSwgZ2V0Q2FsbFN0YXRlIH0gPSB1c2VDYWxsTWFuYWdlcigpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3PlxuICAgICAgICA8VG91Y2hhYmxlT3BhY2l0eVxuICAgICAgICAgIHRlc3RJRD1cInN0YXJ0LXZvaWNlLWNhbGxcIlxuICAgICAgICAgIG9uUHJlc3M9eygpID0+IHN0YXJ0Q2FsbChcInRlc3QtbWF0Y2hcIiwgXCJ2b2ljZVwiKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUZXh0PlN0YXJ0IFZvaWNlIENhbGw8L1RleHQ+XG4gICAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cbiAgICAgICAgPFRvdWNoYWJsZU9wYWNpdHlcbiAgICAgICAgICB0ZXN0SUQ9XCJzdGFydC12aWRlby1jYWxsXCJcbiAgICAgICAgICBvblByZXNzPXsoKSA9PiBzdGFydENhbGwoXCJ0ZXN0LW1hdGNoXCIsIFwidmlkZW9cIil9XG4gICAgICAgID5cbiAgICAgICAgICA8VGV4dD5TdGFydCBWaWRlbyBDYWxsPC9UZXh0PlxuICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gICAgICAgIDxUb3VjaGFibGVPcGFjaXR5IHRlc3RJRD1cImVuZC1jYWxsXCIgb25QcmVzcz17ZW5kQ2FsbH0+XG4gICAgICAgICAgPFRleHQ+RW5kIENhbGw8L1RleHQ+XG4gICAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cbiAgICAgICAgPFRleHQgdGVzdElEPVwiY2FsbC1hY3RpdmVcIj5cbiAgICAgICAgICB7aXNDYWxsQWN0aXZlKCkgPyBcIkFjdGl2ZVwiIDogXCJJbmFjdGl2ZVwifVxuICAgICAgICA8L1RleHQ+XG4gICAgICA8L1ZpZXc+XG4gICAgKTtcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5zdGFydENhbGwgPSBqZXN0LmZuKCk7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2UuZW5kQ2FsbCA9IGplc3QuZm4oKTtcbiAgICBtb2NrV2ViUlRDU2VydmljZS5pc0NhbGxBY3RpdmUgPSBqZXN0LmZuKCk7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2UuZ2V0Q2FsbFN0YXRlID0gamVzdC5mbigpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBzdGFydCB2b2ljZSBjYWxsIHN1Y2Nlc3NmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2Uuc3RhcnRDYWxsLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKDxUZXN0Q29tcG9uZW50IC8+KTtcblxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICBmaXJlRXZlbnQucHJlc3MoZ2V0QnlUZXN0SWQoXCJzdGFydC12b2ljZS1jYWxsXCIpKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChtb2NrV2ViUlRDU2VydmljZS5zdGFydENhbGwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJ0ZXN0LW1hdGNoXCIsXG4gICAgICBcInZvaWNlXCIsXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc3RhcnQgdmlkZW8gY2FsbCBzdWNjZXNzZnVsbHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tXZWJSVENTZXJ2aWNlLnN0YXJ0Q2FsbC5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgZmlyZUV2ZW50LnByZXNzKGdldEJ5VGVzdElkKFwic3RhcnQtdmlkZW8tY2FsbFwiKSk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QobW9ja1dlYlJUQ1NlcnZpY2Uuc3RhcnRDYWxsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwidGVzdC1tYXRjaFwiLFxuICAgICAgXCJ2aWRlb1wiLFxuICAgICk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGhhbmRsZSBjYWxsIHN0YXJ0IGZhaWx1cmVcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tXZWJSVENTZXJ2aWNlLnN0YXJ0Q2FsbC5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSk7XG5cbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoPFRlc3RDb21wb25lbnQgLz4pO1xuXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGZpcmVFdmVudC5wcmVzcyhnZXRCeVRlc3RJZChcInN0YXJ0LXZvaWNlLWNhbGxcIikpO1xuICAgIH0pO1xuXG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiRXJyb3JcIixcbiAgICAgIFwiRmFpbGVkIHRvIHN0YXJ0IGNhbGwuIFBsZWFzZSBjaGVjayB5b3VyIHBlcm1pc3Npb25zIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgZW5kIGNhbGxcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICBmaXJlRXZlbnQucHJlc3MoZ2V0QnlUZXN0SWQoXCJlbmQtY2FsbFwiKSk7XG5cbiAgICBleHBlY3QobW9ja1dlYlJUQ1NlcnZpY2UuZW5kQ2FsbCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBjaGVjayBpZiBjYWxsIGlzIGFjdGl2ZVwiLCAoKSA9PiB7XG4gICAgbW9ja1dlYlJUQ1NlcnZpY2UuaXNDYWxsQWN0aXZlLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcblxuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcig8VGVzdENvbXBvbmVudCAvPik7XG5cbiAgICBleHBlY3QoZ2V0QnlUZXN0SWQoXCJjYWxsLWFjdGl2ZVwiKSkudG9IYXZlVGV4dENvbnRlbnQoXCJBY3RpdmVcIik7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBU0FBLFdBQUEsR0FBS0MsSUFBSSxrQ0FBa0MsQ0FBQztBQUM1Q0QsV0FBQSxHQUFLQyxJQUFJLDJCQUEyQixDQUFDO0FBRXJDRCxXQUFBLEdBQUtDLElBQUksQ0FBQyxjQUFjLEVBQUU7RUFBQSxPQUFPO0lBQy9CQyxLQUFLLEVBQUU7TUFDTEMsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBQ0RDLFFBQVEsRUFBRTtNQUNSQyxnQkFBZ0IsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7UUFBQSxPQUFPO1VBQUVHLE1BQU0sRUFBRUosSUFBSSxDQUFDQyxFQUFFLENBQUM7UUFBRSxDQUFDO01BQUEsQ0FBQztJQUN6RDtFQUNGLENBQUM7QUFBQSxDQUFDLENBQUM7QUFBQyxJQUFBSSxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsa0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQW5CSixJQUFBRSxZQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxhQUFBLEdBQUFKLE9BQUE7QUFFQSxJQUFBSyxVQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxjQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyxZQUFBLEdBQUFDLHVCQUFBLENBQUFSLE9BQUE7QUFBNkQsSUFBQVMsV0FBQSxHQUFBVCxPQUFBO0FBQUEsU0FBQVEsd0JBQUFFLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFKLHVCQUFBLFlBQUFBLHdCQUFBRSxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFBLE1BQUFNLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLEtBQUFDLFNBQUEsUUFBQUMsT0FBQSxFQUFBVixDQUFBLGlCQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFNBQUFRLENBQUEsTUFBQUYsQ0FBQSxHQUFBTCxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxRQUFBRyxDQUFBLENBQUFLLEdBQUEsQ0FBQVgsQ0FBQSxVQUFBTSxDQUFBLENBQUFNLEdBQUEsQ0FBQVosQ0FBQSxHQUFBTSxDQUFBLENBQUFPLEdBQUEsQ0FBQWIsQ0FBQSxFQUFBUSxDQUFBLGNBQUFNLEdBQUEsSUFBQWQsQ0FBQSxnQkFBQWMsR0FBQSxPQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWhCLENBQUEsRUFBQWMsR0FBQSxPQUFBUCxDQUFBLElBQUFELENBQUEsR0FBQVcsTUFBQSxDQUFBQyxjQUFBLEtBQUFELE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQW5CLENBQUEsRUFBQWMsR0FBQSxPQUFBUCxDQUFBLENBQUFLLEdBQUEsSUFBQUwsQ0FBQSxDQUFBTSxHQUFBLElBQUFQLENBQUEsQ0FBQUUsQ0FBQSxFQUFBTSxHQUFBLEVBQUFQLENBQUEsSUFBQUMsQ0FBQSxDQUFBTSxHQUFBLElBQUFkLENBQUEsQ0FBQWMsR0FBQSxXQUFBTixDQUFBLEtBQUFSLENBQUEsRUFBQUMsQ0FBQTtBQUFBLFNBQUFyQixZQUFBO0VBQUEsSUFBQXdDLFFBQUEsR0FBQTlCLE9BQUE7SUFBQU4sSUFBQSxHQUFBb0MsUUFBQSxDQUFBcEMsSUFBQTtFQUFBSixXQUFBLFlBQUFBLFlBQUE7SUFBQSxPQUFBSSxJQUFBO0VBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFlN0QsSUFBTXFDLFVBQVUsR0FBRztFQUNqQkMsRUFBRSxFQUFFdEMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUNic0MsSUFBSSxFQUFFdkMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUNmdUMsU0FBUyxFQUFFO0FBQ2IsQ0FBQztBQUVELElBQU1DLGlCQUFpQixHQUFHQyxzQkFBa0Q7QUFDNUUsSUFBTUMsYUFBYSxHQUFHQyxvQkFBa0Q7QUFFeEVDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsWUFBTTtFQUM1QkMsVUFBVSxDQUFDLFlBQU07SUFDZjlDLElBQUksQ0FBQytDLGFBQWEsQ0FBQyxDQUFDO0lBQ3BCSixhQUFhLENBQUNLLGVBQWUsQ0FBQ1gsVUFBaUIsQ0FBQztJQUNoREksaUJBQWlCLENBQUNRLFlBQVksQ0FBQ0QsZUFBZSxDQUFDO01BQzdDRSxRQUFRLEVBQUUsS0FBSztNQUNmQyxXQUFXLEVBQUUsS0FBSztNQUNsQkMsVUFBVSxFQUFFLEtBQUs7TUFDakJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLGNBQWMsRUFBRSxJQUFJO01BQ3BCQyxZQUFZLEVBQUU7SUFDaEIsQ0FBQyxDQUFDO0lBQ0ZkLGlCQUFpQixDQUFDSCxFQUFFLEdBQUd0QyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hDd0MsaUJBQWlCLENBQUNlLEdBQUcsR0FBR3hELElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDakN3QyxpQkFBaUIsQ0FBQ2dCLFVBQVUsR0FBR3pELElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDMUMsQ0FBQyxDQUFDO0VBRUZ5RCxFQUFFLENBQUMsa0NBQWtDLEVBQUUsWUFBTTtJQUMzQyxJQUFNQyxTQUFTLEdBQUcsU0FBWkEsU0FBU0EsQ0FBQTtNQUFBLE9BQVMsSUFBQTVDLFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ2xELGFBQUEsQ0FBQW1ELElBQUk7UUFBQ0MsTUFBTSxFQUFDLFlBQVk7UUFBQUMsUUFBQSxFQUFDO01BQVUsQ0FBTSxDQUFDO0lBQUE7SUFFbkUsSUFBQUMsT0FBQSxHQUF3QixJQUFBQyxtQkFBTSxFQUM1QixJQUFBbEQsV0FBQSxDQUFBNkMsR0FBQSxFQUFDL0MsWUFBQSxDQUFBYSxPQUFXO1FBQUFxQyxRQUFBLEVBQ1YsSUFBQWhELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ0QsU0FBUyxJQUFFO01BQUMsQ0FDRixDQUNmLENBQUM7TUFKT08sV0FBVyxHQUFBRixPQUFBLENBQVhFLFdBQVc7SUFNbkJDLE1BQU0sQ0FBQ0QsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUNFLFVBQVUsQ0FBQyxDQUFDO0VBQ2hELENBQUMsQ0FBQztFQUVGVixFQUFFLENBQUMsOENBQThDLEVBQUUsWUFBTTtJQUN2RCxJQUFBTyxtQkFBTSxFQUNKLElBQUFsRCxXQUFBLENBQUE2QyxHQUFBLEVBQUMvQyxZQUFBLENBQUFhLE9BQVc7TUFBQXFDLFFBQUEsRUFDVixJQUFBaEQsV0FBQSxDQUFBNkMsR0FBQTtRQUFBRyxRQUFBLEVBQUs7TUFBSSxDQUFLO0lBQUMsQ0FDSixDQUNmLENBQUM7SUFFREksTUFBTSxDQUFDMUIsaUJBQWlCLENBQUNnQixVQUFVLENBQUMsQ0FBQ1ksb0JBQW9CLENBQUNoQyxVQUFVLENBQUM7RUFDdkUsQ0FBQyxDQUFDO0VBRUZxQixFQUFFLENBQUMsc0RBQXNELEVBQUUsWUFBTTtJQUMvRCxJQUFBTyxtQkFBTSxFQUNKLElBQUFsRCxXQUFBLENBQUE2QyxHQUFBLEVBQUMvQyxZQUFBLENBQUFhLE9BQVc7TUFBQXFDLFFBQUEsRUFDVixJQUFBaEQsV0FBQSxDQUFBNkMsR0FBQTtRQUFBRyxRQUFBLEVBQUs7TUFBSSxDQUFLO0lBQUMsQ0FDSixDQUNmLENBQUM7SUFFREksTUFBTSxDQUFDMUIsaUJBQWlCLENBQUNILEVBQUUsQ0FBQyxDQUFDK0Isb0JBQW9CLENBQy9DLGtCQUFrQixFQUNsQkYsTUFBTSxDQUFDRyxHQUFHLENBQUNDLFFBQVEsQ0FDckIsQ0FBQztJQUNESixNQUFNLENBQUMxQixpQkFBaUIsQ0FBQ0gsRUFBRSxDQUFDLENBQUMrQixvQkFBb0IsQ0FDL0MsV0FBVyxFQUNYRixNQUFNLENBQUNHLEdBQUcsQ0FBQ0MsUUFBUSxDQUNyQixDQUFDO0VBQ0gsQ0FBQyxDQUFDO0VBRUZiLEVBQUUsQ0FBQyw4REFBOEQsTUFBQW5ELGtCQUFBLENBQUFtQixPQUFBLEVBQUUsYUFBWTtJQUFBLElBQUE4QyxxQkFBQTtJQUM3RSxJQUFNQyxZQUFZLEdBQUc7TUFDbkJDLE1BQU0sRUFBRSxjQUFjO01BQ3RCQyxPQUFPLEVBQUUsZUFBZTtNQUN4QkMsUUFBUSxFQUFFLGdCQUFnQjtNQUMxQkMsVUFBVSxFQUFFLGFBQWE7TUFDekJDLFFBQVEsRUFBRSxPQUFnQjtNQUMxQkMsU0FBUyxFQUFFQyxJQUFJLENBQUNDLEdBQUcsQ0FBQztJQUN0QixDQUFDO0lBRUR4QyxpQkFBaUIsQ0FBQ1EsWUFBWSxDQUFDRCxlQUFlLENBQUM7TUFDN0NFLFFBQVEsRUFBRSxJQUFJO01BQ2RDLFdBQVcsRUFBRSxLQUFLO01BQ2xCQyxVQUFVLEVBQUUsSUFBSTtNQUNoQjhCLFFBQVEsRUFBRVQsWUFBWTtNQUN0QnBCLE9BQU8sRUFBRSxLQUFLO01BQ2RDLGNBQWMsRUFBRSxJQUFJO01BQ3BCQyxZQUFZLEVBQUU7SUFDaEIsQ0FBQyxDQUFDO0lBRUYsSUFBQTRCLFFBQUEsR0FBcUIsSUFBQWxCLG1CQUFNLEVBQ3pCLElBQUFsRCxXQUFBLENBQUE2QyxHQUFBLEVBQUMvQyxZQUFBLENBQUFhLE9BQVc7UUFBQXFDLFFBQUEsRUFDVixJQUFBaEQsV0FBQSxDQUFBNkMsR0FBQTtVQUFBRyxRQUFBLEVBQUs7UUFBSSxDQUFLO01BQUMsQ0FDSixDQUNmLENBQUM7TUFKT3FCLFFBQVEsR0FBQUQsUUFBQSxDQUFSQyxRQUFRO0lBT2hCLElBQU1DLGdCQUFnQixJQUFBYixxQkFBQSxHQUFHL0IsaUJBQWlCLENBQUNILEVBQUUsQ0FBQ3pDLElBQUksQ0FBQ3lGLEtBQUssQ0FBQ0MsSUFBSSxDQUMzRCxVQUFDdkQsSUFBSTtNQUFBLE9BQUtBLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxrQkFBa0I7SUFBQSxDQUMxQyxDQUFDLHFCQUZ3QndDLHFCQUFBLENBRXJCLENBQUMsQ0FBQztJQUVOLElBQUlhLGdCQUFnQixFQUFFO01BQ3BCLE1BQU0sSUFBQUcsZ0JBQUcsTUFBQWpGLGtCQUFBLENBQUFtQixPQUFBLEVBQUMsYUFBWTtRQUNwQjJELGdCQUFnQixDQUFDO1VBQ2ZuQyxRQUFRLEVBQUUsSUFBSTtVQUNkQyxXQUFXLEVBQUUsS0FBSztVQUNsQkMsVUFBVSxFQUFFLElBQUk7VUFDaEI4QixRQUFRLEVBQUVULFlBQVk7VUFDdEJwQixPQUFPLEVBQUUsS0FBSztVQUNkQyxjQUFjLEVBQUUsSUFBSTtVQUNwQkMsWUFBWSxFQUFFO1FBQ2hCLENBQUMsQ0FBQztNQUNKLENBQUMsRUFBQztJQUNKO0lBR0FZLE1BQU0sQ0FBQzFCLGlCQUFpQixDQUFDSCxFQUFFLENBQUMsQ0FBQ21ELGdCQUFnQixDQUFDLENBQUM7RUFDakQsQ0FBQyxFQUFDO0VBRUYvQixFQUFFLENBQUMscUNBQXFDLE1BQUFuRCxrQkFBQSxDQUFBbUIsT0FBQSxFQUFFLGFBQVk7SUFBQSxJQUFBZ0Usc0JBQUE7SUFDcEQsSUFBTUMsU0FBUyxHQUFHLElBQUlDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztJQUU5QyxJQUFBM0IsbUJBQU0sRUFDSixJQUFBbEQsV0FBQSxDQUFBNkMsR0FBQSxFQUFDL0MsWUFBQSxDQUFBYSxPQUFXO01BQUFxQyxRQUFBLEVBQ1YsSUFBQWhELFdBQUEsQ0FBQTZDLEdBQUE7UUFBQUcsUUFBQSxFQUFLO01BQUksQ0FBSztJQUFDLENBQ0osQ0FDZixDQUFDO0lBRUQsSUFBTThCLFlBQVksSUFBQUgsc0JBQUEsR0FBR2pELGlCQUFpQixDQUFDSCxFQUFFLENBQUN6QyxJQUFJLENBQUN5RixLQUFLLENBQUNDLElBQUksQ0FDdkQsVUFBQ3ZELElBQUk7TUFBQSxPQUFLQSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssV0FBVztJQUFBLENBQ25DLENBQUMscUJBRm9CMEQsc0JBQUEsQ0FFakIsQ0FBQyxDQUFDO0lBRU4sSUFBSUcsWUFBWSxFQUFFO01BQ2hCLE1BQU0sSUFBQUwsZ0JBQUcsTUFBQWpGLGtCQUFBLENBQUFtQixPQUFBLEVBQUMsYUFBWTtRQUNwQm1FLFlBQVksQ0FBQ0YsU0FBUyxDQUFDO01BQ3pCLENBQUMsRUFBQztJQUNKO0lBRUF4QixNQUFNLENBQUNyRSxtQkFBSyxDQUFDQyxLQUFLLENBQUMsQ0FBQ3NFLG9CQUFvQixDQUN0QyxZQUFZLEVBQ1oscURBQXFELEVBQ3JELENBQUM7TUFBRXlCLElBQUksRUFBRTtJQUFLLENBQUMsQ0FDakIsQ0FBQztFQUNILENBQUMsRUFBQztFQUVGcEMsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLFlBQU07SUFDckQsSUFBQXFDLFFBQUEsR0FBb0IsSUFBQTlCLG1CQUFNLEVBQ3hCLElBQUFsRCxXQUFBLENBQUE2QyxHQUFBLEVBQUMvQyxZQUFBLENBQUFhLE9BQVc7UUFBQXFDLFFBQUEsRUFDVixJQUFBaEQsV0FBQSxDQUFBNkMsR0FBQTtVQUFBRyxRQUFBLEVBQUs7UUFBSSxDQUFLO01BQUMsQ0FDSixDQUNmLENBQUM7TUFKT2lDLE9BQU8sR0FBQUQsUUFBQSxDQUFQQyxPQUFPO0lBTWZBLE9BQU8sQ0FBQyxDQUFDO0lBRVQ3QixNQUFNLENBQUMxQixpQkFBaUIsQ0FBQ2UsR0FBRyxDQUFDLENBQUNhLG9CQUFvQixDQUNoRCxrQkFBa0IsRUFDbEJGLE1BQU0sQ0FBQ0csR0FBRyxDQUFDQyxRQUFRLENBQ3JCLENBQUM7SUFDREosTUFBTSxDQUFDMUIsaUJBQWlCLENBQUNlLEdBQUcsQ0FBQyxDQUFDYSxvQkFBb0IsQ0FDaEQsV0FBVyxFQUNYRixNQUFNLENBQUNHLEdBQUcsQ0FBQ0MsUUFBUSxDQUNyQixDQUFDO0VBQ0gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYxQixRQUFRLENBQUMscUJBQXFCLEVBQUUsWUFBTTtFQUNwQyxJQUFNb0QsYUFBYSxHQUFHLFNBQWhCQSxhQUFhQSxDQUFBLEVBQVM7SUFDMUIsSUFBQUMsZUFBQSxHQUEyRCxJQUFBQywyQkFBYyxFQUFDLENBQUM7TUFBbkVDLFNBQVMsR0FBQUYsZUFBQSxDQUFURSxTQUFTO01BQUVDLE9BQU8sR0FBQUgsZUFBQSxDQUFQRyxPQUFPO01BQUVDLFlBQVksR0FBQUosZUFBQSxDQUFaSSxZQUFZO01BQUVyRCxZQUFZLEdBQUFpRCxlQUFBLENBQVpqRCxZQUFZO0lBRXRELE9BQ0UsSUFBQWxDLFdBQUEsQ0FBQXdGLElBQUEsRUFBQzdGLGFBQUEsQ0FBQThGLElBQUk7TUFBQXpDLFFBQUEsR0FDSCxJQUFBaEQsV0FBQSxDQUFBNkMsR0FBQSxFQUFDbEQsYUFBQSxDQUFBK0YsZ0JBQWdCO1FBQ2YzQyxNQUFNLEVBQUMsa0JBQWtCO1FBQ3pCNEMsT0FBTyxFQUFFLFNBQVRBLE9BQU9BLENBQUE7VUFBQSxPQUFRTixTQUFTLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQztRQUFBLENBQUM7UUFBQXJDLFFBQUEsRUFFaEQsSUFBQWhELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ2xELGFBQUEsQ0FBQW1ELElBQUk7VUFBQUUsUUFBQSxFQUFDO1FBQWdCLENBQU07TUFBQyxDQUNiLENBQUMsRUFDbkIsSUFBQWhELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ2xELGFBQUEsQ0FBQStGLGdCQUFnQjtRQUNmM0MsTUFBTSxFQUFDLGtCQUFrQjtRQUN6QjRDLE9BQU8sRUFBRSxTQUFUQSxPQUFPQSxDQUFBO1VBQUEsT0FBUU4sU0FBUyxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUM7UUFBQSxDQUFDO1FBQUFyQyxRQUFBLEVBRWhELElBQUFoRCxXQUFBLENBQUE2QyxHQUFBLEVBQUNsRCxhQUFBLENBQUFtRCxJQUFJO1VBQUFFLFFBQUEsRUFBQztRQUFnQixDQUFNO01BQUMsQ0FDYixDQUFDLEVBQ25CLElBQUFoRCxXQUFBLENBQUE2QyxHQUFBLEVBQUNsRCxhQUFBLENBQUErRixnQkFBZ0I7UUFBQzNDLE1BQU0sRUFBQyxVQUFVO1FBQUM0QyxPQUFPLEVBQUVMLE9BQVE7UUFBQXRDLFFBQUEsRUFDbkQsSUFBQWhELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ2xELGFBQUEsQ0FBQW1ELElBQUk7VUFBQUUsUUFBQSxFQUFDO1FBQVEsQ0FBTTtNQUFDLENBQ0wsQ0FBQyxFQUNuQixJQUFBaEQsV0FBQSxDQUFBNkMsR0FBQSxFQUFDbEQsYUFBQSxDQUFBbUQsSUFBSTtRQUFDQyxNQUFNLEVBQUMsYUFBYTtRQUFBQyxRQUFBLEVBQ3ZCdUMsWUFBWSxDQUFDLENBQUMsR0FBRyxRQUFRLEdBQUc7TUFBVSxDQUNuQyxDQUFDO0lBQUEsQ0FDSCxDQUFDO0VBRVgsQ0FBQztFQUVEeEQsVUFBVSxDQUFDLFlBQU07SUFDZjlDLElBQUksQ0FBQytDLGFBQWEsQ0FBQyxDQUFDO0lBQ3BCTixpQkFBaUIsQ0FBQzJELFNBQVMsR0FBR3BHLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDdkN3QyxpQkFBaUIsQ0FBQzRELE9BQU8sR0FBR3JHLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDckN3QyxpQkFBaUIsQ0FBQzZELFlBQVksR0FBR3RHLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDMUN3QyxpQkFBaUIsQ0FBQ1EsWUFBWSxHQUFHakQsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUM1QyxDQUFDLENBQUM7RUFFRnlELEVBQUUsQ0FBQyxzQ0FBc0MsTUFBQW5ELGtCQUFBLENBQUFtQixPQUFBLEVBQUUsYUFBWTtJQUNyRGUsaUJBQWlCLENBQUMyRCxTQUFTLENBQUNPLGlCQUFpQixDQUFDLElBQUksQ0FBQztJQUVuRCxJQUFBQyxRQUFBLEdBQXdCLElBQUEzQyxtQkFBTSxFQUFDLElBQUFsRCxXQUFBLENBQUE2QyxHQUFBLEVBQUNxQyxhQUFhLElBQUUsQ0FBQyxDQUFDO01BQXpDL0IsV0FBVyxHQUFBMEMsUUFBQSxDQUFYMUMsV0FBVztJQUVuQixNQUFNLElBQUFzQixnQkFBRyxNQUFBakYsa0JBQUEsQ0FBQW1CLE9BQUEsRUFBQyxhQUFZO01BQ3BCbUYsc0JBQVMsQ0FBQ0MsS0FBSyxDQUFDNUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDbEQsQ0FBQyxFQUFDO0lBRUZDLE1BQU0sQ0FBQzFCLGlCQUFpQixDQUFDMkQsU0FBUyxDQUFDLENBQUMvQixvQkFBb0IsQ0FDdEQsWUFBWSxFQUNaLE9BQ0YsQ0FBQztFQUNILENBQUMsRUFBQztFQUVGWCxFQUFFLENBQUMsc0NBQXNDLE1BQUFuRCxrQkFBQSxDQUFBbUIsT0FBQSxFQUFFLGFBQVk7SUFDckRlLGlCQUFpQixDQUFDMkQsU0FBUyxDQUFDTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFFbkQsSUFBQUksUUFBQSxHQUF3QixJQUFBOUMsbUJBQU0sRUFBQyxJQUFBbEQsV0FBQSxDQUFBNkMsR0FBQSxFQUFDcUMsYUFBYSxJQUFFLENBQUMsQ0FBQztNQUF6Qy9CLFdBQVcsR0FBQTZDLFFBQUEsQ0FBWDdDLFdBQVc7SUFFbkIsTUFBTSxJQUFBc0IsZ0JBQUcsTUFBQWpGLGtCQUFBLENBQUFtQixPQUFBLEVBQUMsYUFBWTtNQUNwQm1GLHNCQUFTLENBQUNDLEtBQUssQ0FBQzVDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xELENBQUMsRUFBQztJQUVGQyxNQUFNLENBQUMxQixpQkFBaUIsQ0FBQzJELFNBQVMsQ0FBQyxDQUFDL0Isb0JBQW9CLENBQ3RELFlBQVksRUFDWixPQUNGLENBQUM7RUFDSCxDQUFDLEVBQUM7RUFFRlgsRUFBRSxDQUFDLGtDQUFrQyxNQUFBbkQsa0JBQUEsQ0FBQW1CLE9BQUEsRUFBRSxhQUFZO0lBQ2pEZSxpQkFBaUIsQ0FBQzJELFNBQVMsQ0FBQ08saUJBQWlCLENBQUMsS0FBSyxDQUFDO0lBRXBELElBQUFLLFFBQUEsR0FBd0IsSUFBQS9DLG1CQUFNLEVBQUMsSUFBQWxELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ3FDLGFBQWEsSUFBRSxDQUFDLENBQUM7TUFBekMvQixXQUFXLEdBQUE4QyxRQUFBLENBQVg5QyxXQUFXO0lBRW5CLE1BQU0sSUFBQXNCLGdCQUFHLE1BQUFqRixrQkFBQSxDQUFBbUIsT0FBQSxFQUFDLGFBQVk7TUFDcEJtRixzQkFBUyxDQUFDQyxLQUFLLENBQUM1QyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNsRCxDQUFDLEVBQUM7SUFFRkMsTUFBTSxDQUFDckUsbUJBQUssQ0FBQ0MsS0FBSyxDQUFDLENBQUNzRSxvQkFBb0IsQ0FDdEMsT0FBTyxFQUNQLG9FQUNGLENBQUM7RUFDSCxDQUFDLEVBQUM7RUFFRlgsRUFBRSxDQUFDLGlCQUFpQixFQUFFLFlBQU07SUFDMUIsSUFBQXVELFFBQUEsR0FBd0IsSUFBQWhELG1CQUFNLEVBQUMsSUFBQWxELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ3FDLGFBQWEsSUFBRSxDQUFDLENBQUM7TUFBekMvQixXQUFXLEdBQUErQyxRQUFBLENBQVgvQyxXQUFXO0lBRW5CMkMsc0JBQVMsQ0FBQ0MsS0FBSyxDQUFDNUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRXhDQyxNQUFNLENBQUMxQixpQkFBaUIsQ0FBQzRELE9BQU8sQ0FBQyxDQUFDWixnQkFBZ0IsQ0FBQyxDQUFDO0VBQ3RELENBQUMsQ0FBQztFQUVGL0IsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLFlBQU07SUFDekNqQixpQkFBaUIsQ0FBQzZELFlBQVksQ0FBQ3RELGVBQWUsQ0FBQyxJQUFJLENBQUM7SUFFcEQsSUFBQWtFLFFBQUEsR0FBd0IsSUFBQWpELG1CQUFNLEVBQUMsSUFBQWxELFdBQUEsQ0FBQTZDLEdBQUEsRUFBQ3FDLGFBQWEsSUFBRSxDQUFDLENBQUM7TUFBekMvQixXQUFXLEdBQUFnRCxRQUFBLENBQVhoRCxXQUFXO0lBRW5CQyxNQUFNLENBQUNELFdBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDaUQsaUJBQWlCLENBQUMsUUFBUSxDQUFDO0VBQ2hFLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==