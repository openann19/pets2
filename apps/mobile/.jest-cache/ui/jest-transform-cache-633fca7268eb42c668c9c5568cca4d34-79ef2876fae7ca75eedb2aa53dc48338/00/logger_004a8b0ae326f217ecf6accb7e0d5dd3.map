{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","LogLevel","DEFAULT_LOGGER_CONFIG","logToLogBoxAndConsole","updateLoggerConfig","replaceLoggerImplementation","registerLoggerConfig","logger","_defineProperty2","_LogBox","ownKeys","e","r","t","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","default","getOwnPropertyDescriptors","defineProperties","DOCS_URL","DOCS_REFERENCE","_worklet_14809094223802_init_data","code","location","sourceMap","logToConsole","_e","global","Error","_f","data","level","console","warn","message","content","error","_closure","__initData","__workletHash","__stackDetails","__version","logFunction","strict","_worklet_16235354363902_init_data","formatMessage","_worklet_14793130900843_init_data","createLog","formattedMessage","substitutions","category","componentStack","componentStackType","stack","addLogBoxLog","_worklet_1905596409280_init_data","config","__reanimatedLoggerConfig","_worklet_16987634238042_init_data","_worklet_6995972259299_init_data","options","_options$level","_options$strict","_worklet_5860961094812_init_data","handleLog","_worklet_16697463060837_init_data","_worklet_8517690666309_init_data","undefined"],"sources":["logger.ts"],"sourcesContent":["'use strict';\nimport type { LogBoxLogLevel, LogData } from './LogBox';\nimport { addLogBoxLog } from './LogBox';\n\nconst DOCS_URL =\n  'https://docs.swmansion.com/react-native-reanimated/docs/debugging/logger-configuration';\nconst DOCS_REFERENCE = `If you don't want to see this message, you can disable the \\`strict\\` mode. Refer to:\\n${DOCS_URL} for more details.`;\n\ntype LogFunction = (data: LogData) => void;\n\nexport enum LogLevel {\n  warn = 1,\n  error = 2,\n}\n\nexport type LoggerConfig = {\n  level?: LogLevel;\n  strict?: boolean;\n};\n\nexport type LoggerConfigInternal = {\n  logFunction: LogFunction;\n} & Required<LoggerConfig>;\n\nfunction logToConsole(data: LogData) {\n  'worklet';\n  switch (data.level) {\n    case 'warn':\n      console.warn(data.message.content);\n      break;\n    case 'error':\n    case 'fatal':\n    case 'syntax':\n      console.error(data.message.content);\n      break;\n  }\n}\n\nexport const DEFAULT_LOGGER_CONFIG: LoggerConfigInternal = {\n  logFunction: logToConsole,\n  level: LogLevel.warn,\n  strict: true,\n};\n\nfunction formatMessage(message: string) {\n  'worklet';\n  return `[Reanimated] ${message}`;\n}\n\nfunction createLog(level: LogBoxLogLevel, message: string): LogData {\n  'worklet';\n  const formattedMessage = formatMessage(message);\n\n  return {\n    level,\n    message: {\n      content: formattedMessage,\n      substitutions: [],\n    },\n    category: formattedMessage,\n    componentStack: [],\n    componentStackType: null,\n    // eslint-disable-next-line reanimated/use-reanimated-error\n    stack: new Error().stack,\n  };\n}\n\n/**\n * Function that logs to LogBox and console. Used to replace the default console\n * logging with logging to LogBox on the UI thread when runOnJS is available.\n *\n * @param data - The details of the log.\n */\nexport function logToLogBoxAndConsole(data: LogData) {\n  addLogBoxLog(data);\n  logToConsole(data);\n}\n\n/**\n * Registers the logger configuration. use it only for Worklet runtimes.\n *\n * @param config - The config to register.\n */\nexport function registerLoggerConfig(config: LoggerConfigInternal) {\n  'worklet';\n  global.__reanimatedLoggerConfig = config;\n}\n\n/**\n * Replaces the default log function with a custom implementation.\n *\n * @param logFunction - The custom log function.\n */\nexport function replaceLoggerImplementation(logFunction: LogFunction) {\n  'worklet';\n  registerLoggerConfig({ ...global.__reanimatedLoggerConfig, logFunction });\n}\n\n/**\n * Updates logger configuration.\n *\n * @param options - The new logger configuration to apply.\n *\n *   - Level: The minimum log level to display.\n *   - Strict: Whether to log warnings and errors that are not strict. Defaults to\n *       false.\n */\nexport function updateLoggerConfig(options?: Partial<LoggerConfig>) {\n  'worklet';\n  registerLoggerConfig({\n    ...global.__reanimatedLoggerConfig,\n    // Don't reuse previous level and strict values from the global config\n    level: options?.level ?? DEFAULT_LOGGER_CONFIG.level,\n    strict: options?.strict ?? DEFAULT_LOGGER_CONFIG.strict,\n  });\n}\n\ntype LogOptions = {\n  strict?: boolean;\n};\n\nfunction handleLog(\n  level: Exclude<LogBoxLogLevel, 'syntax' | 'fatal'>,\n  message: string,\n  options: LogOptions\n) {\n  'worklet';\n  const config = global.__reanimatedLoggerConfig;\n  if (\n    // Don't log if the log is marked as strict-only and the config doesn't\n    // enable strict logging\n    (options.strict && !config.strict) ||\n    // Don't log if the log level is below the minimum configured level\n    LogLevel[level] < config.level\n  ) {\n    return;\n  }\n\n  if (options.strict) {\n    message += `\\n\\n${DOCS_REFERENCE}`;\n  }\n\n  config.logFunction(createLog(level, message));\n}\n\nexport const logger = {\n  warn(message: string, options: LogOptions = {}) {\n    'worklet';\n    handleLog('warn', message, options);\n  },\n  error(message: string, options: LogOptions = {}) {\n    'worklet';\n    handleLog('error', message, options);\n  },\n};\n"],"mappings":"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","ignoreList":[]}