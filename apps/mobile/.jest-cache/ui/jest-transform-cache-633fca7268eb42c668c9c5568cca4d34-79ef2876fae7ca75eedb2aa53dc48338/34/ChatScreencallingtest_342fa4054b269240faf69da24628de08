32b5451c0604cf0f4070d6e141105a32
"use strict";

_getJestObj().mock("../../components/calling/CallManager");
_getJestObj().mock("@pawfectmatch/core");
_getJestObj().mock("../../services/api", function () {
  return {
    chatAPI: {
      getMessages: jest.fn(),
      sendMessage: jest.fn(),
      markAsRead: jest.fn()
    }
  };
});
_getJestObj().mock("react-native", function () {
  return {
    Alert: {
      alert: jest.fn()
    },
    View: "View",
    Text: "Text",
    TouchableOpacity: "TouchableOpacity",
    ScrollView: "ScrollView",
    StyleSheet: {
      create: jest.fn(function (styles) {
        return styles;
      })
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _core = require("@pawfectmatch/core");
var _reactNative = require("@testing-library/react-native");
var _react = _interopRequireDefault(require("react"));
var _reactNative2 = require("react-native");
var _CallManager = require("../../components/calling/CallManager");
var _ChatScreen = _interopRequireDefault(require("../ChatScreen"));
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockUseCallManager = _CallManager.useCallManager;
var mockUseAuthStore = _core.useAuthStore;
var mockNavigation = {
  navigate: jest.fn(),
  goBack: jest.fn()
};
var mockRoute = {
  params: {
    matchId: "test-match-id",
    petName: "Test Pet"
  }
};
describe("ChatScreen - Calling Features", function () {
  var mockStartCall = jest.fn();
  var mockIsCallActive = jest.fn();
  beforeEach(function () {
    jest.clearAllMocks();
    mockUseCallManager.mockReturnValue({
      startCall: mockStartCall,
      endCall: jest.fn(),
      isCallActive: mockIsCallActive,
      getCallState: jest.fn()
    });
    mockUseAuthStore.mockReturnValue({
      user: {
        id: "test-user-id",
        firstName: "Test",
        lastName: "User"
      }
    });
    mockIsCallActive.mockReturnValue(false);
  });
  it("should render call buttons in header", function () {
    var _render = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render.getByTestId;
    expect(getByTestId("voice-call-button")).toBeTruthy();
    expect(getByTestId("video-call-button")).toBeTruthy();
  });
  it("should start voice call when voice button is pressed", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(true);
    var _render2 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render2.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    _reactNative.fireEvent.press(voiceButton);
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Voice Call", "Start a voice call with Test Pet?", expect.arrayContaining([expect.objectContaining({
      text: "Cancel"
    }), expect.objectContaining({
      text: "Call"
    })]));
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(mockStartCall).toHaveBeenCalledWith("test-match-id", "voice");
  }));
  it("should start video call when video button is pressed", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(true);
    var _render3 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render3.getByTestId;
    var videoButton = getByTestId("video-call-button");
    _reactNative.fireEvent.press(videoButton);
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Video Call", "Start a video call with Test Pet?", expect.arrayContaining([expect.objectContaining({
      text: "Cancel"
    }), expect.objectContaining({
      text: "Call"
    })]));
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(mockStartCall).toHaveBeenCalledWith("test-match-id", "video");
  }));
  it("should show error when call fails to start", (0, _asyncToGenerator2.default)(function* () {
    mockStartCall.mockResolvedValue(false);
    var _render4 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render4.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    _reactNative.fireEvent.press(voiceButton);
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var confirmButton = alertCall[2].find(function (button) {
      return button.text === "Call";
    });
    yield confirmButton.onPress();
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Error", "Failed to start call. Please check your permissions and try again.");
  }));
  it("should prevent starting call when another call is active", function () {
    mockIsCallActive.mockReturnValue(true);
    var _render5 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render5.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    _reactNative.fireEvent.press(voiceButton);
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Call in Progress", "You already have an active call.");
    expect(mockStartCall).not.toHaveBeenCalled();
  });
  it("should handle call button press with haptic feedback", function () {
    var _render6 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render6.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    _reactNative.fireEvent.press(voiceButton);
    expect(_reactNative2.Alert.alert).toHaveBeenCalled();
  });
  it("should cancel call when user presses cancel", function () {
    var _render7 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render7.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    _reactNative.fireEvent.press(voiceButton);
    var alertCall = _reactNative2.Alert.alert.mock.calls[0];
    var cancelButton = alertCall[2].find(function (button) {
      return button.text === "Cancel";
    });
    if (cancelButton.onPress) {
      cancelButton.onPress();
    }
    expect(mockStartCall).not.toHaveBeenCalled();
  });
  it("should show correct call button icons", function () {
    var _render8 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render8.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    var videoButton = getByTestId("video-call-button");
    expect(voiceButton).toBeTruthy();
    expect(videoButton).toBeTruthy();
  });
  it("should apply correct styling to call buttons", function () {
    var _render9 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render9.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    var videoButton = getByTestId("video-call-button");
    expect(voiceButton).toHaveStyle({
      width: 36,
      height: 36,
      borderRadius: 18
    });
    expect(videoButton).toHaveStyle({
      width: 36,
      height: 36,
      borderRadius: 18
    });
  });
  it("should handle call manager hook errors gracefully", function () {
    mockUseCallManager.mockImplementation(function () {
      throw new Error("Call manager error");
    });
    expect(function () {
      (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      }));
    }).not.toThrow();
  });
  it("should show different confirmation messages for voice and video calls", function () {
    var _render0 = (0, _reactNative.render)((0, _jsxRuntime.jsx)(_ChatScreen.default, {
        navigation: mockNavigation,
        route: mockRoute
      })),
      getByTestId = _render0.getByTestId;
    var voiceButton = getByTestId("voice-call-button");
    _reactNative.fireEvent.press(voiceButton);
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Voice Call", "Start a voice call with Test Pet?", expect.any(Array));
    jest.clearAllMocks();
    var videoButton = getByTestId("video-call-button");
    _reactNative.fireEvent.press(videoButton);
    expect(_reactNative2.Alert.alert).toHaveBeenCalledWith("Video Call", "Start a video call with Test Pet?", expect.any(Array));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjaGF0QVBJIiwiZ2V0TWVzc2FnZXMiLCJqZXN0IiwiZm4iLCJzZW5kTWVzc2FnZSIsIm1hcmtBc1JlYWQiLCJBbGVydCIsImFsZXJ0IiwiVmlldyIsIlRleHQiLCJUb3VjaGFibGVPcGFjaXR5IiwiU2Nyb2xsVmlldyIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJzdHlsZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9jb3JlIiwiX3JlYWN0TmF0aXZlIiwiX3JlYWN0IiwiX3JlYWN0TmF0aXZlMiIsIl9DYWxsTWFuYWdlciIsIl9DaGF0U2NyZWVuIiwiX2pzeFJ1bnRpbWUiLCJfcmVxdWlyZSIsIm1vY2tVc2VDYWxsTWFuYWdlciIsInVzZUNhbGxNYW5hZ2VyIiwibW9ja1VzZUF1dGhTdG9yZSIsInVzZUF1dGhTdG9yZSIsIm1vY2tOYXZpZ2F0aW9uIiwibmF2aWdhdGUiLCJnb0JhY2siLCJtb2NrUm91dGUiLCJwYXJhbXMiLCJtYXRjaElkIiwicGV0TmFtZSIsImRlc2NyaWJlIiwibW9ja1N0YXJ0Q2FsbCIsIm1vY2tJc0NhbGxBY3RpdmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsInN0YXJ0Q2FsbCIsImVuZENhbGwiLCJpc0NhbGxBY3RpdmUiLCJnZXRDYWxsU3RhdGUiLCJ1c2VyIiwiaWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIml0IiwiX3JlbmRlciIsInJlbmRlciIsImpzeCIsImRlZmF1bHQiLCJuYXZpZ2F0aW9uIiwicm91dGUiLCJnZXRCeVRlc3RJZCIsImV4cGVjdCIsInRvQmVUcnV0aHkiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIl9yZW5kZXIyIiwidm9pY2VCdXR0b24iLCJmaXJlRXZlbnQiLCJwcmVzcyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYXJyYXlDb250YWluaW5nIiwib2JqZWN0Q29udGFpbmluZyIsInRleHQiLCJhbGVydENhbGwiLCJjYWxscyIsImNvbmZpcm1CdXR0b24iLCJmaW5kIiwiYnV0dG9uIiwib25QcmVzcyIsIl9yZW5kZXIzIiwidmlkZW9CdXR0b24iLCJfcmVuZGVyNCIsIl9yZW5kZXI1Iiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsIl9yZW5kZXI2IiwiX3JlbmRlcjciLCJjYW5jZWxCdXR0b24iLCJfcmVuZGVyOCIsIl9yZW5kZXI5IiwidG9IYXZlU3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlclJhZGl1cyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIkVycm9yIiwidG9UaHJvdyIsIl9yZW5kZXIwIiwiYW55IiwiQXJyYXkiXSwic291cmNlcyI6WyJDaGF0U2NyZWVuLmNhbGxpbmcudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQXV0aFN0b3JlIH0gZnJvbSBcIkBwYXdmZWN0bWF0Y2gvY29yZVwiO1xuaW1wb3J0IHsgZmlyZUV2ZW50LCByZW5kZXIgfSBmcm9tIFwiQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmVcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xuXG5pbXBvcnQgeyB1c2VDYWxsTWFuYWdlciB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2NhbGxpbmcvQ2FsbE1hbmFnZXJcIjtcbmltcG9ydCBDaGF0U2NyZWVuIGZyb20gXCIuLi9DaGF0U2NyZWVuXCI7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soXCIuLi8uLi9jb21wb25lbnRzL2NhbGxpbmcvQ2FsbE1hbmFnZXJcIik7XG5qZXN0Lm1vY2soXCJAcGF3ZmVjdG1hdGNoL2NvcmVcIik7XG5qZXN0Lm1vY2soXCIuLi8uLi9zZXJ2aWNlcy9hcGlcIiwgKCkgPT4gKHtcbiAgY2hhdEFQSToge1xuICAgIGdldE1lc3NhZ2VzOiBqZXN0LmZuKCksXG4gICAgc2VuZE1lc3NhZ2U6IGplc3QuZm4oKSxcbiAgICBtYXJrQXNSZWFkOiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbmplc3QubW9jayhcInJlYWN0LW5hdGl2ZVwiLCAoKSA9PiAoe1xuICBBbGVydDoge1xuICAgIGFsZXJ0OiBqZXN0LmZuKCksXG4gIH0sXG4gIFZpZXc6IFwiVmlld1wiLFxuICBUZXh0OiBcIlRleHRcIixcbiAgVG91Y2hhYmxlT3BhY2l0eTogXCJUb3VjaGFibGVPcGFjaXR5XCIsXG4gIFNjcm9sbFZpZXc6IFwiU2Nyb2xsVmlld1wiLFxuICBTdHlsZVNoZWV0OiB7XG4gICAgY3JlYXRlOiBqZXN0LmZuKChzdHlsZXMpID0+IHN0eWxlcyksXG4gIH0sXG59KSk7XG5cbmNvbnN0IG1vY2tVc2VDYWxsTWFuYWdlciA9IHVzZUNhbGxNYW5hZ2VyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248XG4gIHR5cGVvZiB1c2VDYWxsTWFuYWdlclxuPjtcbmNvbnN0IG1vY2tVc2VBdXRoU3RvcmUgPSB1c2VBdXRoU3RvcmUgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjxcbiAgdHlwZW9mIHVzZUF1dGhTdG9yZVxuPjtcblxuY29uc3QgbW9ja05hdmlnYXRpb24gPSB7XG4gIG5hdmlnYXRlOiBqZXN0LmZuKCksXG4gIGdvQmFjazogamVzdC5mbigpLFxufTtcblxuY29uc3QgbW9ja1JvdXRlID0ge1xuICBwYXJhbXM6IHtcbiAgICBtYXRjaElkOiBcInRlc3QtbWF0Y2gtaWRcIixcbiAgICBwZXROYW1lOiBcIlRlc3QgUGV0XCIsXG4gIH0sXG59O1xuXG5kZXNjcmliZShcIkNoYXRTY3JlZW4gLSBDYWxsaW5nIEZlYXR1cmVzXCIsICgpID0+IHtcbiAgY29uc3QgbW9ja1N0YXJ0Q2FsbCA9IGplc3QuZm4oKTtcbiAgY29uc3QgbW9ja0lzQ2FsbEFjdGl2ZSA9IGplc3QuZm4oKTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIG1vY2tVc2VDYWxsTWFuYWdlci5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc3RhcnRDYWxsOiBtb2NrU3RhcnRDYWxsLFxuICAgICAgZW5kQ2FsbDogamVzdC5mbigpLFxuICAgICAgaXNDYWxsQWN0aXZlOiBtb2NrSXNDYWxsQWN0aXZlLFxuICAgICAgZ2V0Q2FsbFN0YXRlOiBqZXN0LmZuKCksXG4gICAgfSk7XG5cbiAgICBtb2NrVXNlQXV0aFN0b3JlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiBcInRlc3QtdXNlci1pZFwiLFxuICAgICAgICBmaXJzdE5hbWU6IFwiVGVzdFwiLFxuICAgICAgICBsYXN0TmFtZTogXCJVc2VyXCIsXG4gICAgICB9LFxuICAgIH0gYXMgYW55KTtcblxuICAgIG1vY2tJc0NhbGxBY3RpdmUubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgcmVuZGVyIGNhbGwgYnV0dG9ucyBpbiBoZWFkZXJcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxDaGF0U2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSByb3V0ZT17bW9ja1JvdXRlfSAvPixcbiAgICApO1xuXG4gICAgZXhwZWN0KGdldEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIikpLnRvQmVUcnV0aHkoKTtcbiAgICBleHBlY3QoZ2V0QnlUZXN0SWQoXCJ2aWRlby1jYWxsLWJ1dHRvblwiKSkudG9CZVRydXRoeSgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBzdGFydCB2b2ljZSBjYWxsIHdoZW4gdm9pY2UgYnV0dG9uIGlzIHByZXNzZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tTdGFydENhbGwubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8Q2hhdFNjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gcm91dGU9e21vY2tSb3V0ZX0gLz4sXG4gICAgKTtcblxuICAgIGNvbnN0IHZvaWNlQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICBmaXJlRXZlbnQucHJlc3Modm9pY2VCdXR0b24pO1xuXG4gICAgLy8gU2hvdWxkIHNob3cgY29uZmlybWF0aW9uIGFsZXJ0XG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiVm9pY2UgQ2FsbFwiLFxuICAgICAgXCJTdGFydCBhIHZvaWNlIGNhbGwgd2l0aCBUZXN0IFBldD9cIixcbiAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IHRleHQ6IFwiQ2FuY2VsXCIgfSksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgdGV4dDogXCJDYWxsXCIgfSksXG4gICAgICBdKSxcbiAgICApO1xuXG4gICAgLy8gU2ltdWxhdGUgdXNlciBjb25maXJtaW5nIHRoZSBjYWxsXG4gICAgY29uc3QgYWxlcnRDYWxsID0gKEFsZXJ0LmFsZXJ0IGFzIGplc3QuTW9jaykubW9jay5jYWxsc1swXTtcbiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYWxlcnRDYWxsWzJdLmZpbmQoXG4gICAgICAoYnV0dG9uOiBhbnkpID0+IGJ1dHRvbi50ZXh0ID09PSBcIkNhbGxcIixcbiAgICApO1xuXG4gICAgYXdhaXQgY29uZmlybUJ1dHRvbi5vblByZXNzKCk7XG5cbiAgICBleHBlY3QobW9ja1N0YXJ0Q2FsbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJ0ZXN0LW1hdGNoLWlkXCIsIFwidm9pY2VcIik7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHN0YXJ0IHZpZGVvIGNhbGwgd2hlbiB2aWRlbyBidXR0b24gaXMgcHJlc3NlZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1N0YXJ0Q2FsbC5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxDaGF0U2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSByb3V0ZT17bW9ja1JvdXRlfSAvPixcbiAgICApO1xuXG4gICAgY29uc3QgdmlkZW9CdXR0b24gPSBnZXRCeVRlc3RJZChcInZpZGVvLWNhbGwtYnV0dG9uXCIpO1xuICAgIGZpcmVFdmVudC5wcmVzcyh2aWRlb0J1dHRvbik7XG5cbiAgICAvLyBTaG91bGQgc2hvdyBjb25maXJtYXRpb24gYWxlcnRcbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgXCJWaWRlbyBDYWxsXCIsXG4gICAgICBcIlN0YXJ0IGEgdmlkZW8gY2FsbCB3aXRoIFRlc3QgUGV0P1wiLFxuICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgdGV4dDogXCJDYW5jZWxcIiB9KSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0ZXh0OiBcIkNhbGxcIiB9KSxcbiAgICAgIF0pLFxuICAgICk7XG5cbiAgICAvLyBTaW11bGF0ZSB1c2VyIGNvbmZpcm1pbmcgdGhlIGNhbGxcbiAgICBjb25zdCBhbGVydENhbGwgPSAoQWxlcnQuYWxlcnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBhbGVydENhbGxbMl0uZmluZChcbiAgICAgIChidXR0b246IGFueSkgPT4gYnV0dG9uLnRleHQgPT09IFwiQ2FsbFwiLFxuICAgICk7XG5cbiAgICBhd2FpdCBjb25maXJtQnV0dG9uLm9uUHJlc3MoKTtcblxuICAgIGV4cGVjdChtb2NrU3RhcnRDYWxsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcInRlc3QtbWF0Y2gtaWRcIiwgXCJ2aWRlb1wiKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgc2hvdyBlcnJvciB3aGVuIGNhbGwgZmFpbHMgdG8gc3RhcnRcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tTdGFydENhbGwubW9ja1Jlc29sdmVkVmFsdWUoZmFsc2UpO1xuXG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPENoYXRTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IHJvdXRlPXttb2NrUm91dGV9IC8+LFxuICAgICk7XG5cbiAgICBjb25zdCB2b2ljZUJ1dHRvbiA9IGdldEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIik7XG4gICAgZmlyZUV2ZW50LnByZXNzKHZvaWNlQnV0dG9uKTtcblxuICAgIC8vIENvbmZpcm0gdGhlIGNhbGxcbiAgICBjb25zdCBhbGVydENhbGwgPSAoQWxlcnQuYWxlcnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBhbGVydENhbGxbMl0uZmluZChcbiAgICAgIChidXR0b246IGFueSkgPT4gYnV0dG9uLnRleHQgPT09IFwiQ2FsbFwiLFxuICAgICk7XG5cbiAgICBhd2FpdCBjb25maXJtQnV0dG9uLm9uUHJlc3MoKTtcblxuICAgIC8vIFNob3VsZCBzaG93IGVycm9yIGFsZXJ0XG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiRXJyb3JcIixcbiAgICAgIFwiRmFpbGVkIHRvIHN0YXJ0IGNhbGwuIFBsZWFzZSBjaGVjayB5b3VyIHBlcm1pc3Npb25zIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgcHJldmVudCBzdGFydGluZyBjYWxsIHdoZW4gYW5vdGhlciBjYWxsIGlzIGFjdGl2ZVwiLCAoKSA9PiB7XG4gICAgbW9ja0lzQ2FsbEFjdGl2ZS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSk7XG5cbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8Q2hhdFNjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gcm91dGU9e21vY2tSb3V0ZX0gLz4sXG4gICAgKTtcblxuICAgIGNvbnN0IHZvaWNlQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICBmaXJlRXZlbnQucHJlc3Modm9pY2VCdXR0b24pO1xuXG4gICAgLy8gU2hvdWxkIHNob3cgY2FsbCBpbiBwcm9ncmVzcyBhbGVydFxuICAgIGV4cGVjdChBbGVydC5hbGVydCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBcIkNhbGwgaW4gUHJvZ3Jlc3NcIixcbiAgICAgIFwiWW91IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgY2FsbC5cIixcbiAgICApO1xuXG4gICAgLy8gU2hvdWxkIG5vdCBzaG93IGNhbGwgY29uZmlybWF0aW9uXG4gICAgZXhwZWN0KG1vY2tTdGFydENhbGwpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGhhbmRsZSBjYWxsIGJ1dHRvbiBwcmVzcyB3aXRoIGhhcHRpYyBmZWVkYmFja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRCeVRlc3RJZCB9ID0gcmVuZGVyKFxuICAgICAgPENoYXRTY3JlZW4gbmF2aWdhdGlvbj17bW9ja05hdmlnYXRpb259IHJvdXRlPXttb2NrUm91dGV9IC8+LFxuICAgICk7XG5cbiAgICBjb25zdCB2b2ljZUJ1dHRvbiA9IGdldEJ5VGVzdElkKFwidm9pY2UtY2FsbC1idXR0b25cIik7XG4gICAgZmlyZUV2ZW50LnByZXNzKHZvaWNlQnV0dG9uKTtcblxuICAgIC8vIEhhcHRpYyBmZWVkYmFjayBzaG91bGQgYmUgdHJpZ2dlcmVkIChtb2NrZWQgaW4gdGhlIGNvbXBvbmVudClcbiAgICBleHBlY3QoQWxlcnQuYWxlcnQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgY2FuY2VsIGNhbGwgd2hlbiB1c2VyIHByZXNzZXMgY2FuY2VsXCIsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8Q2hhdFNjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gcm91dGU9e21vY2tSb3V0ZX0gLz4sXG4gICAgKTtcblxuICAgIGNvbnN0IHZvaWNlQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICBmaXJlRXZlbnQucHJlc3Modm9pY2VCdXR0b24pO1xuXG4gICAgLy8gU2ltdWxhdGUgdXNlciBjYW5jZWxpbmcgdGhlIGNhbGxcbiAgICBjb25zdCBhbGVydENhbGwgPSAoQWxlcnQuYWxlcnQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzWzBdO1xuICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGFsZXJ0Q2FsbFsyXS5maW5kKFxuICAgICAgKGJ1dHRvbjogYW55KSA9PiBidXR0b24udGV4dCA9PT0gXCJDYW5jZWxcIixcbiAgICApO1xuXG4gICAgaWYgKGNhbmNlbEJ1dHRvbi5vblByZXNzKSB7XG4gICAgICBjYW5jZWxCdXR0b24ub25QcmVzcygpO1xuICAgIH1cblxuICAgIGV4cGVjdChtb2NrU3RhcnRDYWxsKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBzaG93IGNvcnJlY3QgY2FsbCBidXR0b24gaWNvbnNcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcihcbiAgICAgIDxDaGF0U2NyZWVuIG5hdmlnYXRpb249e21vY2tOYXZpZ2F0aW9ufSByb3V0ZT17bW9ja1JvdXRlfSAvPixcbiAgICApO1xuXG4gICAgY29uc3Qgdm9pY2VCdXR0b24gPSBnZXRCeVRlc3RJZChcInZvaWNlLWNhbGwtYnV0dG9uXCIpO1xuICAgIGNvbnN0IHZpZGVvQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2aWRlby1jYWxsLWJ1dHRvblwiKTtcblxuICAgIC8vIFNob3VsZCBjb250YWluIGNhbGwgYW5kIHZpZGVvY2FtIGljb25zIHJlc3BlY3RpdmVseVxuICAgIGV4cGVjdCh2b2ljZUJ1dHRvbikudG9CZVRydXRoeSgpO1xuICAgIGV4cGVjdCh2aWRlb0J1dHRvbikudG9CZVRydXRoeSgpO1xuICB9KTtcblxuICBpdChcInNob3VsZCBhcHBseSBjb3JyZWN0IHN0eWxpbmcgdG8gY2FsbCBidXR0b25zXCIsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8Q2hhdFNjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gcm91dGU9e21vY2tSb3V0ZX0gLz4sXG4gICAgKTtcblxuICAgIGNvbnN0IHZvaWNlQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICBjb25zdCB2aWRlb0J1dHRvbiA9IGdldEJ5VGVzdElkKFwidmlkZW8tY2FsbC1idXR0b25cIik7XG5cbiAgICAvLyBTaG91bGQgaGF2ZSBwcm9wZXIgc3R5bGluZyAoZ3JhZGllbnQgYmFja2dyb3VuZHMsIGV0Yy4pXG4gICAgZXhwZWN0KHZvaWNlQnV0dG9uKS50b0hhdmVTdHlsZSh7XG4gICAgICB3aWR0aDogMzYsXG4gICAgICBoZWlnaHQ6IDM2LFxuICAgICAgYm9yZGVyUmFkaXVzOiAxOCxcbiAgICB9KTtcblxuICAgIGV4cGVjdCh2aWRlb0J1dHRvbikudG9IYXZlU3R5bGUoe1xuICAgICAgd2lkdGg6IDM2LFxuICAgICAgaGVpZ2h0OiAzNixcbiAgICAgIGJvcmRlclJhZGl1czogMTgsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIGhhbmRsZSBjYWxsIG1hbmFnZXIgaG9vayBlcnJvcnMgZ3JhY2VmdWxseVwiLCAoKSA9PiB7XG4gICAgbW9ja1VzZUNhbGxNYW5hZ2VyLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsIG1hbmFnZXIgZXJyb3JcIik7XG4gICAgfSk7XG5cbiAgICAvLyBTaG91bGQgbm90IGNyYXNoIHdoZW4gY2FsbCBtYW5hZ2VyIGZhaWxzXG4gICAgZXhwZWN0KCgpID0+IHtcbiAgICAgIHJlbmRlcig8Q2hhdFNjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gcm91dGU9e21vY2tSb3V0ZX0gLz4pO1xuICAgIH0pLm5vdC50b1Rocm93KCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHNob3cgZGlmZmVyZW50IGNvbmZpcm1hdGlvbiBtZXNzYWdlcyBmb3Igdm9pY2UgYW5kIHZpZGVvIGNhbGxzXCIsICgpID0+IHtcbiAgICBjb25zdCB7IGdldEJ5VGVzdElkIH0gPSByZW5kZXIoXG4gICAgICA8Q2hhdFNjcmVlbiBuYXZpZ2F0aW9uPXttb2NrTmF2aWdhdGlvbn0gcm91dGU9e21vY2tSb3V0ZX0gLz4sXG4gICAgKTtcblxuICAgIC8vIFRlc3Qgdm9pY2UgY2FsbFxuICAgIGNvbnN0IHZvaWNlQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2b2ljZS1jYWxsLWJ1dHRvblwiKTtcbiAgICBmaXJlRXZlbnQucHJlc3Modm9pY2VCdXR0b24pO1xuXG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiVm9pY2UgQ2FsbFwiLFxuICAgICAgXCJTdGFydCBhIHZvaWNlIGNhbGwgd2l0aCBUZXN0IFBldD9cIixcbiAgICAgIGV4cGVjdC5hbnkoQXJyYXkpLFxuICAgICk7XG5cbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIFRlc3QgdmlkZW8gY2FsbFxuICAgIGNvbnN0IHZpZGVvQnV0dG9uID0gZ2V0QnlUZXN0SWQoXCJ2aWRlby1jYWxsLWJ1dHRvblwiKTtcbiAgICBmaXJlRXZlbnQucHJlc3ModmlkZW9CdXR0b24pO1xuXG4gICAgZXhwZWN0KEFsZXJ0LmFsZXJ0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIFwiVmlkZW8gQ2FsbFwiLFxuICAgICAgXCJTdGFydCBhIHZpZGVvIGNhbGwgd2l0aCBUZXN0IFBldD9cIixcbiAgICAgIGV4cGVjdC5hbnkoQXJyYXkpLFxuICAgICk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBU0FBLFdBQUEsR0FBS0MsSUFBSSx1Q0FBdUMsQ0FBQztBQUNqREQsV0FBQSxHQUFLQyxJQUFJLENBQUMsb0JBQW9CLENBQUM7QUFDL0JELFdBQUEsR0FBS0MsSUFBSSx1QkFBdUI7RUFBQSxPQUFPO0lBQ3JDQyxPQUFPLEVBQUU7TUFDUEMsV0FBVyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ3RCQyxXQUFXLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDdEJFLFVBQVUsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDdEI7RUFDRixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBRUhMLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGNBQWMsRUFBRTtFQUFBLE9BQU87SUFDL0JPLEtBQUssRUFBRTtNQUNMQyxLQUFLLEVBQUVMLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFDREssSUFBSSxFQUFFLE1BQU07SUFDWkMsSUFBSSxFQUFFLE1BQU07SUFDWkMsZ0JBQWdCLEVBQUUsa0JBQWtCO0lBQ3BDQyxVQUFVLEVBQUUsWUFBWTtJQUN4QkMsVUFBVSxFQUFFO01BQ1ZDLE1BQU0sRUFBRVgsSUFBSSxDQUFDQyxFQUFFLENBQUMsVUFBQ1csTUFBTTtRQUFBLE9BQUtBLE1BQU07TUFBQTtJQUNwQztFQUNGLENBQUM7QUFBQSxDQUFDLENBQUM7QUFBQyxJQUFBQyxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsa0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQTlCSixJQUFBRSxLQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxNQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxhQUFBLEdBQUFMLE9BQUE7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