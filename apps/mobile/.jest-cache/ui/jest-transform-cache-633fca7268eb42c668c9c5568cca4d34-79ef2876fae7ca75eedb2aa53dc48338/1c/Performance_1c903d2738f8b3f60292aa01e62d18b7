deb38eb0c72521b889331d87a81dde53
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.PerformanceMeasure = exports.PerformanceMark = void 0;
var _readOnlyError2 = _interopRequireDefault(require("@babel/runtime/helpers/readOnlyError"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _warnOnce = _interopRequireDefault(require("../Utilities/warnOnce"));
var _EventCounts = _interopRequireDefault(require("./EventCounts"));
var _MemoryInfo = _interopRequireDefault(require("./MemoryInfo"));
var _NativePerformance = _interopRequireDefault(require("./NativePerformance"));
var _NativePerformanceObserver = _interopRequireDefault(require("./NativePerformanceObserver"));
var _PerformanceEntry3 = require("./PerformanceEntry");
var _PerformanceObserver = require("./PerformanceObserver");
var _RawPerformanceEntry = require("./RawPerformanceEntry");
var _ReactNativeStartupTiming = _interopRequireDefault(require("./ReactNativeStartupTiming"));
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
var getCurrentTimeStamp = global.nativePerformanceNow ? global.nativePerformanceNow : function () {
  return Date.now();
};
var PerformanceMark = exports.PerformanceMark = function (_PerformanceEntry) {
  function PerformanceMark(markName, markOptions) {
    var _markOptions$startTim;
    var _this;
    (0, _classCallCheck2.default)(this, PerformanceMark);
    _this = _callSuper(this, PerformanceMark, [{
      name: markName,
      entryType: 'mark',
      startTime: (_markOptions$startTim = markOptions == null ? void 0 : markOptions.startTime) != null ? _markOptions$startTim : getCurrentTimeStamp(),
      duration: 0
    }]);
    if (markOptions) {
      _this.detail = markOptions.detail;
    }
    return _this;
  }
  (0, _inherits2.default)(PerformanceMark, _PerformanceEntry);
  return (0, _createClass2.default)(PerformanceMark);
}(_PerformanceEntry3.PerformanceEntry);
var PerformanceMeasure = exports.PerformanceMeasure = function (_PerformanceEntry2) {
  function PerformanceMeasure(measureName, measureOptions) {
    var _measureOptions$durat;
    var _this2;
    (0, _classCallCheck2.default)(this, PerformanceMeasure);
    _this2 = _callSuper(this, PerformanceMeasure, [{
      name: measureName,
      entryType: 'measure',
      startTime: 0,
      duration: (_measureOptions$durat = measureOptions == null ? void 0 : measureOptions.duration) != null ? _measureOptions$durat : 0
    }]);
    if (measureOptions) {
      _this2.detail = measureOptions.detail;
    }
    return _this2;
  }
  (0, _inherits2.default)(PerformanceMeasure, _PerformanceEntry2);
  return (0, _createClass2.default)(PerformanceMeasure);
}(_PerformanceEntry3.PerformanceEntry);
function warnNoNativePerformance() {
  (0, _warnOnce.default)('missing-native-performance', 'Missing native implementation of Performance');
}
var Performance = exports.default = function () {
  function Performance() {
    (0, _classCallCheck2.default)(this, Performance);
    this.eventCounts = new _EventCounts.default();
  }
  return (0, _createClass2.default)(Performance, [{
    key: "memory",
    get: function get() {
      if (_NativePerformance.default != null && _NativePerformance.default.getSimpleMemoryInfo) {
        var memoryInfo = _NativePerformance.default.getSimpleMemoryInfo();
        if (memoryInfo.hasOwnProperty('hermes_heapSize')) {
          var totalJSHeapSize = memoryInfo.hermes_heapSize,
            usedJSHeapSize = memoryInfo.hermes_allocatedBytes;
          return new _MemoryInfo.default({
            jsHeapSizeLimit: null,
            totalJSHeapSize: totalJSHeapSize,
            usedJSHeapSize: usedJSHeapSize
          });
        } else {
          return new _MemoryInfo.default();
        }
      }
      return new _MemoryInfo.default();
    }
  }, {
    key: "reactNativeStartupTiming",
    get: function get() {
      if (_NativePerformance.default != null && _NativePerformance.default.getReactNativeStartupTiming) {
        return new _ReactNativeStartupTiming.default(_NativePerformance.default.getReactNativeStartupTiming());
      }
      return new _ReactNativeStartupTiming.default();
    }
  }, {
    key: "mark",
    value: function mark(markName, markOptions) {
      var mark = new PerformanceMark(markName, markOptions);
      if (_NativePerformance.default != null && _NativePerformance.default.mark) {
        _NativePerformance.default.mark(markName, mark.startTime, mark.duration);
      } else {
        warnNoNativePerformance();
      }
      return mark;
    }
  }, {
    key: "clearMarks",
    value: function clearMarks(markName) {
      if (!(_NativePerformanceObserver.default != null && _NativePerformanceObserver.default.clearEntries)) {
        (0, _PerformanceObserver.warnNoNativePerformanceObserver)();
        return;
      }
      _NativePerformanceObserver.default == null ? void 0 : _NativePerformanceObserver.default.clearEntries(_RawPerformanceEntry.RawPerformanceEntryTypeValues.MARK, markName);
    }
  }, {
    key: "measure",
    value: function measure(measureName, startMarkOrOptions, endMark) {
      var options;
      var startMarkName,
        endMarkName = endMark,
        duration,
        startTime = 0,
        endTime = 0;
      if (typeof startMarkOrOptions === 'string') {
        startMarkName = startMarkOrOptions;
      } else if (startMarkOrOptions !== undefined) {
        var _options$duration;
        options = startMarkOrOptions;
        if (endMark !== undefined) {
          throw new TypeError("Performance.measure: Can't have both options and endMark");
        }
        if (options.start === undefined && options.end === undefined) {
          throw new TypeError('Performance.measure: Must have at least one of start/end specified in options');
        }
        if (options.start !== undefined && options.end !== undefined && options.duration !== undefined) {
          throw new TypeError("Performance.measure: Can't have both start/end and duration explicitly in options");
        }
        if (typeof options.start === 'number') {
          startTime = options.start;
        } else {
          startMarkName = options.start;
        }
        if (typeof options.end === 'number') {
          endTime = options.end;
        } else {
          endMarkName = options.end;
        }
        duration = (_options$duration = options.duration) != null ? _options$duration : duration;
      }
      var measure = new PerformanceMeasure(measureName, options);
      if (_NativePerformance.default != null && _NativePerformance.default.measure) {
        _NativePerformance.default.measure(measureName, startTime, endTime, duration, startMarkName, endMarkName);
      } else {
        warnNoNativePerformance();
      }
      return measure;
    }
  }, {
    key: "clearMeasures",
    value: function clearMeasures(measureName) {
      if (!(_NativePerformanceObserver.default != null && _NativePerformanceObserver.default.clearEntries)) {
        (0, _PerformanceObserver.warnNoNativePerformanceObserver)();
        return;
      }
      _NativePerformanceObserver.default == null ? void 0 : _NativePerformanceObserver.default.clearEntries(_RawPerformanceEntry.RawPerformanceEntryTypeValues.MEASURE, measureName);
    }
  }, {
    key: "now",
    value: function now() {
      return getCurrentTimeStamp();
    }
  }, {
    key: "getEntries",
    value: function getEntries() {
      if (!(_NativePerformanceObserver.default != null && _NativePerformanceObserver.default.clearEntries)) {
        (0, _PerformanceObserver.warnNoNativePerformanceObserver)();
        return [];
      }
      return _NativePerformanceObserver.default.getEntries().map(_RawPerformanceEntry.rawToPerformanceEntry);
    }
  }, {
    key: "getEntriesByType",
    value: function getEntriesByType(entryType) {
      if (entryType !== 'mark' && entryType !== 'measure') {
        console.log(`Performance.getEntriesByType: Only valid for 'mark' and 'measure' entry types, got ${entryType}`);
        return [];
      }
      if (!(_NativePerformanceObserver.default != null && _NativePerformanceObserver.default.clearEntries)) {
        (0, _PerformanceObserver.warnNoNativePerformanceObserver)();
        return [];
      }
      return _NativePerformanceObserver.default.getEntries((0, _RawPerformanceEntry.performanceEntryTypeToRaw)(entryType)).map(_RawPerformanceEntry.rawToPerformanceEntry);
    }
  }, {
    key: "getEntriesByName",
    value: function getEntriesByName(entryName, entryType) {
      if (entryType !== undefined && entryType !== 'mark' && entryType !== 'measure') {
        console.log(`Performance.getEntriesByName: Only valid for 'mark' and 'measure' entry types, got ${entryType}`);
        return [];
      }
      if (!(_NativePerformanceObserver.default != null && _NativePerformanceObserver.default.clearEntries)) {
        (0, _PerformanceObserver.warnNoNativePerformanceObserver)();
        return [];
      }
      return _NativePerformanceObserver.default.getEntries(entryType != null ? (0, _RawPerformanceEntry.performanceEntryTypeToRaw)(entryType) : undefined, entryName).map(_RawPerformanceEntry.rawToPerformanceEntry);
    }
  }]);
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd2Fybk9uY2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9FdmVudENvdW50cyIsIl9NZW1vcnlJbmZvIiwiX05hdGl2ZVBlcmZvcm1hbmNlIiwiX05hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXIiLCJfUGVyZm9ybWFuY2VFbnRyeTMiLCJfUGVyZm9ybWFuY2VPYnNlcnZlciIsIl9SYXdQZXJmb3JtYW5jZUVudHJ5IiwiX1JlYWN0TmF0aXZlU3RhcnR1cFRpbWluZyIsIl9jYWxsU3VwZXIiLCJ0IiwibyIsImUiLCJfZ2V0UHJvdG90eXBlT2YyIiwiZGVmYXVsdCIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiY29uc3RydWN0b3IiLCJhcHBseSIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwiY2FsbCIsImdldEN1cnJlbnRUaW1lU3RhbXAiLCJnbG9iYWwiLCJuYXRpdmVQZXJmb3JtYW5jZU5vdyIsIkRhdGUiLCJub3ciLCJQZXJmb3JtYW5jZU1hcmsiLCJleHBvcnRzIiwiX1BlcmZvcm1hbmNlRW50cnkiLCJtYXJrTmFtZSIsIm1hcmtPcHRpb25zIiwiX21hcmtPcHRpb25zJHN0YXJ0VGltIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwibmFtZSIsImVudHJ5VHlwZSIsInN0YXJ0VGltZSIsImR1cmF0aW9uIiwiZGV0YWlsIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJQZXJmb3JtYW5jZUVudHJ5IiwiUGVyZm9ybWFuY2VNZWFzdXJlIiwiX1BlcmZvcm1hbmNlRW50cnkyIiwibWVhc3VyZU5hbWUiLCJtZWFzdXJlT3B0aW9ucyIsIl9tZWFzdXJlT3B0aW9ucyRkdXJhdCIsIl90aGlzMiIsIndhcm5Ob05hdGl2ZVBlcmZvcm1hbmNlIiwid2Fybk9uY2UiLCJQZXJmb3JtYW5jZSIsImV2ZW50Q291bnRzIiwiRXZlbnRDb3VudHMiLCJrZXkiLCJnZXQiLCJOYXRpdmVQZXJmb3JtYW5jZSIsImdldFNpbXBsZU1lbW9yeUluZm8iLCJtZW1vcnlJbmZvIiwiaGFzT3duUHJvcGVydHkiLCJ0b3RhbEpTSGVhcFNpemUiLCJoZXJtZXNfaGVhcFNpemUiLCJ1c2VkSlNIZWFwU2l6ZSIsImhlcm1lc19hbGxvY2F0ZWRCeXRlcyIsIk1lbW9yeUluZm8iLCJqc0hlYXBTaXplTGltaXQiLCJnZXRSZWFjdE5hdGl2ZVN0YXJ0dXBUaW1pbmciLCJSZWFjdE5hdGl2ZVN0YXJ0dXBUaW1pbmciLCJ2YWx1ZSIsIm1hcmsiLCJjbGVhck1hcmtzIiwiTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlciIsImNsZWFyRW50cmllcyIsIndhcm5Ob05hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXIiLCJSYXdQZXJmb3JtYW5jZUVudHJ5VHlwZVZhbHVlcyIsIk1BUksiLCJtZWFzdXJlIiwic3RhcnRNYXJrT3JPcHRpb25zIiwiZW5kTWFyayIsIm9wdGlvbnMiLCJzdGFydE1hcmtOYW1lIiwiZW5kTWFya05hbWUiLCJlbmRUaW1lIiwidW5kZWZpbmVkIiwiX29wdGlvbnMkZHVyYXRpb24iLCJUeXBlRXJyb3IiLCJzdGFydCIsImVuZCIsImNsZWFyTWVhc3VyZXMiLCJNRUFTVVJFIiwiZ2V0RW50cmllcyIsIm1hcCIsInJhd1RvUGVyZm9ybWFuY2VFbnRyeSIsImdldEVudHJpZXNCeVR5cGUiLCJjb25zb2xlIiwibG9nIiwicGVyZm9ybWFuY2VFbnRyeVR5cGVUb1JhdyIsImdldEVudHJpZXNCeU5hbWUiLCJlbnRyeU5hbWUiXSwic291cmNlcyI6WyJQZXJmb3JtYW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3cgc3RyaWN0XG4gKi9cblxuLy8gZmxvd2xpbnQgdW5zYWZlLWdldHRlcnMtc2V0dGVyczpvZmZcblxuaW1wb3J0IHR5cGUge0hpZ2hSZXNUaW1lU3RhbXAsIFBlcmZvcm1hbmNlRW50cnlUeXBlfSBmcm9tICcuL1BlcmZvcm1hbmNlRW50cnknO1xuaW1wb3J0IHR5cGUge1BlcmZvcm1hbmNlRW50cnlMaXN0fSBmcm9tICcuL1BlcmZvcm1hbmNlT2JzZXJ2ZXInO1xuXG5pbXBvcnQgd2Fybk9uY2UgZnJvbSAnLi4vVXRpbGl0aWVzL3dhcm5PbmNlJztcbmltcG9ydCBFdmVudENvdW50cyBmcm9tICcuL0V2ZW50Q291bnRzJztcbmltcG9ydCBNZW1vcnlJbmZvIGZyb20gJy4vTWVtb3J5SW5mbyc7XG5pbXBvcnQgTmF0aXZlUGVyZm9ybWFuY2UgZnJvbSAnLi9OYXRpdmVQZXJmb3JtYW5jZSc7XG5pbXBvcnQgTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlciBmcm9tICcuL05hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXInO1xuaW1wb3J0IHtQZXJmb3JtYW5jZUVudHJ5fSBmcm9tICcuL1BlcmZvcm1hbmNlRW50cnknO1xuaW1wb3J0IHt3YXJuTm9OYXRpdmVQZXJmb3JtYW5jZU9ic2VydmVyfSBmcm9tICcuL1BlcmZvcm1hbmNlT2JzZXJ2ZXInO1xuaW1wb3J0IHtcbiAgcGVyZm9ybWFuY2VFbnRyeVR5cGVUb1JhdyxcbiAgcmF3VG9QZXJmb3JtYW5jZUVudHJ5LFxufSBmcm9tICcuL1Jhd1BlcmZvcm1hbmNlRW50cnknO1xuaW1wb3J0IHtSYXdQZXJmb3JtYW5jZUVudHJ5VHlwZVZhbHVlc30gZnJvbSAnLi9SYXdQZXJmb3JtYW5jZUVudHJ5JztcbmltcG9ydCBSZWFjdE5hdGl2ZVN0YXJ0dXBUaW1pbmcgZnJvbSAnLi9SZWFjdE5hdGl2ZVN0YXJ0dXBUaW1pbmcnO1xuXG50eXBlIERldGFpbFR5cGUgPSBtaXhlZDtcblxuZXhwb3J0IHR5cGUgUGVyZm9ybWFuY2VNYXJrT3B0aW9ucyA9IHtcbiAgZGV0YWlsPzogRGV0YWlsVHlwZSxcbiAgc3RhcnRUaW1lPzogSGlnaFJlc1RpbWVTdGFtcCxcbn07XG5cbmRlY2xhcmUgdmFyIGdsb2JhbDoge1xuICAvLyBUaGlzIHZhbHVlIGlzIGRlZmluZWQgZGlyZWN0bHkgdmlhIEpTSSwgaWYgYXZhaWxhYmxlLlxuICArbmF0aXZlUGVyZm9ybWFuY2VOb3c/OiA/KCkgPT4gbnVtYmVyLFxufTtcblxuY29uc3QgZ2V0Q3VycmVudFRpbWVTdGFtcDogKCkgPT4gSGlnaFJlc1RpbWVTdGFtcCA9IGdsb2JhbC5uYXRpdmVQZXJmb3JtYW5jZU5vd1xuICA/IGdsb2JhbC5uYXRpdmVQZXJmb3JtYW5jZU5vd1xuICA6ICgpID0+IERhdGUubm93KCk7XG5cbmV4cG9ydCBjbGFzcyBQZXJmb3JtYW5jZU1hcmsgZXh0ZW5kcyBQZXJmb3JtYW5jZUVudHJ5IHtcbiAgZGV0YWlsOiBEZXRhaWxUeXBlO1xuXG4gIGNvbnN0cnVjdG9yKG1hcmtOYW1lOiBzdHJpbmcsIG1hcmtPcHRpb25zPzogUGVyZm9ybWFuY2VNYXJrT3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIG5hbWU6IG1hcmtOYW1lLFxuICAgICAgZW50cnlUeXBlOiAnbWFyaycsXG4gICAgICBzdGFydFRpbWU6IG1hcmtPcHRpb25zPy5zdGFydFRpbWUgPz8gZ2V0Q3VycmVudFRpbWVTdGFtcCgpLFxuICAgICAgZHVyYXRpb246IDAsXG4gICAgfSk7XG5cbiAgICBpZiAobWFya09wdGlvbnMpIHtcbiAgICAgIHRoaXMuZGV0YWlsID0gbWFya09wdGlvbnMuZGV0YWlsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdHlwZSBUaW1lU3RhbXBPck5hbWUgPSBIaWdoUmVzVGltZVN0YW1wIHwgc3RyaW5nO1xuXG5leHBvcnQgdHlwZSBQZXJmb3JtYW5jZU1lYXN1cmVPcHRpb25zID0ge1xuICBkZXRhaWw/OiBEZXRhaWxUeXBlLFxuICBzdGFydD86IFRpbWVTdGFtcE9yTmFtZSxcbiAgZW5kPzogVGltZVN0YW1wT3JOYW1lLFxuICBkdXJhdGlvbj86IEhpZ2hSZXNUaW1lU3RhbXAsXG59O1xuXG5leHBvcnQgY2xhc3MgUGVyZm9ybWFuY2VNZWFzdXJlIGV4dGVuZHMgUGVyZm9ybWFuY2VFbnRyeSB7XG4gIGRldGFpbDogRGV0YWlsVHlwZTtcblxuICBjb25zdHJ1Y3RvcihtZWFzdXJlTmFtZTogc3RyaW5nLCBtZWFzdXJlT3B0aW9ucz86IFBlcmZvcm1hbmNlTWVhc3VyZU9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBuYW1lOiBtZWFzdXJlTmFtZSxcbiAgICAgIGVudHJ5VHlwZTogJ21lYXN1cmUnLFxuICAgICAgc3RhcnRUaW1lOiAwLFxuICAgICAgZHVyYXRpb246IG1lYXN1cmVPcHRpb25zPy5kdXJhdGlvbiA/PyAwLFxuICAgIH0pO1xuXG4gICAgaWYgKG1lYXN1cmVPcHRpb25zKSB7XG4gICAgICB0aGlzLmRldGFpbCA9IG1lYXN1cmVPcHRpb25zLmRldGFpbDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gd2Fybk5vTmF0aXZlUGVyZm9ybWFuY2UoKSB7XG4gIHdhcm5PbmNlKFxuICAgICdtaXNzaW5nLW5hdGl2ZS1wZXJmb3JtYW5jZScsXG4gICAgJ01pc3NpbmcgbmF0aXZlIGltcGxlbWVudGF0aW9uIG9mIFBlcmZvcm1hbmNlJyxcbiAgKTtcbn1cblxuLyoqXG4gKiBQYXJ0aWFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBQZXJmb3JtYW5jZSBpbnRlcmZhY2UgZm9yIFJOLFxuICogY29ycmVzcG9uZGluZyB0byB0aGUgc3RhbmRhcmQgaW5cbiAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi91c2VyLXRpbWluZy8jZXh0ZW5zaW9ucy1wZXJmb3JtYW5jZS1pbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVyZm9ybWFuY2Uge1xuICBldmVudENvdW50czogRXZlbnRDb3VudHMgPSBuZXcgRXZlbnRDb3VudHMoKTtcblxuICAvLyBHZXQgdGhlIGN1cnJlbnQgSlMgbWVtb3J5IGluZm9ybWF0aW9uLlxuICBnZXQgbWVtb3J5KCk6IE1lbW9yeUluZm8ge1xuICAgIGlmIChOYXRpdmVQZXJmb3JtYW5jZT8uZ2V0U2ltcGxlTWVtb3J5SW5mbykge1xuICAgICAgLy8gSlNJIEFQSSBpbXBsZW1lbnRhdGlvbnMgbWF5IGhhdmUgZGlmZmVyZW50IHZhcmlhbnRzIG9mIG5hbWVzIGZvciB0aGUgSlNcbiAgICAgIC8vIGhlYXAgaW5mb3JtYXRpb24gd2UgbmVlZCBoZXJlLiBXZSB3aWxsIHBhcnNlIHRoZSByZXN1bHQgYmFzZWQgb24gb3VyXG4gICAgICAvLyBndWVzcyBvZiB0aGUgaW1wbGVtZW50YXRpb24gZm9yIG5vdy5cbiAgICAgIGNvbnN0IG1lbW9yeUluZm8gPSBOYXRpdmVQZXJmb3JtYW5jZS5nZXRTaW1wbGVNZW1vcnlJbmZvKCk7XG4gICAgICBpZiAobWVtb3J5SW5mby5oYXNPd25Qcm9wZXJ0eSgnaGVybWVzX2hlYXBTaXplJykpIHtcbiAgICAgICAgLy8gV2UgZ290IG1lbW9yeSBpbmZvcm1hdGlvbiBmcm9tIEhlcm1lc1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaGVybWVzX2hlYXBTaXplOiB0b3RhbEpTSGVhcFNpemUsXG4gICAgICAgICAgaGVybWVzX2FsbG9jYXRlZEJ5dGVzOiB1c2VkSlNIZWFwU2l6ZSxcbiAgICAgICAgfSA9IG1lbW9yeUluZm87XG5cbiAgICAgICAgcmV0dXJuIG5ldyBNZW1vcnlJbmZvKHtcbiAgICAgICAgICBqc0hlYXBTaXplTGltaXQ6IG51bGwsIC8vIFdlIGRvbid0IGtub3cgdGhlIGhlYXAgc2l6ZSBsaW1pdCBmcm9tIEhlcm1lcy5cbiAgICAgICAgICB0b3RhbEpTSGVhcFNpemUsXG4gICAgICAgICAgdXNlZEpTSGVhcFNpemUsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSlNDIGFuZCBWOCBoYXMgbm8gbmF0aXZlIGltcGxlbWVudGF0aW9ucyBmb3IgbWVtb3J5IGluZm9ybWF0aW9uIGluIEpTSTo6SW5zdHJ1bWVudGF0aW9uXG4gICAgICAgIHJldHVybiBuZXcgTWVtb3J5SW5mbygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgTWVtb3J5SW5mbygpO1xuICB9XG5cbiAgLy8gU3RhcnR1cCBtZXRyaWNzIGlzIG5vdCB1c2VkIGluIHdlYiwgYnV0IG9ubHkgaW4gUmVhY3QgTmF0aXZlLlxuICBnZXQgcmVhY3ROYXRpdmVTdGFydHVwVGltaW5nKCk6IFJlYWN0TmF0aXZlU3RhcnR1cFRpbWluZyB7XG4gICAgaWYgKE5hdGl2ZVBlcmZvcm1hbmNlPy5nZXRSZWFjdE5hdGl2ZVN0YXJ0dXBUaW1pbmcpIHtcbiAgICAgIHJldHVybiBuZXcgUmVhY3ROYXRpdmVTdGFydHVwVGltaW5nKFxuICAgICAgICBOYXRpdmVQZXJmb3JtYW5jZS5nZXRSZWFjdE5hdGl2ZVN0YXJ0dXBUaW1pbmcoKSxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVhY3ROYXRpdmVTdGFydHVwVGltaW5nKCk7XG4gIH1cblxuICBtYXJrKFxuICAgIG1hcmtOYW1lOiBzdHJpbmcsXG4gICAgbWFya09wdGlvbnM/OiBQZXJmb3JtYW5jZU1hcmtPcHRpb25zLFxuICApOiBQZXJmb3JtYW5jZU1hcmsge1xuICAgIGNvbnN0IG1hcmsgPSBuZXcgUGVyZm9ybWFuY2VNYXJrKG1hcmtOYW1lLCBtYXJrT3B0aW9ucyk7XG5cbiAgICBpZiAoTmF0aXZlUGVyZm9ybWFuY2U/Lm1hcmspIHtcbiAgICAgIE5hdGl2ZVBlcmZvcm1hbmNlLm1hcmsobWFya05hbWUsIG1hcmsuc3RhcnRUaW1lLCBtYXJrLmR1cmF0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2Fybk5vTmF0aXZlUGVyZm9ybWFuY2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFyaztcbiAgfVxuXG4gIGNsZWFyTWFya3MobWFya05hbWU/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIU5hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXI/LmNsZWFyRW50cmllcykge1xuICAgICAgd2Fybk5vTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIE5hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXI/LmNsZWFyRW50cmllcyhcbiAgICAgIFJhd1BlcmZvcm1hbmNlRW50cnlUeXBlVmFsdWVzLk1BUkssXG4gICAgICBtYXJrTmFtZSxcbiAgICApO1xuICB9XG5cbiAgbWVhc3VyZShcbiAgICBtZWFzdXJlTmFtZTogc3RyaW5nLFxuICAgIHN0YXJ0TWFya09yT3B0aW9ucz86IHN0cmluZyB8IFBlcmZvcm1hbmNlTWVhc3VyZU9wdGlvbnMsXG4gICAgZW5kTWFyaz86IHN0cmluZyxcbiAgKTogUGVyZm9ybWFuY2VNZWFzdXJlIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBsZXQgc3RhcnRNYXJrTmFtZSxcbiAgICAgIGVuZE1hcmtOYW1lID0gZW5kTWFyayxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgc3RhcnRUaW1lID0gMCxcbiAgICAgIGVuZFRpbWUgPSAwO1xuXG4gICAgaWYgKHR5cGVvZiBzdGFydE1hcmtPck9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzdGFydE1hcmtOYW1lID0gc3RhcnRNYXJrT3JPcHRpb25zO1xuICAgIH0gZWxzZSBpZiAoc3RhcnRNYXJrT3JPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMgPSBzdGFydE1hcmtPck9wdGlvbnM7XG4gICAgICBpZiAoZW5kTWFyayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJQZXJmb3JtYW5jZS5tZWFzdXJlOiBDYW4ndCBoYXZlIGJvdGggb3B0aW9ucyBhbmQgZW5kTWFya1wiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuc3RhcnQgPT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgJ1BlcmZvcm1hbmNlLm1lYXN1cmU6IE11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgb2Ygc3RhcnQvZW5kIHNwZWNpZmllZCBpbiBvcHRpb25zJyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgb3B0aW9ucy5zdGFydCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIG9wdGlvbnMuZW5kICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlBlcmZvcm1hbmNlLm1lYXN1cmU6IENhbid0IGhhdmUgYm90aCBzdGFydC9lbmQgYW5kIGR1cmF0aW9uIGV4cGxpY2l0bHkgaW4gb3B0aW9uc1wiLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhcnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHN0YXJ0VGltZSA9IG9wdGlvbnMuc3RhcnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydE1hcmtOYW1lID0gb3B0aW9ucy5zdGFydDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmVuZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgZW5kVGltZSA9IG9wdGlvbnMuZW5kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5kTWFya05hbWUgPSBvcHRpb25zLmVuZDtcbiAgICAgIH1cblxuICAgICAgZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uID8/IGR1cmF0aW9uO1xuICAgIH1cblxuICAgIGNvbnN0IG1lYXN1cmUgPSBuZXcgUGVyZm9ybWFuY2VNZWFzdXJlKG1lYXN1cmVOYW1lLCBvcHRpb25zKTtcblxuICAgIGlmIChOYXRpdmVQZXJmb3JtYW5jZT8ubWVhc3VyZSkge1xuICAgICAgTmF0aXZlUGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgbWVhc3VyZU5hbWUsXG4gICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZSxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIHN0YXJ0TWFya05hbWUsXG4gICAgICAgIGVuZE1hcmtOYW1lLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2Fybk5vTmF0aXZlUGVyZm9ybWFuY2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVhc3VyZTtcbiAgfVxuXG4gIGNsZWFyTWVhc3VyZXMobWVhc3VyZU5hbWU/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIU5hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXI/LmNsZWFyRW50cmllcykge1xuICAgICAgd2Fybk5vTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIE5hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXI/LmNsZWFyRW50cmllcyhcbiAgICAgIFJhd1BlcmZvcm1hbmNlRW50cnlUeXBlVmFsdWVzLk1FQVNVUkUsXG4gICAgICBtZWFzdXJlTmFtZSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBkb3VibGUsIG1lYXN1cmVkIGluIG1pbGxpc2Vjb25kcy5cbiAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BlcmZvcm1hbmNlL25vd1xuICAgKi9cbiAgbm93KCk6IEhpZ2hSZXNUaW1lU3RhbXAge1xuICAgIHJldHVybiBnZXRDdXJyZW50VGltZVN0YW1wKCk7XG4gIH1cblxuICAvKipcbiAgICogQW4gZXh0ZW5zaW9uIHRoYXQgYWxsb3dzIHRvIGdldCBiYWNrIHRvIEpTIGFsbCBjdXJyZW50bHkgbG9nZ2VkIG1hcmtzL21lYXN1cmVzXG4gICAqIChpbiBvdXIgY2FzZSwgYmUgaXQgZnJvbSBKUyBvciBuYXRpdmUpLCBzZWVcbiAgICogaHR0cHM6Ly93d3cudzMub3JnL1RSL3BlcmZvcm1hbmNlLXRpbWVsaW5lLyNleHRlbnNpb25zLXRvLXRoZS1wZXJmb3JtYW5jZS1pbnRlcmZhY2VcbiAgICovXG4gIGdldEVudHJpZXMoKTogUGVyZm9ybWFuY2VFbnRyeUxpc3Qge1xuICAgIGlmICghTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlcj8uY2xlYXJFbnRyaWVzKSB7XG4gICAgICB3YXJuTm9OYXRpdmVQZXJmb3JtYW5jZU9ic2VydmVyKCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBOYXRpdmVQZXJmb3JtYW5jZU9ic2VydmVyLmdldEVudHJpZXMoKS5tYXAocmF3VG9QZXJmb3JtYW5jZUVudHJ5KTtcbiAgfVxuXG4gIGdldEVudHJpZXNCeVR5cGUoZW50cnlUeXBlOiBQZXJmb3JtYW5jZUVudHJ5VHlwZSk6IFBlcmZvcm1hbmNlRW50cnlMaXN0IHtcbiAgICBpZiAoZW50cnlUeXBlICE9PSAnbWFyaycgJiYgZW50cnlUeXBlICE9PSAnbWVhc3VyZScpIHtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgUGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZTogT25seSB2YWxpZCBmb3IgJ21hcmsnIGFuZCAnbWVhc3VyZScgZW50cnkgdHlwZXMsIGdvdCAke2VudHJ5VHlwZX1gLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAoIU5hdGl2ZVBlcmZvcm1hbmNlT2JzZXJ2ZXI/LmNsZWFyRW50cmllcykge1xuICAgICAgd2Fybk5vTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlcigpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlci5nZXRFbnRyaWVzKFxuICAgICAgcGVyZm9ybWFuY2VFbnRyeVR5cGVUb1JhdyhlbnRyeVR5cGUpLFxuICAgICkubWFwKHJhd1RvUGVyZm9ybWFuY2VFbnRyeSk7XG4gIH1cblxuICBnZXRFbnRyaWVzQnlOYW1lKFxuICAgIGVudHJ5TmFtZTogc3RyaW5nLFxuICAgIGVudHJ5VHlwZT86IFBlcmZvcm1hbmNlRW50cnlUeXBlLFxuICApOiBQZXJmb3JtYW5jZUVudHJ5TGlzdCB7XG4gICAgaWYgKFxuICAgICAgZW50cnlUeXBlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIGVudHJ5VHlwZSAhPT0gJ21hcmsnICYmXG4gICAgICBlbnRyeVR5cGUgIT09ICdtZWFzdXJlJ1xuICAgICkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBQZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlOYW1lOiBPbmx5IHZhbGlkIGZvciAnbWFyaycgYW5kICdtZWFzdXJlJyBlbnRyeSB0eXBlcywgZ290ICR7ZW50cnlUeXBlfWAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGlmICghTmF0aXZlUGVyZm9ybWFuY2VPYnNlcnZlcj8uY2xlYXJFbnRyaWVzKSB7XG4gICAgICB3YXJuTm9OYXRpdmVQZXJmb3JtYW5jZU9ic2VydmVyKCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBOYXRpdmVQZXJmb3JtYW5jZU9ic2VydmVyLmdldEVudHJpZXMoXG4gICAgICBlbnRyeVR5cGUgIT0gbnVsbCA/IHBlcmZvcm1hbmNlRW50cnlUeXBlVG9SYXcoZW50cnlUeXBlKSA6IHVuZGVmaW5lZCxcbiAgICAgIGVudHJ5TmFtZSxcbiAgICApLm1hcChyYXdUb1BlcmZvcm1hbmNlRW50cnkpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFlQSxJQUFBQSxTQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxXQUFBLEdBQUFILHNCQUFB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