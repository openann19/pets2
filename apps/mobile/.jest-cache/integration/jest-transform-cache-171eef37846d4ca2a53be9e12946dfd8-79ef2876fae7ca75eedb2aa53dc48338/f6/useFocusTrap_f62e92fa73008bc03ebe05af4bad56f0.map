{"version":3,"names":["Object","defineProperty","exports","value","useFocusTrap","react_1","require","environment_1","containerRef","useRef","firstFocusableElement","lastFocusableElement","handleTabKey","useCallback","e","current","focusableElements","querySelectorAll","length","firstElement","lastElement","activeDocument","getDocumentObject","key","shiftKey","activeElement","preventDefault","focus","handleKeyDown","event","useEffect","container","addEventListener","initialElement","removeEventListener"],"sources":["useFocusTrap.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useFocusTrap = useFocusTrap;\nconst react_1 = require(\"react\");\nconst environment_1 = require(\"../utils/environment\");\nfunction useFocusTrap() {\n    const containerRef = (0, react_1.useRef)(null);\n    const firstFocusableElement = (0, react_1.useRef)(null);\n    const lastFocusableElement = (0, react_1.useRef)(null);\n    const handleTabKey = (0, react_1.useCallback)((e) => {\n        if (containerRef.current == null)\n            return;\n        const focusableElements = containerRef.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n        if (focusableElements.length === 0)\n            return;\n        const firstElement = focusableElements[0];\n        const lastElement = focusableElements[focusableElements.length - 1];\n        firstFocusableElement.current = firstElement;\n        lastFocusableElement.current = lastElement;\n        const activeDocument = (0, environment_1.getDocumentObject)();\n        if (activeDocument == null) {\n            return;\n        }\n        if (e.key === 'Tab' && !e.shiftKey && activeDocument.activeElement === lastElement) {\n            e.preventDefault();\n            firstElement.focus();\n        }\n        if (e.key === 'Tab' && e.shiftKey && activeDocument.activeElement === firstElement) {\n            e.preventDefault();\n            lastElement.focus();\n        }\n    }, []);\n    const handleKeyDown = (0, react_1.useCallback)((event) => {\n        if (event.key === 'Tab') {\n            handleTabKey(event);\n        }\n    }, [handleTabKey]);\n    (0, react_1.useEffect)(() => {\n        const container = containerRef.current;\n        if (container == null)\n            return;\n        container.addEventListener('keydown', handleKeyDown);\n        // Focus first element when trap is activated\n        const focusableElements = container.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n        if (focusableElements.length > 0) {\n            const initialElement = focusableElements[0];\n            if (initialElement != null) {\n                initialElement.focus();\n            }\n        }\n        return () => {\n            container.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [handleKeyDown]);\n    return containerRef;\n}\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,YAAY,GAAGA,YAAY;AACnC,IAAMC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAChC,IAAMC,aAAa,GAAGD,OAAO,uBAAuB,CAAC;AACrD,SAASF,YAAYA,CAAA,EAAG;EACpB,IAAMI,YAAY,GAAG,CAAC,CAAC,EAAEH,OAAO,CAACI,MAAM,EAAE,IAAI,CAAC;EAC9C,IAAMC,qBAAqB,GAAG,CAAC,CAAC,EAAEL,OAAO,CAACI,MAAM,EAAE,IAAI,CAAC;EACvD,IAAME,oBAAoB,GAAG,CAAC,CAAC,EAAEN,OAAO,CAACI,MAAM,EAAE,IAAI,CAAC;EACtD,IAAMG,YAAY,GAAG,CAAC,CAAC,EAAEP,OAAO,CAACQ,WAAW,EAAE,UAACC,CAAC,EAAK;IACjD,IAAIN,YAAY,CAACO,OAAO,IAAI,IAAI,EAC5B;IACJ,IAAMC,iBAAiB,GAAGR,YAAY,CAACO,OAAO,CAACE,gBAAgB,CAAC,0EAA0E,CAAC;IAC3I,IAAID,iBAAiB,CAACE,MAAM,KAAK,CAAC,EAC9B;IACJ,IAAMC,YAAY,GAAGH,iBAAiB,CAAC,CAAC,CAAC;IACzC,IAAMI,WAAW,GAAGJ,iBAAiB,CAACA,iBAAiB,CAACE,MAAM,GAAG,CAAC,CAAC;IACnER,qBAAqB,CAACK,OAAO,GAAGI,YAAY;IAC5CR,oBAAoB,CAACI,OAAO,GAAGK,WAAW;IAC1C,IAAMC,cAAc,GAAG,CAAC,CAAC,EAAEd,aAAa,CAACe,iBAAiB,EAAE,CAAC;IAC7D,IAAID,cAAc,IAAI,IAAI,EAAE;MACxB;IACJ;IACA,IAAIP,CAAC,CAACS,GAAG,KAAK,KAAK,IAAI,CAACT,CAAC,CAACU,QAAQ,IAAIH,cAAc,CAACI,aAAa,KAAKL,WAAW,EAAE;MAChFN,CAAC,CAACY,cAAc,CAAC,CAAC;MAClBP,YAAY,CAACQ,KAAK,CAAC,CAAC;IACxB;IACA,IAAIb,CAAC,CAACS,GAAG,KAAK,KAAK,IAAIT,CAAC,CAACU,QAAQ,IAAIH,cAAc,CAACI,aAAa,KAAKN,YAAY,EAAE;MAChFL,CAAC,CAACY,cAAc,CAAC,CAAC;MAClBN,WAAW,CAACO,KAAK,CAAC,CAAC;IACvB;EACJ,CAAC,EAAE,EAAE,CAAC;EACN,IAAMC,aAAa,GAAG,CAAC,CAAC,EAAEvB,OAAO,CAACQ,WAAW,EAAE,UAACgB,KAAK,EAAK;IACtD,IAAIA,KAAK,CAACN,GAAG,KAAK,KAAK,EAAE;MACrBX,YAAY,CAACiB,KAAK,CAAC;IACvB;EACJ,CAAC,EAAE,CAACjB,YAAY,CAAC,CAAC;EAClB,CAAC,CAAC,EAAEP,OAAO,CAACyB,SAAS,EAAE,YAAM;IACzB,IAAMC,SAAS,GAAGvB,YAAY,CAACO,OAAO;IACtC,IAAIgB,SAAS,IAAI,IAAI,EACjB;IACJA,SAAS,CAACC,gBAAgB,CAAC,SAAS,EAAEJ,aAAa,CAAC;IAEpD,IAAMZ,iBAAiB,GAAGe,SAAS,CAACd,gBAAgB,CAAC,0EAA0E,CAAC;IAChI,IAAID,iBAAiB,CAACE,MAAM,GAAG,CAAC,EAAE;MAC9B,IAAMe,cAAc,GAAGjB,iBAAiB,CAAC,CAAC,CAAC;MAC3C,IAAIiB,cAAc,IAAI,IAAI,EAAE;QACxBA,cAAc,CAACN,KAAK,CAAC,CAAC;MAC1B;IACJ;IACA,OAAO,YAAM;MACTI,SAAS,CAACG,mBAAmB,CAAC,SAAS,EAAEN,aAAa,CAAC;IAC3D,CAAC;EACL,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EACnB,OAAOpB,YAAY;AACvB","ignoreList":[]}