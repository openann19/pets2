{"version":3,"names":["_react","require","_core","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","useInteractionMetrics","_ref","name","_ref$enableLogging","enableLogging","_ref$threshold","threshold","metricsRef","useRef","Map","startInteraction","useCallback","id","undefined","metadata","metric","startTime","performance","now","success","current","set","logger","debug","endInteraction","get","warn","endTime","duration","completedMetric","emoji","speedEmoji","info","toFixed","getMetrics","getAllMetrics","Array","from","values","clearMetrics","clear","measureFunction","_ref2","_asyncToGenerator2","fn","result","error","Error","message","_x","useDoubleTapMetrics","usePinchMetrics","useSwipeMetrics","useReactionMetrics"],"sources":["useInteractionMetrics.ts"],"sourcesContent":["import { useCallback, useRef } from 'react';\nimport { logger } from '@pawfectmatch/core';\n\ninterface InteractionMetric {\n  name: string;\n  startTime: number;\n  endTime?: number;\n  duration?: number;\n  success: boolean;\n  metadata?: Record<string, any>;\n}\n\ninterface UseInteractionMetricsOptions {\n  name: string;\n  enableLogging?: boolean;\n  threshold?: number; // ms - log if interaction takes longer than this\n}\n\nexport function useInteractionMetrics({\n  name,\n  enableLogging = true,\n  threshold = 50, // 50ms threshold for \"slow\" interactions\n}: UseInteractionMetricsOptions) {\n  const metricsRef = useRef<Map<string, InteractionMetric>>(new Map());\n\n  const startInteraction = useCallback((id: string = 'default', metadata?: Record<string, any>) => {\n    const metric: InteractionMetric = {\n      name,\n      startTime: performance.now(),\n      success: false,\n      metadata,\n    };\n    \n    metricsRef.current.set(id, metric);\n    \n    if (enableLogging) {\n      logger.debug(`🎯 Interaction started: ${name}`, { id, metadata });\n    }\n  }, [name, enableLogging]);\n\n  const endInteraction = useCallback((id: string = 'default', success: boolean = true, metadata?: Record<string, any>) => {\n    const metric = metricsRef.current.get(id);\n    if (!metric) {\n      logger.warn(`⚠️ No interaction found for id: ${id}`);\n      return;\n    }\n\n    const endTime = performance.now();\n    const duration = endTime - metric.startTime;\n    \n    const completedMetric: InteractionMetric = {\n      ...metric,\n      endTime,\n      duration,\n      success,\n      metadata: { ...metric.metadata, ...metadata },\n    };\n\n    metricsRef.current.set(id, completedMetric);\n\n    if (enableLogging) {\n      const emoji = success ? '✅' : '❌';\n      const speedEmoji = duration > threshold ? '🐌' : '⚡';\n      \n      logger.info(`${emoji}${speedEmoji} Interaction completed: ${name}`, {\n        id,\n        duration: `${duration.toFixed(2)}ms`,\n        success,\n        threshold: duration > threshold ? 'SLOW' : 'FAST',\n        metadata: completedMetric.metadata,\n      });\n\n      // Log performance warning for slow interactions\n      if (duration > threshold) {\n        logger.warn(`🐌 Slow interaction detected: ${name} took ${duration.toFixed(2)}ms (threshold: ${threshold}ms)`, {\n          id,\n          duration,\n          metadata: completedMetric.metadata,\n        });\n      }\n    }\n\n    return completedMetric;\n  }, [name, enableLogging, threshold]);\n\n  const getMetrics = useCallback((id: string = 'default') => {\n    return metricsRef.current.get(id);\n  }, []);\n\n  const getAllMetrics = useCallback(() => {\n    return Array.from(metricsRef.current.values());\n  }, []);\n\n  const clearMetrics = useCallback(() => {\n    metricsRef.current.clear();\n  }, []);\n\n  // Helper for measuring a function execution\n  const measureFunction = useCallback(async <T>(\n    fn: () => T | Promise<T>,\n    id: string = 'default',\n    metadata?: Record<string, any>\n  ): Promise<{ result: T; metric: InteractionMetric }> => {\n    startInteraction(id, metadata);\n    \n    try {\n      const result = await fn();\n      const metric = endInteraction(id, true);\n      return { result, metric: metric! };\n    } catch (error) {\n      const metric = endInteraction(id, false, { error: error instanceof Error ? error.message : 'Unknown error' });\n      throw error;\n    }\n  }, [startInteraction, endInteraction]);\n\n  return {\n    startInteraction,\n    endInteraction,\n    getMetrics,\n    getAllMetrics,\n    clearMetrics,\n    measureFunction,\n  };\n}\n\n// Specialized hooks for common gesture interactions\nexport function useDoubleTapMetrics() {\n  return useInteractionMetrics({\n    name: 'doubleTap',\n    threshold: 50, // Double-tap should be very fast\n  });\n}\n\nexport function usePinchMetrics() {\n  return useInteractionMetrics({\n    name: 'pinch',\n    threshold: 16, // Should stay under 16ms per frame\n  });\n}\n\nexport function useSwipeMetrics() {\n  return useInteractionMetrics({\n    name: 'swipe',\n    threshold: 100, // Swipe gestures can be a bit slower\n  });\n}\n\nexport function useReactionMetrics() {\n  return useInteractionMetrics({\n    name: 'reaction',\n    threshold: 80, // Reaction selection should be responsive\n  });\n}\n"],"mappings":";;;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAA4C,SAAAE,QAAAC,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA,OAAAG,MAAA,CAAAE,qBAAA,QAAAC,CAAA,GAAAH,MAAA,CAAAE,qBAAA,CAAAL,CAAA,GAAAC,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAAC,MAAA,WAAAN,CAAA,WAAAE,MAAA,CAAAK,wBAAA,CAAAR,CAAA,EAAAC,CAAA,EAAAQ,UAAA,OAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,EAAAI,CAAA,YAAAJ,CAAA;AAAA,SAAAU,cAAAZ,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAAb,CAAA,UAAAC,CAAA,WAAAW,SAAA,CAAAZ,CAAA,IAAAY,SAAA,CAAAZ,CAAA,QAAAA,CAAA,OAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,OAAAa,OAAA,WAAAd,CAAA,QAAAe,gBAAA,CAAAC,OAAA,EAAAjB,CAAA,EAAAC,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAE,MAAA,CAAAe,yBAAA,GAAAf,MAAA,CAAAgB,gBAAA,CAAAnB,CAAA,EAAAG,MAAA,CAAAe,yBAAA,CAAAhB,CAAA,KAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAa,OAAA,WAAAd,CAAA,IAAAE,MAAA,CAAAiB,cAAA,CAAApB,CAAA,EAAAC,CAAA,EAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,EAAAD,CAAA,iBAAAD,CAAA;AAiBrC,SAASqB,qBAAqBA,CAAAC,IAAA,EAIJ;EAAA,IAH/BC,IAAI,GAAAD,IAAA,CAAJC,IAAI;IAAAC,kBAAA,GAAAF,IAAA,CACJG,aAAa;IAAbA,aAAa,GAAAD,kBAAA,cAAG,IAAI,GAAAA,kBAAA;IAAAE,cAAA,GAAAJ,IAAA,CACpBK,SAAS;IAATA,SAAS,GAAAD,cAAA,cAAG,EAAE,GAAAA,cAAA;EAEd,IAAME,UAAU,GAAG,IAAAC,aAAM,EAAiC,IAAIC,GAAG,CAAC,CAAC,CAAC;EAEpE,IAAMC,gBAAgB,GAAG,IAAAC,kBAAW,EAAC,YAA4D;IAAA,IAA3DC,EAAU,GAAApB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAqB,SAAA,GAAArB,SAAA,MAAG,SAAS;IAAA,IAAEsB,QAA8B,GAAAtB,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAqB,SAAA;IAC1F,IAAME,MAAyB,GAAG;MAChCb,IAAI,EAAJA,IAAI;MACJc,SAAS,EAAEC,WAAW,CAACC,GAAG,CAAC,CAAC;MAC5BC,OAAO,EAAE,KAAK;MACdL,QAAQ,EAARA;IACF,CAAC;IAEDP,UAAU,CAACa,OAAO,CAACC,GAAG,CAACT,EAAE,EAAEG,MAAM,CAAC;IAElC,IAAIX,aAAa,EAAE;MACjBkB,YAAM,CAACC,KAAK,CAAC,2BAA2BrB,IAAI,EAAE,EAAE;QAAEU,EAAE,EAAFA,EAAE;QAAEE,QAAQ,EAARA;MAAS,CAAC,CAAC;IACnE;EACF,CAAC,EAAE,CAACZ,IAAI,EAAEE,aAAa,CAAC,CAAC;EAEzB,IAAMoB,cAAc,GAAG,IAAAb,kBAAW,EAAC,YAAqF;IAAA,IAApFC,EAAU,GAAApB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAqB,SAAA,GAAArB,SAAA,MAAG,SAAS;IAAA,IAAE2B,OAAgB,GAAA3B,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAqB,SAAA,GAAArB,SAAA,MAAG,IAAI;IAAA,IAAEsB,QAA8B,GAAAtB,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAqB,SAAA;IACjH,IAAME,MAAM,GAAGR,UAAU,CAACa,OAAO,CAACK,GAAG,CAACb,EAAE,CAAC;IACzC,IAAI,CAACG,MAAM,EAAE;MACXO,YAAM,CAACI,IAAI,CAAC,mCAAmCd,EAAE,EAAE,CAAC;MACpD;IACF;IAEA,IAAMe,OAAO,GAAGV,WAAW,CAACC,GAAG,CAAC,CAAC;IACjC,IAAMU,QAAQ,GAAGD,OAAO,GAAGZ,MAAM,CAACC,SAAS;IAE3C,IAAMa,eAAkC,GAAAtC,aAAA,CAAAA,aAAA,KACnCwB,MAAM;MACTY,OAAO,EAAPA,OAAO;MACPC,QAAQ,EAARA,QAAQ;MACRT,OAAO,EAAPA,OAAO;MACPL,QAAQ,EAAAvB,aAAA,CAAAA,aAAA,KAAOwB,MAAM,CAACD,QAAQ,GAAKA,QAAQ;IAAE,EAC9C;IAEDP,UAAU,CAACa,OAAO,CAACC,GAAG,CAACT,EAAE,EAAEiB,eAAe,CAAC;IAE3C,IAAIzB,aAAa,EAAE;MACjB,IAAM0B,KAAK,GAAGX,OAAO,GAAG,GAAG,GAAG,GAAG;MACjC,IAAMY,UAAU,GAAGH,QAAQ,GAAGtB,SAAS,GAAG,IAAI,GAAG,GAAG;MAEpDgB,YAAM,CAACU,IAAI,CAAC,GAAGF,KAAK,GAAGC,UAAU,2BAA2B7B,IAAI,EAAE,EAAE;QAClEU,EAAE,EAAFA,EAAE;QACFgB,QAAQ,EAAE,GAAGA,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC,IAAI;QACpCd,OAAO,EAAPA,OAAO;QACPb,SAAS,EAAEsB,QAAQ,GAAGtB,SAAS,GAAG,MAAM,GAAG,MAAM;QACjDQ,QAAQ,EAAEe,eAAe,CAACf;MAC5B,CAAC,CAAC;MAGF,IAAIc,QAAQ,GAAGtB,SAAS,EAAE;QACxBgB,YAAM,CAACI,IAAI,CAAC,iCAAiCxB,IAAI,SAAS0B,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC,kBAAkB3B,SAAS,KAAK,EAAE;UAC7GM,EAAE,EAAFA,EAAE;UACFgB,QAAQ,EAARA,QAAQ;UACRd,QAAQ,EAAEe,eAAe,CAACf;QAC5B,CAAC,CAAC;MACJ;IACF;IAEA,OAAOe,eAAe;EACxB,CAAC,EAAE,CAAC3B,IAAI,EAAEE,aAAa,EAAEE,SAAS,CAAC,CAAC;EAEpC,IAAM4B,UAAU,GAAG,IAAAvB,kBAAW,EAAC,YAA4B;IAAA,IAA3BC,EAAU,GAAApB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAqB,SAAA,GAAArB,SAAA,MAAG,SAAS;IACpD,OAAOe,UAAU,CAACa,OAAO,CAACK,GAAG,CAACb,EAAE,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMuB,aAAa,GAAG,IAAAxB,kBAAW,EAAC,YAAM;IACtC,OAAOyB,KAAK,CAACC,IAAI,CAAC9B,UAAU,CAACa,OAAO,CAACkB,MAAM,CAAC,CAAC,CAAC;EAChD,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMC,YAAY,GAAG,IAAA5B,kBAAW,EAAC,YAAM;IACrCJ,UAAU,CAACa,OAAO,CAACoB,KAAK,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAGN,IAAMC,eAAe,GAAG,IAAA9B,kBAAW;IAAA,IAAA+B,KAAA,OAAAC,kBAAA,CAAA/C,OAAA,EAAC,WAClCgD,EAAwB,EAG8B;MAAA,IAFtDhC,EAAU,GAAApB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAqB,SAAA,GAAArB,SAAA,MAAG,SAAS;MAAA,IACtBsB,QAA8B,GAAAtB,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAqB,SAAA;MAE9BH,gBAAgB,CAACE,EAAE,EAAEE,QAAQ,CAAC;MAE9B,IAAI;QACF,IAAM+B,MAAM,SAASD,EAAE,CAAC,CAAC;QACzB,IAAM7B,MAAM,GAAGS,cAAc,CAACZ,EAAE,EAAE,IAAI,CAAC;QACvC,OAAO;UAAEiC,MAAM,EAANA,MAAM;UAAE9B,MAAM,EAAEA;QAAQ,CAAC;MACpC,CAAC,CAAC,OAAO+B,KAAK,EAAE;QACd,IAAM/B,OAAM,GAAGS,cAAc,CAACZ,EAAE,EAAE,KAAK,EAAE;UAAEkC,KAAK,EAAEA,KAAK,YAAYC,KAAK,GAAGD,KAAK,CAACE,OAAO,GAAG;QAAgB,CAAC,CAAC;QAC7G,MAAMF,KAAK;MACb;IACF,CAAC;IAAA,iBAAAG,EAAA;MAAA,OAAAP,KAAA,CAAApD,KAAA,OAAAE,SAAA;IAAA;EAAA,KAAE,CAACkB,gBAAgB,EAAEc,cAAc,CAAC,CAAC;EAEtC,OAAO;IACLd,gBAAgB,EAAhBA,gBAAgB;IAChBc,cAAc,EAAdA,cAAc;IACdU,UAAU,EAAVA,UAAU;IACVC,aAAa,EAAbA,aAAa;IACbI,YAAY,EAAZA,YAAY;IACZE,eAAe,EAAfA;EACF,CAAC;AACH;AAGO,SAASS,mBAAmBA,CAAA,EAAG;EACpC,OAAOlD,qBAAqB,CAAC;IAC3BE,IAAI,EAAE,WAAW;IACjBI,SAAS,EAAE;EACb,CAAC,CAAC;AACJ;AAEO,SAAS6C,eAAeA,CAAA,EAAG;EAChC,OAAOnD,qBAAqB,CAAC;IAC3BE,IAAI,EAAE,OAAO;IACbI,SAAS,EAAE;EACb,CAAC,CAAC;AACJ;AAEO,SAAS8C,eAAeA,CAAA,EAAG;EAChC,OAAOpD,qBAAqB,CAAC;IAC3BE,IAAI,EAAE,OAAO;IACbI,SAAS,EAAE;EACb,CAAC,CAAC;AACJ;AAEO,SAAS+C,kBAAkBA,CAAA,EAAG;EACnC,OAAOrD,qBAAqB,CAAC;IAC3BE,IAAI,EAAE,UAAU;IAChBI,SAAS,EAAE;EACb,CAAC,CAAC;AACJ","ignoreList":[]}