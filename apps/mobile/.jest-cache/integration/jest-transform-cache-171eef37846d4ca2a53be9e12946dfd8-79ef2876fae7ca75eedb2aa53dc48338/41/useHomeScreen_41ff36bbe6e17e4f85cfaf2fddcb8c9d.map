{"version":3,"names":["_react","require","_native","_core","_AuthService","_haptics","useHomeScreen","exports","navigation","useNavigation","_useAuthStore","useAuthStore","user","_useState","useState","_useState2","_slicedToArray2","default","refreshing","setRefreshing","_useState3","matches","messages","pets","_useState4","stats","setStats","onRefresh","useCallback","_asyncToGenerator2","accessToken","authService","getAccessToken","response","fetch","process","env","EXPO_PUBLIC_API_URL","headers","Authorization","data","json","error","logger","handleQuickAction","action","navigate","warn","handleProfilePress","haptic","tap","handleSettingsPress","handleSwipePress","confirm","handleMatchesPress","handleMessagesPress","handleMyPetsPress","handleCreatePetPress","handleCommunityPress"],"sources":["useHomeScreen.ts"],"sourcesContent":["/**\n * useHomeScreen Hook\n * Manages HomeScreen state and business logic\n */\nimport { useCallback, useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport type { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\nimport { logger } from \"@pawfectmatch/core\";\nimport { useAuthStore } from \"@pawfectmatch/core\";\nimport { matchesAPI } from \"../../services/api\";\nimport { authService } from \"../../services/AuthService\";\nimport type { RootStackParamList } from \"../../navigation/types\";\nimport { haptic } from \"../../ui/haptics\";\n\ntype NavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\ninterface Stats {\n  matches: number;\n  messages: number;\n  pets: number;\n}\n\ninterface UseHomeScreenReturn {\n  stats: Stats;\n  refreshing: boolean;\n  onRefresh: () => Promise<void>;\n  handleQuickAction: (action: string) => void;\n  handleProfilePress: () => void;\n  handleSettingsPress: () => void;\n  handleSwipePress: () => void;\n  handleMatchesPress: () => void;\n  handleMessagesPress: () => void;\n  handleMyPetsPress: () => void;\n  handleCreatePetPress: () => void;\n  handleCommunityPress: () => void;\n}\n\nexport const useHomeScreen = (): UseHomeScreenReturn => {\n  const navigation = useNavigation<NavigationProp>();\n  const { user } = useAuthStore();\n\n  const [refreshing, setRefreshing] = useState(false);\n  const [stats, setStats] = useState<Stats>({\n    matches: 0,\n    messages: 0,\n    pets: 0,\n  });\n\n  const onRefresh = useCallback(async () => {\n    setRefreshing(true);\n    try {\n      // Get access token from AuthService\n      const accessToken = await authService.getAccessToken();\n      \n      // Use real home stats API endpoint\n      const response = await fetch(`${process.env.EXPO_PUBLIC_API_URL}/home/stats`, {\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n      });\n      const data = await response.json();\n      \n      setStats({\n        matches: data.matches || 0,\n        messages: data.messages || 0,\n        pets: 0, // Not included in new API\n      });\n    } catch (error) {\n      logger.error(\"Failed to refresh data:\", { error });\n    } finally {\n      setRefreshing(false);\n    }\n  }, []);\n\n  const handleQuickAction = useCallback(\n    (action: string) => {\n      try {\n        switch (action) {\n          case \"swipe\":\n            navigation.navigate(\"Swipe\");\n            break;\n          case \"matches\":\n            navigation.navigate(\"Matches\");\n            break;\n          case \"messages\":\n            navigation.navigate(\"Matches\");\n            break;\n          case \"profile\":\n            navigation.navigate(\"Profile\");\n            break;\n          case \"settings\":\n            navigation.navigate(\"Settings\");\n            break;\n          case \"my-pets\":\n            navigation.navigate(\"MyPets\");\n            break;\n          case \"create-pet\":\n            navigation.navigate(\"CreatePet\");\n            break;\n          case \"community\":\n            navigation.navigate(\"Community\");\n            break;\n          case \"premium\":\n            navigation.navigate(\"Profile\");\n            break;\n          default:\n            logger.warn(`Unknown action: ${action}`);\n        }\n      } catch (error) {\n        logger.error(\"Navigation error:\", { error });\n      }\n    },\n    [navigation],\n  );\n\n  const handleProfilePress = useCallback(() => {\n    haptic.tap();\n    handleQuickAction(\"profile\");\n  }, [handleQuickAction]);\n\n  const handleSettingsPress = useCallback(() => {\n    haptic.tap();\n    handleQuickAction(\"settings\");\n  }, [handleQuickAction]);\n\n  const handleSwipePress = useCallback(() => {\n    haptic.confirm();\n    handleQuickAction(\"swipe\");\n  }, [handleQuickAction]);\n\n  const handleMatchesPress = useCallback(() => {\n    haptic.confirm();\n    handleQuickAction(\"matches\");\n  }, [handleQuickAction]);\n\n  const handleMessagesPress = useCallback(() => {\n    haptic.confirm();\n    handleQuickAction(\"messages\");\n  }, [handleQuickAction]);\n\n  const handleMyPetsPress = useCallback(() => {\n    haptic.confirm();\n    handleQuickAction(\"my-pets\");\n  }, [handleQuickAction]);\n\n  const handleCreatePetPress = useCallback(() => {\n    haptic.confirm();\n    handleQuickAction(\"create-pet\");\n  }, [handleQuickAction]);\n\n  const handleCommunityPress = useCallback(() => {\n    haptic.confirm();\n    handleQuickAction(\"community\");\n  }, [handleQuickAction]);\n\n  return {\n    stats,\n    refreshing,\n    onRefresh,\n    handleQuickAction,\n    handleProfilePress,\n    handleSettingsPress,\n    handleSwipePress,\n    handleMatchesPress,\n    handleMessagesPress,\n    handleMyPetsPress,\n    handleCreatePetPress,\n    handleCommunityPress,\n  };\n};\n"],"mappings":"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","ignoreList":[]}