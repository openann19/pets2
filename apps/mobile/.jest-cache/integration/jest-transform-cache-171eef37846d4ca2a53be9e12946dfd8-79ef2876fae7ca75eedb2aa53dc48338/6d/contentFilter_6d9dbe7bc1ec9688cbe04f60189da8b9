b2ead43aaf0cd0d592f2af3d2340098c
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.filterContent = filterContent;
var DEFAULT_BLOCKED = ['scam', 'spam', 'abuse'];
function filterContent(input, config) {
  var _config$replacement;
  var blocked = (config == null ? void 0 : config.blockedKeywords) != null && config.blockedKeywords.length > 0 ? config.blockedKeywords : DEFAULT_BLOCKED;
  var flags = (config == null ? void 0 : config.caseSensitive) === true ? 'g' : 'gi';
  var replacement = (_config$replacement = config == null ? void 0 : config.replacement) != null ? _config$replacement : '***';
  var output = input;
  var matched = [];
  for (var kw of blocked) {
    var re = new RegExp(`\\b${kw.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, flags);
    if (re.test(output)) {
      matched.push(kw);
      output = output.replace(re, replacement);
    }
  }
  return {
    output: output,
    matched: matched
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImZpbHRlckNvbnRlbnQiLCJERUZBVUxUX0JMT0NLRUQiLCJpbnB1dCIsImNvbmZpZyIsIl9jb25maWckcmVwbGFjZW1lbnQiLCJibG9ja2VkIiwiYmxvY2tlZEtleXdvcmRzIiwibGVuZ3RoIiwiZmxhZ3MiLCJjYXNlU2Vuc2l0aXZlIiwicmVwbGFjZW1lbnQiLCJvdXRwdXQiLCJtYXRjaGVkIiwia3ciLCJyZSIsIlJlZ0V4cCIsInJlcGxhY2UiLCJ0ZXN0IiwicHVzaCJdLCJzb3VyY2VzIjpbImNvbnRlbnRGaWx0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmZpbHRlckNvbnRlbnQgPSBmaWx0ZXJDb250ZW50O1xuY29uc3QgREVGQVVMVF9CTE9DS0VEID0gWydzY2FtJywgJ3NwYW0nLCAnYWJ1c2UnXTtcbmZ1bmN0aW9uIGZpbHRlckNvbnRlbnQoaW5wdXQsIGNvbmZpZykge1xuICAgIGNvbnN0IGJsb2NrZWQgPSAoY29uZmlnPy5ibG9ja2VkS2V5d29yZHMgIT0gbnVsbCAmJiBjb25maWcuYmxvY2tlZEtleXdvcmRzLmxlbmd0aCA+IDApXG4gICAgICAgID8gY29uZmlnLmJsb2NrZWRLZXl3b3Jkc1xuICAgICAgICA6IERFRkFVTFRfQkxPQ0tFRDtcbiAgICBjb25zdCBmbGFncyA9IGNvbmZpZz8uY2FzZVNlbnNpdGl2ZSA9PT0gdHJ1ZSA/ICdnJyA6ICdnaSc7XG4gICAgY29uc3QgcmVwbGFjZW1lbnQgPSBjb25maWc/LnJlcGxhY2VtZW50ID8/ICcqKionO1xuICAgIGxldCBvdXRwdXQgPSBpbnB1dDtcbiAgICBjb25zdCBtYXRjaGVkID0gW107XG4gICAgZm9yIChjb25zdCBrdyBvZiBibG9ja2VkKSB7XG4gICAgICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgXFxcXGIke2t3LnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyl9XFxcXGJgLCBmbGFncyk7XG4gICAgICAgIGlmIChyZS50ZXN0KG91dHB1dCkpIHtcbiAgICAgICAgICAgIG1hdGNoZWQucHVzaChrdyk7XG4gICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQucmVwbGFjZShyZSwgcmVwbGFjZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IG91dHB1dCwgbWF0Y2hlZCB9O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFDN0RELE9BQU8sQ0FBQ0UsYUFBYSxHQUFHQSxhQUFhO0FBQ3JDLElBQU1DLGVBQWUsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDO0FBQ2pELFNBQVNELGFBQWFBLENBQUNFLEtBQUssRUFBRUMsTUFBTSxFQUFFO0VBQUEsSUFBQUMsbUJBQUE7RUFDbEMsSUFBTUMsT0FBTyxHQUFJLENBQUFGLE1BQU0sb0JBQU5BLE1BQU0sQ0FBRUcsZUFBZSxLQUFJLElBQUksSUFBSUgsTUFBTSxDQUFDRyxlQUFlLENBQUNDLE1BQU0sR0FBRyxDQUFDLEdBQy9FSixNQUFNLENBQUNHLGVBQWUsR0FDdEJMLGVBQWU7RUFDckIsSUFBTU8sS0FBSyxHQUFHLENBQUFMLE1BQU0sb0JBQU5BLE1BQU0sQ0FBRU0sYUFBYSxNQUFLLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSTtFQUN6RCxJQUFNQyxXQUFXLElBQUFOLG1CQUFBLEdBQUdELE1BQU0sb0JBQU5BLE1BQU0sQ0FBRU8sV0FBVyxZQUFBTixtQkFBQSxHQUFJLEtBQUs7RUFDaEQsSUFBSU8sTUFBTSxHQUFHVCxLQUFLO0VBQ2xCLElBQU1VLE9BQU8sR0FBRyxFQUFFO0VBQ2xCLEtBQUssSUFBTUMsRUFBRSxJQUFJUixPQUFPLEVBQUU7SUFDdEIsSUFBTVMsRUFBRSxHQUFHLElBQUlDLE1BQU0sQ0FBQyxNQUFNRixFQUFFLENBQUNHLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFUixLQUFLLENBQUM7SUFDbEYsSUFBSU0sRUFBRSxDQUFDRyxJQUFJLENBQUNOLE1BQU0sQ0FBQyxFQUFFO01BQ2pCQyxPQUFPLENBQUNNLElBQUksQ0FBQ0wsRUFBRSxDQUFDO01BQ2hCRixNQUFNLEdBQUdBLE1BQU0sQ0FBQ0ssT0FBTyxDQUFDRixFQUFFLEVBQUVKLFdBQVcsQ0FBQztJQUM1QztFQUNKO0VBQ0EsT0FBTztJQUFFQyxNQUFNLEVBQU5BLE1BQU07SUFBRUMsT0FBTyxFQUFQQTtFQUFRLENBQUM7QUFDOUIiLCJpZ25vcmVMaXN0IjpbXX0=