0d91a72970f53ab510e43830a2faadb1
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.toCoreUser = toCoreUser;
function splitName(name) {
  var trimmed = name.trim();
  if (trimmed.length === 0) return {
    firstName: '',
    lastName: ''
  };
  var parts = trimmed.split(/\s+/);
  var firstName = parts[0] != null ? parts[0] : '';
  var lastName = parts.slice(1).join(' ').length > 0 ? parts.slice(1).join(' ') : '';
  return {
    firstName: firstName,
    lastName: lastName
  };
}
function toCoreUser(legacy) {
  var _legacy$isPremium;
  var _splitName = splitName(legacy.name),
    firstName = _splitName.firstName,
    lastName = _splitName.lastName;
  var now = new Date().toISOString();
  return _objectSpread(_objectSpread({
    _id: legacy.id,
    id: legacy.id,
    email: legacy.email,
    firstName: firstName,
    lastName: lastName,
    dateOfBirth: '',
    age: 0
  }, legacy.avatar != null && legacy.avatar.length > 0 ? {
    avatar: legacy.avatar
  } : {}), {}, {
    bio: '',
    phone: '',
    location: {
      type: 'Point',
      coordinates: [0, 0]
    },
    preferences: {
      maxDistance: 50,
      ageRange: {
        min: 18,
        max: 100
      },
      species: [],
      intents: [],
      notifications: {
        email: true,
        push: true,
        matches: true,
        messages: true
      }
    },
    premium: {
      isActive: (_legacy$isPremium = legacy.isPremium) != null ? _legacy$isPremium : false,
      plan: 'basic',
      features: {
        unlimitedLikes: false,
        boostProfile: false,
        seeWhoLiked: false,
        advancedFilters: false
      }
    },
    pets: [],
    analytics: {
      totalSwipes: 0,
      totalLikes: 0,
      totalMatches: 0,
      profileViews: 0,
      lastActive: now
    },
    isEmailVerified: false,
    isActive: true,
    createdAt: now,
    updatedAt: now
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJvd25LZXlzIiwiZSIsInIiLCJ0IiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJkZWZhdWx0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRvQ29yZVVzZXIiLCJzcGxpdE5hbWUiLCJuYW1lIiwidHJpbW1lZCIsInRyaW0iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhcnRzIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJsZWdhY3kiLCJfbGVnYWN5JGlzUHJlbWl1bSIsIl9zcGxpdE5hbWUiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJfaWQiLCJpZCIsImVtYWlsIiwiZGF0ZU9mQmlydGgiLCJhZ2UiLCJhdmF0YXIiLCJiaW8iLCJwaG9uZSIsImxvY2F0aW9uIiwidHlwZSIsImNvb3JkaW5hdGVzIiwicHJlZmVyZW5jZXMiLCJtYXhEaXN0YW5jZSIsImFnZVJhbmdlIiwibWluIiwibWF4Iiwic3BlY2llcyIsImludGVudHMiLCJub3RpZmljYXRpb25zIiwibWF0Y2hlcyIsIm1lc3NhZ2VzIiwicHJlbWl1bSIsImlzQWN0aXZlIiwiaXNQcmVtaXVtIiwicGxhbiIsImZlYXR1cmVzIiwidW5saW1pdGVkTGlrZXMiLCJib29zdFByb2ZpbGUiLCJzZWVXaG9MaWtlZCIsImFkdmFuY2VkRmlsdGVycyIsInBldHMiLCJhbmFseXRpY3MiLCJ0b3RhbFN3aXBlcyIsInRvdGFsTGlrZXMiLCJ0b3RhbE1hdGNoZXMiLCJwcm9maWxlVmlld3MiLCJsYXN0QWN0aXZlIiwiaXNFbWFpbFZlcmlmaWVkIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Il0sInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudG9Db3JlVXNlciA9IHRvQ29yZVVzZXI7XG5mdW5jdGlvbiBzcGxpdE5hbWUobmFtZSkge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBuYW1lLnRyaW0oKTtcbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiB7IGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJyB9O1xuICAgIGNvbnN0IHBhcnRzID0gdHJpbW1lZC5zcGxpdCgvXFxzKy8pO1xuICAgIGNvbnN0IGZpcnN0TmFtZSA9IHBhcnRzWzBdICE9IG51bGwgPyBwYXJ0c1swXSA6ICcnO1xuICAgIGNvbnN0IGxhc3ROYW1lID0gcGFydHMuc2xpY2UoMSkuam9pbignICcpLmxlbmd0aCA+IDAgPyBwYXJ0cy5zbGljZSgxKS5qb2luKCcgJykgOiAnJztcbiAgICByZXR1cm4geyBmaXJzdE5hbWUsIGxhc3ROYW1lIH07XG59XG5mdW5jdGlvbiB0b0NvcmVVc2VyKGxlZ2FjeSkge1xuICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSB9ID0gc3BsaXROYW1lKGxlZ2FjeS5uYW1lKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgX2lkOiBsZWdhY3kuaWQsXG4gICAgICAgIGlkOiBsZWdhY3kuaWQsIC8vIEFsaWFzIGZvciBfaWRcbiAgICAgICAgZW1haWw6IGxlZ2FjeS5lbWFpbCxcbiAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgZGF0ZU9mQmlydGg6ICcnLCAvLyB1bmtub3duIGZyb20gbGVnYWN5OyBrZWVwIGVtcHR5IHN0cmluZ1xuICAgICAgICBhZ2U6IDAsIC8vIHVua25vd24gZnJvbSBsZWdhY3lcbiAgICAgICAgLi4uKGxlZ2FjeS5hdmF0YXIgIT0gbnVsbCAmJiBsZWdhY3kuYXZhdGFyLmxlbmd0aCA+IDAgPyB7IGF2YXRhcjogbGVnYWN5LmF2YXRhciB9IDoge30pLFxuICAgICAgICBiaW86ICcnLFxuICAgICAgICBwaG9uZTogJycsXG4gICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFswLCAwXSxcbiAgICAgICAgfSxcbiAgICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiA1MCxcbiAgICAgICAgICAgIGFnZVJhbmdlOiB7IG1pbjogMTgsIG1heDogMTAwIH0sXG4gICAgICAgICAgICBzcGVjaWVzOiBbXSxcbiAgICAgICAgICAgIGludGVudHM6IFtdLFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uczoge1xuICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHB1c2g6IHRydWUsXG4gICAgICAgICAgICAgICAgbWF0Y2hlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHByZW1pdW06IHtcbiAgICAgICAgICAgIGlzQWN0aXZlOiBsZWdhY3kuaXNQcmVtaXVtID8/IGZhbHNlLFxuICAgICAgICAgICAgcGxhbjogJ2Jhc2ljJyxcbiAgICAgICAgICAgIGZlYXR1cmVzOiB7XG4gICAgICAgICAgICAgICAgdW5saW1pdGVkTGlrZXM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGJvb3N0UHJvZmlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2VlV2hvTGlrZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFkdmFuY2VkRmlsdGVyczogZmFsc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBwZXRzOiBbXSxcbiAgICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgICAgICB0b3RhbFN3aXBlczogMCxcbiAgICAgICAgICAgIHRvdGFsTGlrZXM6IDAsXG4gICAgICAgICAgICB0b3RhbE1hdGNoZXM6IDAsXG4gICAgICAgICAgICBwcm9maWxlVmlld3M6IDAsXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBub3csXG4gICAgICAgIH0sXG4gICAgICAgIGlzRW1haWxWZXJpZmllZDogZmFsc2UsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcbiAgICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsZ0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLFNBQUFFLFFBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBSixDQUFBLE9BQUFHLE1BQUEsQ0FBQUUscUJBQUEsUUFBQUMsQ0FBQSxHQUFBSCxNQUFBLENBQUFFLHFCQUFBLENBQUFMLENBQUEsR0FBQUMsQ0FBQSxLQUFBSyxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTixDQUFBLFdBQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFRLFVBQUEsT0FBQVAsQ0FBQSxDQUFBUSxJQUFBLENBQUFDLEtBQUEsQ0FBQVQsQ0FBQSxFQUFBSSxDQUFBLFlBQUFKLENBQUE7QUFBQSxTQUFBVSxjQUFBWixDQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBWSxTQUFBLENBQUFDLE1BQUEsRUFBQWIsQ0FBQSxVQUFBQyxDQUFBLFdBQUFXLFNBQUEsQ0FBQVos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