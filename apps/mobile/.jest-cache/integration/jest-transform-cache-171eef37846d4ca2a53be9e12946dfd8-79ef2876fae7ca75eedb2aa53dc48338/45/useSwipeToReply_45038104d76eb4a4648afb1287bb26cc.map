{"version":3,"names":["_reactNativeGestureHandler","require","_reactNativeReanimated","Haptics","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_worklet_12663837778096_init_data","code","location","sourceMap","_worklet_14583680667473_init_data","_worklet_5275432537208_init_data","useSwipeToReply","_ref","_ref$enabled","enabled","_ref$threshold","threshold","_ref$maxPull","maxPull","onReply","payload","onProgress","x","useSharedValue","crossed","vibrate","impactAsync","ImpactFeedbackStyle","Light","catch","gesture","Gesture","Pan","activeOffsetX","failOffsetY","onUpdate","_e","global","Error","_f","nx","Math","min","max","translationX","value","p","runOnJS","_closure","__initData","__workletHash","__stackDetails","__version","onEnd","didTrigger","withSpring","damping","stiffness","bubbleStyle","useAnimatedStyle","transform","translateX","progressX"],"sources":["useSwipeToReply.ts"],"sourcesContent":["import { useCallback } from \"react\";\nimport { Platform } from \"react-native\";\nimport { Gesture } from \"react-native-gesture-handler\";\nimport Animated, {\n  runOnJS,\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  withTiming,\n  interpolate,\n  Extrapolation,\n} from \"react-native-reanimated\";\nimport * as Haptics from \"expo-haptics\";\n\nexport interface UseSwipeToReplyOpts<T = any> {\n  enabled?: boolean;\n  threshold?: number;   // px to trigger\n  maxPull?: number;     // max translation\n  onReply: (payload: T) => void;\n  payload: T;           // message object/id to pass back\n  onProgress?: (p: number) => void; // 0..1 pull progress\n}\n\n/**\n * useSwipeToReply - Swipe to reply gesture hook with haptic feedback\n * \n * Implements a pull-to-right gesture with:\n * - Haptic tick on threshold cross\n * - Spring-animated snap-back on release\n * - Configurable threshold and max pull distance\n * - Progress callback for visual feedback\n */\nexport function useSwipeToReply<T>({\n  enabled = true,\n  threshold = 56,\n  maxPull = 84,\n  onReply,\n  payload,\n  onProgress,\n}: UseSwipeToReplyOpts<T>) {\n  const x = useSharedValue(0);\n  const crossed = useSharedValue(false);\n\n  const vibrate = () => {\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light).catch(() => {});\n  };\n\n  const gesture = Gesture.Pan()\n    .enabled(enabled)\n    .activeOffsetX([6, 9999]) // start only on right drag\n    .failOffsetY([16, -16])   // keep vertical tolerant\n    .onUpdate((e) => {\n      const nx = Math.min(Math.max(e.translationX, 0), maxPull);\n      x.value = nx;\n      const p = Math.min(1, nx / threshold);\n      if (onProgress) runOnJS(onProgress)(p);\n      if (nx >= threshold && !crossed.value) {\n        crossed.value = true;\n        runOnJS(vibrate)();\n      }\n      if (nx < threshold && crossed.value) {\n        crossed.value = false;\n      }\n    })\n    .onEnd(() => {\n      const didTrigger = x.value >= threshold;\n      if (didTrigger) {\n        runOnJS(onReply)(payload);\n      }\n      x.value = withSpring(0, { damping: 16, stiffness: 300 });\n      if (onProgress) runOnJS(onProgress)(0);\n      crossed.value = false;\n    });\n\n  const bubbleStyle = useAnimatedStyle(() => ({\n    transform: [{ translateX: x.value }],\n  }));\n\n  return { gesture, bubbleStyle, progressX: x };\n}\n\n"],"mappings":"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","ignoreList":[]}