e9d52f3b8786bbe810ba6b3e9f8077b6
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.withPerformanceMonitoring = exports.withComponentPerformanceMonitoring = exports.usePerformanceMonitor = exports.performanceMonitor = exports.default = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("react-native");
var _core = require("@pawfectmatch/core");
var PerformanceMonitor = function () {
  function PerformanceMonitor() {
    (0, _classCallCheck2.default)(this, PerformanceMonitor);
    this.isEnabled = __DEV__;
    this.lastFrameTime = 0;
    this.frameCount = 0;
    this.currentFPS = 60;
    this.interactions = new Map();
    this.metricsHistory = [];
    this.maxHistorySize = 100;
    if (this.isEnabled) {
      this.startFPSMonitoring();
    }
  }
  return (0, _createClass2.default)(PerformanceMonitor, [{
    key: "setEnabled",
    value: function setEnabled(enabled) {
      this.isEnabled = enabled && __DEV__;
      if (this.isEnabled) {
        this.startFPSMonitoring();
      }
    }
  }, {
    key: "startFPSMonitoring",
    value: function startFPSMonitoring() {
      var _this = this;
      if (!this.isEnabled) return;
      var _measureFPS = function measureFPS() {
        var now = Date.now();
        if (_this.lastFrameTime > 0) {
          var deltaTime = now - _this.lastFrameTime;
          _this.frameCount++;
          if (deltaTime >= 1000) {
            _this.currentFPS = Math.round(_this.frameCount * 1000 / deltaTime);
            _this.frameCount = 0;
            _this.lastFrameTime = now;
            if (_this.currentFPS < 30) {
              _core.logger.warn("Low FPS detected", {
                fps: _this.currentFPS
              });
            }
            _this.recordMetrics();
          }
        } else {
          _this.lastFrameTime = now;
        }
        requestAnimationFrame(_measureFPS);
      };
      requestAnimationFrame(_measureFPS);
    }
  }, {
    key: "getCurrentFPS",
    value: function getCurrentFPS() {
      return this.currentFPS;
    }
  }, {
    key: "startInteraction",
    value: function startInteraction(name) {
      if (!this.isEnabled) return;
      var interaction = {
        name: name,
        startTime: Date.now()
      };
      this.interactions.set(name, interaction);
    }
  }, {
    key: "endInteraction",
    value: function endInteraction(name) {
      if (!this.isEnabled) return null;
      var interaction = this.interactions.get(name);
      if (interaction === undefined) {
        _core.logger.warn("Interaction was not started", {
          interactionName: name
        });
        return null;
      }
      var endTime = Date.now();
      var duration = endTime - interaction.startTime;
      interaction.endTime = endTime;
      interaction.duration = duration;
      if (duration > 100) {
        _core.logger.warn("Slow interaction detected", {
          interactionName: name,
          duration: duration
        });
      }
      this.interactions.delete(name);
      return duration;
    }
  }, {
    key: "measureInteraction",
    value: (function () {
      var _measureInteraction = (0, _asyncToGenerator2.default)(function* (name, fn) {
        if (!this.isEnabled) {
          return yield fn();
        }
        this.startInteraction(name);
        try {
          var result = yield fn();
          return result;
        } finally {
          this.endInteraction(name);
        }
      });
      function measureInteraction(_x, _x2) {
        return _measureInteraction.apply(this, arguments);
      }
      return measureInteraction;
    }())
  }, {
    key: "getMemoryUsage",
    value: function getMemoryUsage() {
      if (_reactNative.Platform.OS === "ios") {
        return 0;
      } else {
        return 0;
      }
    }
  }, {
    key: "recordMetrics",
    value: function recordMetrics() {
      if (!this.isEnabled) return;
      var metrics = {
        fps: this.currentFPS,
        memoryUsage: this.getMemoryUsage(),
        interactionTime: this.getAverageInteractionTime(),
        timestamp: Date.now()
      };
      this.metricsHistory.push(metrics);
      if (this.metricsHistory.length > this.maxHistorySize) {
        this.metricsHistory.shift();
      }
    }
  }, {
    key: "getAverageInteractionTime",
    value: function getAverageInteractionTime() {
      var recentInteractions = Array.from(this.interactions.values()).filter(function (interaction) {
        return interaction.duration !== undefined;
      }).slice(-10);
      if (recentInteractions.length === 0) return 0;
      var totalTime = recentInteractions.reduce(function (sum, interaction) {
        return sum + (interaction.duration !== undefined ? interaction.duration : 0);
      }, 0);
      return totalTime / recentInteractions.length;
    }
  }, {
    key: "getMetricsHistory",
    value: function getMetricsHistory() {
      return (0, _toConsumableArray2.default)(this.metricsHistory);
    }
  }, {
    key: "getPerformanceSummary",
    value: function getPerformanceSummary() {
      var fpsValues = this.metricsHistory.map(function (m) {
        return m.fps;
      });
      return {
        currentFPS: this.currentFPS,
        averageFPS: fpsValues.length > 0 ? Math.round(fpsValues.reduce(function (a, b) {
          return a + b;
        }, 0) / fpsValues.length) : 0,
        minFPS: fpsValues.length > 0 ? Math.min.apply(Math, (0, _toConsumableArray2.default)(fpsValues)) : 0,
        maxFPS: fpsValues.length > 0 ? Math.max.apply(Math, (0, _toConsumableArray2.default)(fpsValues)) : 0,
        memoryUsage: this.getMemoryUsage(),
        activeInteractions: this.interactions.size
      };
    }
  }, {
    key: "logPerformanceSummary",
    value: function logPerformanceSummary() {
      if (!this.isEnabled) return;
      var summary = this.getPerformanceSummary();
      _core.logger.warn("Performance Summary", summary);
    }
  }, {
    key: "clearHistory",
    value: function clearHistory() {
      this.metricsHistory = [];
      this.interactions.clear();
    }
  }, {
    key: "waitForInteractions",
    value: function waitForInteractions() {
      return new Promise(function (resolve) {
        _reactNative.InteractionManager.runAfterInteractions(resolve);
      });
    }
  }]);
}();
var performanceMonitor = exports.performanceMonitor = new PerformanceMonitor();
var usePerformanceMonitor = exports.usePerformanceMonitor = function usePerformanceMonitor() {
  var startInteraction = function startInteraction(name) {
    performanceMonitor.startInteraction(name);
  };
  var endInteraction = function endInteraction(name) {
    return performanceMonitor.endInteraction(name);
  };
  var measureInteraction = function measureInteraction(name, fn) {
    return performanceMonitor.measureInteraction(name, fn);
  };
  var getCurrentFPS = function getCurrentFPS() {
    return performanceMonitor.getCurrentFPS();
  };
  var getPerformanceSummary = function getPerformanceSummary() {
    return performanceMonitor.getPerformanceSummary();
  };
  return {
    startInteraction: startInteraction,
    endInteraction: endInteraction,
    measureInteraction: measureInteraction,
    getCurrentFPS: getCurrentFPS,
    getPerformanceSummary: getPerformanceSummary
  };
};
var withPerformanceMonitoring = exports.withPerformanceMonitoring = function withPerformanceMonitoring(_name) {
  return function (target, propertyKey, descriptor) {
    var originalMethod = descriptor.value;
    descriptor.value = (0, _asyncToGenerator2.default)(function* () {
      var _this2 = this;
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      return performanceMonitor.measureInteraction(`${target.constructor.name}.${propertyKey}`, function () {
        return originalMethod.apply(_this2, args);
      });
    });
    return descriptor;
  };
};
var withComponentPerformanceMonitoring = exports.withComponentPerformanceMonitoring = function withComponentPerformanceMonitoring(Component, componentName) {
  var WrappedComponent = function WrappedComponent(props) {
    var _ref2;
    var name = (_ref2 = componentName != null ? componentName : Component.displayName) != null ? _ref2 : Component.name;
    _react.default.useEffect(function () {
      performanceMonitor.startInteraction(`${name}.mount`);
      return function () {
        performanceMonitor.endInteraction(`${name}.mount`);
      };
    }, [name]);
    return _react.default.createElement(Component, props);
  };
  WrappedComponent.displayName = `withPerformanceMonitoring(${Component.displayName !== undefined && Component.displayName !== "" ? Component.displayName : Component.name})`;
  return WrappedComponent;
};
var _default = exports.default = performanceMonitor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl9jb3JlIiwiUGVyZm9ybWFuY2VNb25pdG9yIiwiX2NsYXNzQ2FsbENoZWNrMiIsImRlZmF1bHQiLCJpc0VuYWJsZWQiLCJfX0RFVl9fIiwibGFzdEZyYW1lVGltZSIsImZyYW1lQ291bnQiLCJjdXJyZW50RlBTIiwiaW50ZXJhY3Rpb25zIiwiTWFwIiwibWV0cmljc0hpc3RvcnkiLCJtYXhIaXN0b3J5U2l6ZSIsInN0YXJ0RlBTTW9uaXRvcmluZyIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsInNldEVuYWJsZWQiLCJlbmFibGVkIiwiX3RoaXMiLCJtZWFzdXJlRlBTIiwibm93IiwiRGF0ZSIsImRlbHRhVGltZSIsIk1hdGgiLCJyb3VuZCIsImxvZ2dlciIsIndhcm4iLCJmcHMiLCJyZWNvcmRNZXRyaWNzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZ2V0Q3VycmVudEZQUyIsInN0YXJ0SW50ZXJhY3Rpb24iLCJuYW1lIiwiaW50ZXJhY3Rpb24iLCJzdGFydFRpbWUiLCJzZXQiLCJlbmRJbnRlcmFjdGlvbiIsImdldCIsInVuZGVmaW5lZCIsImludGVyYWN0aW9uTmFtZSIsImVuZFRpbWUiLCJkdXJhdGlvbiIsImRlbGV0ZSIsIl9tZWFzdXJlSW50ZXJhY3Rpb24iLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJmbiIsInJlc3VsdCIsIm1lYXN1cmVJbnRlcmFjdGlvbiIsIl94IiwiX3gyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZXRNZW1vcnlVc2FnZSIsIlBsYXRmb3JtIiwiT1MiLCJtZXRyaWNzIiwibWVtb3J5VXNhZ2UiLCJpbnRlcmFjdGlvblRpbWUiLCJnZXRBdmVyYWdlSW50ZXJhY3Rpb25UaW1lIiwidGltZXN0YW1wIiwicHVzaCIsImxlbmd0aCIsInNoaWZ0IiwicmVjZW50SW50ZXJhY3Rpb25zIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiZmlsdGVyIiwic2xpY2UiLCJ0b3RhbFRpbWUiLCJyZWR1Y2UiLCJzdW0iLCJnZXRNZXRyaWNzSGlzdG9yeSIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJnZXRQZXJmb3JtYW5jZVN1bW1hcnkiLCJmcHNWYWx1ZXMiLCJtYXAiLCJtIiwiYXZlcmFnZUZQUyIsImEiLCJiIiwibWluRlBTIiwibWluIiwibWF4RlBTIiwibWF4IiwiYWN0aXZlSW50ZXJhY3Rpb25zIiwic2l6ZSIsImxvZ1BlcmZvcm1hbmNlU3VtbWFyeSIsInN1bW1hcnkiLCJjbGVhckhpc3RvcnkiLCJjbGVhciIsIndhaXRGb3JJbnRlcmFjdGlvbnMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIkludGVyYWN0aW9uTWFuYWdlciIsInJ1bkFmdGVySW50ZXJhY3Rpb25zIiwicGVyZm9ybWFuY2VNb25pdG9yIiwiZXhwb3J0cyIsInVzZVBlcmZvcm1hbmNlTW9uaXRvciIsIndpdGhQZXJmb3JtYW5jZU1vbml0b3JpbmciLCJfbmFtZSIsInRhcmdldCIsInByb3BlcnR5S2V5IiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwiX3RoaXMyIiwiX2xlbiIsImFyZ3MiLCJfa2V5IiwiY29uc3RydWN0b3IiLCJ3aXRoQ29tcG9uZW50UGVyZm9ybWFuY2VNb25pdG9yaW5nIiwiQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsIldyYXBwZWRDb21wb25lbnQiLCJwcm9wcyIsIl9yZWYyIiwiZGlzcGxheU5hbWUiLCJSZWFjdCIsInVzZUVmZmVjdCIsImNyZWF0ZUVsZW1lbnQiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbIlBlcmZvcm1hbmNlTW9uaXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlcmFjdGlvbk1hbmFnZXIsIFBsYXRmb3JtIH0gZnJvbSBcInJlYWN0LW5hdGl2ZVwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBwYXdmZWN0bWF0Y2gvY29yZVwiO1xuXG4vLyBEZWNsYXJlIGdsb2JhbCBfX0RFVl9fIHZhcmlhYmxlXG5kZWNsYXJlIGNvbnN0IF9fREVWX186IGJvb2xlYW47XG5cbi8qKlxuICogUGVyZm9ybWFuY2UgTW9uaXRvcmluZyBVdGlsaXR5XG4gKiBJbXBsZW1lbnRzIFAtMDg6IE1lYXN1cmUgSlMgRlBTIHdpdGggcmVhY3QtbmF0aXZlLXBlcmZvcm1hbmNlIG92ZXJsYXlcbiAqIEZlYXR1cmVzOlxuICogLSBGUFMgbW9uaXRvcmluZyBhbmQgcmVwb3J0aW5nXG4gKiAtIE1lbW9yeSB1c2FnZSB0cmFja2luZ1xuICogLSBJbnRlcmFjdGlvbiB0aW1pbmcgbWVhc3VyZW1lbnRzXG4gKiAtIFBlcmZvcm1hbmNlIG1ldHJpY3MgY29sbGVjdGlvblxuICogLSBEZXZlbG9wbWVudC1vbmx5IG1vbml0b3JpbmdcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlTWV0cmljcyB7XG4gIGZwczogbnVtYmVyO1xuICBtZW1vcnlVc2FnZTogbnVtYmVyO1xuICBpbnRlcmFjdGlvblRpbWU6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGdlc3R1cmVSZXNwb25zZVRpbWU/OiBudW1iZXI7XG4gIGFuaW1hdGlvbkZyYW1lVGltZT86IG51bWJlcjtcbiAgY29tcG9uZW50UmVuZGVyVGltZT86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEludGVyYWN0aW9uVGltaW5nIHtcbiAgbmFtZTogc3RyaW5nO1xuICBzdGFydFRpbWU6IG51bWJlcjtcbiAgZW5kVGltZT86IG51bWJlcjtcbiAgZHVyYXRpb24/OiBudW1iZXI7XG59XG5cbmNsYXNzIFBlcmZvcm1hbmNlTW9uaXRvciB7XG4gIHByaXZhdGUgaXNFbmFibGVkOiBib29sZWFuID0gX19ERVZfXztcbiAgcHJpdmF0ZSBsYXN0RnJhbWVUaW1lOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGZyYW1lQ291bnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgY3VycmVudEZQUzogbnVtYmVyID0gNjA7XG4gIHByaXZhdGUgaW50ZXJhY3Rpb25zOiBNYXA8c3RyaW5nLCBJbnRlcmFjdGlvblRpbWluZz4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbWV0cmljc0hpc3Rvcnk6IFBlcmZvcm1hbmNlTWV0cmljc1tdID0gW107XG4gIHByaXZhdGUgbWF4SGlzdG9yeVNpemU6IG51bWJlciA9IDEwMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodGhpcy5pc0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRGUFNNb25pdG9yaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBvciBkaXNhYmxlIHBlcmZvcm1hbmNlIG1vbml0b3JpbmdcbiAgICovXG4gIHB1YmxpYyBzZXRFbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmlzRW5hYmxlZCA9IGVuYWJsZWQgJiYgX19ERVZfXztcblxuICAgIGlmICh0aGlzLmlzRW5hYmxlZCkge1xuICAgICAgdGhpcy5zdGFydEZQU01vbml0b3JpbmcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgRlBTIG1vbml0b3JpbmdcbiAgICovXG4gIHByaXZhdGUgc3RhcnRGUFNNb25pdG9yaW5nKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG1lYXN1cmVGUFMgPSAoKSA9PiB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICBpZiAodGhpcy5sYXN0RnJhbWVUaW1lID4gMCkge1xuICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSBub3cgLSB0aGlzLmxhc3RGcmFtZVRpbWU7XG4gICAgICAgIHRoaXMuZnJhbWVDb3VudCsrO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBGUFMgZXZlcnkgc2Vjb25kXG4gICAgICAgIGlmIChkZWx0YVRpbWUgPj0gMTAwMCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudEZQUyA9IE1hdGgucm91bmQoKHRoaXMuZnJhbWVDb3VudCAqIDEwMDApIC8gZGVsdGFUaW1lKTtcbiAgICAgICAgICB0aGlzLmZyYW1lQ291bnQgPSAwO1xuICAgICAgICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IG5vdztcblxuICAgICAgICAgIC8vIExvZyBsb3cgRlBTIHdhcm5pbmdzXG4gICAgICAgICAgaWYgKHRoaXMuY3VycmVudEZQUyA8IDMwKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihcIkxvdyBGUFMgZGV0ZWN0ZWRcIiwgeyBmcHM6IHRoaXMuY3VycmVudEZQUyB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnJlY29yZE1ldHJpY3MoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gbm93O1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWVhc3VyZUZQUyk7XG4gICAgfTtcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShtZWFzdXJlRlBTKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBGUFNcbiAgICovXG4gIHB1YmxpYyBnZXRDdXJyZW50RlBTKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEZQUztcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aW1pbmcgYW4gaW50ZXJhY3Rpb25cbiAgICovXG4gIHB1YmxpYyBzdGFydEludGVyYWN0aW9uKG5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGludGVyYWN0aW9uOiBJbnRlcmFjdGlvblRpbWluZyA9IHtcbiAgICAgIG5hbWUsXG4gICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgfTtcblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zLnNldChuYW1lLCBpbnRlcmFjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogRW5kIHRpbWluZyBhbiBpbnRlcmFjdGlvblxuICAgKi9cbiAgcHVibGljIGVuZEludGVyYWN0aW9uKG5hbWU6IHN0cmluZyk6IG51bWJlciB8IG51bGwge1xuICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgaW50ZXJhY3Rpb24gPSB0aGlzLmludGVyYWN0aW9ucy5nZXQobmFtZSk7XG4gICAgaWYgKGludGVyYWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxvZ2dlci53YXJuKFwiSW50ZXJhY3Rpb24gd2FzIG5vdCBzdGFydGVkXCIsIHsgaW50ZXJhY3Rpb25OYW1lOiBuYW1lIH0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gaW50ZXJhY3Rpb24uc3RhcnRUaW1lO1xuXG4gICAgaW50ZXJhY3Rpb24uZW5kVGltZSA9IGVuZFRpbWU7XG4gICAgaW50ZXJhY3Rpb24uZHVyYXRpb24gPSBkdXJhdGlvbjtcblxuICAgIC8vIExvZyBzbG93IGludGVyYWN0aW9uc1xuICAgIGlmIChkdXJhdGlvbiA+IDEwMCkge1xuICAgICAgbG9nZ2VyLndhcm4oXCJTbG93IGludGVyYWN0aW9uIGRldGVjdGVkXCIsIHtcbiAgICAgICAgaW50ZXJhY3Rpb25OYW1lOiBuYW1lLFxuICAgICAgICBkdXJhdGlvbixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zLmRlbGV0ZShuYW1lKTtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogTWVhc3VyZSBpbnRlcmFjdGlvbiB3aXRoIGF1dG9tYXRpYyB0aW1pbmdcbiAgICovXG4gIHB1YmxpYyBhc3luYyBtZWFzdXJlSW50ZXJhY3Rpb248VD4oXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+IHwgVCxcbiAgKTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLmlzRW5hYmxlZCkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdGFydEludGVyYWN0aW9uKG5hbWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmVuZEludGVyYWN0aW9uKG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbWVtb3J5IHVzYWdlIChhcHByb3hpbWF0ZSlcbiAgICovXG4gIHByaXZhdGUgZ2V0TWVtb3J5VXNhZ2UoKTogbnVtYmVyIHtcbiAgICAvLyBOb3RlOiBSZWFjdCBOYXRpdmUgZG9lc24ndCBwcm92aWRlIGRpcmVjdCBtZW1vcnkgYWNjZXNzXG4gICAgLy8gVGhpcyBpcyBhIHBsYWNlaG9sZGVyIGZvciBuYXRpdmUgbW9kdWxlIGltcGxlbWVudGF0aW9uXG4gICAgaWYgKFBsYXRmb3JtLk9TID09PSBcImlvc1wiKSB7XG4gICAgICAvLyBPbiBpT1MsIHlvdSBjb3VsZCB1c2UgYSBuYXRpdmUgbW9kdWxlIHRvIGdldCBtZW1vcnkgaW5mb1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9uIEFuZHJvaWQsIHlvdSBjb3VsZCB1c2UgYSBuYXRpdmUgbW9kdWxlIHRvIGdldCBtZW1vcnkgaW5mb1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCBjdXJyZW50IHBlcmZvcm1hbmNlIG1ldHJpY3NcbiAgICovXG4gIHByaXZhdGUgcmVjb3JkTWV0cmljcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSByZXR1cm47XG5cbiAgICBjb25zdCBtZXRyaWNzOiBQZXJmb3JtYW5jZU1ldHJpY3MgPSB7XG4gICAgICBmcHM6IHRoaXMuY3VycmVudEZQUyxcbiAgICAgIG1lbW9yeVVzYWdlOiB0aGlzLmdldE1lbW9yeVVzYWdlKCksXG4gICAgICBpbnRlcmFjdGlvblRpbWU6IHRoaXMuZ2V0QXZlcmFnZUludGVyYWN0aW9uVGltZSgpLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH07XG5cbiAgICB0aGlzLm1ldHJpY3NIaXN0b3J5LnB1c2gobWV0cmljcyk7XG5cbiAgICAvLyBLZWVwIGhpc3Rvcnkgc2l6ZSBtYW5hZ2VhYmxlXG4gICAgaWYgKHRoaXMubWV0cmljc0hpc3RvcnkubGVuZ3RoID4gdGhpcy5tYXhIaXN0b3J5U2l6ZSkge1xuICAgICAgdGhpcy5tZXRyaWNzSGlzdG9yeS5zaGlmdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYXZlcmFnZSBpbnRlcmFjdGlvbiB0aW1lIGZyb20gcmVjZW50IGludGVyYWN0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRBdmVyYWdlSW50ZXJhY3Rpb25UaW1lKCk6IG51bWJlciB7XG4gICAgY29uc3QgcmVjZW50SW50ZXJhY3Rpb25zID0gQXJyYXkuZnJvbSh0aGlzLmludGVyYWN0aW9ucy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoKGludGVyYWN0aW9uKSA9PiBpbnRlcmFjdGlvbi5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgLnNsaWNlKC0xMCk7IC8vIExhc3QgMTAgaW50ZXJhY3Rpb25zXG5cbiAgICBpZiAocmVjZW50SW50ZXJhY3Rpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCB0b3RhbFRpbWUgPSByZWNlbnRJbnRlcmFjdGlvbnMucmVkdWNlKFxuICAgICAgKHN1bSwgaW50ZXJhY3Rpb24pID0+XG4gICAgICAgIHN1bSArIChpbnRlcmFjdGlvbi5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gaW50ZXJhY3Rpb24uZHVyYXRpb24gOiAwKSxcbiAgICAgIDAsXG4gICAgKTtcblxuICAgIHJldHVybiB0b3RhbFRpbWUgLyByZWNlbnRJbnRlcmFjdGlvbnMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwZXJmb3JtYW5jZSBtZXRyaWNzIGhpc3RvcnlcbiAgICovXG4gIHB1YmxpYyBnZXRNZXRyaWNzSGlzdG9yeSgpOiBQZXJmb3JtYW5jZU1ldHJpY3NbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLm1ldHJpY3NIaXN0b3J5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBwZXJmb3JtYW5jZSBzdW1tYXJ5XG4gICAqL1xuICBwdWJsaWMgZ2V0UGVyZm9ybWFuY2VTdW1tYXJ5KCk6IHtcbiAgICBjdXJyZW50RlBTOiBudW1iZXI7XG4gICAgYXZlcmFnZUZQUzogbnVtYmVyO1xuICAgIG1pbkZQUzogbnVtYmVyO1xuICAgIG1heEZQUzogbnVtYmVyO1xuICAgIG1lbW9yeVVzYWdlOiBudW1iZXI7XG4gICAgYWN0aXZlSW50ZXJhY3Rpb25zOiBudW1iZXI7XG4gIH0ge1xuICAgIGNvbnN0IGZwc1ZhbHVlcyA9IHRoaXMubWV0cmljc0hpc3RvcnkubWFwKChtKSA9PiBtLmZwcyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgY3VycmVudEZQUzogdGhpcy5jdXJyZW50RlBTLFxuICAgICAgYXZlcmFnZUZQUzpcbiAgICAgICAgZnBzVmFsdWVzLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IE1hdGgucm91bmQoZnBzVmFsdWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gZnBzVmFsdWVzLmxlbmd0aClcbiAgICAgICAgICA6IDAsXG4gICAgICBtaW5GUFM6IGZwc1ZhbHVlcy5sZW5ndGggPiAwID8gTWF0aC5taW4oLi4uZnBzVmFsdWVzKSA6IDAsXG4gICAgICBtYXhGUFM6IGZwc1ZhbHVlcy5sZW5ndGggPiAwID8gTWF0aC5tYXgoLi4uZnBzVmFsdWVzKSA6IDAsXG4gICAgICBtZW1vcnlVc2FnZTogdGhpcy5nZXRNZW1vcnlVc2FnZSgpLFxuICAgICAgYWN0aXZlSW50ZXJhY3Rpb25zOiB0aGlzLmludGVyYWN0aW9ucy5zaXplLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogTG9nIHBlcmZvcm1hbmNlIHN1bW1hcnkgdG8gY29uc29sZVxuICAgKi9cbiAgcHVibGljIGxvZ1BlcmZvcm1hbmNlU3VtbWFyeSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSByZXR1cm47XG5cbiAgICBjb25zdCBzdW1tYXJ5ID0gdGhpcy5nZXRQZXJmb3JtYW5jZVN1bW1hcnkoKTtcbiAgICBsb2dnZXIud2FybihcIlBlcmZvcm1hbmNlIFN1bW1hcnlcIiwgc3VtbWFyeSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgbWV0cmljcyBoaXN0b3J5XG4gICAqL1xuICBwdWJsaWMgY2xlYXJIaXN0b3J5KCk6IHZvaWQge1xuICAgIHRoaXMubWV0cmljc0hpc3RvcnkgPSBbXTtcbiAgICB0aGlzLmludGVyYWN0aW9ucy5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgZm9yIGludGVyYWN0aW9ucyB0byBjb21wbGV0ZVxuICAgKi9cbiAgcHVibGljIHdhaXRGb3JJbnRlcmFjdGlvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBJbnRlcmFjdGlvbk1hbmFnZXIucnVuQWZ0ZXJJbnRlcmFjdGlvbnMocmVzb2x2ZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IHBlcmZvcm1hbmNlTW9uaXRvciA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3IoKTtcblxuLyoqXG4gKiBSZWFjdCBIb29rIGZvciBwZXJmb3JtYW5jZSBtb25pdG9yaW5nXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VQZXJmb3JtYW5jZU1vbml0b3IgPSAoKSA9PiB7XG4gIGNvbnN0IHN0YXJ0SW50ZXJhY3Rpb24gPSAobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgcGVyZm9ybWFuY2VNb25pdG9yLnN0YXJ0SW50ZXJhY3Rpb24obmFtZSk7XG4gIH07XG4gIGNvbnN0IGVuZEludGVyYWN0aW9uID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZU1vbml0b3IuZW5kSW50ZXJhY3Rpb24obmFtZSk7XG4gIH07XG4gIGNvbnN0IG1lYXN1cmVJbnRlcmFjdGlvbiA9IDxUPihuYW1lOiBzdHJpbmcsIGZuOiAoKSA9PiBQcm9taXNlPFQ+IHwgVCkgPT5cbiAgICBwZXJmb3JtYW5jZU1vbml0b3IubWVhc3VyZUludGVyYWN0aW9uKG5hbWUsIGZuKTtcbiAgY29uc3QgZ2V0Q3VycmVudEZQUyA9ICgpID0+IHBlcmZvcm1hbmNlTW9uaXRvci5nZXRDdXJyZW50RlBTKCk7XG4gIGNvbnN0IGdldFBlcmZvcm1hbmNlU3VtbWFyeSA9ICgpID0+XG4gICAgcGVyZm9ybWFuY2VNb25pdG9yLmdldFBlcmZvcm1hbmNlU3VtbWFyeSgpO1xuXG4gIHJldHVybiB7XG4gICAgc3RhcnRJbnRlcmFjdGlvbixcbiAgICBlbmRJbnRlcmFjdGlvbixcbiAgICBtZWFzdXJlSW50ZXJhY3Rpb24sXG4gICAgZ2V0Q3VycmVudEZQUyxcbiAgICBnZXRQZXJmb3JtYW5jZVN1bW1hcnksXG4gIH07XG59O1xuXG4vKipcbiAqIFBlcmZvcm1hbmNlIG1vbml0b3JpbmcgZGVjb3JhdG9yIGZvciBjbGFzcyBtZXRob2RzXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoUGVyZm9ybWFuY2VNb25pdG9yaW5nID0gKF9uYW1lOiBzdHJpbmcpID0+IHtcbiAgcmV0dXJuIChcbiAgICB0YXJnZXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICAgIHByb3BlcnR5S2V5OiBzdHJpbmcsXG4gICAgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yLFxuICApID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWUgYXMgKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdW5rbm93bjtcblxuICAgIGRlc2NyaXB0b3IudmFsdWUgPSBhc3luYyBmdW5jdGlvbiAoLi4uYXJnczogdW5rbm93bltdKTogUHJvbWlzZTx1bmtub3duPiB7XG4gICAgICByZXR1cm4gcGVyZm9ybWFuY2VNb25pdG9yLm1lYXN1cmVJbnRlcmFjdGlvbihcbiAgICAgICAgYCR7dGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWV9LiR7cHJvcGVydHlLZXl9YCxcbiAgICAgICAgKCkgPT4gb3JpZ2luYWxNZXRob2QuYXBwbHkodGhpcywgYXJncyksXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgfTtcbn07XG5cbi8qKlxuICogUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBIT0MgZm9yIFJlYWN0IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhDb21wb25lbnRQZXJmb3JtYW5jZU1vbml0b3JpbmcgPSA8UCBleHRlbmRzIG9iamVjdD4oXG4gIENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxQPixcbiAgY29tcG9uZW50TmFtZT86IHN0cmluZyxcbik6IFJlYWN0LkZDPFA+ID0+IHtcbiAgY29uc3QgV3JhcHBlZENvbXBvbmVudDogUmVhY3QuRkM8UD4gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCBuYW1lID0gY29tcG9uZW50TmFtZSA/PyBDb21wb25lbnQuZGlzcGxheU5hbWUgPz8gQ29tcG9uZW50Lm5hbWU7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgcGVyZm9ybWFuY2VNb25pdG9yLnN0YXJ0SW50ZXJhY3Rpb24oYCR7bmFtZX0ubW91bnRgKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgcGVyZm9ybWFuY2VNb25pdG9yLmVuZEludGVyYWN0aW9uKGAke25hbWV9Lm1vdW50YCk7XG4gICAgICB9O1xuICAgIH0sIFtuYW1lXSk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzKTtcbiAgfTtcblxuICBXcmFwcGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gYHdpdGhQZXJmb3JtYW5jZU1vbml0b3JpbmcoJHtDb21wb25lbnQuZGlzcGxheU5hbWUgIT09IHVuZGVmaW5lZCAmJiBDb21wb25lbnQuZGlzcGxheU5hbWUgIT09IFwiXCIgPyBDb21wb25lbnQuZGlzcGxheU5hbWUgOiBDb21wb25lbnQubmFtZX0pYDtcblxuICByZXR1cm4gV3JhcHBlZENvbXBvbmVudDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBlcmZvcm1hbmNlTW9uaXRvcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFGLE9BQUE7QUFBNEMsSUFpQ3RDRyxrQkFBa0I7RUFTdEIsU0FBQUEsbUJBQUEsRUFBYztJQUFBLElBQUFDLGdCQUFBLENBQUFDLE9BQUEsUUFBQUYsa0JBQUE7SUFBQSxLQVJORyxTQUFTLEdBQVlDLE9BQU87SUFBQSxLQUM1QkMsYUFBYSxHQUFXLENBQUM7SUFBQSxLQUN6QkMsVUFBVSxHQUFXLENBQUM7SUFBQSxLQUN0QkMsVUFBVSxHQUFXLEVBQUU7SUFBQSxLQUN2QkMsWUFBWSxHQUFtQyxJQUFJQyxHQUFHLENBQUMsQ0FBQztJQUFBLEtBQ3hEQyxjQUFjLEdBQXlCLEVBQUU7SUFBQSxLQUN6Q0MsY0FBYyxHQUFXLEdBQUc7SUFHbEMsSUFBSSxJQUFJLENBQUNSLFNBQVMsRUFBRTtNQUNsQixJQUFJLENBQUNTLGtCQUFrQixDQUFDLENBQUM7SUFDM0I7RUFDRjtFQUFDLFdBQUFDLGFBQUEsQ0FBQVgsT0FBQSxFQUFBRixrQkFBQTtJQUFBYyxHQUFBO0lBQUFDLEtBQUEsRUFLRCxTQUFPQyxVQUFVQSxDQUFDQyxPQUFnQixFQUFRO01BQ3hDLElBQUksQ0FBQ2QsU0FBUyxHQUFHYyxPQUFPLElBQUliLE9BQU87TUFFbkMsSUFBSSxJQUFJLENBQUNELFNBQVMs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