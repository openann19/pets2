{"version":3,"names":["_vectorIcons","require","_core","Haptics","_interopRequireWildcard","ImagePicker","_react","_reactNative","_usePremiumAnimations","_unifiedTheme","_EliteButton","_interopRequireDefault","_FXContainer","_AdvancedPhotoEditor","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","_Dimensions$get","Dimensions","SCREEN_WIDTH","width","PHOTO_SIZE","Theme","spacing","lg","ModernPhotoUpload","_ref","photos","onPhotosChange","_ref$maxPhotos","maxPhotos","style","_ref$disabled","disabled","_useState","useState","_useState2","_slicedToArray2","isProcessing","setIsProcessing","_useState3","_useState4","showPhotoEditor","setShowPhotoEditor","_useState5","_useState6","photoToEdit","setPhotoToEdit","_useStaggeredAnimatio","useStaggeredAnimation","startStaggeredAnimation","start","getAnimatedStyle","React","useEffect","requestPermissions","useCallback","_asyncToGenerator2","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","Alert","alert","text","pickImage","hasPermission","impactAsync","ImpactFeedbackStyle","Light","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","quality","canceled","assets","uri","error","logger","notificationAsync","NotificationFeedbackType","Error","handlePhotoEditorSave","editedUri","newPhoto","id","Date","now","toString","isUploading","updatedPhotos","concat","_toConsumableArray2","Success","handlePhotoEditorCancel","removePhoto","photoId","Medium","photo","renderPhotoItem","index","AnimatedView","View","jsx","children","jsxs","type","variant","hasGlow","styles","photoContainer","Image","source","resizeMode","uploadingOverlay","uploadingSpinner","Ionicons","name","size","color","colors","primary","Text","uploadingText","errorOverlay","errorText","title","leftIcon","onPress","removeButton","glowEffect","rippleEffect","renderAddButton","loading","addButton","pressEffect","gridItems","useMemo","items","map","StyleSheet","flatten","container","subtitle","Modal","visible","animationType","presentationStyle","AdvancedPhotoEditor","imageUri","onSave","onCancel","aspectRatio","maxWidth","maxHeight","grid","hasEntrance","entranceType","emptyState","neutral","emptyIcon","emptyTitle","emptySubtitle","create","padding","xl","fontSize","typography","fontWeight","bold","marginBottom","sm","base","secondary","flexDirection","flexWrap","justifyContent","gap","height","position","borderRadius","absoluteFillObject","backgroundColor","alignItems","medium","marginTop","xs","top","right","minHeight","semibold","textAlign","lineHeight","relaxed","_default","exports"],"sources":["ModernPhotoUpload.tsx"],"sourcesContent":["/**\n * PROJECT HYPERION: MODERN PHOTO UPLOAD COMPONENT\n *\n * Premium photo upload component that demonstrates the new unified design system:\n * - Uses EliteButton for consistent interactions\n * - Applies FXContainer for premium visual effects\n * - Implements staggered animations for photo grid\n * - Provides non-blocking error handling\n * - Maintains accessibility standards\n */\n\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { logger } from \"@pawfectmatch/core\";\nimport * as Haptics from \"expo-haptics\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport React, { useState, useCallback, useMemo } from \"react\";\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  Alert,\n  Dimensions,\n  type ViewStyle,\n} from \"react-native\";\n\nimport { useStaggeredAnimation } from \"../hooks/usePremiumAnimations\";\nimport { Theme } from \"../theme/unified-theme\";\n\nimport EliteButton from \"./buttons/EliteButton\";\nimport FXContainer from \"./containers/FXContainer\";\nimport { AdvancedPhotoEditor } from \"./photo/AdvancedPhotoEditor\";\nimport { Modal } from \"react-native\";\n\nconst { width: SCREEN_WIDTH } = Dimensions.get(\"window\");\nconst PHOTO_SIZE =\n  (SCREEN_WIDTH - Theme.spacing[\"4xl\"] * 2 - Theme.spacing.lg * 2) / 3;\n\n// === TYPES ===\ninterface PhotoItem {\n  id: string;\n  uri: string;\n  isUploading?: boolean;\n  error?: string;\n}\n\ninterface ModernPhotoUploadProps {\n  photos: PhotoItem[];\n  onPhotosChange: (photos: PhotoItem[]) => void;\n  maxPhotos?: number;\n  style?: ViewStyle;\n  disabled?: boolean;\n}\n\n// === MAIN COMPONENT ===\nfunction ModernPhotoUpload({\n  photos,\n  onPhotosChange,\n  maxPhotos = 6,\n  style,\n  disabled = false,\n}: ModernPhotoUploadProps) {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [showPhotoEditor, setShowPhotoEditor] = useState(false);\n  const [photoToEdit, setPhotoToEdit] = useState<string | null>(null);\n\n  // Staggered animation for photo grid\n  const { start: startStaggeredAnimation, getAnimatedStyle } =\n    useStaggeredAnimation(\n      photos.length + 1, // +1 for add button\n      100,\n    );\n\n  // Start staggered animation when photos change\n  React.useEffect(() => {\n    startStaggeredAnimation();\n  }, [photos.length, startStaggeredAnimation]);\n\n  // Request permissions\n  const requestPermissions = useCallback(async () => {\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== \"granted\") {\n      Alert.alert(\n        \"Permission Required\",\n        \"Please grant camera roll permissions to upload photos.\",\n        [{ text: \"OK\" }],\n      );\n      return false;\n    }\n    return true;\n  }, []);\n\n  // Pick image from library\n  const pickImage = useCallback(async () => {\n    if (disabled || isProcessing || photos.length >= maxPhotos) return;\n\n    const hasPermission = await requestPermissions();\n    if (!hasPermission) return;\n\n    setIsProcessing(true);\n    Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n\n    try {\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: false, // We'll use our own editor\n        quality: 1.0, // Get full quality for editing\n      });\n\n      if (!result.canceled && result.assets[0]) {\n        // Show the editor for the newly selected image\n        setPhotoToEdit(result.assets[0].uri);\n        setShowPhotoEditor(true);\n      }\n    } catch (error) {\n      logger.error(\"Error picking image:\", { error });\n      Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);\n\n      // Non-blocking error handling\n      Alert.alert(\"Upload Error\", \"Failed to upload photo. Please try again.\", [\n        { text: \"OK\" },\n      ]);\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [\n    disabled,\n    isProcessing,\n    photos,\n    maxPhotos,\n    requestPermissions,\n    onPhotosChange,\n  ]);\n\n  // Handle photo editor save\n  const handlePhotoEditorSave = useCallback((editedUri: string) => {\n    const newPhoto: PhotoItem = {\n      id: Date.now().toString(),\n      uri: editedUri,\n      isUploading: false,\n    };\n\n    const updatedPhotos = [...photos, newPhoto];\n    onPhotosChange(updatedPhotos);\n    setShowPhotoEditor(false);\n    setPhotoToEdit(null);\n    Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n  }, [photos, onPhotosChange]);\n\n  // Handle photo editor cancel\n  const handlePhotoEditorCancel = useCallback(() => {\n    setShowPhotoEditor(false);\n    setPhotoToEdit(null);\n  }, []);\n\n  // Remove photo\n  const removePhoto = useCallback(\n    (photoId: string) => {\n      if (disabled || isProcessing) return;\n\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n\n      const updatedPhotos = photos.filter((photo) => photo.id !== photoId);\n      onPhotosChange(updatedPhotos);\n    },\n    [disabled, isProcessing, photos, onPhotosChange],\n  );\n\n  // Render photo item\n  const renderPhotoItem = useCallback(\n    (photo: PhotoItem, index: number) => {\n      const AnimatedView = require(\"react-native-reanimated\").default.View;\n\n      return (\n        <AnimatedView key={photo.id} style={getAnimatedStyle}>\n          <FXContainer\n            type=\"glass\"\n            variant=\"medium\"\n            hasGlow={true}\n            style={styles.photoContainer}\n          >\n            <Image\n              source={{ uri: photo.uri }}\n              style={styles.photo}\n              resizeMode=\"cover\"\n            />\n\n            {/* Uploading overlay */}\n            {photo.isUploading && (\n              <View style={styles.uploadingOverlay}>\n                <View style={styles.uploadingSpinner}>\n                  <Ionicons\n                    name=\"cloud-upload\"\n                    size={24}\n                    color={Theme.colors.primary[500]}\n                  />\n                </View>\n                <Text style={styles.uploadingText}>Uploading...</Text>\n              </View>\n            )}\n\n            {/* Error overlay */}\n            {photo.error && (\n              <View style={styles.errorOverlay}>\n                <Ionicons\n                  name=\"alert-circle\"\n                  size={24}\n                  color={Theme.colors.status.error}\n                />\n                <Text style={styles.errorText}>Failed</Text>\n              </View>\n            )}\n\n            {/* Remove button */}\n            {!photo.isUploading && !photo.error && (\n              <EliteButton\n                title=\"\"\n                size=\"sm\"\n                variant=\"ghost\"\n                leftIcon=\"close\"\n                onPress={() => {\n                  removePhoto(photo.id);\n                }}\n                style={styles.removeButton}\n                glowEffect={false}\n                rippleEffect={false}\n              />\n            )}\n          </FXContainer>\n        </AnimatedView>\n      );\n    },\n    [getAnimatedStyle, removePhoto],\n  );\n\n  // Render add button\n  const renderAddButton = useCallback(() => {\n    const AnimatedView = require(\"react-native-reanimated\").default.View;\n\n    return (\n      <AnimatedView style={getAnimatedStyle}>\n        <EliteButton\n          title=\"Add Photo\"\n          size=\"lg\"\n          variant=\"outline\"\n          leftIcon=\"camera\"\n          onPress={pickImage}\n          loading={isProcessing}\n          disabled={disabled || photos.length >= maxPhotos}\n          style={styles.addButton}\n          glowEffect={true}\n          rippleEffect={true}\n          pressEffect={true}\n        />\n      </AnimatedView>\n    );\n  }, [\n    getAnimatedStyle,\n    photos.length,\n    pickImage,\n    isProcessing,\n    disabled,\n    maxPhotos,\n  ]);\n\n  // Memoized grid layout\n  const gridItems = useMemo(() => {\n    const items = photos.map(renderPhotoItem);\n    if (photos.length < maxPhotos) {\n      items.push(renderAddButton());\n    }\n    return items;\n  }, [photos, maxPhotos, renderPhotoItem, renderAddButton]);\n\n  return (\n    <View style={StyleSheet.flatten([styles.container, style])}>\n      <Text style={styles.title}>Pet Photos</Text>\n      <Text style={styles.subtitle}>\n        Add up to {maxPhotos} photos ({photos.length}/{maxPhotos})\n      </Text>\n\n      {/* Photo Editor Modal */}\n      {showPhotoEditor && photoToEdit && (\n        <Modal visible={showPhotoEditor} animationType=\"slide\" presentationStyle=\"fullScreen\">\n          <AdvancedPhotoEditor\n            imageUri={photoToEdit}\n            onSave={handlePhotoEditorSave}\n            onCancel={handlePhotoEditorCancel}\n            aspectRatio={[1, 1]}\n            maxWidth={1920}\n            maxHeight={1920}\n          />\n        </Modal>\n      )}\n\n      <View style={styles.grid}>{gridItems}</View>\n\n      {photos.length === 0 && (\n        <FXContainer\n          type=\"glass\"\n          variant=\"subtle\"\n          hasEntrance={true}\n          entranceType=\"slideIn\"\n          style={styles.emptyState}\n        >\n          <Ionicons\n            name=\"images\"\n            size={48}\n            color={Theme.colors.neutral[400]}\n            style={styles.emptyIcon}\n          />\n          <Text style={styles.emptyTitle}>No photos yet</Text>\n          <Text style={styles.emptySubtitle}>\n            Add photos to help other pet owners get to know your pet better\n          </Text>\n        </FXContainer>\n      )}\n    </View>\n  );\n}\n\n// === STYLES ===\nconst styles = StyleSheet.create({\n  container: {\n    padding: Theme.spacing.xl,\n  },\n  title: {\n    fontSize: Theme.typography.fontSize[\"2xl\"],\n    fontWeight: Theme.typography.fontWeight.bold,\n    color: Theme.colors.text.primary,\n    marginBottom: Theme.spacing.sm,\n  },\n  subtitle: {\n    fontSize: Theme.typography.fontSize.base,\n    color: Theme.colors.text.secondary,\n    marginBottom: Theme.spacing.xl,\n  },\n  grid: {\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    gap: Theme.spacing.lg,\n  },\n  photoContainer: {\n    width: PHOTO_SIZE,\n    height: PHOTO_SIZE,\n    position: \"relative\",\n  },\n  photo: {\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: Theme.borderRadius.xl,\n  },\n  uploadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: Theme.borderRadius.xl,\n  },\n  uploadingSpinner: {\n    marginBottom: Theme.spacing.sm,\n  },\n  uploadingText: {\n    color: Theme.colors.neutral[0],\n    fontSize: Theme.typography.fontSize.sm,\n    fontWeight: Theme.typography.fontWeight.medium,\n  },\n  errorOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: \"rgba(239, 68, 68, 0.9)\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: Theme.borderRadius.xl,\n  },\n  errorText: {\n    color: Theme.colors.neutral[0],\n    fontSize: Theme.typography.fontSize.sm,\n    fontWeight: Theme.typography.fontWeight.medium,\n    marginTop: Theme.spacing.xs,\n  },\n  removeButton: {\n    position: \"absolute\",\n    top: -8,\n    right: -8,\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: Theme.colors.status.error,\n    padding: 0,\n    minHeight: 32,\n  },\n  addButton: {\n    width: PHOTO_SIZE,\n    height: PHOTO_SIZE,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  emptyState: {\n    padding: Theme.spacing[\"4xl\"],\n    alignItems: \"center\",\n    marginTop: Theme.spacing.xl,\n  },\n  emptyIcon: {\n    marginBottom: Theme.spacing.lg,\n  },\n  emptyTitle: {\n    fontSize: Theme.typography.fontSize.lg,\n    fontWeight: Theme.typography.fontWeight.semibold,\n    color: Theme.colors.text.primary,\n    marginBottom: Theme.spacing.sm,\n  },\n  emptySubtitle: {\n    fontSize: Theme.typography.fontSize.base,\n    color: Theme.colors.text.secondary,\n    textAlign: \"center\",\n    lineHeight:\n      Theme.typography.fontSize.base * Theme.typography.lineHeight.relaxed,\n  },\n});\n\nexport default ModernPhotoUpload;\n"],"mappings":"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","ignoreList":[]}