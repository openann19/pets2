f872bd723582014aa7d4089582d2de5a
"use strict";

_getJestObj().mock("../uploadHygiene", function () {
  return {
    processImageForUpload: _globals.jest.fn(),
    checkUploadQuota: _globals.jest.fn(),
    uploadWithRetry: _globals.jest.fn(),
    pickAndProcessImage: _globals.jest.fn(),
    captureAndProcessImage: _globals.jest.fn()
  };
});
_getJestObj().mock("../api", function () {
  return {
    api: {
      presignPhoto: _globals.jest.fn()
    },
    request: _globals.jest.fn()
  };
});
_getJestObj().mock('expo-file-system', function () {
  return {
    EncodingType: {
      Base64: 'base64',
      UTF8: 'utf8'
    },
    readAsStringAsync: _globals.jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _globals = require("@jest/globals");
var FileSystem = _interopRequireWildcard(require("expo-file-system"));
var _enhancedUploadService = require("../enhancedUploadService");
var _uploadHygiene = require("../uploadHygiene");
var _api = require("../api");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t2 in e) "default" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]); return f; })(e, t); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockApi = _api.api;
var mockRequest = _api.request;
var mockProcessImageForUpload = _uploadHygiene.processImageForUpload;
var mockCheckUploadQuota = _uploadHygiene.checkUploadQuota;
var mockUploadWithRetry = _uploadHygiene.uploadWithRetry;
var mockPickAndProcessImage = _uploadHygiene.pickAndProcessImage;
var mockCaptureAndProcessImage = _uploadHygiene.captureAndProcessImage;
var mockFileSystem = FileSystem;
var mockFetch = _globals.jest.fn();
global.fetch = mockFetch;
(0, _globals.describe)('EnhancedUploadService', function () {
  var service;
  var mockProcessedImage;
  var mockProgressCallback;
  (0, _globals.beforeEach)(function () {
    _globals.jest.clearAllMocks();
    _enhancedUploadService.EnhancedUploadService.instance = undefined;
    service = _enhancedUploadService.EnhancedUploadService.getInstance();
    mockProcessedImage = {
      uri: 'file://test-image.jpg',
      width: 1024,
      height: 768,
      fileSize: 256000,
      mimeType: 'image/jpeg',
      metadata: {
        originalWidth: 2048,
        originalHeight: 1536,
        orientationFixed: true,
        exifStripped: true
      }
    };
    mockProgressCallback = _globals.jest.fn();
    mockApi.presignPhoto.mockResolvedValue({
      key: 'test-key-123',
      url: 'https://s3.amazonaws.com/test-bucket/test-key-123'
    });
    mockFetch.mockResolvedValue({
      ok: true
    });
    mockRequest.mockResolvedValue({
      data: {
        upload: {
          _id: 'upload-123',
          s3Key: 'test-key-123',
          url: 'https://cdn.example.com/test-key-123',
          status: 'pending'
        }
      }
    });
    mockFileSystem.readAsStringAsync.mockResolvedValue('base64data');
  });
  (0, _globals.afterEach)(function () {
    _globals.jest.clearAllTimers();
  });
  (0, _globals.describe)('Singleton Pattern', function () {
    (0, _globals.it)('should return the same instance', function () {
      var instance1 = _enhancedUploadService.EnhancedUploadService.getInstance();
      var instance2 = _enhancedUploadService.EnhancedUploadService.getInstance();
      (0, _globals.expect)(instance1).toBe(instance2);
      (0, _globals.expect)(instance1).toBe(service);
    });
    (0, _globals.it)('should maintain state across calls', function () {
      (0, _globals.expect)(service).toBeDefined();
    });
  });
  (0, _globals.describe)('uploadProcessedImage', function () {
    (0, _globals.it)('should complete full upload pipeline successfully', (0, _asyncToGenerator2.default)(function* () {
      var result = yield service.uploadProcessedImage(mockProcessedImage, 'pet', 'pet-123', mockProgressCallback);
      (0, _globals.expect)(result).toEqual({
        uploadId: 'upload-123',
        s3Key: 'test-key-123',
        url: 'https://cdn.example.com/test-key-123',
        status: 'pending',
        analysis: undefined
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith({
        phase: 'presign',
        percent: 10,
        message: 'Requesting upload URL...'
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith({
        phase: 'upload',
        percent: 30,
        message: 'Uploading to secure storage...'
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith({
        phase: 'register',
        percent: 60,
        message: 'Registering upload...'
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith({
        phase: 'analyze',
        percent: 80,
        message: 'Analyzing photo...'
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith({
        phase: 'pending',
        percent: 90,
        message: 'Awaiting moderation...'
      });
    }));
    (0, _globals.it)('should handle different upload types', (0, _asyncToGenerator2.default)(function* () {
      var types = ['profile', 'pet', 'verification'];
      for (var type of types) {
        mockRequest.mockResolvedValueOnce({
          data: {
            upload: {
              _id: `upload-${type}`,
              s3Key: `key-${type}`,
              url: `url-${type}`,
              status: 'pending'
            }
          }
        });
        var result = yield service.uploadProcessedImage(mockProcessedImage, type);
        (0, _globals.expect)(mockRequest).toHaveBeenCalledWith('/uploads', {
          method: 'POST',
          body: _globals.expect.objectContaining({
            type: type
          })
        });
        (0, _globals.expect)(result.uploadId).toBe(`upload-${type}`);
      }
    }));
    (0, _globals.it)('should work without progress callback', (0, _asyncToGenerator2.default)(function* () {
      var result = yield service.uploadProcessedImage(mockProcessedImage);
      (0, _globals.expect)(result).toBeDefined();
      (0, _globals.expect)(mockProgressCallback).not.toHaveBeenCalled();
    }));
    (0, _globals.it)('should handle presign failure', (0, _asyncToGenerator2.default)(function* () {
      mockApi.presignPhoto.mockRejectedValue(new Error('Presign failed'));
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow('Presign failed');
    }));
    (0, _globals.it)('should handle S3 upload failure', (0, _asyncToGenerator2.default)(function* () {
      mockFetch.mockResolvedValueOnce({
        ok: false,
        status: 403,
        statusText: 'Forbidden'
      });
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow('S3 upload failed');
    }));
    (0, _globals.it)('should handle registration failure', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockRejectedValue(new Error('Registration failed'));
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow('Registration failed');
    }));
    (0, _globals.it)('should handle file URI to blob conversion', (0, _asyncToGenerator2.default)(function* () {
      yield service.uploadProcessedImage(mockProcessedImage);
      (0, _globals.expect)(mockFileSystem.readAsStringAsync).toHaveBeenCalledWith(mockProcessedImage.uri, {
        encoding: FileSystem.EncodingType.Base64
      });
      (0, _globals.expect)(mockFetch).toHaveBeenCalledWith(_globals.expect.any(String), _globals.expect.objectContaining({
        method: 'PUT',
        body: _globals.expect.any(Blob)
      }));
    }));
    (0, _globals.it)('should handle missing optional fields in response', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValue({
        data: {
          upload: {
            status: 'approved'
          }
        }
      });
      var result = yield service.uploadProcessedImage(mockProcessedImage);
      (0, _globals.expect)(result).toEqual({
        uploadId: '',
        s3Key: 'test-key-123',
        url: _globals.expect.stringContaining('s3.amazonaws.com'),
        status: 'approved',
        analysis: undefined
      });
    }));
    (0, _globals.it)('should handle large file uploads', (0, _asyncToGenerator2.default)(function* () {
      var largeImage = _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        fileSize: 10 * 1024 * 1024
      });
      var result = yield service.uploadProcessedImage(largeImage);
      (0, _globals.expect)(result).toBeDefined();
      (0, _globals.expect)(mockFetch).toHaveBeenCalled();
    }));
  });
  (0, _globals.describe)('uploadFromPicker', function () {
    (0, _globals.it)('should complete full pipeline from picker', (0, _asyncToGenerator2.default)(function* () {
      mockCheckUploadQuota.mockResolvedValue({
        allowed: true,
        remaining: 5,
        resetAt: new Date(),
        limit: 10
      });
      mockPickAndProcessImage.mockResolvedValue(mockProcessedImage);
      var result = yield service.uploadFromPicker({
        type: 'profile',
        petId: 'pet-456',
        allowEditing: false,
        useCamera: false
      }, mockProgressCallback);
      (0, _globals.expect)(mockCheckUploadQuota).toHaveBeenCalledWith('current-user-id');
      (0, _globals.expect)(mockPickAndProcessImage).toHaveBeenCalledWith(false, {
        maxDimension: 2048,
        quality: 0.9
      });
      (0, _globals.expect)(result).toBeDefined();
    }));
    (0, _globals.it)('should use camera when specified', (0, _asyncToGenerator2.default)(function* () {
      mockCheckUploadQuota.mockResolvedValue({
        allowed: true,
        remaining: 5,
        resetAt: new Date(),
        limit: 10
      });
      mockCaptureAndProcessImage.mockResolvedValue(mockProcessedImage);
      yield service.uploadFromPicker({
        useCamera: true
      });
      (0, _globals.expect)(mockCaptureAndProcessImage).toHaveBeenCalledWith({
        maxDimension: 2048,
        quality: 0.9
      });
      (0, _globals.expect)(mockPickAndProcessImage).not.toHaveBeenCalled();
    }));
    (0, _globals.it)('should handle quota exceeded', (0, _asyncToGenerator2.default)(function* () {
      mockCheckUploadQuota.mockResolvedValue({
        allowed: false,
        remaining: 0,
        resetAt: new Date(),
        limit: 10
      });
      yield (0, _globals.expect)(service.uploadFromPicker()).rejects.toThrow('Upload quota exceeded');
    }));
    (0, _globals.it)('should handle image picker cancellation', (0, _asyncToGenerator2.default)(function* () {
      mockCheckUploadQuota.mockResolvedValue({
        allowed: true,
        remaining: 5,
        resetAt: new Date(),
        limit: 10
      });
      mockPickAndProcessImage.mockResolvedValue(null);
      yield (0, _globals.expect)(service.uploadFromPicker()).rejects.toThrow('No image selected');
    }));
    (0, _globals.it)('should use default options when not provided', (0, _asyncToGenerator2.default)(function* () {
      mockCheckUploadQuota.mockResolvedValue({
        allowed: true,
        remaining: 5,
        resetAt: new Date(),
        limit: 10
      });
      mockPickAndProcessImage.mockResolvedValue(mockProcessedImage);
      yield service.uploadFromPicker();
      (0, _globals.expect)(mockPickAndProcessImage).toHaveBeenCalledWith(true, {
        maxDimension: 2048,
        quality: 0.9
      });
    }));
    (0, _globals.it)('should handle quota check failure', (0, _asyncToGenerator2.default)(function* () {
      mockCheckUploadQuota.mockRejectedValue(new Error('Quota service unavailable'));
      yield (0, _globals.expect)(service.uploadFromPicker()).rejects.toThrow('Quota service unavailable');
    }));
  });
  (0, _globals.describe)('pollUploadStatus', function () {
    (0, _globals.it)('should poll until approved status', (0, _asyncToGenerator2.default)(function* () {
      var approvedResponse = {
        data: {
          upload: {
            s3Key: 'approved-key',
            url: 'approved-url',
            status: 'approved'
          },
          analysis: {
            safety: 'safe',
            labels: ['dog']
          }
        }
      };
      mockRequest.mockResolvedValue(approvedResponse);
      var result = yield service.pollUploadStatus('upload-123', 5, 100);
      (0, _globals.expect)(result).toEqual({
        uploadId: 'upload-123',
        s3Key: 'approved-key',
        url: 'approved-url',
        status: 'approved',
        analysis: approvedResponse.data.analysis
      });
      (0, _globals.expect)(mockRequest).toHaveBeenCalledTimes(1);
    }));
    (0, _globals.it)('should handle rejected status', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValue({
        data: {
          upload: {
            status: 'rejected',
            flagReason: 'Inappropriate content'
          }
        }
      });
      yield (0, _globals.expect)(service.pollUploadStatus('upload-123')).rejects.toThrow('Upload rejected: Inappropriate content');
    }));
    (0, _globals.it)('should poll multiple times for pending status', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValueOnce({
        data: {
          upload: {
            status: 'pending'
          }
        }
      });
      mockRequest.mockResolvedValueOnce({
        data: {
          upload: {
            status: 'analyzing'
          }
        }
      });
      mockRequest.mockResolvedValueOnce({
        data: {
          upload: {
            s3Key: 'final-key',
            url: 'final-url',
            status: 'approved'
          }
        }
      });
      var result = yield service.pollUploadStatus('upload-123', 5, 10);
      (0, _globals.expect)(result.status).toBe('approved');
      (0, _globals.expect)(mockRequest).toHaveBeenCalledTimes(3);
    }), 10000);
    (0, _globals.it)('should timeout after max attempts', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValue({
        data: {
          upload: {
            status: 'pending'
          }
        }
      });
      yield (0, _globals.expect)(service.pollUploadStatus('upload-123', 3, 10)).rejects.toThrow('Upload status polling timeout');
      (0, _globals.expect)(mockRequest).toHaveBeenCalledTimes(3);
    }), 10000);
    (0, _globals.it)('should handle API errors during polling', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockRejectedValueOnce(new Error('Network error'));
      mockRequest.mockResolvedValueOnce({
        data: {
          upload: {
            status: 'approved'
          }
        }
      });
      var result = yield service.pollUploadStatus('upload-123', 3, 10);
      (0, _globals.expect)(result.status).toBe('approved');
    }));
    (0, _globals.it)('should use default polling parameters', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValue({
        data: {
          upload: {
            status: 'approved'
          }
        }
      });
      yield service.pollUploadStatus('upload-123');
      (0, _globals.expect)(mockRequest).toHaveBeenCalledWith('/uploads/upload-123', {
        method: 'GET'
      });
    }));
  });
  (0, _globals.describe)('uploadBatch', function () {
    (0, _globals.it)('should upload multiple images successfully', (0, _asyncToGenerator2.default)(function* () {
      var images = [_objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'image1.jpg'
      }), _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'image2.jpg'
      }), _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'image3.jpg'
      })];
      var mockProgressCallback = _globals.jest.fn();
      var results = yield service.uploadBatch(images, 'pet', 'pet-123', mockProgressCallback);
      (0, _globals.expect)(results).toHaveLength(3);
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledTimes(3);
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith(0, {
        phase: 'presign',
        percent: 0,
        message: 'Processing photo 1/3'
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith(1, {
        phase: 'presign',
        percent: 0,
        message: 'Processing photo 2/3'
      });
      (0, _globals.expect)(mockProgressCallback).toHaveBeenCalledWith(2, {
        phase: 'presign',
        percent: 0,
        message: 'Processing photo 3/3'
      });
    }));
    (0, _globals.it)('should handle partial failures in batch upload', (0, _asyncToGenerator2.default)(function* () {
      var images = [mockProcessedImage, _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'fail-image.jpg'
      }), mockProcessedImage];
      mockFetch.mockResolvedValueOnce({
        ok: true
      });
      mockRequest.mockResolvedValueOnce({
        data: {
          upload: {
            _id: 'upload1'
          }
        }
      });
      mockFetch.mockResolvedValueOnce({
        ok: false
      });
      mockFetch.mockResolvedValueOnce({
        ok: true
      });
      mockRequest.mockResolvedValueOnce({
        data: {
          upload: {
            _id: 'upload3'
          }
        }
      });
      var results = yield service.uploadBatch(images);
      (0, _globals.expect)(results).toHaveLength(2);
      (0, _globals.expect)(results[0].uploadId).toBe('upload1');
      (0, _globals.expect)(results[1].uploadId).toBe('upload3');
    }));
    (0, _globals.it)('should work without progress callback', (0, _asyncToGenerator2.default)(function* () {
      var images = [mockProcessedImage];
      var results = yield service.uploadBatch(images);
      (0, _globals.expect)(results).toHaveLength(1);
    }));
    (0, _globals.it)('should handle empty batch', (0, _asyncToGenerator2.default)(function* () {
      var results = yield service.uploadBatch([]);
      (0, _globals.expect)(results).toEqual([]);
    }));
  });
  (0, _globals.describe)('checkDuplicate', function () {
    (0, _globals.it)('should check for duplicate uploads', (0, _asyncToGenerator2.default)(function* () {
      var mockResponse = {
        data: {
          isDuplicate: true,
          similarImages: ['similar1.jpg', 'similar2.jpg']
        }
      };
      mockRequest.mockResolvedValue(mockResponse);
      var result = yield service.checkDuplicate('upload-123');
      (0, _globals.expect)(result).toEqual({
        isDuplicate: true,
        similarImages: ['similar1.jpg', 'similar2.jpg']
      });
      (0, _globals.expect)(mockRequest).toHaveBeenCalledWith('/uploads/upload-123/duplicate-check', {
        method: 'GET'
      });
    }));
    (0, _globals.it)('should handle no duplicates found', (0, _asyncToGenerator2.default)(function* () {
      var mockResponse = {
        data: {
          isDuplicate: false
        }
      };
      mockRequest.mockResolvedValue(mockResponse);
      var result = yield service.checkDuplicate('upload-456');
      (0, _globals.expect)(result).toEqual({
        isDuplicate: false,
        similarImages: undefined
      });
    }));
    (0, _globals.it)('should handle API errors gracefully', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockRejectedValue(new Error('Duplicate check failed'));
      var result = yield service.checkDuplicate('upload-789');
      (0, _globals.expect)(result).toEqual({
        isDuplicate: false
      });
    }));
  });
  (0, _globals.describe)('File URI to Blob Conversion', function () {
    (0, _globals.it)('should convert file URI to blob', (0, _asyncToGenerator2.default)(function* () {
      var uri = 'file://test-image.jpg';
      var base64Data = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==';
      mockFileSystem.readAsStringAsync.mockResolvedValue(base64Data);
      var blob = yield service.fileUriToBlob(uri);
      (0, _globals.expect)(blob).toBeInstanceOf(Blob);
      (0, _globals.expect)(blob.type).toBe('image/jpeg');
      (0, _globals.expect)(blob.size).toBeGreaterThan(0);
    }));
    (0, _globals.it)('should handle file read errors', (0, _asyncToGenerator2.default)(function* () {
      mockFileSystem.readAsStringAsync.mockRejectedValue(new Error('File read failed'));
      yield (0, _globals.expect)(service.fileUriToBlob('invalid-uri')).rejects.toThrow('File read failed');
    }));
    (0, _globals.it)('should handle empty base64 data', (0, _asyncToGenerator2.default)(function* () {
      mockFileSystem.readAsStringAsync.mockResolvedValue('');
      var blob = yield service.fileUriToBlob('empty-file');
      (0, _globals.expect)(blob.size).toBe(0);
    }));
  });
  (0, _globals.describe)('Retry Upload', function () {
    (0, _globals.it)('should retry upload with backoff', (0, _asyncToGenerator2.default)(function* () {
      var expectedResult = {
        uploadId: 'retry-success'
      };
      mockUploadWithRetry.mockResolvedValue(expectedResult);
      var result = yield service.retryUpload(mockProcessedImage, 'pet', 'pet-123', 3);
      (0, _globals.expect)(mockUploadWithRetry).toHaveBeenCalledWith(_globals.expect.any(Function), 3, 1000);
      (0, _globals.expect)(result).toEqual(expectedResult);
    }));
    (0, _globals.it)('should use default retry parameters', (0, _asyncToGenerator2.default)(function* () {
      mockUploadWithRetry.mockResolvedValue({
        uploadId: 'default-retry'
      });
      yield service.retryUpload(mockProcessedImage);
      (0, _globals.expect)(mockUploadWithRetry).toHaveBeenCalledWith(_globals.expect.any(Function), 3, 1000);
    }));
    (0, _globals.it)('should handle retry failures', (0, _asyncToGenerator2.default)(function* () {
      mockUploadWithRetry.mockRejectedValue(new Error('All retries failed'));
      yield (0, _globals.expect)(service.retryUpload(mockProcessedImage)).rejects.toThrow('All retries failed');
    }));
  });
  (0, _globals.describe)('Error Handling and Edge Cases', function () {
    (0, _globals.it)('should handle very long URIs', (0, _asyncToGenerator2.default)(function* () {
      var longUri = 'file://' + 'a'.repeat(1000) + '.jpg';
      var longImage = _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: longUri
      });
      yield service.uploadProcessedImage(longImage);
      (0, _globals.expect)(mockFetch).toHaveBeenCalled();
    }));
    (0, _globals.it)('should handle special characters in URIs', (0, _asyncToGenerator2.default)(function* () {
      var specialUri = 'file://test image (copy).jpg';
      var specialImage = _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: specialUri
      });
      yield service.uploadProcessedImage(specialImage);
      (0, _globals.expect)(mockFileSystem.readAsStringAsync).toHaveBeenCalledWith(specialUri, _globals.expect.any(Object));
    }));
    (0, _globals.it)('should handle network timeouts during upload', (0, _asyncToGenerator2.default)(function* () {
      mockFetch.mockRejectedValue(new Error('Network timeout'));
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow('Network timeout');
    }));
    (0, _globals.it)('should handle malformed presign responses', (0, _asyncToGenerator2.default)(function* () {
      mockApi.presignPhoto.mockResolvedValue({});
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow();
    }));
    (0, _globals.it)('should handle concurrent uploads', (0, _asyncToGenerator2.default)(function* () {
      var uploadPromises = [service.uploadProcessedImage(_objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'img1.jpg'
      })), service.uploadProcessedImage(_objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'img2.jpg'
      })), service.uploadProcessedImage(_objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        uri: 'img3.jpg'
      }))];
      var results = yield Promise.all(uploadPromises);
      (0, _globals.expect)(results).toHaveLength(3);
      results.forEach(function (result) {
        (0, _globals.expect)(result.uploadId).toBe('upload-123');
      });
    }));
    (0, _globals.it)('should handle extremely large files', (0, _asyncToGenerator2.default)(function* () {
      var hugeImage = _objectSpread(_objectSpread({}, mockProcessedImage), {}, {
        fileSize: 100 * 1024 * 1024
      });
      var largeBase64 = 'A'.repeat(1024 * 1024);
      mockFileSystem.readAsStringAsync.mockResolvedValue(largeBase64);
      yield service.uploadProcessedImage(hugeImage);
      (0, _globals.expect)(mockFetch).toHaveBeenCalledWith(_globals.expect.any(String), _globals.expect.objectContaining({
        body: _globals.expect.any(Blob)
      }));
    }));
    (0, _globals.it)('should handle malformed processed images', (0, _asyncToGenerator2.default)(function* () {
      var malformedImage = {
        uri: 'test.jpg'
      };
      yield (0, _globals.expect)(service.uploadProcessedImage(malformedImage)).rejects.toThrow();
    }));
    (0, _globals.it)('should handle upload registration with missing response fields', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValue({
        data: {
          upload: {}
        }
      });
      var result = yield service.uploadProcessedImage(mockProcessedImage);
      (0, _globals.expect)(result).toEqual({
        uploadId: '',
        s3Key: 'test-key-123',
        url: _globals.expect.stringContaining('s3.amazonaws.com'),
        status: 'pending',
        analysis: undefined
      });
    }));
    (0, _globals.it)('should handle progress callback errors gracefully', (0, _asyncToGenerator2.default)(function* () {
      var errorCallback = _globals.jest.fn().mockImplementation(function () {
        throw new Error('Progress callback failed');
      });
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage, 'pet', undefined, errorCallback)).resolves.toBeDefined();
    }));
    (0, _globals.it)('should handle file system read errors during blob conversion', (0, _asyncToGenerator2.default)(function* () {
      mockFileSystem.readAsStringAsync.mockRejectedValue(new Error('File system error'));
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow('File system error');
    }));
    (0, _globals.it)('should handle invalid base64 data', (0, _asyncToGenerator2.default)(function* () {
      mockFileSystem.readAsStringAsync.mockResolvedValue('invalid base64!@#$%');
      yield (0, _globals.expect)(service.uploadProcessedImage(mockProcessedImage)).rejects.toThrow();
    }));
    (0, _globals.it)('should handle polling with invalid upload IDs', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockRejectedValue(new Error('Upload not found'));
      yield (0, _globals.expect)(service.pollUploadStatus('invalid-id')).rejects.toThrow('Upload not found');
    }));
    (0, _globals.it)('should handle batch upload with all failures', (0, _asyncToGenerator2.default)(function* () {
      mockFetch.mockResolvedValue({
        ok: false
      });
      var images = [mockProcessedImage, mockProcessedImage];
      var results = yield service.uploadBatch(images);
      (0, _globals.expect)(results).toEqual([]);
    }));
    (0, _globals.it)('should handle duplicate check with malformed responses', (0, _asyncToGenerator2.default)(function* () {
      mockRequest.mockResolvedValue({
        data: 'invalid response format'
      });
      var result = yield service.checkDuplicate('upload-123');
      (0, _globals.expect)(result).toEqual({
        isDuplicate: false
      });
    }));
    (0, _globals.it)('should handle retry with invalid parameters', (0, _asyncToGenerator2.default)(function* () {
      mockUploadWithRetry.mockRejectedValue(new Error('Invalid retry params'));
      yield (0, _globals.expect)(service.retryUpload(mockProcessedImage, 'invalid')).rejects.toThrow('Invalid retry params');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJwcm9jZXNzSW1hZ2VGb3JVcGxvYWQiLCJqZXN0IiwiZm4iLCJjaGVja1VwbG9hZFF1b3RhIiwidXBsb2FkV2l0aFJldHJ5IiwicGlja0FuZFByb2Nlc3NJbWFnZSIsImNhcHR1cmVBbmRQcm9jZXNzSW1hZ2UiLCJhcGkiLCJwcmVzaWduUGhvdG8iLCJyZXF1ZXN0IiwiRW5jb2RpbmdUeXBlIiwiQmFzZTY0IiwiVVRGOCIsInJlYWRBc1N0cmluZ0FzeW5jIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZGVmaW5lUHJvcGVydHkyIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2dsb2JhbHMiLCJGaWxlU3lzdGVtIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfZW5oYW5jZWRVcGxvYWRTZXJ2aWNlIiwiX3VwbG9hZEh5Z2llbmUiLCJfYXBpIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90MiIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIl9yZXF1aXJlIiwibW9ja0FwaSIsIm1vY2tSZXF1ZXN0IiwibW9ja1Byb2Nlc3NJbWFnZUZvclVwbG9hZCIsIm1vY2tDaGVja1VwbG9hZFF1b3RhIiwibW9ja1VwbG9hZFdpdGhSZXRyeSIsIm1vY2tQaWNrQW5kUHJvY2Vzc0ltYWdlIiwibW9ja0NhcHR1cmVBbmRQcm9jZXNzSW1hZ2UiLCJtb2NrRmlsZVN5c3RlbSIsIm1vY2tGZXRjaCIsImdsb2JhbCIsImZldGNoIiwiZGVzY3JpYmUiLCJzZXJ2aWNlIiwibW9ja1Byb2Nlc3NlZEltYWdlIiwibW9ja1Byb2dyZXNzQ2FsbGJhY2siLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIkVuaGFuY2VkVXBsb2FkU2VydmljZSIsImluc3RhbmNlIiwidW5kZWZpbmVkIiwiZ2V0SW5zdGFuY2UiLCJ1cmkiLCJ3aWR0aCIsImhlaWdodCIsImZpbGVTaXplIiwibWltZVR5cGUiLCJtZXRhZGF0YSIsIm9yaWdpbmFsV2lkdGgiLCJvcmlnaW5hbEhlaWdodCIsIm9yaWVudGF0aW9uRml4ZWQiLCJleGlmU3RyaXBwZWQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImtleSIsInVybCIsIm9rIiwiZGF0YSIsInVwbG9hZCIsIl9pZCIsInMzS2V5Iiwic3RhdHVzIiwiYWZ0ZXJFYWNoIiwiY2xlYXJBbGxUaW1lcnMiLCJpdCIsImluc3RhbmNlMSIsImluc3RhbmNlMiIsImV4cGVjdCIsInRvQmUiLCJ0b0JlRGVmaW5lZCIsInJlc3VsdCIsInVwbG9hZFByb2Nlc3NlZEltYWdlIiwidG9FcXVhbCIsInVwbG9hZElkIiwiYW5hbHlzaXMiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInBoYXNlIiwicGVyY2VudCIsIm1lc3NhZ2UiLCJ0eXBlcyIsInR5cGUiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJtZXRob2QiLCJib2R5Iiwib2JqZWN0Q29udGFpbmluZyIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwicmVqZWN0cyIsInRvVGhyb3ciLCJzdGF0dXNUZXh0IiwiZW5jb2RpbmciLCJhbnkiLCJTdHJpbmciLCJCbG9iIiwic3RyaW5nQ29udGFpbmluZyIsImxhcmdlSW1hZ2UiLCJhbGxvd2VkIiwicmVtYWluaW5nIiwicmVzZXRBdCIsIkRhdGUiLCJsaW1pdCIsInVwbG9hZEZyb21QaWNrZXIiLCJwZXRJZCIsImFsbG93RWRpdGluZyIsInVzZUNhbWVyYSIsIm1heERpbWVuc2lvbiIsInF1YWxpdHkiLCJhcHByb3ZlZFJlc3BvbnNlIiwic2FmZXR5IiwibGFiZWxzIiwicG9sbFVwbG9hZFN0YXR1cyIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImZsYWdSZWFzb24iLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJpbWFnZXMiLCJyZXN1bHRzIiwidXBsb2FkQmF0Y2giLCJ0b0hhdmVMZW5ndGgiLCJtb2NrUmVzcG9uc2UiLCJpc0R1cGxpY2F0ZSIsInNpbWlsYXJJbWFnZXMiLCJjaGVja0R1cGxpY2F0ZSIsImJhc2U2NERhdGEiLCJibG9iIiwiZmlsZVVyaVRvQmxvYiIsInRvQmVJbnN0YW5jZU9mIiwic2l6ZSIsInRvQmVHcmVhdGVyVGhhbiIsImV4cGVjdGVkUmVzdWx0IiwicmV0cnlVcGxvYWQiLCJGdW5jdGlvbiIsImxvbmdVcmkiLCJyZXBlYXQiLCJsb25nSW1hZ2UiLCJzcGVjaWFsVXJpIiwic3BlY2lhbEltYWdlIiwidXBsb2FkUHJvbWlzZXMiLCJQcm9taXNlIiwiYWxsIiwiaHVnZUltYWdlIiwibGFyZ2VCYXNlNjQiLCJtYWxmb3JtZWRJbWFnZSIsImVycm9yQ2FsbGJhY2siLCJtb2NrSW1wbGVtZW50YXRpb24iLCJyZXNvbHZlcyJdLCJzb3VyY2VzIjpbImVuaGFuY2VkVXBsb2FkU2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0cyBmb3IgRW5oYW5jZWRVcGxvYWRTZXJ2aWNlXG4gKlxuICogQ292ZXJhZ2U6XG4gKiAtIENvbXBsZXRlIHVwbG9hZCBwaXBlbGluZSBmcm9tIHByb2Nlc3NpbmcgdG8gcmVnaXN0cmF0aW9uXG4gKiAtIFByb2dyZXNzIHRyYWNraW5nIGFuZCBjYWxsYmFja3NcbiAqIC0gQmF0Y2ggdXBsb2FkIG9wZXJhdGlvbnNcbiAqIC0gVXBsb2FkIHN0YXR1cyBwb2xsaW5nXG4gKiAtIER1cGxpY2F0ZSBjaGVja2luZ1xuICogLSBSZXRyeSBsb2dpYyB3aXRoIGJhY2tvZmZcbiAqIC0gRXJyb3IgaGFuZGxpbmcgYW5kIHJlY292ZXJ5XG4gKiAtIEZpbGUgVVJJIHRvIGJsb2IgY29udmVyc2lvblxuICogLSBRdW90YSBjaGVja2luZyBpbnRlZ3JhdGlvblxuICogLSBTaW5nbGV0b24gcGF0dGVyblxuICogLSBDb25jdXJyZW50IG9wZXJhdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgamVzdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgKiBhcyBGaWxlU3lzdGVtIGZyb20gJ2V4cG8tZmlsZS1zeXN0ZW0nO1xuaW1wb3J0IHsgRW5oYW5jZWRVcGxvYWRTZXJ2aWNlLCB0eXBlIFByb2Nlc3NlZEltYWdlLCB0eXBlIFVwbG9hZFByb2dyZXNzIH0gZnJvbSAnLi4vZW5oYW5jZWRVcGxvYWRTZXJ2aWNlJztcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vdXBsb2FkSHlnaWVuZScsICgpID0+ICh7XG4gIHByb2Nlc3NJbWFnZUZvclVwbG9hZDogamVzdC5mbigpLFxuICBjaGVja1VwbG9hZFF1b3RhOiBqZXN0LmZuKCksXG4gIHVwbG9hZFdpdGhSZXRyeTogamVzdC5mbigpLFxuICBwaWNrQW5kUHJvY2Vzc0ltYWdlOiBqZXN0LmZuKCksXG4gIGNhcHR1cmVBbmRQcm9jZXNzSW1hZ2U6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKCcuLi9hcGknLCAoKSA9PiAoe1xuICBhcGk6IHtcbiAgICBwcmVzaWduUGhvdG86IGplc3QuZm4oKSxcbiAgfSxcbiAgcmVxdWVzdDogamVzdC5mbigpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ2V4cG8tZmlsZS1zeXN0ZW0nLCAoKSA9PiAoe1xuICBFbmNvZGluZ1R5cGU6IHtcbiAgICBCYXNlNjQ6ICdiYXNlNjQnLFxuICAgIFVURjg6ICd1dGY4JyxcbiAgfSxcbiAgcmVhZEFzU3RyaW5nQXN5bmM6IGplc3QuZm4oKSxcbn0pKTtcblxuaW1wb3J0IHsgcHJvY2Vzc0ltYWdlRm9yVXBsb2FkLCBjaGVja1VwbG9hZFF1b3RhLCB1cGxvYWRXaXRoUmV0cnksIHBpY2tBbmRQcm9jZXNzSW1hZ2UsIGNhcHR1cmVBbmRQcm9jZXNzSW1hZ2UgfSBmcm9tICcuLi91cGxvYWRIeWdpZW5lJztcbmltcG9ydCB7IGFwaSwgcmVxdWVzdCB9IGZyb20gJy4uL2FwaSc7XG5cbmNvbnN0IG1vY2tBcGkgPSBhcGkgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGFwaT47XG5jb25zdCBtb2NrUmVxdWVzdCA9IHJlcXVlc3QgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgcmVxdWVzdD47XG5jb25zdCBtb2NrUHJvY2Vzc0ltYWdlRm9yVXBsb2FkID0gcHJvY2Vzc0ltYWdlRm9yVXBsb2FkIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHByb2Nlc3NJbWFnZUZvclVwbG9hZD47XG5jb25zdCBtb2NrQ2hlY2tVcGxvYWRRdW90YSA9IGNoZWNrVXBsb2FkUXVvdGEgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgY2hlY2tVcGxvYWRRdW90YT47XG5jb25zdCBtb2NrVXBsb2FkV2l0aFJldHJ5ID0gdXBsb2FkV2l0aFJldHJ5IGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVwbG9hZFdpdGhSZXRyeT47XG5jb25zdCBtb2NrUGlja0FuZFByb2Nlc3NJbWFnZSA9IHBpY2tBbmRQcm9jZXNzSW1hZ2UgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgcGlja0FuZFByb2Nlc3NJbWFnZT47XG5jb25zdCBtb2NrQ2FwdHVyZUFuZFByb2Nlc3NJbWFnZSA9IGNhcHR1cmVBbmRQcm9jZXNzSW1hZ2UgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgY2FwdHVyZUFuZFByb2Nlc3NJbWFnZT47XG5jb25zdCBtb2NrRmlsZVN5c3RlbSA9IEZpbGVTeXN0ZW0gYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIEZpbGVTeXN0ZW0+O1xuXG4vLyBNb2NrIGZldGNoIGdsb2JhbGx5XG5jb25zdCBtb2NrRmV0Y2ggPSBqZXN0LmZuKCk7XG5nbG9iYWwuZmV0Y2ggPSBtb2NrRmV0Y2g7XG5cbmRlc2NyaWJlKCdFbmhhbmNlZFVwbG9hZFNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBzZXJ2aWNlOiBFbmhhbmNlZFVwbG9hZFNlcnZpY2U7XG4gIGxldCBtb2NrUHJvY2Vzc2VkSW1hZ2U6IFByb2Nlc3NlZEltYWdlO1xuICBsZXQgbW9ja1Byb2dyZXNzQ2FsbGJhY2s6IGplc3QuTW9ja2VkRnVuY3Rpb248KHByb2dyZXNzOiBVcGxvYWRQcm9ncmVzcykgPT4gdm9pZD47XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICAvLyBSZXNldCBzaW5nbGV0b25cbiAgICAoRW5oYW5jZWRVcGxvYWRTZXJ2aWNlIGFzIGFueSkuaW5zdGFuY2UgPSB1bmRlZmluZWQ7XG5cbiAgICBzZXJ2aWNlID0gRW5oYW5jZWRVcGxvYWRTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG5cbiAgICBtb2NrUHJvY2Vzc2VkSW1hZ2UgPSB7XG4gICAgICB1cmk6ICdmaWxlOi8vdGVzdC1pbWFnZS5qcGcnLFxuICAgICAgd2lkdGg6IDEwMjQsXG4gICAgICBoZWlnaHQ6IDc2OCxcbiAgICAgIGZpbGVTaXplOiAyNTYwMDAsXG4gICAgICBtaW1lVHlwZTogJ2ltYWdlL2pwZWcnLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgb3JpZ2luYWxXaWR0aDogMjA0OCxcbiAgICAgICAgb3JpZ2luYWxIZWlnaHQ6IDE1MzYsXG4gICAgICAgIG9yaWVudGF0aW9uRml4ZWQ6IHRydWUsXG4gICAgICAgIGV4aWZTdHJpcHBlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIG1vY2tQcm9ncmVzc0NhbGxiYWNrID0gamVzdC5mbigpO1xuXG4gICAgLy8gU2V0dXAgZGVmYXVsdCBtb2Nrc1xuICAgIG1vY2tBcGkucHJlc2lnblBob3RvLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGtleTogJ3Rlc3Qta2V5LTEyMycsXG4gICAgICB1cmw6ICdodHRwczovL3MzLmFtYXpvbmF3cy5jb20vdGVzdC1idWNrZXQvdGVzdC1rZXktMTIzJyxcbiAgICB9KTtcblxuICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBvazogdHJ1ZSxcbiAgICB9IGFzIGFueSk7XG5cbiAgICBtb2NrUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVwbG9hZDoge1xuICAgICAgICAgIF9pZDogJ3VwbG9hZC0xMjMnLFxuICAgICAgICAgIHMzS2V5OiAndGVzdC1rZXktMTIzJyxcbiAgICAgICAgICB1cmw6ICdodHRwczovL2Nkbi5leGFtcGxlLmNvbS90ZXN0LWtleS0xMjMnLFxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIG1vY2tGaWxlU3lzdGVtLnJlYWRBc1N0cmluZ0FzeW5jLm1vY2tSZXNvbHZlZFZhbHVlKCdiYXNlNjRkYXRhJyk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbFRpbWVycygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2luZ2xldG9uIFBhdHRlcm4nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIHNhbWUgaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZTEgPSBFbmhhbmNlZFVwbG9hZFNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IEVuaGFuY2VkVXBsb2FkU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuXG4gICAgICBleHBlY3QoaW5zdGFuY2UxKS50b0JlKGluc3RhbmNlMik7XG4gICAgICBleHBlY3QoaW5zdGFuY2UxKS50b0JlKHNlcnZpY2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBzdGF0ZSBhY3Jvc3MgY2FsbHMnLCAoKSA9PiB7XG4gICAgICAvLyBUaGlzIGlzIGltcGxpY2l0IGluIHRoZSBzaW5nbGV0b24gcGF0dGVyblxuICAgICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGxvYWRQcm9jZXNzZWRJbWFnZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIGZ1bGwgdXBsb2FkIHBpcGVsaW5lIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UoXG4gICAgICAgIG1vY2tQcm9jZXNzZWRJbWFnZSxcbiAgICAgICAgJ3BldCcsXG4gICAgICAgICdwZXQtMTIzJyxcbiAgICAgICAgbW9ja1Byb2dyZXNzQ2FsbGJhY2tcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1cGxvYWRJZDogJ3VwbG9hZC0xMjMnLFxuICAgICAgICBzM0tleTogJ3Rlc3Qta2V5LTEyMycsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2RuLmV4YW1wbGUuY29tL3Rlc3Qta2V5LTEyMycsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICBhbmFseXNpczogdW5kZWZpbmVkLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIHByb2dyZXNzIGNhbGxiYWNrc1xuICAgICAgZXhwZWN0KG1vY2tQcm9ncmVzc0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHBoYXNlOiAncHJlc2lnbicsXG4gICAgICAgIHBlcmNlbnQ6IDEwLFxuICAgICAgICBtZXNzYWdlOiAnUmVxdWVzdGluZyB1cGxvYWQgVVJMLi4uJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgcGhhc2U6ICd1cGxvYWQnLFxuICAgICAgICBwZXJjZW50OiAzMCxcbiAgICAgICAgbWVzc2FnZTogJ1VwbG9hZGluZyB0byBzZWN1cmUgc3RvcmFnZS4uLicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tQcm9ncmVzc0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHBoYXNlOiAncmVnaXN0ZXInLFxuICAgICAgICBwZXJjZW50OiA2MCxcbiAgICAgICAgbWVzc2FnZTogJ1JlZ2lzdGVyaW5nIHVwbG9hZC4uLicsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tQcm9ncmVzc0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHBoYXNlOiAnYW5hbHl6ZScsXG4gICAgICAgIHBlcmNlbnQ6IDgwLFxuICAgICAgICBtZXNzYWdlOiAnQW5hbHl6aW5nIHBob3RvLi4uJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgcGhhc2U6ICdwZW5kaW5nJyxcbiAgICAgICAgcGVyY2VudDogOTAsXG4gICAgICAgIG1lc3NhZ2U6ICdBd2FpdGluZyBtb2RlcmF0aW9uLi4uJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGlmZmVyZW50IHVwbG9hZCB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHR5cGVzOiBBcnJheTwncHJvZmlsZScgfCAncGV0JyB8ICd2ZXJpZmljYXRpb24nPiA9IFsncHJvZmlsZScsICdwZXQnLCAndmVyaWZpY2F0aW9uJ107XG5cbiAgICAgIGZvciAoY29uc3QgdHlwZSBvZiB0eXBlcykge1xuICAgICAgICBtb2NrUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHVwbG9hZDoge1xuICAgICAgICAgICAgICBfaWQ6IGB1cGxvYWQtJHt0eXBlfWAsXG4gICAgICAgICAgICAgIHMzS2V5OiBga2V5LSR7dHlwZX1gLFxuICAgICAgICAgICAgICB1cmw6IGB1cmwtJHt0eXBlfWAsXG4gICAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSwgdHlwZSk7XG5cbiAgICAgICAgZXhwZWN0KG1vY2tSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL3VwbG9hZHMnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgYm9keTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0eXBlIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3QocmVzdWx0LnVwbG9hZElkKS50b0JlKGB1cGxvYWQtJHt0eXBlfWApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGhvdXQgcHJvZ3Jlc3MgY2FsbGJhY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwcmVzaWduIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXBpLnByZXNpZ25QaG90by5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1ByZXNpZ24gZmFpbGVkJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGxvYWRQcm9jZXNzZWRJbWFnZShtb2NrUHJvY2Vzc2VkSW1hZ2UpKS5yZWplY3RzLnRvVGhyb3coJ1ByZXNpZ24gZmFpbGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBTMyB1cGxvYWQgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBvazogZmFsc2UsXG4gICAgICAgIHN0YXR1czogNDAzLFxuICAgICAgICBzdGF0dXNUZXh0OiAnRm9yYmlkZGVuJyxcbiAgICAgIH0gYXMgYW55KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UobW9ja1Byb2Nlc3NlZEltYWdlKSkucmVqZWN0cy50b1Rocm93KCdTMyB1cGxvYWQgZmFpbGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZWdpc3RyYXRpb24gZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUmVnaXN0cmF0aW9uIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UobW9ja1Byb2Nlc3NlZEltYWdlKSkucmVqZWN0cy50b1Rocm93KCdSZWdpc3RyYXRpb24gZmFpbGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlIFVSSSB0byBibG9iIGNvbnZlcnNpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUaGlzIGlzIHRlc3RlZCBpbXBsaWNpdGx5IHRocm91Z2ggdGhlIHVwbG9hZCBwcm9jZXNzXG4gICAgICAvLyBUaGUgZmlsZVVyaVRvQmxvYiBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBkdXJpbmcgdXBsb2FkXG4gICAgICBhd2FpdCBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSk7XG5cbiAgICAgIGV4cGVjdChtb2NrRmlsZVN5c3RlbS5yZWFkQXNTdHJpbmdBc3luYykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIG1vY2tQcm9jZXNzZWRJbWFnZS51cmksXG4gICAgICAgIHsgZW5jb2Rpbmc6IEZpbGVTeXN0ZW0uRW5jb2RpbmdUeXBlLkJhc2U2NCB9XG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICBib2R5OiBleHBlY3QuYW55KEJsb2IpLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3Npbmcgb3B0aW9uYWwgZmllbGRzIGluIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdXBsb2FkOiB7XG4gICAgICAgICAgICAvLyBNaXNzaW5nIGlkLCBzM0tleSwgdXJsXG4gICAgICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1cGxvYWRJZDogJycsXG4gICAgICAgIHMzS2V5OiAndGVzdC1rZXktMTIzJywgLy8gRmFsbHMgYmFjayB0byBwcmVzaWduZWQga2V5XG4gICAgICAgIHVybDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ3MzLmFtYXpvbmF3cy5jb20nKSwgLy8gRmFsbHMgYmFjayB0byBjb25zdHJ1Y3RlZCBVUkxcbiAgICAgICAgc3RhdHVzOiAnYXBwcm92ZWQnLFxuICAgICAgICBhbmFseXNpczogdW5kZWZpbmVkLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBmaWxlIHVwbG9hZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZUltYWdlID0ge1xuICAgICAgICAuLi5tb2NrUHJvY2Vzc2VkSW1hZ2UsXG4gICAgICAgIGZpbGVTaXplOiAxMCAqIDEwMjQgKiAxMDI0LCAvLyAxME1CXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKGxhcmdlSW1hZ2UpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBsb2FkRnJvbVBpY2tlcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIGZ1bGwgcGlwZWxpbmUgZnJvbSBwaWNrZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2hlY2tVcGxvYWRRdW90YS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGFsbG93ZWQ6IHRydWUsXG4gICAgICAgIHJlbWFpbmluZzogNSxcbiAgICAgICAgcmVzZXRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tQaWNrQW5kUHJvY2Vzc0ltYWdlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcm9jZXNzZWRJbWFnZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudXBsb2FkRnJvbVBpY2tlcihcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdwcm9maWxlJyxcbiAgICAgICAgICBwZXRJZDogJ3BldC00NTYnLFxuICAgICAgICAgIGFsbG93RWRpdGluZzogZmFsc2UsXG4gICAgICAgICAgdXNlQ2FtZXJhOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgbW9ja1Byb2dyZXNzQ2FsbGJhY2tcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2hlY2tVcGxvYWRRdW90YSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2N1cnJlbnQtdXNlci1pZCcpO1xuICAgICAgZXhwZWN0KG1vY2tQaWNrQW5kUHJvY2Vzc0ltYWdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChmYWxzZSwge1xuICAgICAgICBtYXhEaW1lbnNpb246IDIwNDgsXG4gICAgICAgIHF1YWxpdHk6IDAuOSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgY2FtZXJhIHdoZW4gc3BlY2lmaWVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NoZWNrVXBsb2FkUXVvdGEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBhbGxvd2VkOiB0cnVlLFxuICAgICAgICByZW1haW5pbmc6IDUsXG4gICAgICAgIHJlc2V0QXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrQ2FwdHVyZUFuZFByb2Nlc3NJbWFnZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvY2Vzc2VkSW1hZ2UpO1xuXG4gICAgICBhd2FpdCBzZXJ2aWNlLnVwbG9hZEZyb21QaWNrZXIoe1xuICAgICAgICB1c2VDYW1lcmE6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tDYXB0dXJlQW5kUHJvY2Vzc0ltYWdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIG1heERpbWVuc2lvbjogMjA0OCxcbiAgICAgICAgcXVhbGl0eTogMC45LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrUGlja0FuZFByb2Nlc3NJbWFnZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHF1b3RhIGV4Y2VlZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NoZWNrVXBsb2FkUXVvdGEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBhbGxvd2VkOiBmYWxzZSxcbiAgICAgICAgcmVtYWluaW5nOiAwLFxuICAgICAgICByZXNldEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBsb2FkRnJvbVBpY2tlcigpKS5yZWplY3RzLnRvVGhyb3coJ1VwbG9hZCBxdW90YSBleGNlZWRlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW1hZ2UgcGlja2VyIGNhbmNlbGxhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaGVja1VwbG9hZFF1b3RhLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgYWxsb3dlZDogdHJ1ZSxcbiAgICAgICAgcmVtYWluaW5nOiA1LFxuICAgICAgICByZXNldEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICB9KTtcblxuICAgICAgbW9ja1BpY2tBbmRQcm9jZXNzSW1hZ2UubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnVwbG9hZEZyb21QaWNrZXIoKSkucmVqZWN0cy50b1Rocm93KCdObyBpbWFnZSBzZWxlY3RlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgZGVmYXVsdCBvcHRpb25zIHdoZW4gbm90IHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NoZWNrVXBsb2FkUXVvdGEubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBhbGxvd2VkOiB0cnVlLFxuICAgICAgICByZW1haW5pbmc6IDUsXG4gICAgICAgIHJlc2V0QXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrUGlja0FuZFByb2Nlc3NJbWFnZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJvY2Vzc2VkSW1hZ2UpO1xuXG4gICAgICBhd2FpdCBzZXJ2aWNlLnVwbG9hZEZyb21QaWNrZXIoKTtcblxuICAgICAgZXhwZWN0KG1vY2tQaWNrQW5kUHJvY2Vzc0ltYWdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0cnVlLCB7XG4gICAgICAgIG1heERpbWVuc2lvbjogMjA0OCxcbiAgICAgICAgcXVhbGl0eTogMC45LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBxdW90YSBjaGVjayBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NoZWNrVXBsb2FkUXVvdGEubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdRdW90YSBzZXJ2aWNlIHVuYXZhaWxhYmxlJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGxvYWRGcm9tUGlja2VyKCkpLnJlamVjdHMudG9UaHJvdygnUXVvdGEgc2VydmljZSB1bmF2YWlsYWJsZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncG9sbFVwbG9hZFN0YXR1cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHBvbGwgdW50aWwgYXBwcm92ZWQgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwcm92ZWRSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVwbG9hZDoge1xuICAgICAgICAgICAgczNLZXk6ICdhcHByb3ZlZC1rZXknLFxuICAgICAgICAgICAgdXJsOiAnYXBwcm92ZWQtdXJsJyxcbiAgICAgICAgICAgIHN0YXR1czogJ2FwcHJvdmVkJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuYWx5c2lzOiB7IHNhZmV0eTogJ3NhZmUnLCBsYWJlbHM6IFsnZG9nJ10gfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKGFwcHJvdmVkUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnBvbGxVcGxvYWRTdGF0dXMoJ3VwbG9hZC0xMjMnLCA1LCAxMDApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdXBsb2FkSWQ6ICd1cGxvYWQtMTIzJyxcbiAgICAgICAgczNLZXk6ICdhcHByb3ZlZC1rZXknLFxuICAgICAgICB1cmw6ICdhcHByb3ZlZC11cmwnLFxuICAgICAgICBzdGF0dXM6ICdhcHByb3ZlZCcsXG4gICAgICAgIGFuYWx5c2lzOiBhcHByb3ZlZFJlc3BvbnNlLmRhdGEuYW5hbHlzaXMsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZWplY3RlZCBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB1cGxvYWQ6IHtcbiAgICAgICAgICAgIHN0YXR1czogJ3JlamVjdGVkJyxcbiAgICAgICAgICAgIGZsYWdSZWFzb246ICdJbmFwcHJvcHJpYXRlIGNvbnRlbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucG9sbFVwbG9hZFN0YXR1cygndXBsb2FkLTEyMycpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdVcGxvYWQgcmVqZWN0ZWQ6IEluYXBwcm9wcmlhdGUgY29udGVudCdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBvbGwgbXVsdGlwbGUgdGltZXMgZm9yIHBlbmRpbmcgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRmlyc3QgMiBjYWxscyByZXR1cm4gcGVuZGluZ1xuICAgICAgbW9ja1JlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgZGF0YTogeyB1cGxvYWQ6IHsgc3RhdHVzOiAncGVuZGluZycgfSB9LFxuICAgICAgfSk7XG4gICAgICBtb2NrUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBkYXRhOiB7IHVwbG9hZDogeyBzdGF0dXM6ICdhbmFseXppbmcnIH0gfSxcbiAgICAgIH0pO1xuICAgICAgLy8gVGhpcmQgY2FsbCByZXR1cm5zIGFwcHJvdmVkXG4gICAgICBtb2NrUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdXBsb2FkOiB7XG4gICAgICAgICAgICBzM0tleTogJ2ZpbmFsLWtleScsXG4gICAgICAgICAgICB1cmw6ICdmaW5hbC11cmwnLFxuICAgICAgICAgICAgc3RhdHVzOiAnYXBwcm92ZWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVXNlIHJlYWwgdGltZXJzIHdpdGggZmFzdCBpbnRlcnZhbHMgZm9yIHJlbGlhYmxlIGFzeW5jIGJlaGF2aW9yXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnBvbGxVcGxvYWRTdGF0dXMoJ3VwbG9hZC0xMjMnLCA1LCAxMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKCdhcHByb3ZlZCcpO1xuICAgICAgZXhwZWN0KG1vY2tSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7XG4gICAgfSwgMTAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCB0aW1lb3V0IGFmdGVyIG1heCBhdHRlbXB0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YTogeyB1cGxvYWQ6IHsgc3RhdHVzOiAncGVuZGluZycgfSB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFVzZSByZWFsIHRpbWVycyB3aXRoIGZhc3QgaW50ZXJ2YWxzXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UucG9sbFVwbG9hZFN0YXR1cygndXBsb2FkLTEyMycsIDMsIDEwKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1VwbG9hZCBzdGF0dXMgcG9sbGluZyB0aW1lb3V0Jyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0sIDEwMDAwKTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvcnMgZHVyaW5nIHBvbGxpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWVzdC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpO1xuICAgICAgbW9ja1JlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgZGF0YTogeyB1cGxvYWQ6IHsgc3RhdHVzOiAnYXBwcm92ZWQnIH0gfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnBvbGxVcGxvYWRTdGF0dXMoJ3VwbG9hZC0xMjMnLCAzLCAxMCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKCdhcHByb3ZlZCcpO1xuICAgICAgLy8gU2hvdWxkIGNvbnRpbnVlIHBvbGxpbmcgZGVzcGl0ZSBlcnJvclxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgZGVmYXVsdCBwb2xsaW5nIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IHsgdXBsb2FkOiB7IHN0YXR1czogJ2FwcHJvdmVkJyB9IH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgc2VydmljZS5wb2xsVXBsb2FkU3RhdHVzKCd1cGxvYWQtMTIzJyk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy91cGxvYWRzL3VwbG9hZC0xMjMnLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3VwbG9hZEJhdGNoJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXBsb2FkIG11bHRpcGxlIGltYWdlcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbWFnZXMgPSBbXG4gICAgICAgIHsgLi4ubW9ja1Byb2Nlc3NlZEltYWdlLCB1cmk6ICdpbWFnZTEuanBnJyB9LFxuICAgICAgICB7IC4uLm1vY2tQcm9jZXNzZWRJbWFnZSwgdXJpOiAnaW1hZ2UyLmpwZycgfSxcbiAgICAgICAgeyAuLi5tb2NrUHJvY2Vzc2VkSW1hZ2UsIHVyaTogJ2ltYWdlMy5qcGcnIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBtb2NrUHJvZ3Jlc3NDYWxsYmFjayA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHNlcnZpY2UudXBsb2FkQmF0Y2goaW1hZ2VzLCAncGV0JywgJ3BldC0xMjMnLCBtb2NrUHJvZ3Jlc3NDYWxsYmFjayk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcblxuICAgICAgLy8gQ2hlY2sgcHJvZ3Jlc3MgY2FsbGJhY2tzIGZvciBlYWNoIGltYWdlXG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDAsIHtcbiAgICAgICAgcGhhc2U6ICdwcmVzaWduJyxcbiAgICAgICAgcGVyY2VudDogMCxcbiAgICAgICAgbWVzc2FnZTogJ1Byb2Nlc3NpbmcgcGhvdG8gMS8zJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEsIHtcbiAgICAgICAgcGhhc2U6ICdwcmVzaWduJyxcbiAgICAgICAgcGVyY2VudDogMCxcbiAgICAgICAgbWVzc2FnZTogJ1Byb2Nlc3NpbmcgcGhvdG8gMi8zJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1Byb2dyZXNzQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIsIHtcbiAgICAgICAgcGhhc2U6ICdwcmVzaWduJyxcbiAgICAgICAgcGVyY2VudDogMCxcbiAgICAgICAgbWVzc2FnZTogJ1Byb2Nlc3NpbmcgcGhvdG8gMy8zJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGFydGlhbCBmYWlsdXJlcyBpbiBiYXRjaCB1cGxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbWFnZXMgPSBbXG4gICAgICAgIG1vY2tQcm9jZXNzZWRJbWFnZSxcbiAgICAgICAgeyAuLi5tb2NrUHJvY2Vzc2VkSW1hZ2UsIHVyaTogJ2ZhaWwtaW1hZ2UuanBnJyB9LFxuICAgICAgICBtb2NrUHJvY2Vzc2VkSW1hZ2UsXG4gICAgICBdO1xuXG4gICAgICAvLyBNYWtlIHNlY29uZCB1cGxvYWQgZmFpbFxuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IG9rOiB0cnVlIH0gYXMgYW55KTtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IHsgdXBsb2FkOiB7IF9pZDogJ3VwbG9hZDEnIH0gfSB9KTtcblxuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IG9rOiBmYWxzZSB9IGFzIGFueSk7IC8vIFNlY29uZCB1cGxvYWQgZmFpbHNcblxuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IG9rOiB0cnVlIH0gYXMgYW55KTtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IHsgdXBsb2FkOiB7IF9pZDogJ3VwbG9hZDMnIH0gfSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHNlcnZpY2UudXBsb2FkQmF0Y2goaW1hZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgyKTsgLy8gT25seSBzdWNjZXNzZnVsIHVwbG9hZHNcbiAgICAgIGV4cGVjdChyZXN1bHRzWzBdLnVwbG9hZElkKS50b0JlKCd1cGxvYWQxJyk7XG4gICAgICBleHBlY3QocmVzdWx0c1sxXS51cGxvYWRJZCkudG9CZSgndXBsb2FkMycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGhvdXQgcHJvZ3Jlc3MgY2FsbGJhY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbWFnZXMgPSBbbW9ja1Byb2Nlc3NlZEltYWdlXTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHNlcnZpY2UudXBsb2FkQmF0Y2goaW1hZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGJhdGNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHNlcnZpY2UudXBsb2FkQmF0Y2goW10pO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjaGVja0R1cGxpY2F0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNoZWNrIGZvciBkdXBsaWNhdGUgdXBsb2FkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlzRHVwbGljYXRlOiB0cnVlLFxuICAgICAgICAgIHNpbWlsYXJJbWFnZXM6IFsnc2ltaWxhcjEuanBnJywgJ3NpbWlsYXIyLmpwZyddLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja1JlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jaGVja0R1cGxpY2F0ZSgndXBsb2FkLTEyMycpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaXNEdXBsaWNhdGU6IHRydWUsXG4gICAgICAgIHNpbWlsYXJJbWFnZXM6IFsnc2ltaWxhcjEuanBnJywgJ3NpbWlsYXIyLmpwZyddLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy91cGxvYWRzL3VwbG9hZC0xMjMvZHVwbGljYXRlLWNoZWNrJywge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBubyBkdXBsaWNhdGVzIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaXNEdXBsaWNhdGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja1JlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jaGVja0R1cGxpY2F0ZSgndXBsb2FkLTQ1NicpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaXNEdXBsaWNhdGU6IGZhbHNlLFxuICAgICAgICBzaW1pbGFySW1hZ2VzOiB1bmRlZmluZWQsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRHVwbGljYXRlIGNoZWNrIGZhaWxlZCcpKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jaGVja0R1cGxpY2F0ZSgndXBsb2FkLTc4OScpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaXNEdXBsaWNhdGU6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWxlIFVSSSB0byBCbG9iIENvbnZlcnNpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb252ZXJ0IGZpbGUgVVJJIHRvIGJsb2InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmkgPSAnZmlsZTovL3Rlc3QtaW1hZ2UuanBnJztcbiAgICAgIGNvbnN0IGJhc2U2NERhdGEgPSAnaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBRFVsRVFWUjQybVA4LzUraEhnQUhnZ0ovUGNoSTd3QUFBQUJKUlU1RXJrSmdnZz09JztcblxuICAgICAgbW9ja0ZpbGVTeXN0ZW0ucmVhZEFzU3RyaW5nQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUoYmFzZTY0RGF0YSk7XG5cbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmZpbGVVcmlUb0Jsb2IodXJpKTtcblxuICAgICAgZXhwZWN0KGJsb2IpLnRvQmVJbnN0YW5jZU9mKEJsb2IpO1xuICAgICAgZXhwZWN0KGJsb2IudHlwZSkudG9CZSgnaW1hZ2UvanBlZycpO1xuICAgICAgZXhwZWN0KGJsb2Iuc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSByZWFkIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGaWxlU3lzdGVtLnJlYWRBc1N0cmluZ0FzeW5jLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRmlsZSByZWFkIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KChzZXJ2aWNlIGFzIGFueSkuZmlsZVVyaVRvQmxvYignaW52YWxpZC11cmknKSkucmVqZWN0cy50b1Rocm93KCdGaWxlIHJlYWQgZmFpbGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBiYXNlNjQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGaWxlU3lzdGVtLnJlYWRBc1N0cmluZ0FzeW5jLm1vY2tSZXNvbHZlZFZhbHVlKCcnKTtcblxuICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuZmlsZVVyaVRvQmxvYignZW1wdHktZmlsZScpO1xuXG4gICAgICBleHBlY3QoYmxvYi5zaXplKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmV0cnkgVXBsb2FkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cnkgdXBsb2FkIHdpdGggYmFja29mZicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0geyB1cGxvYWRJZDogJ3JldHJ5LXN1Y2Nlc3MnIH07XG5cbiAgICAgIG1vY2tVcGxvYWRXaXRoUmV0cnkubW9ja1Jlc29sdmVkVmFsdWUoZXhwZWN0ZWRSZXN1bHQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnJldHJ5VXBsb2FkKG1vY2tQcm9jZXNzZWRJbWFnZSwgJ3BldCcsICdwZXQtMTIzJywgMyk7XG5cbiAgICAgIGV4cGVjdChtb2NrVXBsb2FkV2l0aFJldHJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LmFueShGdW5jdGlvbiksXG4gICAgICAgIDMsXG4gICAgICAgIDEwMDBcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoZXhwZWN0ZWRSZXN1bHQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgZGVmYXVsdCByZXRyeSBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VwbG9hZFdpdGhSZXRyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHVwbG9hZElkOiAnZGVmYXVsdC1yZXRyeScgfSk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UucmV0cnlVcGxvYWQobW9ja1Byb2Nlc3NlZEltYWdlKTtcblxuICAgICAgZXhwZWN0KG1vY2tVcGxvYWRXaXRoUmV0cnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3QuYW55KEZ1bmN0aW9uKSxcbiAgICAgICAgMywgLy8gZGVmYXVsdCBtYXhSZXRyaWVzXG4gICAgICAgIDEwMDAgLy8gZGVmYXVsdCBiYWNrb2ZmTXNcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZXRyeSBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tVcGxvYWRXaXRoUmV0cnkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdBbGwgcmV0cmllcyBmYWlsZWQnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJldHJ5VXBsb2FkKG1vY2tQcm9jZXNzZWRJbWFnZSkpLnJlamVjdHMudG9UaHJvdygnQWxsIHJldHJpZXMgZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBhbmQgRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxvbmcgVVJJcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdVcmkgPSAnZmlsZTovLycgKyAnYScucmVwZWF0KDEwMDApICsgJy5qcGcnO1xuXG4gICAgICBjb25zdCBsb25nSW1hZ2UgPSB7IC4uLm1vY2tQcm9jZXNzZWRJbWFnZSwgdXJpOiBsb25nVXJpIH07XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UobG9uZ0ltYWdlKTtcblxuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIFVSSXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzcGVjaWFsVXJpID0gJ2ZpbGU6Ly90ZXN0IGltYWdlIChjb3B5KS5qcGcnO1xuXG4gICAgICBjb25zdCBzcGVjaWFsSW1hZ2UgPSB7IC4uLm1vY2tQcm9jZXNzZWRJbWFnZSwgdXJpOiBzcGVjaWFsVXJpIH07XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2Uoc3BlY2lhbEltYWdlKTtcblxuICAgICAgZXhwZWN0KG1vY2tGaWxlU3lzdGVtLnJlYWRBc1N0cmluZ0FzeW5jKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChzcGVjaWFsVXJpLCBleHBlY3QuYW55KE9iamVjdCkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmV0d29yayB0aW1lb3V0cyBkdXJpbmcgdXBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayB0aW1lb3V0JykpO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGxvYWRQcm9jZXNzZWRJbWFnZShtb2NrUHJvY2Vzc2VkSW1hZ2UpKS5yZWplY3RzLnRvVGhyb3coJ05ldHdvcmsgdGltZW91dCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIHByZXNpZ24gcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaS5wcmVzaWduUGhvdG8ubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAvLyBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgICAgLy8gU2hvdWxkIGZhaWwgd2hlbiB0cnlpbmcgdG8gYWNjZXNzIHVuZGVmaW5lZCB1cmwva2V5XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHVwbG9hZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGxvYWRQcm9taXNlcyA9IFtcbiAgICAgICAgc2VydmljZS51cGxvYWRQcm9jZXNzZWRJbWFnZSh7IC4uLm1vY2tQcm9jZXNzZWRJbWFnZSwgdXJpOiAnaW1nMS5qcGcnIH0pLFxuICAgICAgICBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKHsgLi4ubW9ja1Byb2Nlc3NlZEltYWdlLCB1cmk6ICdpbWcyLmpwZycgfSksXG4gICAgICAgIHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UoeyAuLi5tb2NrUHJvY2Vzc2VkSW1hZ2UsIHVyaTogJ2ltZzMuanBnJyB9KSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh1cGxvYWRQcm9taXNlcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC51cGxvYWRJZCkudG9CZSgndXBsb2FkLTEyMycpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBleHRyZW1lbHkgbGFyZ2UgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBodWdlSW1hZ2UgPSB7XG4gICAgICAgIC4uLm1vY2tQcm9jZXNzZWRJbWFnZSxcbiAgICAgICAgZmlsZVNpemU6IDEwMCAqIDEwMjQgKiAxMDI0LCAvLyAxMDBNQlxuICAgICAgfTtcblxuICAgICAgLy8gTW9jayByZWFkaW5nIGxhcmdlIGJhc2U2NCBkYXRhXG4gICAgICBjb25zdCBsYXJnZUJhc2U2NCA9ICdBJy5yZXBlYXQoMTAyNCAqIDEwMjQpOyAvLyAxTUIgb2YgYmFzZTY0XG4gICAgICBtb2NrRmlsZVN5c3RlbS5yZWFkQXNTdHJpbmdBc3luYy5tb2NrUmVzb2x2ZWRWYWx1ZShsYXJnZUJhc2U2NCk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UoaHVnZUltYWdlKTtcblxuICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGJvZHk6IGV4cGVjdC5hbnkoQmxvYiksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIHByb2Nlc3NlZCBpbWFnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxmb3JtZWRJbWFnZSA9IHtcbiAgICAgICAgdXJpOiAndGVzdC5qcGcnLFxuICAgICAgICAvLyBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgfSBhcyBQcm9jZXNzZWRJbWFnZTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBsb2FkUHJvY2Vzc2VkSW1hZ2UobWFsZm9ybWVkSW1hZ2UpKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVwbG9hZCByZWdpc3RyYXRpb24gd2l0aCBtaXNzaW5nIHJlc3BvbnNlIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHVwbG9hZDoge30sIC8vIEVtcHR5IHVwbG9hZCBvYmplY3RcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB1cGxvYWRJZDogJycsXG4gICAgICAgIHMzS2V5OiAndGVzdC1rZXktMTIzJyxcbiAgICAgICAgdXJsOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnczMuYW1hem9uYXdzLmNvbScpLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgYW5hbHlzaXM6IHVuZGVmaW5lZCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvckNhbGxiYWNrID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvZ3Jlc3MgY2FsbGJhY2sgZmFpbGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBmYWlsIHRoZSB1cGxvYWQgZHVlIHRvIHByb2dyZXNzIGNhbGxiYWNrIGVycm9yXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGxvYWRQcm9jZXNzZWRJbWFnZShtb2NrUHJvY2Vzc2VkSW1hZ2UsICdwZXQnLCB1bmRlZmluZWQsIGVycm9yQ2FsbGJhY2spKS5yZXNvbHZlcy50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSBzeXN0ZW0gcmVhZCBlcnJvcnMgZHVyaW5nIGJsb2IgY29udmVyc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGaWxlU3lzdGVtLnJlYWRBc1N0cmluZ0FzeW5jLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRmlsZSBzeXN0ZW0gZXJyb3InKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSkpLnJlamVjdHMudG9UaHJvdygnRmlsZSBzeXN0ZW0gZXJyb3InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgYmFzZTY0IGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmlsZVN5c3RlbS5yZWFkQXNTdHJpbmdBc3luYy5tb2NrUmVzb2x2ZWRWYWx1ZSgnaW52YWxpZCBiYXNlNjQhQCMkJScpO1xuXG4gICAgICAvLyBhdG9iIHdpbGwgdGhyb3cgb24gaW52YWxpZCBiYXNlNjQsIGJ1dCB0aGUgbWV0aG9kIHNob3VsZCBoYW5kbGUgaXRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnVwbG9hZFByb2Nlc3NlZEltYWdlKG1vY2tQcm9jZXNzZWRJbWFnZSkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcG9sbGluZyB3aXRoIGludmFsaWQgdXBsb2FkIElEcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVXBsb2FkIG5vdCBmb3VuZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucG9sbFVwbG9hZFN0YXR1cygnaW52YWxpZC1pZCcpKS5yZWplY3RzLnRvVGhyb3coJ1VwbG9hZCBub3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGJhdGNoIHVwbG9hZCB3aXRoIGFsbCBmYWlsdXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG9rOiBmYWxzZSB9IGFzIGFueSk7XG5cbiAgICAgIGNvbnN0IGltYWdlcyA9IFttb2NrUHJvY2Vzc2VkSW1hZ2UsIG1vY2tQcm9jZXNzZWRJbWFnZV07XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc2VydmljZS51cGxvYWRCYXRjaChpbWFnZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkdXBsaWNhdGUgY2hlY2sgd2l0aCBtYWxmb3JtZWQgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JlcXVlc3QubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBkYXRhOiAnaW52YWxpZCByZXNwb25zZSBmb3JtYXQnLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY2hlY2tEdXBsaWNhdGUoJ3VwbG9hZC0xMjMnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGlzRHVwbGljYXRlOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmV0cnkgd2l0aCBpbnZhbGlkIHBhcmFtZXRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVXBsb2FkV2l0aFJldHJ5Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignSW52YWxpZCByZXRyeSBwYXJhbXMnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJldHJ5VXBsb2FkKG1vY2tQcm9jZXNzZWRJbWFnZSwgJ2ludmFsaWQnIGFzIGFueSkpLnJlamVjdHMudG9UaHJvdygnSW52YWxpZCBy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