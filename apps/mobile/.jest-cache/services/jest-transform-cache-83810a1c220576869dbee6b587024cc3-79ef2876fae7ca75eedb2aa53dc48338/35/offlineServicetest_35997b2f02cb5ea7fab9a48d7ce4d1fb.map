{"version":3,"names":["_getJestObj","mock","api","getPets","jest","fn","getMatches","getMessages","sendMessage","updateUserProfile","logger","info","error","warn","_interopRequireDefault","require","_slicedToArray2","_asyncToGenerator2","_globals","_asyncStorage","_netinfo","_offlineService","_api","_core","_require","mockAsyncStorage","AsyncStorage","mockNetInfo","NetInfo","mockApi","mockLogger","describe","service","mockNetworkListener","beforeEach","clearAllMocks","OfflineService","instance","undefined","getItem","mockResolvedValue","setItem","removeItem","getAllKeys","addEventListener","mockReturnValue","remove","fetch","isConnected","type","isInternetReachable","afterEach","clearAllTimers","it","offlineData","expect","pets","toEqual","user","toBeNull","matches","messages","pendingActions","lastSync","toBe","default","storedData","id","name","data","timestamp","retryCount","JSON","stringify","newService","Promise","resolve","setTimeout","toHaveBeenCalled","networkListener","calls","isOnline","states","forEach","state","status","getSyncStatus","isSyncing","lastSyncTime","any","String","pendingActionsCount","syncProgress","listener1","listener2","unsubscribe1","addSyncStatusListener","unsubscribe2","notifyListeners","toHaveBeenCalledWith","Object","toHaveBeenCalledTimes","addPendingAction","petId","direction","toHaveLength","action","matchId","message","_offlineData$pendingA","action1","action2","not","executeActionSpy","spyOn","syncPendingActions","mockImplementationOnce","Error","mockRejectedValue","i","onlinePets","result","offlinePets","getUser","onlineMatches","content","every","msg","onlineMessages","swipePet","profileData","bio","updateProfile","performMatchAction","syncPendingActionsSpy","syncFromServerSpy","mockImplementation","triggerSync","toBeDefined","promise","saveOfflineData","savedData","parse","clearOfflineData","key","sizes","key1","repeat","key2","key3","size","getStorageSize","useFakeTimers","useRealTimers","triggerSyncSpy","advanceTimersByTime","largePets","Array","from","length","_","getOfflineData","operations","results","all","listener","unsubscribe","syncListeners","toContain","listeners","unsubscribes","map","_result$user","self","Date","toISOString","toThrow","invalidActions","invalidAction"],"sources":["offlineService.test.ts"],"sourcesContent":["/**\n * Comprehensive tests for OfflineService\n *\n * Coverage:\n * - Offline data storage and retrieval\n * - Network monitoring and online/offline detection\n * - Pending actions queuing and synchronization\n * - Data synchronization from server to local storage\n * - Offline-first data access patterns\n * - Sync status tracking and listeners\n * - Error handling and recovery\n * - Storage size management\n * - Concurrent operations and race conditions\n */\n\nimport { describe, it, expect, jest, beforeEach, afterEach } from '@jest/globals';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport NetInfo, { type NetInfoState } from '@react-native-community/netinfo';\nimport { offlineService, OfflineService } from '../offlineService';\n\n// Mock dependencies\njest.mock('@react-native-async-storage/async-storage');\njest.mock('@react-native-community/netinfo');\njest.mock('../api', () => ({\n  api: {\n    getPets: jest.fn(),\n    getMatches: jest.fn(),\n    getMessages: jest.fn(),\n    sendMessage: jest.fn(),\n    updateUserProfile: jest.fn(),\n  },\n}));\n\njest.mock('@pawfectmatch/core', () => ({\n  logger: {\n    info: jest.fn(),\n    error: jest.fn(),\n    warn: jest.fn(),\n  },\n}));\n\nimport { api } from '../api';\nimport { logger } from '@pawfectmatch/core';\n\nconst mockAsyncStorage = AsyncStorage as jest.Mocked<typeof AsyncStorage>;\nconst mockNetInfo = NetInfo as jest.Mocked<typeof NetInfo>;\nconst mockApi = api as jest.Mocked<typeof api>;\nconst mockLogger = logger as jest.Mocked<typeof logger>;\n\ndescribe('OfflineService', () => {\n  let service: OfflineService;\n  let mockNetworkListener: jest.Mock;\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n\n    // Reset singleton instance\n    (OfflineService as any).instance = undefined;\n\n    // Setup default mocks\n    mockAsyncStorage.getItem.mockResolvedValue(null);\n    mockAsyncStorage.setItem.mockResolvedValue(undefined);\n    mockAsyncStorage.removeItem.mockResolvedValue(undefined);\n    mockAsyncStorage.getAllKeys.mockResolvedValue(['offline_data', 'other_key']);\n\n    mockNetworkListener = jest.fn();\n    mockNetInfo.addEventListener.mockReturnValue({ remove: mockNetworkListener });\n\n    mockNetInfo.fetch.mockResolvedValue({\n      isConnected: true,\n      type: 'wifi',\n      isInternetReachable: true,\n    } as NetInfoState);\n\n    // Mock successful API calls\n    mockApi.getPets.mockResolvedValue([]);\n    mockApi.getMatches.mockResolvedValue([]);\n    mockApi.getMessages.mockResolvedValue([]);\n    mockApi.sendMessage.mockResolvedValue(undefined);\n    mockApi.updateUserProfile.mockResolvedValue(undefined);\n\n    service = new OfflineService();\n  });\n\n  afterEach(() => {\n    jest.clearAllTimers();\n  });\n\n  describe('Initialization', () => {\n    it('should initialize with default offline data', () => {\n      const offlineData = (service as any).offlineData;\n\n      expect(offlineData.pets).toEqual([]);\n      expect(offlineData.user).toBeNull();\n      expect(offlineData.matches).toEqual([]);\n      expect(offlineData.messages).toEqual([]);\n      expect(offlineData.pendingActions).toEqual([]);\n      expect(typeof offlineData.lastSync).toBe('string');\n    });\n\n    it('should load offline data from storage', async () => {\n      const storedData = {\n        pets: [{ id: 'pet1', name: 'Buddy' }],\n        user: { id: 'user1', name: 'John' },\n        matches: [{ id: 'match1' }],\n        messages: [{ id: 'msg1' }],\n        lastSync: '2024-01-01T00:00:00Z',\n        pendingActions: [{ id: 'action1', type: 'swipe', data: {}, timestamp: '2024-01-01T00:00:00Z', retryCount: 0 }],\n      };\n\n      mockAsyncStorage.getItem.mockResolvedValue(JSON.stringify(storedData));\n\n      const newService = new OfflineService();\n      await new Promise(resolve => setTimeout(resolve, 0)); // Allow async initialization\n\n      const offlineData = (newService as any).offlineData;\n      expect(offlineData.pets).toEqual(storedData.pets);\n      expect(offlineData.user).toEqual(storedData.user);\n      expect(offlineData.pendingActions).toEqual(storedData.pendingActions);\n    });\n\n    it('should handle corrupted offline data gracefully', async () => {\n      mockAsyncStorage.getItem.mockResolvedValue('invalid json');\n\n      const newService = new OfflineService();\n      await new Promise(resolve => setTimeout(resolve, 0));\n\n      const offlineData = (newService as any).offlineData;\n      expect(offlineData.pets).toEqual([]); // Should use defaults\n    });\n\n    it('should setup network monitoring', () => {\n      expect(mockNetInfo.addEventListener).toHaveBeenCalled();\n      expect(mockNetInfo.fetch).toHaveBeenCalled();\n    });\n  });\n\n  describe('Network Monitoring', () => {\n    it('should detect going online and trigger sync', () => {\n      const networkListener = mockNetInfo.addEventListener.mock.calls[0][0];\n\n      // Start offline\n      (service as any).isOnline = false;\n\n      // Go online\n      networkListener({\n        isConnected: true,\n        type: 'wifi',\n        isInternetReachable: true,\n      } as NetInfoState);\n\n      expect((service as any).isOnline).toBe(true);\n      // Note: triggerSync would be called, but we can't easily test the async call\n    });\n\n    it('should detect going offline', () => {\n      const networkListener = mockNetInfo.addEventListener.mock.calls[0][0];\n\n      // Go offline\n      networkListener({\n        isConnected: false,\n        type: 'none',\n        isInternetReachable: false,\n      } as NetInfoState);\n\n      expect((service as any).isOnline).toBe(false);\n    });\n\n    it('should handle network state changes', () => {\n      const networkListener = mockNetInfo.addEventListener.mock.calls[0][0];\n\n      // Test various network states\n      const states: NetInfoState[] = [\n        { isConnected: true, type: 'wifi', isInternetReachable: true },\n        { isConnected: true, type: 'cellular', isInternetReachable: true },\n        { isConnected: false, type: 'none', isInternetReachable: false },\n        { isConnected: true, type: 'wifi', isInternetReachable: false }, // Edge case\n      ];\n\n      states.forEach(state => {\n        networkListener(state);\n        expect((service as any).isOnline).toBe(state.isConnected === true);\n      });\n    });\n  });\n\n  describe('Sync Status and Listeners', () => {\n    it('should provide current sync status', () => {\n      const status = service.getSyncStatus();\n\n      expect(status).toEqual({\n        isOnline: true,\n        isSyncing: false,\n        lastSyncTime: expect.any(String),\n        pendingActionsCount: 0,\n        syncProgress: 1.0,\n      });\n    });\n\n    it('should update sync status during sync', async () => {\n      (service as any).isSyncing = true;\n      (service as any).offlineData.pendingActions = [{ id: 'action1' }, { id: 'action2' }];\n\n      const status = service.getSyncStatus();\n\n      expect(status.isSyncing).toBe(true);\n      expect(status.pendingActionsCount).toBe(2);\n      expect(status.syncProgress).toBe(0.5);\n    });\n\n    it('should notify listeners when status changes', () => {\n      const listener1 = jest.fn();\n      const listener2 = jest.fn();\n\n      const unsubscribe1 = service.addSyncStatusListener(listener1);\n      const unsubscribe2 = service.addSyncStatusListener(listener2);\n\n      // Trigger notification\n      (service as any).notifyListeners();\n\n      expect(listener1).toHaveBeenCalledWith(expect.any(Object));\n      expect(listener2).toHaveBeenCalledWith(expect.any(Object));\n\n      // Unsubscribe\n      unsubscribe1();\n      (service as any).notifyListeners();\n\n      expect(listener1).toHaveBeenCalledTimes(1); // Not called again\n      expect(listener2).toHaveBeenCalledTimes(2); // Still called\n    });\n  });\n\n  describe('Pending Actions', () => {\n    it('should add pending actions', () => {\n      service.addPendingAction('swipe', { petId: 'pet1', direction: 'like' });\n\n      const offlineData = (service as any).offlineData;\n      expect(offlineData.pendingActions).toHaveLength(1);\n\n      const action = offlineData.pendingActions[0];\n      expect(action.type).toBe('swipe');\n      expect(action.data).toEqual({ petId: 'pet1', direction: 'like' });\n      expect(action.retryCount).toBe(0);\n      expect(typeof action.id).toBe('string');\n      expect(typeof action.timestamp).toBe('string');\n    });\n\n    it('should generate unique action IDs', () => {\n      service.addPendingAction('message', { matchId: 'match1', message: 'Hello' });\n      service.addPendingAction('message', { matchId: 'match2', message: 'Hi' });\n\n      const offlineData = (service as any).offlineData;\n      expect(offlineData.pendingActions).toHaveLength(2);\n\n      const [action1, action2] = offlineData.pendingActions;\n      expect(action1.id).not.toBe(action2.id);\n    });\n\n    it('should sync pending actions successfully', async () => {\n      // Add some pending actions\n      service.addPendingAction('swipe', { petId: 'pet1', direction: 'like' });\n      service.addPendingAction('message', { matchId: 'match1', message: 'Hello' });\n\n      // Mock successful execution\n      const executeActionSpy = jest.spyOn(service as any, 'executePendingAction');\n      executeActionSpy.mockResolvedValue(undefined);\n\n      await (service as any).syncPendingActions();\n\n      expect(executeActionSpy).toHaveBeenCalledTimes(2);\n      expect((service as any).offlineData.pendingActions).toHaveLength(0); // Actions cleared\n    });\n\n    it('should handle failed pending actions with retry logic', async () => {\n      service.addPendingAction('swipe', { petId: 'pet1', direction: 'like' });\n      service.addPendingAction('message', { matchId: 'match1', message: 'Hello' });\n\n      const executeActionSpy = jest.spyOn(service as any, 'executePendingAction');\n\n      // First action fails, second succeeds\n      executeActionSpy.mockImplementationOnce(() => {\n        throw new Error('Action failed');\n      });\n      executeActionSpy.mockImplementationOnce(() => Promise.resolve());\n\n      await (service as any).syncPendingActions();\n\n      const offlineData = (service as any).offlineData;\n      expect(offlineData.pendingActions).toHaveLength(1); // Failed action remains\n      expect(offlineData.pendingActions[0].retryCount).toBe(1);\n    });\n\n    it('should remove actions after max retries', async () => {\n      service.addPendingAction('swipe', { petId: 'pet1', direction: 'like' });\n\n      const executeActionSpy = jest.spyOn(service as any, 'executePendingAction');\n\n      // Fail multiple times\n      executeActionSpy.mockRejectedValue(new Error('Persistent failure'));\n\n      // Simulate multiple sync attempts\n      for (let i = 0; i < 3; i++) {\n        await (service as any).syncPendingActions();\n      }\n\n      expect((service as any).offlineData.pendingActions).toHaveLength(0); // Action removed\n    });\n  });\n\n  describe('Offline-First Data Access', () => {\n    it('should get pets with online preference', async () => {\n      const onlinePets = [{ id: 'pet1', name: 'Buddy' }, { id: 'pet2', name: 'Luna' }];\n      mockApi.getPets.mockResolvedValue(onlinePets);\n\n      const result = await service.getPets();\n\n      expect(result).toEqual(onlinePets);\n      expect(mockApi.getPets).toHaveBeenCalled();\n      expect((service as any).offlineData.pets).toEqual(onlinePets); // Should cache\n    });\n\n    it('should fallback to offline pets when online fetch fails', async () => {\n      const offlinePets = [{ id: 'pet1', name: 'Buddy' }];\n      (service as any).offlineData.pets = offlinePets;\n\n      mockApi.getPets.mockRejectedValue(new Error('Network error'));\n\n      const result = await service.getPets();\n\n      expect(result).toEqual(offlinePets);\n      expect(mockLogger.warn).toHaveBeenCalledWith(\n        'Failed to fetch pets online, using offline data',\n        expect.any(Object)\n      );\n    });\n\n    it('should return offline pets when offline', async () => {\n      (service as any).isOnline = false;\n      const offlinePets = [{ id: 'pet1', name: 'Buddy' }];\n      (service as any).offlineData.pets = offlinePets;\n\n      const result = await service.getPets();\n\n      expect(result).toEqual(offlinePets);\n      expect(mockApi.getPets).not.toHaveBeenCalled();\n    });\n\n    it('should get user data', () => {\n      const user = { id: 'user1', name: 'John Doe' };\n      (service as any).offlineData.user = user;\n\n      const result = service.getUser();\n\n      expect(result).toEqual(user);\n    });\n\n    it('should get matches with caching', async () => {\n      const onlineMatches = [{ id: 'match1' }, { id: 'match2' }];\n      mockApi.getMatches.mockResolvedValue(onlineMatches);\n\n      const result = await service.getMatches();\n\n      expect(result).toEqual(onlineMatches);\n      expect((service as any).offlineData.matches).toEqual(onlineMatches);\n    });\n\n    it('should get messages for specific match', async () => {\n      const messages = [\n        { id: 'msg1', matchId: 'match1', content: 'Hello' },\n        { id: 'msg2', matchId: 'match2', content: 'Hi' },\n        { id: 'msg3', matchId: 'match1', content: 'How are you?' },\n      ];\n      (service as any).offlineData.messages = messages;\n\n      const result = await service.getMessages('match1');\n\n      expect(result).toHaveLength(2);\n      expect(result.every(msg => msg.matchId === 'match1')).toBe(true);\n    });\n\n    it('should cache messages when fetching online', async () => {\n      const onlineMessages = [\n        { id: 'msg1', content: 'Hello' },\n        { id: 'msg2', content: 'Hi there' },\n      ];\n      mockApi.getMessages.mockResolvedValue(onlineMessages);\n\n      const result = await service.getMessages('match1');\n\n      expect(result).toEqual(onlineMessages);\n      expect((service as any).offlineData.messages).toEqual(onlineMessages);\n    });\n  });\n\n  describe('Offline-Aware Actions', () => {\n    it('should perform swipe actions offline-aware', () => {\n      service.swipePet('pet1', 'like');\n\n      const offlineData = (service as any).offlineData;\n      expect(offlineData.pendingActions).toHaveLength(1);\n      expect(offlineData.pendingActions[0].type).toBe('swipe');\n      expect(offlineData.pendingActions[0].data).toEqual({ petId: 'pet1', direction: 'like' });\n    });\n\n    it('should send messages offline-aware', async () => {\n      await service.sendMessage('match1', 'Hello there!');\n\n      expect(mockApi.sendMessage).toHaveBeenCalledWith('match1', 'Hello there!');\n    });\n\n    it('should queue messages when offline', async () => {\n      (service as any).isOnline = false;\n\n      await service.sendMessage('match1', 'Offline message');\n\n      expect(mockApi.sendMessage).not.toHaveBeenCalled();\n      expect((service as any).offlineData.pendingActions[0].type).toBe('message');\n    });\n\n    it('should queue messages when online send fails', async () => {\n      mockApi.sendMessage.mockRejectedValue(new Error('Send failed'));\n\n      await service.sendMessage('match1', 'Failed message');\n\n      expect((service as any).offlineData.pendingActions[0].type).toBe('message');\n      expect(mockLogger.warn).toHaveBeenCalledWith(\n        'Failed to send message online, queuing for offline',\n        expect.any(Object)\n      );\n    });\n\n    it('should update profile offline-aware', async () => {\n      const profileData = { name: 'John Updated', bio: 'New bio' };\n\n      await service.updateProfile(profileData);\n\n      expect(mockApi.updateUserProfile).toHaveBeenCalledWith(profileData);\n    });\n\n    it('should queue profile updates when offline', async () => {\n      (service as any).isOnline = false;\n      const profileData = { name: 'Offline Update' };\n\n      await service.updateProfile(profileData);\n\n      expect(mockApi.updateUserProfile).not.toHaveBeenCalled();\n      expect((service as any).offlineData.pendingActions[0].type).toBe('profile_update');\n    });\n\n    it('should perform match actions', () => {\n      service.performMatchAction('match1', 'unmatch');\n\n      expect((service as any).offlineData.pendingActions[0].type).toBe('match_action');\n      expect((service as any).offlineData.pendingActions[0].data).toEqual({\n        matchId: 'match1',\n        action: 'unmatch'\n      });\n    });\n  });\n\n  describe('Data Synchronization', () => {\n    it('should trigger sync when online', async () => {\n      const syncPendingActionsSpy = jest.spyOn(service as any, 'syncPendingActions');\n      const syncFromServerSpy = jest.spyOn(service as any, 'syncFromServer');\n\n      syncPendingActionsSpy.mockResolvedValue(undefined);\n      syncFromServerSpy.mockImplementation(() => {});\n\n      await service.triggerSync();\n\n      expect(syncPendingActionsSpy).toHaveBeenCalled();\n      expect(syncFromServerSpy).toHaveBeenCalled();\n      expect((service as any).offlineData.lastSync).toBeDefined();\n    });\n\n    it('should not sync when offline', async () => {\n      (service as any).isOnline = false;\n\n      await service.triggerSync();\n\n      expect((service as any).isSyncing).toBe(false);\n    });\n\n    it('should not start concurrent syncs', async () => {\n      (service as any).isSyncing = true;\n\n      await service.triggerSync();\n\n      expect((service as any).isSyncing).toBe(true); // Still syncing\n    });\n\n    it('should handle sync errors gracefully', async () => {\n      const syncPendingActionsSpy = jest.spyOn(service as any, 'syncPendingActions');\n      syncPendingActionsSpy.mockRejectedValue(new Error('Sync failed'));\n\n      await service.triggerSync();\n\n      expect((service as any).isSyncing).toBe(false); // Should reset sync state\n      expect(mockLogger.error).toHaveBeenCalledWith('Sync failed', expect.any(Object));\n    });\n\n    it('should update sync progress during sync', async () => {\n      const syncPendingActionsSpy = jest.spyOn(service as any, 'syncPendingActions');\n      syncPendingActionsSpy.mockImplementation(async () => {\n        // Simulate some work\n        await new Promise(resolve => setTimeout(resolve, 10));\n      });\n\n      const promise = service.triggerSync();\n\n      // Should be syncing during the operation\n      expect(service.getSyncStatus().isSyncing).toBe(true);\n\n      await promise;\n\n      // Should not be syncing after completion\n      expect(service.getSyncStatus().isSyncing).toBe(false);\n    });\n  });\n\n  describe('Data Persistence', () => {\n    it('should save offline data to storage', async () => {\n      (service as any).offlineData.pets = [{ id: 'pet1' }];\n      (service as any).offlineData.user = { id: 'user1' };\n\n      await (service as any).saveOfflineData();\n\n      expect(mockAsyncStorage.setItem).toHaveBeenCalledWith(\n        'offline_data',\n        expect.any(String)\n      );\n\n      const savedData = JSON.parse(mockAsyncStorage.setItem.mock.calls[0][1]);\n      expect(savedData.pets).toEqual([{ id: 'pet1' }]);\n      expect(savedData.user).toEqual({ id: 'user1' });\n    });\n\n    it('should handle storage save errors gracefully', async () => {\n      mockAsyncStorage.setItem.mockRejectedValue(new Error('Storage error'));\n\n      await (service as any).saveOfflineData();\n\n      // Should not throw, should log error\n      expect(mockLogger.error).toHaveBeenCalledWith(\n        'Failed to save offline data',\n        expect.any(Object)\n      );\n    });\n\n    it('should clear offline data', async () => {\n      // Setup some data\n      (service as any).offlineData.pets = [{ id: 'pet1' }];\n      (service as any).offlineData.pendingActions = [{ id: 'action1' }];\n\n      await service.clearOfflineData();\n\n      expect(mockAsyncStorage.removeItem).toHaveBeenCalledWith('offline_data');\n      expect((service as any).offlineData.pets).toEqual([]);\n      expect((service as any).offlineData.pendingActions).toEqual([]);\n    });\n\n    it('should handle clear data errors gracefully', async () => {\n      mockAsyncStorage.removeItem.mockRejectedValue(new Error('Clear error'));\n\n      await service.clearOfflineData();\n\n      expect(mockLogger.error).toHaveBeenCalledWith(\n        'Failed to clear offline data',\n        expect.any(Object)\n      );\n    });\n  });\n\n  describe('Storage Size Management', () => {\n    it('should calculate total storage size', async () => {\n      mockAsyncStorage.getAllKeys.mockResolvedValue(['key1', 'key2', 'key3']);\n      mockAsyncStorage.getItem.mockImplementation((key) => {\n        const sizes: Record<string, string> = {\n          key1: 'x'.repeat(100),\n          key2: 'y'.repeat(200),\n          key3: 'z'.repeat(50),\n        };\n        return Promise.resolve(sizes[key] || null);\n      });\n\n      const size = await service.getStorageSize();\n\n      expect(size).toBe(350); // 100 + 200 + 50\n    });\n\n    it('should handle storage size calculation errors', async () => {\n      mockAsyncStorage.getAllKeys.mockRejectedValue(new Error('Keys error'));\n\n      const size = await service.getStorageSize();\n\n      expect(size).toBe(0);\n      expect(mockLogger.error).toHaveBeenCalledWith(\n        'Failed to get storage size',\n        expect.any(Object)\n      );\n    });\n\n    it('should handle null/empty values in storage size calculation', async () => {\n      mockAsyncStorage.getAllKeys.mockResolvedValue(['key1', 'key2']);\n      mockAsyncStorage.getItem.mockImplementation((key) => {\n        if (key === 'key1') return Promise.resolve('data');\n        if (key === 'key2') return Promise.resolve(null);\n        return Promise.resolve(null);\n      });\n\n      const size = await service.getStorageSize();\n\n      expect(size).toBe(4); // Only 'data' length\n    });\n  });\n\n  describe('Periodic Sync', () => {\n    beforeEach(() => {\n      jest.useFakeTimers();\n    });\n\n    afterEach(() => {\n      jest.useRealTimers();\n    });\n\n    it('should start periodic sync on initialization', () => {\n      const triggerSyncSpy = jest.spyOn(service, 'triggerSync');\n\n      // Fast-forward time to trigger periodic sync\n      jest.advanceTimersByTime(35000);\n\n      // Note: In real implementation, setInterval would trigger, but we can't easily test it\n      // This test structure ensures the setup is correct\n      expect(mockNetInfo.addEventListener).toHaveBeenCalled();\n    });\n\n    it('should only sync periodically when online', () => {\n      // This is hard to test with setInterval, but the logic is in place\n      // The periodic sync checks isOnline && !isSyncing before calling triggerSync\n      expect((service as any).isOnline).toBe(true);\n    });\n  });\n\n  describe('Error Handling and Edge Cases', () => {\n    it('should handle malformed network state', () => {\n      const networkListener = mockNetInfo.addEventListener.mock.calls[0][0];\n\n      // Handle undefined/null network state\n      networkListener(null as any);\n      networkListener(undefined as any);\n\n      // Should not crash\n      expect((service as any).isOnline).toBeDefined();\n    });\n\n    it('should handle very large offline datasets', () => {\n      const largePets = Array.from({ length: 1000 }, (_, i) => ({\n        id: `pet${i}`,\n        name: `Pet ${i}`,\n        data: 'x'.repeat(1000), // Large data\n      }));\n\n      (service as any).offlineData.pets = largePets;\n\n      const result = service.getOfflineData();\n      expect(result.pets).toHaveLength(1000);\n    });\n\n    it('should handle concurrent data access', async () => {\n      const operations = [\n        service.getPets(),\n        service.getMatches(),\n        service.getMessages('match1'),\n        service.getUser(),\n      ];\n\n      const results = await Promise.all(operations);\n\n      expect(results).toHaveLength(4);\n      // Should handle concurrent access without issues\n    });\n\n    it('should handle rapid pending action additions', () => {\n      for (let i = 0; i < 100; i++) {\n        service.addPendingAction('swipe', { petId: `pet${i}`, direction: 'like' });\n      }\n\n      expect((service as any).offlineData.pendingActions).toHaveLength(100);\n    });\n\n    it('should handle listener cleanup', () => {\n      const listener = jest.fn();\n      const unsubscribe = service.addSyncStatusListener(listener);\n\n      expect((service as any).syncListeners).toContain(listener);\n\n      unsubscribe();\n\n      expect((service as any).syncListeners).not.toContain(listener);\n    });\n\n    it('should handle multiple listeners', () => {\n      const listeners = [jest.fn(), jest.fn(), jest.fn()];\n\n      const unsubscribes = listeners.map(listener =>\n        service.addSyncStatusListener(listener)\n      );\n\n      (service as any).notifyListeners();\n\n      listeners.forEach(listener => {\n        expect(listener).toHaveBeenCalledTimes(1);\n      });\n\n      // Unsubscribe all\n      unsubscribes.forEach(unsubscribe => unsubscribe());\n\n      expect((service as any).syncListeners).toHaveLength(0);\n    });\n\n    it('should handle circular references in offline data', () => {\n      const data: any = { id: 'test' };\n      data.self = data; // Circular reference\n\n      (service as any).offlineData.user = data;\n\n      const result = service.getOfflineData();\n\n      // Should handle circular references (though JSON.stringify might not)\n      expect(result.user?.id).toBe('test');\n    });\n\n    it('should handle extreme retry counts', () => {\n      const action = {\n        id: 'test-action',\n        type: 'swipe' as const,\n        data: { petId: 'pet1' },\n        timestamp: new Date().toISOString(),\n        retryCount: 100, // Extreme retry count\n      };\n\n      (service as any).offlineData.pendingActions = [action];\n\n      // Should handle gracefully\n      expect(() => service.getSyncStatus()).not.toThrow();\n    });\n\n    it('should handle empty or invalid action data', () => {\n      const invalidActions = [\n        null,\n        undefined,\n        {},\n        { type: 'invalid' },\n        { type: 'swipe', data: null },\n      ];\n\n      invalidActions.forEach(invalidAction => {\n        // Should not crash when processing\n        expect(() => service.addPendingAction('swipe', invalidAction as any)).not.toThrow();\n      });\n    });\n  });\n});\n"],"mappings":";;AAqBAA,WAAA,GAAKC,IAAI,CAAC,2CAA2C,CAAC;AACtDD,WAAA,GAAKC,IAAI,CAAC,iCAAiC,CAAC;AAC5CD,WAAA,GAAKC,IAAI,WAAW;EAAA,OAAO;IACzBC,GAAG,EAAE;MACHC,OAAO,EAAEC,aAAI,CAACC,EAAE,CAAC,CAAC;MAClBC,UAAU,EAAEF,aAAI,CAACC,EAAE,CAAC,CAAC;MACrBE,WAAW,EAAEH,aAAI,CAACC,EAAE,CAAC,CAAC;MACtBG,WAAW,EAAEJ,aAAI,CAACC,EAAE,CAAC,CAAC;MACtBI,iBAAiB,EAAEL,aAAI,CAACC,EAAE,CAAC;IAC7B;EACF,CAAC;AAAA,CAAC,CAAC;AAEHL,WAAA,GAAKC,IAAI,CAAC,oBAAoB,EAAE;EAAA,OAAO;IACrCS,MAAM,EAAE;MACNC,IAAI,EAAEP,aAAI,CAACC,EAAE,CAAC,CAAC;MACfO,KAAK,EAAER,aAAI,CAACC,EAAE,CAAC,CAAC;MAChBQ,IAAI,EAAET,aAAI,CAACC,EAAE,CAAC;IAChB;EACF,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAS,sBAAA,GAAAC,OAAA;AAAA,IAAAC,eAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAA,IAAAE,kBAAA,GAAAH,sBAAA,CAAAC,OAAA;AAxBJ,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,QAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,eAAA,GAAAN,OAAA;AAuBA,IAAAO,IAAA,GAAAP,OAAA;AACA,IAAAQ,KAAA,GAAAR,OAAA;AAA4C,SAAAf,YAAA;EAAA,IAAAwB,QAAA,GAAAT,OAAA;IAAAX,IAAA,GAAAoB,QAAA,CAAApB,IAAA;EAAAJ,WAAA,YAAAA,YAAA;IAAA,OAAAI,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAE5C,IAAMqB,gBAAgB,GAAGC,qBAAgD;AACzE,IAAMC,WAAW,GAAGC,gBAAsC;AAC1D,IAAMC,OAAO,GAAG3B,QAA8B;AAC9C,IAAM4B,UAAU,GAAGpB,YAAoC;AAEvD,IAAAqB,iBAAQ,EAAC,gBAAgB,EAAE,YAAM;EAC/B,IAAIC,OAAuB;EAC3B,IAAIC,mBAA8B;EAElC,IAAAC,mBAAU,EAAC,YAAM;IACf9B,aAAI,CAAC+B,aAAa,CAAC,CAAC;IAGnBC,8BAAc,CAASC,QAAQ,GAAGC,SAAS;IAG5Cb,gBAAgB,CAACc,OAAO,CAACC,iBAAiB,CAAC,IAAI,CAAC;IAChDf,gBAAgB,CAACgB,OAAO,CAACD,iBAAiB,CAACF,SAAS,CAAC;IACrDb,gBAAgB,CAACiB,UAAU,CAACF,iBAAiB,CAACF,SAAS,CAAC;IACxDb,gBAAgB,CAACkB,UAAU,CAACH,iBAAiB,CAAC,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;IAE5EP,mBAAmB,GAAG7B,aAAI,CAACC,EAAE,CAAC,CAAC;IAC/BsB,WAAW,CAACiB,gBAAgB,CAACC,eAAe,CAAC;MAAEC,MAAM,EAAEb;IAAoB,CAAC,CAAC;IAE7EN,WAAW,CAACoB,KAAK,CAACP,iBAAiB,CAAC;MAClCQ,WAAW,EAAE,IAAI;MACjBC,IAAI,EAAE,MAAM;MACZC,mBAAmB,EAAE;IACvB,CAAiB,CAAC;IAGlBrB,OAAO,CAAC1B,OAAO,CAACqC,iBAAiB,CAAC,EAAE,CAAC;IACrCX,OAAO,CAACvB,UAAU,CAACkC,iBAAiB,CAAC,EAAE,CAAC;IACxCX,OAAO,CAACtB,WAAW,CAACiC,iBAAiB,CAAC,EAAE,CAAC;IACzCX,OAAO,CAACrB,WAAW,CAACgC,iBAAiB,CAACF,SAAS,CAAC;IAChDT,OAAO,CAACpB,iBAAiB,CAAC+B,iBAAiB,CAACF,SAAS,CAAC;IAEtDN,OAAO,GAAG,IAAII,8BAAc,CAAC,CAAC;EAChC,CAAC,CAAC;EAEF,IAAAe,kBAAS,EAAC,YAAM;IACd/C,aAAI,CAACgD,cAAc,CAAC,CAAC;EACvB,CAAC,CAAC;EAEF,IAAArB,iBAAQ,EAAC,gBAAgB,EAAE,YAAM;IAC/B,IAAAsB,WAAE,EAAC,6CAA6C,EAAE,YAAM;MACtD,IAAMC,WAAW,GAAItB,OAAO,CAASsB,WAAW;MAEhD,IAAAC,eAAM,EAACD,WAAW,CAACE,IAAI,CAAC,CAACC,OAAO,CAAC,EAAE,CAAC;MACpC,IAAAF,eAAM,EAACD,WAAW,CAACI,IAAI,CAAC,CAACC,QAAQ,CAAC,CAAC;MACnC,IAAAJ,eAAM,EAACD,WAAW,CAACM,OAAO,CAAC,CAACH,OAAO,CAAC,EAAE,CAAC;MACvC,IAAAF,eAAM,EAACD,WAAW,CAACO,QAAQ,CAAC,CAACJ,OAAO,CAAC,EAAE,CAAC;MACxC,IAAAF,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAACL,OAAO,CAAC,EAAE,CAAC;MAC9C,IAAAF,eAAM,EAAC,OAAOD,WAAW,CAACS,QAAQ,CAAC,CAACC,IAAI,CAAC,QAAQ,CAAC;IACpD,CAAC,CAAC;IAEF,IAAAX,WAAE,EAAC,uCAAuC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACtD,IAAMC,UAAU,GAAG;QACjBV,IAAI,EAAE,CAAC;UAAEW,EAAE,EAAE,MAAM;UAAEC,IAAI,EAAE;QAAQ,CAAC,CAAC;QACrCV,IAAI,EAAE;UAAES,EAAE,EAAE,OAAO;UAAEC,IAAI,EAAE;QAAO,CAAC;QACnCR,OAAO,EAAE,CAAC;UAAEO,EAAE,EAAE;QAAS,CAAC,CAAC;QAC3BN,QAAQ,EAAE,CAAC;UAAEM,EAAE,EAAE;QAAO,CAAC,CAAC;QAC1BJ,QAAQ,EAAE,sBAAsB;QAChCD,cAAc,EAAE,CAAC;UAAEK,EAAE,EAAE,SAAS;UAAElB,IAAI,EAAE,OAAO;UAAEoB,IAAI,EAAE,CAAC,CAAC;UAAEC,SAAS,EAAE,sBAAsB;UAAEC,UAAU,EAAE;QAAE,CAAC;MAC/G,CAAC;MAED9C,gBAAgB,CAACc,OAAO,CAACC,iBAAiB,CAACgC,IAAI,CAACC,SAAS,CAACP,UAAU,CAAC,CAAC;MAEtE,IAAMQ,UAAU,GAAG,IAAItC,8BAAc,CAAC,CAAC;MACvC,MAAM,IAAIuC,OAAO,CAAC,UAAAC,OAAO;QAAA,OAAIC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;MAEpD,IAAMtB,WAAW,GAAIoB,UAAU,CAASpB,WAAW;MACnD,IAAAC,eAAM,EAACD,WAAW,CAACE,IAAI,CAAC,CAACC,OAAO,CAACS,UAAU,CAACV,IAAI,CAAC;MACjD,IAAAD,eAAM,EAACD,WAAW,CAACI,IAAI,CAAC,CAACD,OAAO,CAACS,UAAU,CAACR,IAAI,CAAC;MACjD,IAAAH,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAACL,OAAO,CAACS,UAAU,CAACJ,cAAc,CAAC;IACvE,CAAC,EAAC;IAEF,IAAAT,WAAE,EAAC,iDAAiD,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAChExC,gBAAgB,CAACc,OAAO,CAACC,iBAAiB,CAAC,cAAc,CAAC;MAE1D,IAAMkC,UAAU,GAAG,IAAItC,8BAAc,CAAC,CAAC;MACvC,MAAM,IAAIuC,OAAO,CAAC,UAAAC,OAAO;QAAA,OAAIC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;MAEpD,IAAMtB,WAAW,GAAIoB,UAAU,CAASpB,WAAW;MACnD,IAAAC,eAAM,EAACD,WAAW,CAACE,IAAI,CAAC,CAACC,OAAO,CAAC,EAAE,CAAC;IACtC,CAAC,EAAC;IAEF,IAAAJ,WAAE,EAAC,iCAAiC,EAAE,YAAM;MAC1C,IAAAE,eAAM,EAAC5B,WAAW,CAACiB,gBAAgB,CAAC,CAACkC,gBAAgB,CAAC,CAAC;MACvD,IAAAvB,eAAM,EAAC5B,WAAW,CAACoB,KAAK,CAAC,CAAC+B,gBAAgB,CAAC,CAAC;IAC9C,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAA/C,iBAAQ,EAAC,oBAAoB,EAAE,YAAM;IACnC,IAAAsB,WAAE,EAAC,6CAA6C,EAAE,YAAM;MACtD,IAAM0B,eAAe,GAAGpD,WAAW,CAACiB,gBAAgB,CAAC3C,IAAI,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAGpEhD,OAAO,CAASiD,QAAQ,GAAG,KAAK;MAGjCF,eAAe,CAAC;QACd/B,WAAW,EAAE,IAAI;QACjBC,IAAI,EAAE,MAAM;QACZC,mBAAmB,EAAE;MACvB,CAAiB,CAAC;MAElB,IAAAK,eAAM,EAAEvB,OAAO,CAASiD,QAAQ,CAAC,CAACjB,IAAI,CAAC,IAAI,CAAC;IAE9C,CAAC,CAAC;IAEF,IAAAX,WAAE,EAAC,6BAA6B,EAAE,YAAM;MACtC,IAAM0B,eAAe,GAAGpD,WAAW,CAACiB,gBAAgB,CAAC3C,IAAI,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAGrED,eAAe,CAAC;QACd/B,WAAW,EAAE,KAAK;QAClBC,IAAI,EAAE,MAAM;QACZC,mBAAmB,EAAE;MACvB,CAAiB,CAAC;MAElB,IAAAK,eAAM,EAAEvB,OAAO,CAASiD,QAAQ,CAAC,CAACjB,IAAI,CAAC,KAAK,CAAC;IAC/C,CAAC,CAAC;IAEF,IAAAX,WAAE,EAAC,qCAAqC,EAAE,YAAM;MAC9C,IAAM0B,eAAe,GAAGpD,WAAW,CAACiB,gBAAgB,CAAC3C,IAAI,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAGrE,IAAME,MAAsB,GAAG,CAC7B;QAAElC,WAAW,EAAE,IAAI;QAAEC,IAAI,EAAE,MAAM;QAAEC,mBAAmB,EAAE;MAAK,CAAC,EAC9D;QAAEF,WAAW,EAAE,IAAI;QAAEC,IAAI,EAAE,UAAU;QAAEC,mBAAmB,EAAE;MAAK,CAAC,EAClE;QAAEF,WAAW,EAAE,KAAK;QAAEC,IAAI,EAAE,MAAM;QAAEC,mBAAmB,EAAE;MAAM,CAAC,EAChE;QAAEF,WAAW,EAAE,IAAI;QAAEC,IAAI,EAAE,MAAM;QAAEC,mBAAmB,EAAE;MAAM,CAAC,CAChE;MAEDgC,MAAM,CAACC,OAAO,CAAC,UAAAC,KAAK,EAAI;QACtBL,eAAe,CAACK,KAAK,CAAC;QACtB,IAAA7B,eAAM,EAAEvB,OAAO,CAASiD,QAAQ,CAAC,CAACjB,IAAI,CAACoB,KAAK,CAACpC,WAAW,KAAK,IAAI,CAAC;MACpE,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAAjB,iBAAQ,EAAC,2BAA2B,EAAE,YAAM;IAC1C,IAAAsB,WAAE,EAAC,oCAAoC,EAAE,YAAM;MAC7C,IAAMgC,MAAM,GAAGrD,OAAO,CAACsD,aAAa,CAAC,CAAC;MAEtC,IAAA/B,eAAM,EAAC8B,MAAM,CAAC,CAAC5B,OAAO,CAAC;QACrBwB,QAAQ,EAAE,IAAI;QACdM,SAAS,EAAE,KAAK;QAChBC,YAAY,EAAEjC,eAAM,CAACkC,GAAG,CAACC,MAAM,CAAC;QAChCC,mBAAmB,EAAE,CAAC;QACtBC,YAAY,EAAE;MAChB,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,IAAAvC,WAAE,EAAC,uCAAuC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACrDjC,OAAO,CAASuD,SAAS,GAAG,IAAI;MAChCvD,OAAO,CAASsB,WAAW,CAACQ,cAAc,GAAG,CAAC;QAAEK,EAAE,EAAE;MAAU,CAAC,EAAE;QAAEA,EAAE,EAAE;MAAU,CAAC,CAAC;MAEpF,IAAMkB,MAAM,GAAGrD,OAAO,CAACsD,aAAa,CAAC,CAAC;MAEtC,IAAA/B,eAAM,EAAC8B,MAAM,CAACE,SAAS,CAAC,CAACvB,IAAI,CAAC,IAAI,CAAC;MACnC,IAAAT,eAAM,EAAC8B,MAAM,CAACM,mBAAmB,CAAC,CAAC3B,IAAI,CAAC,CAAC,CAAC;MAC1C,IAAAT,eAAM,EAAC8B,MAAM,CAACO,YAAY,CAAC,CAAC5B,IAAI,CAAC,GAAG,CAAC;IACvC,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,6CAA6C,EAAE,YAAM;MACtD,IAAMwC,SAAS,GAAGzF,aAAI,CAACC,EAAE,CAAC,CAAC;MAC3B,IAAMyF,SAAS,GAAG1F,aAAI,CAACC,EAAE,CAAC,CAAC;MAE3B,IAAM0F,YAAY,GAAG/D,OAAO,CAACgE,qBAAqB,CAACH,SAAS,CAAC;MAC7D,IAAMI,YAAY,GAAGjE,OAAO,CAACgE,qBAAqB,CAACF,SAAS,CAAC;MAG5D9D,OAAO,CAASkE,eAAe,CAAC,CAAC;MAElC,IAAA3C,eAAM,EAACsC,SAAS,CAAC,CAACM,oBAAoB,CAAC5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CAAC,CAAC;MAC1D,IAAA7C,eAAM,EAACuC,SAAS,CAAC,CAACK,oBAAoB,CAAC5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CAAC,CAAC;MAG1DL,YAAY,CAAC,CAAC;MACb/D,OAAO,CAASkE,eAAe,CAAC,CAAC;MAElC,IAAA3C,eAAM,EAACsC,SAAS,CAAC,CAACQ,qBAAqB,CAAC,CAAC,CAAC;MAC1C,IAAA9C,eAAM,EAACuC,SAAS,CAAC,CAACO,qBAAqB,CAAC,CAAC,CAAC;IAC5C,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAAtE,iBAAQ,EAAC,iBAAiB,EAAE,YAAM;IAChC,IAAAsB,WAAE,EAAC,4BAA4B,EAAE,YAAM;MACrCrB,OAAO,CAACsE,gBAAgB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAC,CAAC;MAEvE,IAAMlD,WAAW,GAAItB,OAAO,CAASsB,WAAW;MAChD,IAAAC,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,CAAC,CAAC;MAElD,IAAMC,MAAM,GAAGpD,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC;MAC5C,IAAAP,eAAM,EAACmD,MAAM,CAACzD,IAAI,CAAC,CAACe,IAAI,CAAC,OAAO,CAAC;MACjC,IAAAT,eAAM,EAACmD,MAAM,CAACrC,IAAI,CAAC,CAACZ,OAAO,CAAC;QAAE8C,KAAK,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAC,CAAC;MACjE,IAAAjD,eAAM,EAACmD,MAAM,CAACnC,UAAU,CAAC,CAACP,IAAI,CAAC,CAAC,CAAC;MACjC,IAAAT,eAAM,EAAC,OAAOmD,MAAM,CAACvC,EAAE,CAAC,CAACH,IAAI,CAAC,QAAQ,CAAC;MACvC,IAAAT,eAAM,EAAC,OAAOmD,MAAM,CAACpC,SAAS,CAAC,CAACN,IAAI,CAAC,QAAQ,CAAC;IAChD,CAAC,CAAC;IAEF,IAAAX,WAAE,EAAC,mCAAmC,EAAE,YAAM;MAC5CrB,OAAO,CAACsE,gBAAgB,CAAC,SAAS,EAAE;QAAEK,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAQ,CAAC,CAAC;MAC5E5E,OAAO,CAACsE,gBAAgB,CAAC,SAAS,EAAE;QAAEK,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAK,CAAC,CAAC;MAEzE,IAAMtD,WAAW,GAAItB,OAAO,CAASsB,WAAW;MAChD,IAAAC,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,CAAC,CAAC;MAElD,IAAAI,qBAAA,OAAA7F,eAAA,CAAAiD,OAAA,EAA2BX,WAAW,CAACQ,cAAc;QAA9CgD,OAAO,GAAAD,qBAAA;QAAEE,OAAO,GAAAF,qBAAA;MACvB,IAAAtD,eAAM,EAACuD,OAAO,CAAC3C,EAAE,CAAC,CAAC6C,GAAG,CAAChD,IAAI,CAAC+C,OAAO,CAAC5C,EAAE,CAAC;IACzC,CAAC,CAAC;IAEF,IAAAd,WAAE,EAAC,0CAA0C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAEzDjC,OAAO,CAACsE,gBAAgB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAC,CAAC;MACvExE,OAAO,CAACsE,gBAAgB,CAAC,SAAS,EAAE;QAAEK,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAQ,CAAC,CAAC;MAG5E,IAAMK,gBAAgB,GAAG7G,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,sBAAsB,CAAC;MAC3EiF,gBAAgB,CAACzE,iBAAiB,CAACF,SAAS,CAAC;MAE7C,MAAON,OAAO,CAASmF,kBAAkB,CAAC,CAAC;MAE3C,IAAA5D,eAAM,EAAC0D,gBAAgB,CAAC,CAACZ,qBAAqB,CAAC,CAAC,CAAC;MACjD,IAAA9C,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,CAAC,CAAC;IACrE,CAAC,EAAC;IAEF,IAAApD,WAAE,EAAC,uDAAuD,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACtEjC,OAAO,CAACsE,gBAAgB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAC,CAAC;MACvExE,OAAO,CAACsE,gBAAgB,CAAC,SAAS,EAAE;QAAEK,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAQ,CAAC,CAAC;MAE5E,IAAMK,gBAAgB,GAAG7G,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,sBAAsB,CAAC;MAG3EiF,gBAAgB,CAACG,sBAAsB,CAAC,YAAM;QAC5C,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;MAClC,CAAC,CAAC;MACFJ,gBAAgB,CAACG,sBAAsB,CAAC;QAAA,OAAMzC,OAAO,CAACC,OAAO,CAAC,CAAC;MAAA,EAAC;MAEhE,MAAO5C,OAAO,CAASmF,kBAAkB,CAAC,CAAC;MAE3C,IAAM7D,WAAW,GAAItB,OAAO,CAASsB,WAAW;MAChD,IAAAC,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,CAAC,CAAC;MAClD,IAAAlD,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACS,UAAU,CAAC,CAACP,IAAI,CAAC,CAAC,CAAC;IAC1D,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,yCAAyC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACxDjC,OAAO,CAACsE,gBAAgB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAC,CAAC;MAEvE,IAAMS,gBAAgB,GAAG7G,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,sBAAsB,CAAC;MAG3EiF,gBAAgB,CAACK,iBAAiB,CAAC,IAAID,KAAK,CAAC,oBAAoB,CAAC,CAAC;MAGnE,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B,MAAOvF,OAAO,CAASmF,kBAAkB,CAAC,CAAC;MAC7C;MAEA,IAAA5D,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,CAAC,CAAC;IACrE,CAAC,EAAC;EACJ,CAAC,CAAC;EAEF,IAAA1E,iBAAQ,EAAC,2BAA2B,EAAE,YAAM;IAC1C,IAAAsB,WAAE,EAAC,wCAAwC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACvD,IAAMuD,UAAU,GAAG,CAAC;QAAErD,EAAE,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAQ,CAAC,EAAE;QAAED,EAAE,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAO,CAAC,CAAC;MAChFvC,OAAO,CAAC1B,OAAO,CAACqC,iBAAiB,CAACgF,UAAU,CAAC;MAE7C,IAAMC,MAAM,SAASzF,OAAO,CAAC7B,OAAO,CAAC,CAAC;MAEtC,IAAAoD,eAAM,EAACkE,MAAM,CAAC,CAAChE,OAAO,CAAC+D,UAAU,CAAC;MAClC,IAAAjE,eAAM,EAAC1B,OAAO,CAAC1B,OAAO,CAAC,CAAC2E,gBAAgB,CAAC,CAAC;MAC1C,IAAAvB,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACE,IAAI,CAAC,CAACC,OAAO,CAAC+D,UAAU,CAAC;IAC/D,CAAC,EAAC;IAEF,IAAAnE,WAAE,EAAC,yDAAyD,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACxE,IAAMyD,WAAW,GAAG,CAAC;QAAEvD,EAAE,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAQ,CAAC,CAAC;MAClDpC,OAAO,CAASsB,WAAW,CAACE,IAAI,GAAGkE,WAAW;MAE/C7F,OAAO,CAAC1B,OAAO,CAACmH,iBAAiB,CAAC,IAAID,KAAK,CAAC,eAAe,CAAC,CAAC;MAE7D,IAAMI,MAAM,SAASzF,OAAO,CAAC7B,OAAO,CAAC,CAAC;MAEtC,IAAAoD,eAAM,EAACkE,MAAM,CAAC,CAAChE,OAAO,CAACiE,WAAW,CAAC;MACnC,IAAAnE,eAAM,EAACzB,UAAU,CAACjB,IAAI,CAAC,CAACsF,oBAAoB,CAC1C,iDAAiD,EACjD5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CACnB,CAAC;IACH,CAAC,EAAC;IAEF,IAAA/C,WAAE,EAAC,yCAAyC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACvDjC,OAAO,CAASiD,QAAQ,GAAG,KAAK;MACjC,IAAMyC,WAAW,GAAG,CAAC;QAAEvD,EAAE,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAQ,CAAC,CAAC;MAClDpC,OAAO,CAASsB,WAAW,CAACE,IAAI,GAAGkE,WAAW;MAE/C,IAAMD,MAAM,SAASzF,OAAO,CAAC7B,OAAO,CAAC,CAAC;MAEtC,IAAAoD,eAAM,EAACkE,MAAM,CAAC,CAAChE,OAAO,CAACiE,WAAW,CAAC;MACnC,IAAAnE,eAAM,EAAC1B,OAAO,CAAC1B,OAAO,CAAC,CAAC6G,GAAG,CAAClC,gBAAgB,CAAC,CAAC;IAChD,CAAC,EAAC;IAEF,IAAAzB,WAAE,EAAC,sBAAsB,EAAE,YAAM;MAC/B,IAAMK,IAAI,GAAG;QAAES,EAAE,EAAE,OAAO;QAAEC,IAAI,EAAE;MAAW,CAAC;MAC7CpC,OAAO,CAASsB,WAAW,CAACI,IAAI,GAAGA,IAAI;MAExC,IAAM+D,MAAM,GAAGzF,OAAO,CAAC2F,OAAO,CAAC,CAAC;MAEhC,IAAApE,eAAM,EAACkE,MAAM,CAAC,CAAChE,OAAO,CAACC,IAAI,CAAC;IAC9B,CAAC,CAAC;IAEF,IAAAL,WAAE,EAAC,iCAAiC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAChD,IAAM2D,aAAa,GAAG,CAAC;QAAEzD,EAAE,EAAE;MAAS,CAAC,EAAE;QAAEA,EAAE,EAAE;MAAS,CAAC,CAAC;MAC1DtC,OAAO,CAACvB,UAAU,CAACkC,iBAAiB,CAACoF,aAAa,CAAC;MAEnD,IAAMH,MAAM,SAASzF,OAAO,CAAC1B,UAAU,CAAC,CAAC;MAEzC,IAAAiD,eAAM,EAACkE,MAAM,CAAC,CAAChE,OAAO,CAACmE,aAAa,CAAC;MACrC,IAAArE,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACM,OAAO,CAAC,CAACH,OAAO,CAACmE,aAAa,CAAC;IACrE,CAAC,EAAC;IAEF,IAAAvE,WAAE,EAAC,wCAAwC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACvD,IAAMJ,QAAQ,GAAG,CACf;QAAEM,EAAE,EAAE,MAAM;QAAEwC,OAAO,EAAE,QAAQ;QAAEkB,OAAO,EAAE;MAAQ,CAAC,EACnD;QAAE1D,EAAE,EAAE,MAAM;QAAEwC,OAAO,EAAE,QAAQ;QAAEkB,OAAO,EAAE;MAAK,CAAC,EAChD;QAAE1D,EAAE,EAAE,MAAM;QAAEwC,OAAO,EAAE,QAAQ;QAAEkB,OAAO,EAAE;MAAe,CAAC,CAC3D;MACA7F,OAAO,CAASsB,WAAW,CAACO,QAAQ,GAAGA,QAAQ;MAEhD,IAAM4D,MAAM,SAASzF,OAAO,CAACzB,WAAW,CAAC,QAAQ,CAAC;MAElD,IAAAgD,eAAM,EAACkE,MAAM,CAAC,CAAChB,YAAY,CAAC,CAAC,CAAC;MAC9B,IAAAlD,eAAM,EAACkE,MAAM,CAACK,KAAK,CAAC,UAAAC,GAAG;QAAA,OAAIA,GAAG,CAACpB,OAAO,KAAK,QAAQ;MAAA,EAAC,CAAC,CAAC3C,IAAI,CAAC,IAAI,CAAC;IAClE,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,4CAA4C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC3D,IAAM+D,cAAc,GAAG,CACrB;QAAE7D,EAAE,EAAE,MAAM;QAAE0D,OAAO,EAAE;MAAQ,CAAC,EAChC;QAAE1D,EAAE,EAAE,MAAM;QAAE0D,OAAO,EAAE;MAAW,CAAC,CACpC;MACDhG,OAAO,CAACtB,WAAW,CAACiC,iBAAiB,CAACwF,cAAc,CAAC;MAErD,IAAMP,MAAM,SAASzF,OAAO,CAACzB,WAAW,CAAC,QAAQ,CAAC;MAElD,IAAAgD,eAAM,EAACkE,MAAM,CAAC,CAAChE,OAAO,CAACuE,cAAc,CAAC;MACtC,IAAAzE,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACO,QAAQ,CAAC,CAACJ,OAAO,CAACuE,cAAc,CAAC;IACvE,CAAC,EAAC;EACJ,CAAC,CAAC;EAEF,IAAAjG,iBAAQ,EAAC,uBAAuB,EAAE,YAAM;IACtC,IAAAsB,WAAE,EAAC,4CAA4C,EAAE,YAAM;MACrDrB,OAAO,CAACiG,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC;MAEhC,IAAM3E,WAAW,GAAItB,OAAO,CAASsB,WAAW;MAChD,IAAAC,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,CAAC,CAAC;MAClD,IAAAlD,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACb,IAAI,CAAC,CAACe,IAAI,CAAC,OAAO,CAAC;MACxD,IAAAT,eAAM,EAACD,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACO,IAAI,CAAC,CAACZ,OAAO,CAAC;QAAE8C,KAAK,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAC,CAAC;IAC1F,CAAC,CAAC;IAEF,IAAAnD,WAAE,EAAC,oCAAoC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACnD,MAAMjC,OAAO,CAACxB,WAAW,CAAC,QAAQ,EAAE,cAAc,CAAC;MAEnD,IAAA+C,eAAM,EAAC1B,OAAO,CAACrB,WAAW,CAAC,CAAC2F,oBAAoB,CAAC,QAAQ,EAAE,cAAc,CAAC;IAC5E,CAAC,EAAC;IAEF,IAAA9C,WAAE,EAAC,oCAAoC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAClDjC,OAAO,CAASiD,QAAQ,GAAG,KAAK;MAEjC,MAAMjD,OAAO,CAACxB,WAAW,CAAC,QAAQ,EAAE,iBAAiB,CAAC;MAEtD,IAAA+C,eAAM,EAAC1B,OAAO,CAACrB,WAAW,CAAC,CAACwG,GAAG,CAAClC,gBAAgB,CAAC,CAAC;MAClD,IAAAvB,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACb,IAAI,CAAC,CAACe,IAAI,CAAC,SAAS,CAAC;IAC7E,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,8CAA8C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC7DpC,OAAO,CAACrB,WAAW,CAAC8G,iBAAiB,CAAC,IAAID,KAAK,CAAC,aAAa,CAAC,CAAC;MAE/D,MAAMrF,OAAO,CAACxB,WAAW,CAAC,QAAQ,EAAE,gBAAgB,CAAC;MAErD,IAAA+C,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACb,IAAI,CAAC,CAACe,IAAI,CAAC,SAAS,CAAC;MAC3E,IAAAT,eAAM,EAACzB,UAAU,CAACjB,IAAI,CAAC,CAACsF,oBAAoB,CAC1C,oDAAoD,EACpD5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CACnB,CAAC;IACH,CAAC,EAAC;IAEF,IAAA/C,WAAE,EAAC,qCAAqC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACpD,IAAMiE,WAAW,GAAG;QAAE9D,IAAI,EAAE,cAAc;QAAE+D,GAAG,EAAE;MAAU,CAAC;MAE5D,MAAMnG,OAAO,CAACoG,aAAa,CAACF,WAAW,CAAC;MAExC,IAAA3E,eAAM,EAAC1B,OAAO,CAACpB,iBAAiB,CAAC,CAAC0F,oBAAoB,CAAC+B,WAAW,CAAC;IACrE,CAAC,EAAC;IAEF,IAAA7E,WAAE,EAAC,2CAA2C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACzDjC,OAAO,CAASiD,QAAQ,GAAG,KAAK;MACjC,IAAMiD,WAAW,GAAG;QAAE9D,IAAI,EAAE;MAAiB,CAAC;MAE9C,MAAMpC,OAAO,CAACoG,aAAa,CAACF,WAAW,CAAC;MAExC,IAAA3E,eAAM,EAAC1B,OAAO,CAACpB,iBAAiB,CAAC,CAACuG,GAAG,CAAClC,gBAAgB,CAAC,CAAC;MACxD,IAAAvB,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACb,IAAI,CAAC,CAACe,IAAI,CAAC,gBAAgB,CAAC;IACpF,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,8BAA8B,EAAE,YAAM;MACvCrB,OAAO,CAACqG,kBAAkB,CAAC,QAAQ,EAAE,SAAS,CAAC;MAE/C,IAAA9E,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACb,IAAI,CAAC,CAACe,IAAI,CAAC,cAAc,CAAC;MAChF,IAAAT,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC,CAAC,CAACO,IAAI,CAAC,CAACZ,OAAO,CAAC;QAClEkD,OAAO,EAAE,QAAQ;QACjBD,MAAM,EAAE;MACV,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAA3E,iBAAQ,EAAC,sBAAsB,EAAE,YAAM;IACrC,IAAAsB,WAAE,EAAC,iCAAiC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAChD,IAAMqE,qBAAqB,GAAGlI,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,oBAAoB,CAAC;MAC9E,IAAMuG,iBAAiB,GAAGnI,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,gBAAgB,CAAC;MAEtEsG,qBAAqB,CAAC9F,iBAAiB,CAACF,SAAS,CAAC;MAClDiG,iBAAiB,CAACC,kBAAkB,CAAC,YAAM,CAAC,CAAC,CAAC;MAE9C,MAAMxG,OAAO,CAACyG,WAAW,CAAC,CAAC;MAE3B,IAAAlF,eAAM,EAAC+E,qBAAqB,CAAC,CAACxD,gBAAgB,CAAC,CAAC;MAChD,IAAAvB,eAAM,EAACgF,iBAAiB,CAAC,CAACzD,gBAAgB,CAAC,CAAC;MAC5C,IAAAvB,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACS,QAAQ,CAAC,CAAC2E,WAAW,CAAC,CAAC;IAC7D,CAAC,EAAC;IAEF,IAAArF,WAAE,EAAC,8BAA8B,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC5CjC,OAAO,CAASiD,QAAQ,GAAG,KAAK;MAEjC,MAAMjD,OAAO,CAACyG,WAAW,CAAC,CAAC;MAE3B,IAAAlF,eAAM,EAAEvB,OAAO,CAASuD,SAAS,CAAC,CAACvB,IAAI,CAAC,KAAK,CAAC;IAChD,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,mCAAmC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACjDjC,OAAO,CAASuD,SAAS,GAAG,IAAI;MAEjC,MAAMvD,OAAO,CAACyG,WAAW,CAAC,CAAC;MAE3B,IAAAlF,eAAM,EAAEvB,OAAO,CAASuD,SAAS,CAAC,CAACvB,IAAI,CAAC,IAAI,CAAC;IAC/C,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,sCAAsC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACrD,IAAMqE,qBAAqB,GAAGlI,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,oBAAoB,CAAC;MAC9EsG,qBAAqB,CAAChB,iBAAiB,CAAC,IAAID,KAAK,CAAC,aAAa,CAAC,CAAC;MAEjE,MAAMrF,OAAO,CAACyG,WAAW,CAAC,CAAC;MAE3B,IAAAlF,eAAM,EAAEvB,OAAO,CAASuD,SAAS,CAAC,CAACvB,IAAI,CAAC,KAAK,CAAC;MAC9C,IAAAT,eAAM,EAACzB,UAAU,CAAClB,KAAK,CAAC,CAACuF,oBAAoB,CAAC,aAAa,EAAE5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CAAC,CAAC;IAClF,CAAC,EAAC;IAEF,IAAA/C,WAAE,EAAC,yCAAyC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACxD,IAAMqE,qBAAqB,GAAGlI,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAS,oBAAoB,CAAC;MAC9EsG,qBAAqB,CAACE,kBAAkB,KAAAvH,kBAAA,CAAAgD,OAAA,EAAC,aAAY;QAEnD,MAAM,IAAIU,OAAO,CAAC,UAAAC,OAAO;UAAA,OAAIC,UAAU,CAACD,OAAO,EAAE,EAAE,CAAC;QAAA,EAAC;MACvD,CAAC,EAAC;MAEF,IAAM+D,OAAO,GAAG3G,OAAO,CAACyG,WAAW,CAAC,CAAC;MAGrC,IAAAlF,eAAM,EAACvB,OAAO,CAACsD,aAAa,CAAC,CAAC,CAACC,SAAS,CAAC,CAACvB,IAAI,CAAC,IAAI,CAAC;MAEpD,MAAM2E,OAAO;MAGb,IAAApF,eAAM,EAACvB,OAAO,CAACsD,aAAa,CAAC,CAAC,CAACC,SAAS,CAAC,CAACvB,IAAI,CAAC,KAAK,CAAC;IACvD,CAAC,EAAC;EACJ,CAAC,CAAC;EAEF,IAAAjC,iBAAQ,EAAC,kBAAkB,EAAE,YAAM;IACjC,IAAAsB,WAAE,EAAC,qCAAqC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACnDjC,OAAO,CAASsB,WAAW,CAACE,IAAI,GAAG,CAAC;QAAEW,EAAE,EAAE;MAAO,CAAC,CAAC;MACnDnC,OAAO,CAASsB,WAAW,CAACI,IAAI,GAAG;QAAES,EAAE,EAAE;MAAQ,CAAC;MAEnD,MAAOnC,OAAO,CAAS4G,eAAe,CAAC,CAAC;MAExC,IAAArF,eAAM,EAAC9B,gBAAgB,CAACgB,OAAO,CAAC,CAAC0D,oBAAoB,CACnD,cAAc,EACd5C,eAAM,CAACkC,GAAG,CAACC,MAAM,CACnB,CAAC;MAED,IAAMmD,SAAS,GAAGrE,IAAI,CAACsE,KAAK,CAACrH,gBAAgB,CAACgB,OAAO,CAACxC,IAAI,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvE,IAAAzB,eAAM,EAACsF,SAAS,CAACrF,IAAI,CAAC,CAACC,OAAO,CAAC,CAAC;QAAEU,EAAE,EAAE;MAAO,CAAC,CAAC,CAAC;MAChD,IAAAZ,eAAM,EAACsF,SAAS,CAACnF,IAAI,CAAC,CAACD,OAAO,CAAC;QAAEU,EAAE,EAAE;MAAQ,CAAC,CAAC;IACjD,CAAC,EAAC;IAEF,IAAAd,WAAE,EAAC,8CAA8C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC7DxC,gBAAgB,CAACgB,OAAO,CAAC6E,iBAAiB,CAAC,IAAID,KAAK,CAAC,eAAe,CAAC,CAAC;MAEtE,MAAOrF,OAAO,CAAS4G,eAAe,CAAC,CAAC;MAGxC,IAAArF,eAAM,EAACzB,UAAU,CAAClB,KAAK,CAAC,CAACuF,oBAAoB,CAC3C,6BAA6B,EAC7B5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CACnB,CAAC;IACH,CAAC,EAAC;IAEF,IAAA/C,WAAE,EAAC,2BAA2B,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAEzCjC,OAAO,CAASsB,WAAW,CAACE,IAAI,GAAG,CAAC;QAAEW,EAAE,EAAE;MAAO,CAAC,CAAC;MACnDnC,OAAO,CAASsB,WAAW,CAACQ,cAAc,GAAG,CAAC;QAAEK,EAAE,EAAE;MAAU,CAAC,CAAC;MAEjE,MAAMnC,OAAO,CAAC+G,gBAAgB,CAAC,CAAC;MAEhC,IAAAxF,eAAM,EAAC9B,gBAAgB,CAACiB,UAAU,CAAC,CAACyD,oBAAoB,CAAC,cAAc,CAAC;MACxE,IAAA5C,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACE,IAAI,CAAC,CAACC,OAAO,CAAC,EAAE,CAAC;MACrD,IAAAF,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAACL,OAAO,CAAC,EAAE,CAAC;IACjE,CAAC,EAAC;IAEF,IAAAJ,WAAE,EAAC,4CAA4C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC3DxC,gBAAgB,CAACiB,UAAU,CAAC4E,iBAAiB,CAAC,IAAID,KAAK,CAAC,aAAa,CAAC,CAAC;MAEvE,MAAMrF,OAAO,CAAC+G,gBAAgB,CAAC,CAAC;MAEhC,IAAAxF,eAAM,EAACzB,UAAU,CAAClB,KAAK,CAAC,CAACuF,oBAAoB,CAC3C,8BAA8B,EAC9B5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CACnB,CAAC;IACH,CAAC,EAAC;EACJ,CAAC,CAAC;EAEF,IAAArE,iBAAQ,EAAC,yBAAyB,EAAE,YAAM;IACxC,IAAAsB,WAAE,EAAC,qCAAqC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACpDxC,gBAAgB,CAACkB,UAAU,CAACH,iBAAiB,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;MACvEf,gBAAgB,CAACc,OAAO,CAACiG,kBAAkB,CAAC,UAACQ,GAAG,EAAK;QACnD,IAAMC,KAA6B,GAAG;UACpCC,IAAI,EAAE,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC;UACrBC,IAAI,EAAE,GAAG,CAACD,MAAM,CAAC,GAAG,CAAC;UACrBE,IAAI,EAAE,GAAG,CAACF,MAAM,CAAC,EAAE;QACrB,CAAC;QACD,OAAOxE,OAAO,CAACC,OAAO,CAACqE,KAAK,CAACD,GAAG,CAAC,IAAI,IAAI,CAAC;MAC5C,CAAC,CAAC;MAEF,IAAMM,IAAI,SAAStH,OAAO,CAACuH,cAAc,CAAC,CAAC;MAE3C,IAAAhG,eAAM,EAAC+F,IAAI,CAAC,CAACtF,IAAI,CAAC,GAAG,CAAC;IACxB,CAAC,EAAC;IAEF,IAAAX,WAAE,EAAC,+CAA+C,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC9DxC,gBAAgB,CAACkB,UAAU,CAAC2E,iBAAiB,CAAC,IAAID,KAAK,CAAC,YAAY,CAAC,CAAC;MAEtE,IAAMiC,IAAI,SAAStH,OAAO,CAACuH,cAAc,CAAC,CAAC;MAE3C,IAAAhG,eAAM,EAAC+F,IAAI,CAAC,CAACtF,IAAI,CAAC,CAAC,CAAC;MACpB,IAAAT,eAAM,EAACzB,UAAU,CAAClB,KAAK,CAAC,CAACuF,oBAAoB,CAC3C,4BAA4B,EAC5B5C,eAAM,CAACkC,GAAG,CAACW,MAAM,CACnB,CAAC;IACH,CAAC,EAAC;IAEF,IAAA/C,WAAE,EAAC,6DAA6D,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MAC5ExC,gBAAgB,CAACkB,UAAU,CAACH,iBAAiB,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;MAC/Df,gBAAgB,CAACc,OAAO,CAACiG,kBAAkB,CAAC,UAACQ,GAAG,EAAK;QACnD,IAAIA,GAAG,KAAK,MAAM,EAAE,OAAOrE,OAAO,CAACC,OAAO,CAAC,MAAM,CAAC;QAClD,IAAIoE,GAAG,KAAK,MAAM,EAAE,OAAOrE,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;QAChD,OAAOD,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;MAC9B,CAAC,CAAC;MAEF,IAAM0E,IAAI,SAAStH,OAAO,CAACuH,cAAc,CAAC,CAAC;MAE3C,IAAAhG,eAAM,EAAC+F,IAAI,CAAC,CAACtF,IAAI,CAAC,CAAC,CAAC;IACtB,CAAC,EAAC;EACJ,CAAC,CAAC;EAEF,IAAAjC,iBAAQ,EAAC,eAAe,EAAE,YAAM;IAC9B,IAAAG,mBAAU,EAAC,YAAM;MACf9B,aAAI,CAACoJ,aAAa,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,IAAArG,kBAAS,EAAC,YAAM;MACd/C,aAAI,CAACqJ,aAAa,CAAC,CAAC;IACtB,CAAC,CAAC;IAEF,IAAApG,WAAE,EAAC,8CAA8C,EAAE,YAAM;MACvD,IAAMqG,cAAc,GAAGtJ,aAAI,CAAC8G,KAAK,CAAClF,OAAO,EAAE,aAAa,CAAC;MAGzD5B,aAAI,CAACuJ,mBAAmB,CAAC,KAAK,CAAC;MAI/B,IAAApG,eAAM,EAAC5B,WAAW,CAACiB,gBAAgB,CAAC,CAACkC,gBAAgB,CAAC,CAAC;IACzD,CAAC,CAAC;IAEF,IAAAzB,WAAE,EAAC,2CAA2C,EAAE,YAAM;MAGpD,IAAAE,eAAM,EAAEvB,OAAO,CAASiD,QAAQ,CAAC,CAACjB,IAAI,CAAC,IAAI,CAAC;IAC9C,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAAjC,iBAAQ,EAAC,+BAA+B,EAAE,YAAM;IAC9C,IAAAsB,WAAE,EAAC,uCAAuC,EAAE,YAAM;MAChD,IAAM0B,eAAe,GAAGpD,WAAW,CAACiB,gBAAgB,CAAC3C,IAAI,CAAC+E,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAGrED,eAAe,CAAC,IAAW,CAAC;MAC5BA,eAAe,CAACzC,SAAgB,CAAC;MAGjC,IAAAiB,eAAM,EAAEvB,OAAO,CAASiD,QAAQ,CAAC,CAACyD,WAAW,CAAC,CAAC;IACjD,CAAC,CAAC;IAEF,IAAArF,WAAE,EAAC,2CAA2C,EAAE,YAAM;MACpD,IAAMuG,SAAS,GAAGC,KAAK,CAACC,IAAI,CAAC;QAAEC,MAAM,EAAE;MAAK,CAAC,EAAE,UAACC,CAAC,EAAEzC,CAAC;QAAA,OAAM;UACxDpD,EAAE,EAAE,MAAMoD,CAAC,EAAE;UACbnD,IAAI,EAAE,OAAOmD,CAAC,EAAE;UAChBlD,IAAI,EAAE,GAAG,CAAC8E,MAAM,CAAC,IAAI;QACvB,CAAC;MAAA,CAAC,CAAC;MAEFnH,OAAO,CAASsB,WAAW,CAACE,IAAI,GAAGoG,SAAS;MAE7C,IAAMnC,MAAM,GAAGzF,OAAO,CAACiI,cAAc,CAAC,CAAC;MACvC,IAAA1G,eAAM,EAACkE,MAAM,CAACjE,IAAI,CAAC,CAACiD,YAAY,CAAC,IAAI,CAAC;IACxC,CAAC,CAAC;IAEF,IAAApD,WAAE,EAAC,sCAAsC,MAAApC,kBAAA,CAAAgD,OAAA,EAAE,aAAY;MACrD,IAAMiG,UAAU,GAAG,CACjBlI,OAAO,CAAC7B,OAAO,CAAC,CAAC,EACjB6B,OAAO,CAAC1B,UAAU,CAAC,CAAC,EACpB0B,OAAO,CAACzB,WAAW,CAAC,QAAQ,CAAC,EAC7ByB,OAAO,CAAC2F,OAAO,CAAC,CAAC,CAClB;MAED,IAAMwC,OAAO,SAASxF,OAAO,CAACyF,GAAG,CAACF,UAAU,CAAC;MAE7C,IAAA3G,eAAM,EAAC4G,OAAO,CAAC,CAAC1D,YAAY,CAAC,CAAC,CAAC;IAEjC,CAAC,EAAC;IAEF,IAAApD,WAAE,EAAC,8CAA8C,EAAE,YAAM;MACvD,KAAK,IAAIkE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,GAAG,EAAEA,CAAC,EAAE,EAAE;QAC5BvF,OAAO,CAACsE,gBAAgB,CAAC,OAAO,EAAE;UAAEC,KAAK,EAAE,MAAMgB,CAAC,EAAE;UAAEf,SAAS,EAAE;QAAO,CAAC,CAAC;MAC5E;MAEA,IAAAjD,eAAM,EAAEvB,OAAO,CAASsB,WAAW,CAACQ,cAAc,CAAC,CAAC2C,YAAY,CAAC,GAAG,CAAC;IACvE,CAAC,CAAC;IAEF,IAAApD,WAAE,EAAC,gCAAgC,EAAE,YAAM;MACzC,IAAMgH,QAAQ,GAAGjK,aAAI,CAACC,EAAE,CAAC,CAAC;MAC1B,IAAMiK,WAAW,GAAGtI,OAAO,CAACgE,qBAAqB,CAACqE,QAAQ,CAAC;MAE3D,IAAA9G,eAAM,EAAEvB,OAAO,CAASuI,aAAa,CAAC,CAACC,SAAS,CAACH,QAAQ,CAAC;MAE1DC,WAAW,CAAC,CAAC;MAEb,IAAA/G,eAAM,EAAEvB,OAAO,CAASuI,aAAa,CAAC,CAACvD,GAAG,CAACwD,SAAS,CAACH,QAAQ,CAAC;IAChE,CAAC,CAAC;IAEF,IAAAhH,WAAE,EAAC,kCAAkC,EAAE,YAAM;MAC3C,IAAMoH,SAAS,GAAG,CAACrK,aAAI,CAACC,EAAE,CAAC,CAAC,EAAED,aAAI,CAACC,EAAE,CAAC,CAAC,EAAED,aAAI,CAACC,EAAE,CAAC,CAAC,CAAC;MAEnD,IAAMqK,YAAY,GAAGD,SAAS,CAACE,GAAG,CAAC,UAAAN,QAAQ;QAAA,OACzCrI,OAAO,CAACgE,qBAAqB,CAACqE,QAAQ,CAAC;MAAA,CACzC,CAAC;MAEArI,OAAO,CAASkE,eAAe,CAAC,CAAC;MAElCuE,SAAS,CAACtF,OAAO,CAAC,UAAAkF,QAAQ,EAAI;QAC5B,IAAA9G,eAAM,EAAC8G,QAAQ,CAAC,CAAChE,qBAAqB,CAAC,CAAC,CAAC;MAC3C,CAAC,CAAC;MAGFqE,YAAY,CAACvF,OAAO,CAAC,UAAAmF,WAAW;QAAA,OAAIA,WAAW,CAAC,CAAC;MAAA,EAAC;MAElD,IAAA/G,eAAM,EAAEvB,OAAO,CAASuI,aAAa,CAAC,CAAC9D,YAAY,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC;IAEF,IAAApD,WAAE,EAAC,mDAAmD,EAAE,YAAM;MAAA,IAAAuH,YAAA;MAC5D,IAAMvG,IAAS,GAAG;QAAEF,EAAE,EAAE;MAAO,CAAC;MAChCE,IAAI,CAACwG,IAAI,GAAGxG,IAAI;MAEfrC,OAAO,CAASsB,WAAW,CAACI,IAAI,GAAGW,IAAI;MAExC,IAAMoD,MAAM,GAAGzF,OAAO,CAACiI,cAAc,CAAC,CAAC;MAGvC,IAAA1G,eAAM,GAAAqH,YAAA,GAACnD,MAAM,CAAC/D,IAAI,qBAAXkH,YAAA,CAAazG,EAAE,CAAC,CAACH,IAAI,CAAC,MAAM,CAAC;IACtC,CAAC,CAAC;IAEF,IAAAX,WAAE,EAAC,oCAAoC,EAAE,YAAM;MAC7C,IAAMqD,MAAM,GAAG;QACbvC,EAAE,EAAE,aAAa;QACjBlB,IAAI,EAAE,OAAgB;QACtBoB,IAAI,EAAE;UAAEkC,KAAK,EAAE;QAAO,CAAC;QACvBjC,SAAS,EAAE,IAAIwG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACnCxG,UAAU,EAAE;MACd,CAAC;MAEAvC,OAAO,CAASsB,WAAW,CAACQ,cAAc,GAAG,CAAC4C,MAAM,CAAC;MAGtD,IAAAnD,eAAM,EAAC;QAAA,OAAMvB,OAAO,CAACsD,aAAa,CAAC,CAAC;MAAA,EAAC,CAAC0B,GAAG,CAACgE,OAAO,CAAC,CAAC;IACrD,CAAC,CAAC;IAEF,IAAA3H,WAAE,EAAC,4CAA4C,EAAE,YAAM;MACrD,IAAM4H,cAAc,GAAG,CACrB,IAAI,EACJ3I,SAAS,EACT,CAAC,CAAC,EACF;QAAEW,IAAI,EAAE;MAAU,CAAC,EACnB;QAAEA,IAAI,EAAE,OAAO;QAAEoB,IAAI,EAAE;MAAK,CAAC,CAC9B;MAED4G,cAAc,CAAC9F,OAAO,CAAC,UAAA+F,aAAa,EAAI;QAEtC,IAAA3H,eAAM,EAAC;UAAA,OAAMvB,OAAO,CAACsE,gBAAgB,CAAC,OAAO,EAAE4E,aAAoB,CAAC;QAAA,EAAC,CAAClE,GAAG,CAACgE,OAAO,CAAC,CAAC;MACrF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}