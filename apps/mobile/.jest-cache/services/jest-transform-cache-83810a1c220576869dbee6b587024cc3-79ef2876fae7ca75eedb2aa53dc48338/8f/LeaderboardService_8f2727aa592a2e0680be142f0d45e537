68f6a3fca7bdbd7e262c344cc1365f93
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _core = require("@pawfectmatch/core");
var _AuthService = require("./AuthService");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var LeaderboardService = function () {
  function LeaderboardService() {
    var _process$env$EXPO_PUB;
    (0, _classCallCheck2.default)(this, LeaderboardService);
    this.cache = new Map();
    this.cacheExpiration = 5 * 60 * 1000;
    this.baseUrl = (_process$env$EXPO_PUB = process.env["EXPO_PUBLIC_API_URL"]) != null ? _process$env$EXPO_PUB : "https://api.pawfectmatch.com";
  }
  return (0, _createClass2.default)(LeaderboardService, [{
    key: "getLeaderboard",
    value: (function () {
      var _getLeaderboard = (0, _asyncToGenerator2.default)(function* () {
        var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
        var limit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;
        try {
          var cacheKey = `leaderboard-${JSON.stringify(filter)}-${page.toString()}-${limit.toString()}`;
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var params = new URLSearchParams(_objectSpread({
            page: page.toString(),
            limit: limit.toString()
          }, filter));
          var response = yield fetch(`${this.baseUrl}/api/leaderboard?${params.toString()}`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get leaderboard", {
            error: error
          });
          throw error;
        }
      });
      function getLeaderboard() {
        return _getLeaderboard.apply(this, arguments);
      }
      return getLeaderboard;
    }())
  }, {
    key: "getUserRank",
    value: (function () {
      var _getUserRank = (0, _asyncToGenerator2.default)(function* (category) {
        try {
          var cacheKey = `user-rank-${category != null ? category : "all"}`;
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var params = category !== undefined ? `?category=${category}` : "";
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/user-rank${params}`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get user rank", {
            error: error
          });
          throw error;
        }
      });
      function getUserRank(_x) {
        return _getUserRank.apply(this, arguments);
      }
      return getUserRank;
    }())
  }, {
    key: "getCategories",
    value: (function () {
      var _getCategories = (0, _asyncToGenerator2.default)(function* () {
        try {
          var cacheKey = "leaderboard-categories";
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/categories`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get categories", {
            error: error
          });
          throw error;
        }
      });
      function getCategories() {
        return _getCategories.apply(this, arguments);
      }
      return getCategories;
    }())
  }, {
    key: "getUserBadges",
    value: (function () {
      var _getUserBadges = (0, _asyncToGenerator2.default)(function* () {
        try {
          var cacheKey = "user-badges";
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/badges`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get user badges", {
            error: error
          });
          throw error;
        }
      });
      function getUserBadges() {
        return _getUserBadges.apply(this, arguments);
      }
      return getUserBadges;
    }())
  }, {
    key: "getPetStats",
    value: (function () {
      var _getPetStats = (0, _asyncToGenerator2.default)(function* (petId) {
        try {
          var cacheKey = `pet-stats-${petId}`;
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/pet/${petId}/stats`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get pet stats", {
            error: error
          });
          throw error;
        }
      });
      function getPetStats(_x2) {
        return _getPetStats.apply(this, arguments);
      }
      return getPetStats;
    }())
  }, {
    key: "updateScore",
    value: (function () {
      var _updateScore = (0, _asyncToGenerator2.default)(function* (petId, category, points, reason) {
        try {
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/update-score`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            },
            body: JSON.stringify({
              petId: petId,
              category: category,
              points: points,
              reason: reason
            })
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          this.clearCacheByPattern("leaderboard");
          this.clearCacheByPattern("user-rank");
          this.clearCacheByPattern(`pet-stats-${petId}`);
        } catch (error) {
          _core.logger.error("Failed to update score", {
            error: error
          });
          throw error;
        }
      });
      function updateScore(_x3, _x4, _x5, _x6) {
        return _updateScore.apply(this, arguments);
      }
      return updateScore;
    }())
  }, {
    key: "getLeaderboardHistory",
    value: (function () {
      var _getLeaderboardHistory = (0, _asyncToGenerator2.default)(function* (category) {
        var period = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "weekly";
        var weeks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;
        try {
          var cacheKey = `leaderboard-history-${category}-${period}-${weeks.toString()}`;
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var params = new URLSearchParams({
            category: category,
            period: period,
            weeks: weeks.toString()
          });
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/history?${params.toString()}`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get leaderboard history", {
            error: error
          });
          throw error;
        }
      });
      function getLeaderboardHistory(_x7) {
        return _getLeaderboardHistory.apply(this, arguments);
      }
      return getLeaderboardHistory;
    }())
  }, {
    key: "getNearbyLeaders",
    value: (function () {
      var _getNearbyLeaders = (0, _asyncToGenerator2.default)(function* (latitude, longitude) {
        var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;
        try {
          var cacheKey = `nearby-leaders-${latitude.toString()}-${longitude.toString()}-${radius.toString()}`;
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var params = new URLSearchParams({
            latitude: latitude.toString(),
            longitude: longitude.toString(),
            radius: radius.toString()
          });
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/nearby?${params.toString()}`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get nearby leaders", {
            error: error
          });
          throw error;
        }
      });
      function getNearbyLeaders(_x8, _x9) {
        return _getNearbyLeaders.apply(this, arguments);
      }
      return getNearbyLeaders;
    }())
  }, {
    key: "getAchievementProgress",
    value: (function () {
      var _getAchievementProgress = (0, _asyncToGenerator2.default)(function* () {
        try {
          var cacheKey = "achievement-progress";
          var cached = this.getCachedData(cacheKey);
          if (cached !== null) {
            return cached;
          }
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/achievements/progress`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            }
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          this.setCachedData(cacheKey, data);
          return data;
        } catch (error) {
          _core.logger.error("Failed to get achievement progress", {
            error: error
          });
          throw error;
        }
      });
      function getAchievementProgress() {
        return _getAchievementProgress.apply(this, arguments);
      }
      return getAchievementProgress;
    }())
  }, {
    key: "shareAchievement",
    value: (function () {
      var _shareAchievement = (0, _asyncToGenerator2.default)(function* (badgeId, platform) {
        try {
          var response = yield fetch(`${this.baseUrl}/api/leaderboard/share`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${yield this.getAuthToken()}`
            },
            body: JSON.stringify({
              badgeId: badgeId,
              platform: platform
            })
          });
          if (!response.ok) {
            throw new Error(`HTTP ${response.status.toString()}: ${response.statusText}`);
          }
          var data = yield response.json();
          return data.shareUrl;
        } catch (error) {
          _core.logger.error("Failed to share achievement", {
            error: error
          });
          throw error;
        }
      });
      function shareAchievement(_x0, _x1) {
        return _shareAchievement.apply(this, arguments);
      }
      return shareAchievement;
    }())
  }, {
    key: "getCachedData",
    value: function getCachedData(key) {
      var cached = this.cache.get(key);
      if (cached !== undefined && Date.now() - cached.timestamp < this.cacheExpiration) {
        return cached.data;
      }
      return null;
    }
  }, {
    key: "setCachedData",
    value: function setCachedData(key, data) {
      this.cache.set(key, {
        data: data,
        timestamp: Date.now()
      });
    }
  }, {
    key: "clearCacheByPattern",
    value: function clearCacheByPattern(pattern) {
      for (var key of this.cache.keys()) {
        if (key.includes(pattern)) {
          this.cache.delete(key);
        }
      }
    }
  }, {
    key: "getAuthToken",
    value: (function () {
      var _getAuthToken = (0, _asyncToGenerator2.default)(function* () {
        var token = yield _AuthService.authService.getAccessToken();
        if (token === null) {
          throw new Error("Authentication required for leaderboard access");
        }
        return token;
      });
      function getAuthToken() {
        return _getAuthToken.apply(this, arguments);
      }
      return getAuthToken;
    }())
  }, {
    key: "clearCache",
    value: function clearCache() {
      this.cache.clear();
    }
  }]);
}();
var _default = exports.default = new LeaderboardService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29yZSIsInJlcXVpcmUiLCJfQXV0aFNlcnZpY2UiLCJvd25LZXlzIiwiZSIsInIiLCJ0IiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZGVmYXVsdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJMZWFkZXJib2FyZFNlcnZpY2UiLCJfcHJvY2VzcyRlbnYkRVhQT19QVUIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiY2FjaGUiLCJNYXAiLCJjYWNoZUV4cGlyYXRpb24iLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsIl9nZXRMZWFkZXJib2FyZCIsIl9hc3luY1RvR2VuZXJhdG9yMiIsInVuZGVmaW5lZCIsInBhZ2UiLCJsaW1pdCIsImNhY2hlS2V5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRvU3RyaW5nIiwiY2FjaGVkIiwiZ2V0Q2FjaGVkRGF0YSIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImdldEF1dGhUb2tlbiIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZGF0YSIsImpzb24iLCJzZXRDYWNoZWREYXRhIiwiZXJyb3IiLCJsb2dnZXIiLCJnZXRMZWFkZXJib2FyZCIsIl9nZXRVc2VyUmFuayIsImNhdGVnb3J5IiwiZ2V0VXNlclJhbmsiLCJfeCIsIl9nZXRDYXRlZ29yaWVzIiwiZ2V0Q2F0ZWdvcmllcyIsIl9nZXRVc2VyQmFkZ2VzIiwiZ2V0VXNlckJhZGdlcyIsIl9nZXRQZXRTdGF0cyIsInBldElkIiwiZ2V0UGV0U3RhdHMiLCJfeDIiLCJfdXBkYXRlU2NvcmUiLCJwb2ludHMiLCJyZWFzb24iLCJib2R5IiwiY2xlYXJDYWNoZUJ5UGF0dGVybiIsInVwZGF0ZVNjb3JlIiwiX3gzIiwiX3g0IiwiX3g1IiwiX3g2IiwiX2dldExlYWRlcmJvYXJkSGlzdG9yeSIsInBlcmlvZCIsIndlZWtzIiwiZ2V0TGVhZGVyYm9hcmRIaXN0b3J5IiwiX3g3IiwiX2dldE5lYXJieUxlYWRlcnMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInJhZGl1cyIsImdldE5lYXJieUxlYWRlcnMiLCJfeDgiLCJfeDkiLCJfZ2V0QWNoaWV2ZW1lbnRQcm9ncmVzcyIsImdldEFjaGlldmVtZW50UHJvZ3Jlc3MiLCJfc2hhcmVBY2hpZXZlbWVudCIsImJhZGdlSWQiLCJwbGF0Zm9ybSIsInNoYXJlVXJsIiwic2hhcmVBY2hpZXZlbWVudCIsIl94MCIsIl94MSIsImdldCIsIkRhdGUiLCJub3ciLCJ0aW1lc3RhbXAiLCJzZXQiLCJwYXR0ZXJuIiwiaW5jbHVkZXMiLCJkZWxldGUiLCJfZ2V0QXV0aFRva2VuIiwidG9rZW4iLCJhdXRoU2VydmljZSIsImdldEFjY2Vzc1Rva2VuIiwiY2xlYXJDYWNoZSIsImNsZWFyIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiTGVhZGVyYm9hcmRTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGVhZGVyYm9hcmQgU2VydmljZVxuICogQ29tcHJlaGVuc2l2ZSBsZWFkZXJib2FyZCBzeXN0ZW0gZm9yIG1vYmlsZSBhcHAgbWF0Y2hpbmcgd2ViIGZ1bmN0aW9uYWxpdHlcbiAqL1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQHBhd2ZlY3RtYXRjaC9jb3JlXCI7XG5pbXBvcnQgeyBhdXRoU2VydmljZSB9IGZyb20gXCIuL0F1dGhTZXJ2aWNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRFbnRyeSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBwZXRJZDogc3RyaW5nO1xuICBwZXROYW1lOiBzdHJpbmc7XG4gIHBldEltYWdlOiBzdHJpbmc7XG4gIG93bmVyTmFtZTogc3RyaW5nO1xuICBzY29yZTogbnVtYmVyO1xuICByYW5rOiBudW1iZXI7XG4gIGNhdGVnb3J5OiBMZWFkZXJib2FyZENhdGVnb3J5O1xuICBiYWRnZXM6IEJhZGdlW107XG4gIHN0YXRzOiBMZWFkZXJib2FyZFN0YXRzO1xuICBsYXN0VXBkYXRlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkU3RhdHMge1xuICBtYXRjaGVzOiBudW1iZXI7XG4gIGxpa2VzOiBudW1iZXI7XG4gIHN1cGVyTGlrZXM6IG51bWJlcjtcbiAgbWVzc2FnZXM6IG51bWJlcjtcbiAgcHJvZmlsZVZpZXdzOiBudW1iZXI7XG4gIGRheXNBY3RpdmU6IG51bWJlcjtcbiAgc3RyZWFrOiBudW1iZXI7XG4gIGFjaGlldmVtZW50czogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhZGdlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBpY29uOiBzdHJpbmc7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIGVhcm5lZEF0OiBudW1iZXI7XG4gIHJhcml0eTogXCJjb21tb25cIiB8IFwicmFyZVwiIHwgXCJlcGljXCIgfCBcImxlZ2VuZGFyeVwiO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkQ2F0ZWdvcnkge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgY29sb3I6IHN0cmluZztcbiAgcGVyaW9kOiBcImRhaWx5XCIgfCBcIndlZWtseVwiIHwgXCJtb250aGx5XCIgfCBcImFsbF90aW1lXCI7XG4gIGlzQWN0aXZlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkRmlsdGVyIHtcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIHBlcmlvZD86IFwiZGFpbHlcIiB8IFwid2Vla2x5XCIgfCBcIm1vbnRobHlcIiB8IFwiYWxsX3RpbWVcIjtcbiAgbG9jYXRpb24/OiB7XG4gICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICByYWRpdXM6IG51bWJlcjsgLy8gaW4ga2lsb21ldGVyc1xuICB9O1xuICBhZ2VSYW5nZT86IHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbiAgfTtcbiAgYnJlZWQ/OiBzdHJpbmc7XG4gIGdlbmRlcj86IFwibWFsZVwiIHwgXCJmZW1hbGVcIiB8IFwiYWxsXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRSZXNwb25zZSB7XG4gIGVudHJpZXM6IExlYWRlcmJvYXJkRW50cnlbXTtcbiAgdG90YWw6IG51bWJlcjtcbiAgcGFnZTogbnVtYmVyO1xuICBsaW1pdDogbnVtYmVyO1xuICBoYXNNb3JlOiBib29sZWFuO1xuICB1c2VyUmFuaz86IG51bWJlcjtcbiAgdXNlckVudHJ5PzogTGVhZGVyYm9hcmRFbnRyeTtcbn1cblxuY2xhc3MgTGVhZGVyYm9hcmRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgY2FjaGUgPSBuZXcgTWFwPHN0cmluZywgeyBkYXRhOiB1bmtub3duOyB0aW1lc3RhbXA6IG51bWJlciB9PigpO1xuICBwcml2YXRlIGNhY2hlRXhwaXJhdGlvbjogbnVtYmVyID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5iYXNlVXJsID1cbiAgICAgIHByb2Nlc3MuZW52W1wiRVhQT19QVUJMSUNfQVBJX1VSTFwiXSA/PyBcImh0dHBzOi8vYXBpLnBhd2ZlY3RtYXRjaC5jb21cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbGVhZGVyYm9hcmQgZW50cmllc1xuICAgKi9cbiAgYXN5bmMgZ2V0TGVhZGVyYm9hcmQoXG4gICAgZmlsdGVyOiBMZWFkZXJib2FyZEZpbHRlciA9IHt9LFxuICAgIHBhZ2UgPSAxLFxuICAgIGxpbWl0ID0gMjAsXG4gICk6IFByb21pc2U8TGVhZGVyYm9hcmRSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYWNoZUtleSA9IGBsZWFkZXJib2FyZC0ke0pTT04uc3RyaW5naWZ5KGZpbHRlcil9LSR7cGFnZS50b1N0cmluZygpfS0ke2xpbWl0LnRvU3RyaW5nKCl9YDtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkRGF0YShjYWNoZUtleSkgYXMgTGVhZGVyYm9hcmRSZXNwb25zZSB8IG51bGw7XG5cbiAgICAgIGlmIChjYWNoZWQgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FjaGUgd2FzIGNoZWNrZWQgYWJvdmUsIGNvbnRpbnVlIHdpdGggQVBJIGNhbGxcblxuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIHBhZ2U6IHBhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgbGltaXQ6IGxpbWl0LnRvU3RyaW5nKCksXG4gICAgICAgIC4uLihmaWx0ZXIgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5iYXNlVXJsfS9hcGkvbGVhZGVyYm9hcmQ/JHtwYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKX06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgTGVhZGVyYm9hcmRSZXNwb25zZTtcbiAgICAgIHRoaXMuc2V0Q2FjaGVkRGF0YShjYWNoZUtleSwgZGF0YSk7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGxlYWRlcmJvYXJkXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHVzZXIncyByYW5rIGFuZCBlbnRyeVxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlclJhbmsoXG4gICAgY2F0ZWdvcnk/OiBzdHJpbmcsXG4gICk6IFByb21pc2U8eyByYW5rOiBudW1iZXI7IGVudHJ5OiBMZWFkZXJib2FyZEVudHJ5IHwgbnVsbCB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHVzZXItcmFuay0ke2NhdGVnb3J5ID8/IFwiYWxsXCJ9YDtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkRGF0YShjYWNoZUtleSkgYXMge1xuICAgICAgICByYW5rOiBudW1iZXI7XG4gICAgICAgIGVudHJ5OiBMZWFkZXJib2FyZEVudHJ5IHwgbnVsbDtcbiAgICAgIH0gfCBudWxsO1xuXG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IGNhdGVnb3J5ICE9PSB1bmRlZmluZWQgPyBgP2NhdGVnb3J5PSR7Y2F0ZWdvcnl9YCA6IFwiXCI7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHt0aGlzLmJhc2VVcmx9L2FwaS9sZWFkZXJib2FyZC91c2VyLXJhbmske3BhcmFtc31gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKX06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMge1xuICAgICAgICByYW5rOiBudW1iZXI7XG4gICAgICAgIGVudHJ5OiBMZWFkZXJib2FyZEVudHJ5IHwgbnVsbDtcbiAgICAgIH07XG4gICAgICB0aGlzLnNldENhY2hlZERhdGEoY2FjaGVLZXksIGRhdGEpO1xuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyIHJhbmtcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYXZhaWxhYmxlIGNhdGVnb3JpZXNcbiAgICovXG4gIGFzeW5jIGdldENhdGVnb3JpZXMoKTogUHJvbWlzZTxMZWFkZXJib2FyZENhdGVnb3J5W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBcImxlYWRlcmJvYXJkLWNhdGVnb3JpZXNcIjtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkRGF0YShjYWNoZUtleSkgYXNcbiAgICAgICAgfCBMZWFkZXJib2FyZENhdGVnb3J5W11cbiAgICAgICAgfCBudWxsO1xuXG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke3RoaXMuYmFzZVVybH0vYXBpL2xlYWRlcmJvYXJkL2NhdGVnb3JpZXNgLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKX06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgTGVhZGVyYm9hcmRDYXRlZ29yeVtdO1xuICAgICAgdGhpcy5zZXRDYWNoZWREYXRhKGNhY2hlS2V5LCBkYXRhKTtcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgY2F0ZWdvcmllc1wiLCB7IGVycm9yIH0pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB1c2VyJ3MgYmFkZ2VzXG4gICAqL1xuICBhc3luYyBnZXRVc2VyQmFkZ2VzKCk6IFByb21pc2U8QmFkZ2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYWNoZUtleSA9IFwidXNlci1iYWRnZXNcIjtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkRGF0YShjYWNoZUtleSkgYXMgQmFkZ2VbXSB8IG51bGw7XG5cbiAgICAgIGlmIChjYWNoZWQgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2FwaS9sZWFkZXJib2FyZC9iYWRnZXNgLCB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthd2FpdCB0aGlzLmdldEF1dGhUb2tlbigpfWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKX06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgQmFkZ2VbXTtcbiAgICAgIHRoaXMuc2V0Q2FjaGVkRGF0YShjYWNoZUtleSwgZGF0YSk7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IHVzZXIgYmFkZ2VzXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxlYWRlcmJvYXJkIHN0YXRzIGZvciBhIHNwZWNpZmljIHBldFxuICAgKi9cbiAgYXN5bmMgZ2V0UGV0U3RhdHMocGV0SWQ6IHN0cmluZyk6IFByb21pc2U8TGVhZGVyYm9hcmRTdGF0cz4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYWNoZUtleSA9IGBwZXQtc3RhdHMtJHtwZXRJZH1gO1xuICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWREYXRhKGNhY2hlS2V5KSBhcyBMZWFkZXJib2FyZFN0YXRzIHwgbnVsbDtcblxuICAgICAgaWYgKGNhY2hlZCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHt0aGlzLmJhc2VVcmx9L2FwaS9sZWFkZXJib2FyZC9wZXQvJHtwZXRJZH0vc3RhdHNgLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKX06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgTGVhZGVyYm9hcmRTdGF0cztcbiAgICAgIHRoaXMuc2V0Q2FjaGVkRGF0YShjYWNoZUtleSwgZGF0YSk7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IHBldCBzdGF0c1wiLCB7IGVycm9yIH0pO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsZWFkZXJib2FyZCBzY29yZVxuICAgKi9cbiAgYXN5bmMgdXBkYXRlU2NvcmUoXG4gICAgcGV0SWQ6IHN0cmluZyxcbiAgICBjYXRlZ29yeTogc3RyaW5nLFxuICAgIHBvaW50czogbnVtYmVyLFxuICAgIHJlYXNvbjogc3RyaW5nLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5iYXNlVXJsfS9hcGkvbGVhZGVyYm9hcmQvdXBkYXRlLXNjb3JlYCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXdhaXQgdGhpcy5nZXRBdXRoVG9rZW4oKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgcGV0SWQsXG4gICAgICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgICAgIHBvaW50cyxcbiAgICAgICAgICAgIHJlYXNvbixcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzLnRvU3RyaW5nKCl9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgcmVsZXZhbnQgY2FjaGUgZW50cmllc1xuICAgICAgdGhpcy5jbGVhckNhY2hlQnlQYXR0ZXJuKFwibGVhZGVyYm9hcmRcIik7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVCeVBhdHRlcm4oXCJ1c2VyLXJhbmtcIik7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVCeVBhdHRlcm4oYHBldC1zdGF0cy0ke3BldElkfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHNjb3JlXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxlYWRlcmJvYXJkIGhpc3RvcnlcbiAgICovXG4gIGFzeW5jIGdldExlYWRlcmJvYXJkSGlzdG9yeShcbiAgICBjYXRlZ29yeTogc3RyaW5nLFxuICAgIHBlcmlvZDogXCJkYWlseVwiIHwgXCJ3ZWVrbHlcIiB8IFwibW9udGhseVwiID0gXCJ3ZWVrbHlcIixcbiAgICB3ZWVrcyA9IDQsXG4gICk6IFByb21pc2U8eyBkYXRlOiBzdHJpbmc7IHJhbms6IG51bWJlcjsgc2NvcmU6IG51bWJlciB9W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBgbGVhZGVyYm9hcmQtaGlzdG9yeS0ke2NhdGVnb3J5fS0ke3BlcmlvZH0tJHt3ZWVrcy50b1N0cmluZygpfWA7XG4gICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldENhY2hlZERhdGEoY2FjaGVLZXkpIGFzXG4gICAgICAgIHwgeyBkYXRlOiBzdHJpbmc7IHJhbms6IG51bWJlcjsgc2NvcmU6IG51bWJlciB9W11cbiAgICAgICAgfCBudWxsO1xuXG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgcGVyaW9kLFxuICAgICAgICB3ZWVrczogd2Vla3MudG9TdHJpbmcoKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHt0aGlzLmJhc2VVcmx9L2FwaS9sZWFkZXJib2FyZC9oaXN0b3J5PyR7cGFyYW1zLnRvU3RyaW5nKCl9YCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthd2FpdCB0aGlzLmdldEF1dGhUb2tlbigpfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzLnRvU3RyaW5nKCl9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIHtcbiAgICAgICAgZGF0ZTogc3RyaW5nO1xuICAgICAgICByYW5rOiBudW1iZXI7XG4gICAgICAgIHNjb3JlOiBudW1iZXI7XG4gICAgICB9W107XG4gICAgICB0aGlzLnNldENhY2hlZERhdGEoY2FjaGVLZXksIGRhdGEpO1xuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCBsZWFkZXJib2FyZCBoaXN0b3J5XCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IG5lYXJieSBsZWFkZXJzXG4gICAqL1xuICBhc3luYyBnZXROZWFyYnlMZWFkZXJzKFxuICAgIGxhdGl0dWRlOiBudW1iZXIsXG4gICAgbG9uZ2l0dWRlOiBudW1iZXIsXG4gICAgcmFkaXVzID0gMTAsXG4gICk6IFByb21pc2U8TGVhZGVyYm9hcmRFbnRyeVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYG5lYXJieS1sZWFkZXJzLSR7bGF0aXR1ZGUudG9TdHJpbmcoKX0tJHtsb25naXR1ZGUudG9TdHJpbmcoKX0tJHtyYWRpdXMudG9TdHJpbmcoKX1gO1xuICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWREYXRhKGNhY2hlS2V5KSBhcyBMZWFkZXJib2FyZEVudHJ5W10gfCBudWxsO1xuXG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBsYXRpdHVkZTogbGF0aXR1ZGUudG9TdHJpbmcoKSxcbiAgICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGUudG9TdHJpbmcoKSxcbiAgICAgICAgcmFkaXVzOiByYWRpdXMudG9TdHJpbmcoKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHt0aGlzLmJhc2VVcmx9L2FwaS9sZWFkZXJib2FyZC9uZWFyYnk/JHtwYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2F3YWl0IHRoaXMuZ2V0QXV0aFRva2VuKCl9YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXMudG9TdHJpbmcoKX06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgTGVhZGVyYm9hcmRFbnRyeVtdO1xuICAgICAgdGhpcy5zZXRDYWNoZWREYXRhKGNhY2hlS2V5LCBkYXRhKTtcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgbmVhcmJ5IGxlYWRlcnNcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWNoaWV2ZW1lbnQgcHJvZ3Jlc3NcbiAgICovXG4gIGFzeW5jIGdldEFjaGlldmVtZW50UHJvZ3Jlc3MoKTogUHJvbWlzZTx7XG4gICAgY29tcGxldGVkOiBCYWRnZVtdO1xuICAgIGluUHJvZ3Jlc3M6IHtcbiAgICAgIGJhZGdlOiBCYWRnZTtcbiAgICAgIHByb2dyZXNzOiBudW1iZXI7XG4gICAgICB0YXJnZXQ6IG51bWJlcjtcbiAgICB9W107XG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSBcImFjaGlldmVtZW50LXByb2dyZXNzXCI7XG4gICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldENhY2hlZERhdGEoY2FjaGVLZXkpIGFzIHtcbiAgICAgICAgY29tcGxldGVkOiBCYWRnZVtdO1xuICAgICAgICBpblByb2dyZXNzOiB7XG4gICAgICAgICAgYmFkZ2U6IEJhZGdlO1xuICAgICAgICAgIHByb2dyZXNzOiBudW1iZXI7XG4gICAgICAgICAgdGFyZ2V0OiBudW1iZXI7XG4gICAgICAgIH1bXTtcbiAgICAgIH0gfCBudWxsO1xuXG4gICAgICBpZiAoY2FjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke3RoaXMuYmFzZVVybH0vYXBpL2xlYWRlcmJvYXJkL2FjaGlldmVtZW50cy9wcm9ncmVzc2AsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXdhaXQgdGhpcy5nZXRBdXRoVG9rZW4oKX1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1cy50b1N0cmluZygpfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyB7XG4gICAgICAgIGNvbXBsZXRlZDogQmFkZ2VbXTtcbiAgICAgICAgaW5Qcm9ncmVzczoge1xuICAgICAgICAgIGJhZGdlOiBCYWRnZTtcbiAgICAgICAgICBwcm9ncmVzczogbnVtYmVyO1xuICAgICAgICAgIHRhcmdldDogbnVtYmVyO1xuICAgICAgICB9W107XG4gICAgICB9O1xuICAgICAgdGhpcy5zZXRDYWNoZWREYXRhKGNhY2hlS2V5LCBkYXRhKTtcblxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgYWNoaWV2ZW1lbnQgcHJvZ3Jlc3NcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaGFyZSBsZWFkZXJib2FyZCBhY2hpZXZlbWVudFxuICAgKi9cbiAgYXN5bmMgc2hhcmVBY2hpZXZlbWVudChcbiAgICBiYWRnZUlkOiBzdHJpbmcsXG4gICAgcGxhdGZvcm06IFwiZmFjZWJvb2tcIiB8IFwidHdpdHRlclwiIHwgXCJpbnN0YWdyYW1cIixcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2FwaS9sZWFkZXJib2FyZC9zaGFyZWAsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthd2FpdCB0aGlzLmdldEF1dGhUb2tlbigpfWAsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBiYWRnZUlkLFxuICAgICAgICAgIHBsYXRmb3JtLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1cy50b1N0cmluZygpfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyB7IHNoYXJlVXJsOiBzdHJpbmcgfTtcbiAgICAgIHJldHVybiBkYXRhLnNoYXJlVXJsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gc2hhcmUgYWNoaWV2ZW1lbnRcIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGVkIGRhdGFcbiAgICovXG4gIHByaXZhdGUgZ2V0Q2FjaGVkRGF0YShrZXk6IHN0cmluZyk6IHVua25vd24ge1xuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7XG4gICAgaWYgKFxuICAgICAgY2FjaGVkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wIDwgdGhpcy5jYWNoZUV4cGlyYXRpb25cbiAgICApIHtcbiAgICAgIHJldHVybiBjYWNoZWQuZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNhY2hlZCBkYXRhXG4gICAqL1xuICBwcml2YXRlIHNldENhY2hlZERhdGEoa2V5OiBzdHJpbmcsIGRhdGE6IHVua25vd24pOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlLnNldChrZXksIHtcbiAgICAgIGRhdGEsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgY2FjaGUgYnkgcGF0dGVyblxuICAgKi9cbiAgcHJpdmF0ZSBjbGVhckNhY2hlQnlQYXR0ZXJuKHBhdHRlcm46IHN0cmluZyk6IHZvaWQge1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMuY2FjaGUua2V5cygpKSB7XG4gICAgICBpZiAoa2V5LmluY2x1ZGVzKHBhdHRlcm4pKSB7XG4gICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhdXRoIHRva2VuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldEF1dGhUb2tlbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgYXV0aFNlcnZpY2UuZ2V0QWNjZXNzVG9rZW4oKTtcbiAgICBpZiAodG9rZW4gPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIGZvciBsZWFkZXJib2FyZCBhY2Nlc3NcIik7XG4gICAgfVxuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgY2FjaGVcbiAgICovXG4gIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBMZWFkZXJib2FyZFNlcnZpY2UoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFLQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFELE9BQUE7QUFBNEMsU0FBQUUsUUFBQUMsQ0FBQSxFQUFBQyxDQUFBLFFBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxJQUFBLENBQUFKLENBQUEsT0FBQUcsTUFBQSxDQUFBRSxxQkFBQSxRQUFBQyxDQUFBLEdBQUFILE1BQUEsQ0FBQUUscUJBQUEsQ0FBQUwsQ0FBQSxHQUFBQyxDQUFBLEtBQUFLLENBQUEsR0FBQUEsQ0FBQSxDQUFBQyxNQUFBLFdBQUFOLENBQUEsV0FBQUUsTUFBQSxDQUFBSyx3QkFBQSxDQUFBUixDQUFBLEVBQUFDLENBQUEsRUFBQVEsVUFBQSxPQUFBUCxDQUFBLENBQUFRLElBQUEsQ0FBQUMsS0FBQSxDQUFBVCxDQUFBLEVBQUFJLENBQUEsWUFBQUos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