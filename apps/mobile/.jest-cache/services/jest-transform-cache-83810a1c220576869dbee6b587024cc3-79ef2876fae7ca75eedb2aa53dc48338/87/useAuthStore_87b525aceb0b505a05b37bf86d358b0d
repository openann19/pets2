2252a786a0d7462cedb7bfe86e63dd85
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useAuthStore = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _zustand = require("zustand");
var _middleware = require("zustand/middleware");
var _immer = require("zustand/middleware/immer");
var _secureStorage = require("../utils/secureStorage");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var useAuthStore = exports.useAuthStore = (0, _zustand.create)()((0, _middleware.persist)((0, _immer.immer)(function (set) {
  return {
    user: null,
    accessToken: null,
    refreshToken: null,
    isLoading: false,
    error: null,
    isAuthenticated: false,
    setUser: function setUser(user) {
      return set(function (state) {
        state.user = user;
        state.isAuthenticated = user !== null;
        return state;
      });
    },
    updateUser: function updateUser(user) {
      return set(function (state) {
        if (state.user) {
          state.user = _objectSpread(_objectSpread({}, state.user), user);
        }
        return state;
      });
    },
    setTokens: function setTokens(accessToken, refreshToken) {
      return set(function (state) {
        state.accessToken = accessToken;
        state.refreshToken = refreshToken;
        state.isAuthenticated = true;
        return state;
      });
    },
    clearTokens: function clearTokens() {
      return set(function (state) {
        state.accessToken = null;
        state.refreshToken = null;
        state.isAuthenticated = false;
        return state;
      });
    },
    logout: function logout() {
      return set(function (state) {
        state.user = null;
        state.accessToken = null;
        state.refreshToken = null;
        state.isAuthenticated = false;
        return state;
      });
    },
    setIsLoading: function setIsLoading(isLoading) {
      return set(function (state) {
        state.isLoading = isLoading;
        return state;
      });
    },
    setError: function setError(error) {
      return set(function (state) {
        state.error = error;
        return state;
      });
    }
  };
}), {
  name: "auth-storage-secure",
  storage: (0, _secureStorage.createSecureStorage)(),
  partialize: function partialize(state) {
    return {
      accessToken: state.accessToken,
      refreshToken: state.refreshToken,
      user: state.user,
      isAuthenticated: state.isAuthenticated
    };
  }
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfenVzdGFuZCIsInJlcXVpcmUiLCJfbWlkZGxld2FyZSIsIl9pbW1lciIsIl9zZWN1cmVTdG9yYWdlIiwib3duS2V5cyIsImUiLCJyIiwidCIsIk9iamVjdCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImRlZmF1bHQiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwidXNlQXV0aFN0b3JlIiwiZXhwb3J0cyIsImNyZWF0ZSIsInBlcnNpc3QiLCJpbW1lciIsInNldCIsInVzZXIiLCJhY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsImlzTG9hZGluZyIsImVycm9yIiwiaXNBdXRoZW50aWNhdGVkIiwic2V0VXNlciIsInN0YXRlIiwidXBkYXRlVXNlciIsInNldFRva2VucyIsImNsZWFyVG9rZW5zIiwibG9nb3V0Iiwic2V0SXNMb2FkaW5nIiwic2V0RXJyb3IiLCJuYW1lIiwic3RvcmFnZSIsImNyZWF0ZVNlY3VyZVN0b3JhZ2UiLCJwYXJ0aWFsaXplIl0sInNvdXJjZXMiOlsidXNlQXV0aFN0b3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZSB9IGZyb20gXCJ6dXN0YW5kXCI7XG5pbXBvcnQgeyBwZXJzaXN0IH0gZnJvbSBcInp1c3RhbmQvbWlkZGxld2FyZVwiO1xuaW1wb3J0IHR5cGUgeyBQZXJzaXN0U3RvcmFnZSB9IGZyb20gXCJ6dXN0YW5kL21pZGRsZXdhcmVcIjtcbmltcG9ydCB7IGltbWVyIH0gZnJvbSBcInp1c3RhbmQvbWlkZGxld2FyZS9pbW1lclwiO1xuaW1wb3J0IHsgY3JlYXRlU2VjdXJlU3RvcmFnZSB9IGZyb20gXCIuLi91dGlscy9zZWN1cmVTdG9yYWdlXCI7XG5cbmltcG9ydCB0eXBlIHsgVXNlciB9IGZyb20gXCJAcGF3ZmVjdG1hdGNoL2NvcmVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBdXRoU3RhdGUge1xuICB1c2VyOiBVc2VyIHwgbnVsbDtcbiAgYWNjZXNzVG9rZW46IHN0cmluZyB8IG51bGw7XG4gIHJlZnJlc2hUb2tlbjogc3RyaW5nIHwgbnVsbDtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xuXG4gIC8vIEFjdGlvbnNcbiAgc2V0VXNlcjogKHVzZXI6IFVzZXIgfCBudWxsKSA9PiB2b2lkO1xuICB1cGRhdGVVc2VyOiAodXNlcjogVXNlcikgPT4gdm9pZDtcbiAgc2V0VG9rZW5zOiAoYWNjZXNzVG9rZW46IHN0cmluZywgcmVmcmVzaFRva2VuOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNsZWFyVG9rZW5zOiAoKSA9PiB2b2lkO1xuICBsb2dvdXQ6ICgpID0+IHZvaWQ7XG4gIHNldElzTG9hZGluZzogKGlzTG9hZGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0RXJyb3I6IChlcnJvcjogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBNb2JpbGUtc3BlY2lmaWMgYXV0aGVudGljYXRpb24gc3RvcmUgdXNpbmcgWnVzdGFuZCB3aXRoIHNlY3VyZSBzdG9yYWdlXG4gKiBGaXhlcyBNLVNFQy0wMTogVXNlcyBleHBvLXNlY3VyZS1zdG9yZSBpbnN0ZWFkIG9mIEFzeW5jU3RvcmFnZSBmb3IgSldUIHRva2Vuc1xuICogUGVyc2lzdHMgc2Vuc2l0aXZlIHRva2VucyBzZWN1cmVseSBhbmQgdXNlciBkYXRhIHNhZmVseVxuICovXG5leHBvcnQgY29uc3QgdXNlQXV0aFN0b3JlID0gY3JlYXRlPEF1dGhTdGF0ZT4oKShcbiAgcGVyc2lzdChcbiAgICBpbW1lcigoc2V0KSA9PiAoe1xuICAgICAgdXNlcjogbnVsbCxcbiAgICAgIGFjY2Vzc1Rva2VuOiBudWxsLFxuICAgICAgcmVmcmVzaFRva2VuOiBudWxsLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcblxuICAgICAgLy8gVXBkYXRlIHVzZXIgZGF0YVxuICAgICAgc2V0VXNlcjogKHVzZXI6IFVzZXIgfCBudWxsKSA9PlxuICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUudXNlciA9IHVzZXI7XG4gICAgICAgICAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gdXNlciAhPT0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH0pLFxuXG4gICAgICAvLyBVcGRhdGUgdXNlciBkYXRhIChtZXJnZSB3aXRoIGV4aXN0aW5nKVxuICAgICAgdXBkYXRlVXNlcjogKHVzZXI6IFVzZXIpID0+XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBpZiAoc3RhdGUudXNlcikge1xuICAgICAgICAgICAgc3RhdGUudXNlciA9IHsgLi4uc3RhdGUudXNlciwgLi4udXNlciB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH0pLFxuXG4gICAgICAvLyBTZXQgdG9rZW5zIGFmdGVyIHN1Y2Nlc3NmdWwgbG9naW4vcmVnaXN0cmF0aW9uXG4gICAgICBzZXRUb2tlbnM6IChhY2Nlc3NUb2tlbjogc3RyaW5nLCByZWZyZXNoVG9rZW46IHN0cmluZykgPT5cbiAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XG4gICAgICAgICAgc3RhdGUucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xuICAgICAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9KSxcblxuICAgICAgLy8gQ2xlYXIgdG9rZW5zIG9uIGxvZ291dFxuICAgICAgY2xlYXJUb2tlbnM6ICgpID0+XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IG51bGw7XG4gICAgICAgICAgc3RhdGUucmVmcmVzaFRva2VuID0gbnVsbDtcbiAgICAgICAgICBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH0pLFxuXG4gICAgICAvLyBGdWxsIGxvZ291dFxuICAgICAgbG9nb3V0OiAoKSA9PlxuICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUudXNlciA9IG51bGw7XG4gICAgICAgICAgc3RhdGUuYWNjZXNzVG9rZW4gPSBudWxsO1xuICAgICAgICAgIHN0YXRlLnJlZnJlc2hUb2tlbiA9IG51bGw7XG4gICAgICAgICAgc3RhdGUuaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9KSxcblxuICAgICAgLy8gU2V0IGxvYWRpbmcgc3RhdGVcbiAgICAgIHNldElzTG9hZGluZzogKGlzTG9hZGluZzogYm9vbGVhbikgPT5cbiAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGlzTG9hZGluZztcbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH0pLFxuXG4gICAgICAvLyBTZXQgZXJyb3IgbWVzc2FnZVxuICAgICAgc2V0RXJyb3I6IChlcnJvcjogc3RyaW5nIHwgbnVsbCkgPT5cbiAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3I7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9KSxcbiAgICB9KSksXG4gICAge1xuICAgICAgbmFtZTogXCJhdXRoLXN0b3JhZ2Utc2VjdXJlXCIsXG4gICAgICBzdG9yYWdlOiBjcmVhdGVTZWN1cmVTdG9yYWdlKCkgYXMgYW55LFxuICAgICAgcGFydGlhbGl6ZTogKHN0YXRlKSA9PiAoe1xuICAgICAgICBhY2Nlc3NUb2tlbjogc3RhdGUuYWNjZXNzVG9rZW4sXG4gICAgICAgIHJlZnJlc2hUb2tlbjogc3RhdGUucmVmcmVzaFRva2VuLFxuICAgICAgICB1c2VyOiBzdGF0ZS51c2VyLFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHN0YXRlLmlzQXV0aGVudGljYXRlZCxcbiAgICAgIH0pLFxuICAgIH0sXG4gICksXG4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLE1BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGNBQUEsR0FBQUgsT0FBQTtBQUE2RCxTQUFBSSxRQUFBQyxDQUFBLEVBQUFDLENBQUEsUUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLElBQUEsQ0FBQUosQ0FBQSxPQUFBRyxNQUFBLENBQUFFLHFCQUFBLFFBQUFDLENBQUEsR0FBQUgsTUFBQSxDQUFBRSxxQkFBQSxDQUFBTCxDQUFBLEdBQUFDLENBQUEsS0FBQUssQ0FBQSxHQUFBQSxDQUFBLENBQUFDLE1BQUEsV0FBQU4sQ0FBQSxXQUFBRSxNQUFBLENBQUFLLHdCQUFBLENBQUFSLENBQUEsRUFBQUMsQ0FBQSxFQUFBUSxVQUFBLE9BQUFQLENBQUEsQ0FBQVEsSUFBQSxDQUFBQyxLQUFBLENBQUFULENBQUEsRUFBQUksQ0FBQSxZQUFBSixDQUFBO0FBQUEsU0FBQVUsY0FBQVosQ0FBQSxhQUFBQyxDQUFBLE1BQUFBLENBQUEsR0FBQVksU0FBQSxDQUFBQyxNQUFBLEVBQUFiLENBQUEsVUFBQUMsQ0FBQSxXQUFBVyxTQUFBLENBQUFaLENBQUEsSUFBQVksU0FBQSxDQUFBWixDQUFBLFFBQUFBLENB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