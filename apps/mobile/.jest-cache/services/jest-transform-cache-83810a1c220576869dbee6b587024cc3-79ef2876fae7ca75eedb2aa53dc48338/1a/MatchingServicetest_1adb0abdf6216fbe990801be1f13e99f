62002c8402629ab060b6581e7ff3ed7d
"use strict";

_getJestObj().mock("../api", function () {
  return {
    api: {
      get: jest.fn(),
      post: jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _MatchingService = require("../MatchingService");
var _api = require("../api");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockApi = _api.api;
describe('MatchingService', function () {
  var matchingService;
  beforeEach(function () {
    matchingService = new _MatchingService.MatchingService();
    jest.clearAllMocks();
  });
  describe('getRecommendations', function () {
    it('should get recommendations without filters', (0, _asyncToGenerator2.default)(function* () {
      var mockRecommendations = [{
        pet: {
          id: 'pet1',
          name: 'Buddy',
          species: 'Dog',
          breed: 'Golden Retriever',
          age: 2,
          size: 'large',
          personalityTags: ['friendly', 'energetic'],
          intent: 'friendship',
          photos: ['photo1.jpg'],
          ownerId: 'user1'
        },
        compatibilityScore: 85,
        reasons: ['Similar energy levels', 'Compatible personalities'],
        distance: 5.2
      }];
      mockApi.get.mockResolvedValue({
        data: mockRecommendations
      });
      var result = yield matchingService.getRecommendations();
      expect(mockApi.get).toHaveBeenCalledWith('/matching/recommendations');
      expect(result).toEqual(mockRecommendations);
    }));
    it('should get recommendations with filters', (0, _asyncToGenerator2.default)(function* () {
      var filters = {
        species: 'Dog',
        minAge: 1,
        maxAge: 5,
        size: 'medium',
        intent: 'friendship',
        distance: 10
      };
      var mockRecommendations = [{
        pet: {
          id: 'pet2',
          name: 'Max',
          species: 'Dog',
          breed: 'Labrador',
          age: 3,
          size: 'medium',
          personalityTags: ['playful', 'loyal'],
          intent: 'friendship',
          photos: ['photo2.jpg'],
          ownerId: 'user2'
        },
        compatibilityScore: 92,
        reasons: ['Perfect match!', 'Shared interests'],
        distance: 3.1
      }];
      mockApi.get.mockResolvedValue({
        data: mockRecommendations
      });
      var result = yield matchingService.getRecommendations(filters);
      expect(mockApi.get).toHaveBeenCalledWith('/matching/recommendations', {
        params: filters
      });
      expect(result).toEqual(mockRecommendations);
    }));
    it('should handle empty recommendations', (0, _asyncToGenerator2.default)(function* () {
      mockApi.get.mockResolvedValue({
        data: []
      });
      var result = yield matchingService.getRecommendations();
      expect(result).toEqual([]);
    }));
    it('should handle API errors', (0, _asyncToGenerator2.default)(function* () {
      var mockError = new Error('Network error');
      mockApi.get.mockRejectedValue(mockError);
      yield expect(matchingService.getRecommendations()).rejects.toThrow('Network error');
    }));
  });
  describe('recordSwipe', function () {
    it('should record like action successfully', (0, _asyncToGenerator2.default)(function* () {
      var swipeAction = {
        petId: 'pet123',
        action: 'like',
        timestamp: Date.now()
      };
      var mockResponse = {
        success: true,
        match: {
          id: 'match123',
          pet1Id: 'currentPet',
          pet2Id: 'pet123',
          compatibilityScore: 88,
          createdAt: new Date().toISOString()
        }
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield matchingService.recordSwipe(swipeAction);
      expect(mockApi.post).toHaveBeenCalledWith('/matching/swipe', {
        petId: 'pet123',
        action: 'like',
        timestamp: swipeAction.timestamp
      });
      expect(result).toEqual(mockResponse);
    }));
    it('should record pass action successfully', (0, _asyncToGenerator2.default)(function* () {
      var swipeAction = {
        petId: 'pet456',
        action: 'pass',
        timestamp: Date.now()
      };
      var mockResponse = {
        success: true,
        match: null
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield matchingService.recordSwipe(swipeAction);
      expect(mockApi.post).toHaveBeenCalledWith('/matching/swipe', {
        petId: 'pet456',
        action: 'pass',
        timestamp: swipeAction.timestamp
      });
      expect(result).toEqual(mockResponse);
    }));
    it('should record superlike action successfully', (0, _asyncToGenerator2.default)(function* () {
      var swipeAction = {
        petId: 'pet789',
        action: 'superlike',
        timestamp: Date.now()
      };
      var mockResponse = {
        success: true,
        match: {
          id: 'match456',
          pet1Id: 'currentPet',
          pet2Id: 'pet789',
          compatibilityScore: 95,
          createdAt: new Date().toISOString()
        }
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield matchingService.recordSwipe(swipeAction);
      expect(mockApi.post).toHaveBeenCalledWith('/matching/swipe', {
        petId: 'pet789',
        action: 'superlike',
        timestamp: swipeAction.timestamp
      });
      expect(result).toEqual(mockResponse);
    }));
    it('should handle swipe recording errors', (0, _asyncToGenerator2.default)(function* () {
      var swipeAction = {
        petId: 'pet999',
        action: 'like',
        timestamp: Date.now()
      };
      var mockError = new Error('Invalid pet ID');
      mockApi.post.mockRejectedValue(mockError);
      yield expect(matchingService.recordSwipe(swipeAction)).rejects.toThrow('Invalid pet ID');
    }));
  });
  describe('getMatches', function () {
    it('should get user matches successfully', (0, _asyncToGenerator2.default)(function* () {
      var mockMatches = [{
        id: 'match1',
        pet1: {
          id: 'pet1',
          name: 'Buddy',
          photos: ['buddy1.jpg']
        },
        pet2: {
          id: 'pet2',
          name: 'Luna',
          photos: ['luna1.jpg']
        },
        compatibilityScore: 87,
        createdAt: '2024-01-15T10:30:00Z',
        lastMessage: {
          text: 'Hey! Want to meet up?',
          timestamp: '2024-01-15T11:00:00Z',
          senderId: 'user1'
        }
      }];
      mockApi.get.mockResolvedValue({
        data: mockMatches
      });
      var result = yield matchingService.getMatches();
      expect(mockApi.get).toHaveBeenCalledWith('/matching/matches');
      expect(result).toEqual(mockMatches);
    }));
    it('should handle empty matches list', (0, _asyncToGenerator2.default)(function* () {
      mockApi.get.mockResolvedValue({
        data: []
      });
      var result = yield matchingService.getMatches();
      expect(result).toEqual([]);
    }));
    it('should handle matches API errors', (0, _asyncToGenerator2.default)(function* () {
      var mockError = new Error('Failed to load matches');
      mockApi.get.mockRejectedValue(mockError);
      yield expect(matchingService.getMatches()).rejects.toThrow('Failed to load matches');
    }));
  });
  describe('getCompatibilityScore', function () {
    it('should calculate compatibility between two pets', (0, _asyncToGenerator2.default)(function* () {
      var pet1Id = 'pet1';
      var pet2Id = 'pet2';
      var mockCompatibility = {
        score: 78,
        reasons: ['Similar energy levels', 'Compatible sizes', 'Shared personality traits'],
        breakdown: {
          personalityMatch: 80,
          sizeCompatibility: 85,
          ageDifference: 70,
          intentAlignment: 75
        }
      };
      mockApi.get.mockResolvedValue({
        data: mockCompatibility
      });
      var result = yield matchingService.getCompatibilityScore(pet1Id, pet2Id);
      expect(mockApi.get).toHaveBeenCalledWith(`/matching/compatibility/${pet1Id}/${pet2Id}`);
      expect(result).toEqual(mockCompatibility);
    }));
    it('should handle compatibility calculation errors', (0, _asyncToGenerator2.default)(function* () {
      var mockError = new Error('Pets not found');
      mockApi.get.mockRejectedValue(mockError);
      yield expect(matchingService.getCompatibilityScore('invalid1', 'invalid2')).rejects.toThrow('Pets not found');
    }));
  });
  describe('updateFilters', function () {
    it('should update user matching filters', (0, _asyncToGenerator2.default)(function* () {
      var filters = {
        species: 'Dog',
        minAge: 1,
        maxAge: 7,
        size: 'medium',
        intent: 'friendship',
        distance: 25,
        breed: 'Golden Retriever'
      };
      var mockResponse = {
        success: true,
        filters: _objectSpread(_objectSpread({}, filters), {}, {
          userId: 'currentUser'
        })
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield matchingService.updateFilters(filters);
      expect(mockApi.post).toHaveBeenCalledWith('/matching/filters', filters);
      expect(result).toEqual(mockResponse);
    }));
    it('should handle filter update errors', (0, _asyncToGenerator2.default)(function* () {
      var filters = {
        species: 'Invalid'
      };
      var mockError = new Error('Invalid species filter');
      mockApi.post.mockRejectedValue(mockError);
      yield expect(matchingService.updateFilters(filters)).rejects.toThrow('Invalid species filter');
    }));
  });
  describe('getFilterOptions', function () {
    it('should get available filter options', (0, _asyncToGenerator2.default)(function* () {
      var mockOptions = {
        species: ['Dog', 'Cat', 'Bird', 'Rabbit'],
        sizes: ['small', 'medium', 'large'],
        intents: ['friendship', 'dating', 'breeding'],
        breeds: ['Golden Retriever', 'Labrador', 'Poodle'],
        maxDistance: 100
      };
      mockApi.get.mockResolvedValue({
        data: mockOptions
      });
      var result = yield matchingService.getFilterOptions();
      expect(mockApi.get).toHaveBeenCalledWith('/matching/filter-options');
      expect(result).toEqual(mockOptions);
    }));
    it('should handle filter options fetch errors', (0, _asyncToGenerator2.default)(function* () {
      var mockError = new Error('Service unavailable');
      mockApi.get.mockRejectedValue(mockError);
      yield expect(matchingService.getFilterOptions()).rejects.toThrow('Service unavailable');
    }));
  });
  describe('Integration scenarios', function () {
    it('should handle complete matching workflow', (0, _asyncToGenerator2.default)(function* () {
      var mockRecommendations = [{
        pet: {
          id: 'pet1',
          name: 'Buddy'
        },
        compatibilityScore: 85,
        reasons: ['Great match!']
      }];
      mockApi.get.mockResolvedValueOnce({
        data: mockRecommendations
      });
      var mockSwipeResult = {
        success: true,
        match: {
          id: 'match1',
          compatibilityScore: 85
        }
      };
      mockApi.post.mockResolvedValueOnce({
        data: mockSwipeResult
      });
      var recommendations = yield matchingService.getRecommendations();
      expect(recommendations).toHaveLength(1);
      var swipeResult = yield matchingService.recordSwipe({
        petId: 'pet1',
        action: 'like',
        timestamp: Date.now()
      });
      expect(swipeResult.success).toBe(true);
      expect(swipeResult.match).toBeDefined();
    }));
    it('should handle filter and recommendation workflow', (0, _asyncToGenerator2.default)(function* () {
      mockApi.post.mockResolvedValueOnce({
        data: {
          success: true
        }
      });
      var mockFilteredRecs = [{
        pet: {
          id: 'pet2',
          species: 'Dog',
          size: 'medium'
        },
        compatibilityScore: 90,
        reasons: ['Perfect size match']
      }];
      mockApi.get.mockResolvedValueOnce({
        data: mockFilteredRecs
      });
      var filters = {
        species: 'Dog',
        size: 'medium'
      };
      yield matchingService.updateFilters(filters);
      var recommendations = yield matchingService.getRecommendations(filters);
      expect(recommendations).toHaveLength(1);
      expect(recommendations[0].pet.species).toBe('Dog');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhcGkiLCJnZXQiLCJqZXN0IiwiZm4iLCJwb3N0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZGVmaW5lUHJvcGVydHkyIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX01hdGNoaW5nU2VydmljZSIsIl9hcGkiLCJvd25LZXlzIiwiZSIsInIiLCJ0IiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJkZWZhdWx0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsIl9yZXF1aXJlIiwibW9ja0FwaSIsImRlc2NyaWJlIiwibWF0Y2hpbmdTZXJ2aWNlIiwiYmVmb3JlRWFjaCIsIk1hdGNoaW5nU2VydmljZSIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vY2tSZWNvbW1lbmRhdGlvbnMiLCJwZXQiLCJpZCIsIm5hbWUiLCJzcGVjaWVzIiwiYnJlZWQiLCJhZ2UiLCJzaXplIiwicGVyc29uYWxpdHlUYWdzIiwiaW50ZW50IiwicGhvdG9zIiwib3duZXJJZCIsImNvbXBhdGliaWxpdHlTY29yZSIsInJlYXNvbnMiLCJkaXN0YW5jZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsInJlc3VsdCIsImdldFJlY29tbWVuZGF0aW9ucyIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidG9FcXVhbCIsImZpbHRlcnMiLCJtaW5BZ2UiLCJtYXhBZ2UiLCJwYXJhbXMiLCJtb2NrRXJyb3IiLCJFcnJvciIsIm1vY2tSZWplY3RlZFZhbHVlIiwicmVqZWN0cyIsInRvVGhyb3ciLCJzd2lwZUFjdGlvbiIsInBldElkIiwiYWN0aW9uIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIm1vY2tSZXNwb25zZSIsInN1Y2Nlc3MiLCJtYXRjaCIsInBldDFJZCIsInBldDJJZCIsImNyZWF0ZWRBdCIsInRvSVNPU3RyaW5nIiwicmVjb3JkU3dpcGUiLCJtb2NrTWF0Y2hlcyIsInBldDEiLCJwZXQyIiwibGFzdE1lc3NhZ2UiLCJ0ZXh0Iiwic2VuZGVySWQiLCJnZXRNYXRjaGVzIiwibW9ja0NvbXBhdGliaWxpdHkiLCJzY29yZSIsImJyZWFrZG93biIsInBlcnNvbmFsaXR5TWF0Y2giLCJzaXplQ29tcGF0aWJpbGl0eSIsImFnZURpZmZlcmVuY2UiLCJpbnRlbnRBbGlnbm1lbnQiLCJnZXRDb21wYXRpYmlsaXR5U2NvcmUiLCJ1c2VySWQiLCJ1cGRhdGVGaWx0ZXJzIiwibW9ja09wdGlvbnMiLCJzaXplcyIsImludGVudHMiLCJicmVlZHMiLCJtYXhEaXN0YW5jZSIsImdldEZpbHRlck9wdGlvbnMiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJtb2NrU3dpcGVSZXN1bHQiLCJyZWNvbW1lbmRhdGlvbnMiLCJ0b0hhdmVMZW5ndGgiLCJzd2lwZVJlc3VsdCIsInRvQmUiLCJ0b0JlRGVmaW5lZCIsIm1vY2tGaWx0ZXJlZFJlY3MiXSwic291cmNlcyI6WyJNYXRjaGluZ1NlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1hdGNoaW5nIFNlcnZpY2UgVGVzdHNcbiAqIFRlc3RzIHBldCBtYXRjaGluZyBsb2dpYywgcmVjb21tZW5kYXRpb25zLCBhbmQgc3dpcGUgYWN0aW9uc1xuICovXG5cbmltcG9ydCB7IE1hdGNoaW5nU2VydmljZSB9IGZyb20gJy4uL01hdGNoaW5nU2VydmljZSc7XG5cbi8vIE1vY2sgdGhlIEFQSVxuamVzdC5tb2NrKCcuLi9hcGknLCAoKSA9PiAoe1xuICBhcGk6IHtcbiAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICBwb3N0OiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbmltcG9ydCB7IGFwaSB9IGZyb20gJy4uL2FwaSc7XG5cbmNvbnN0IG1vY2tBcGkgPSBhcGkgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGFwaT47XG5cbmRlc2NyaWJlKCdNYXRjaGluZ1NlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBtYXRjaGluZ1NlcnZpY2U6IE1hdGNoaW5nU2VydmljZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtYXRjaGluZ1NlcnZpY2UgPSBuZXcgTWF0Y2hpbmdTZXJ2aWNlKCk7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRSZWNvbW1lbmRhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgcmVjb21tZW5kYXRpb25zIHdpdGhvdXQgZmlsdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZWNvbW1lbmRhdGlvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBwZXQ6IHtcbiAgICAgICAgICAgIGlkOiAncGV0MScsXG4gICAgICAgICAgICBuYW1lOiAnQnVkZHknLFxuICAgICAgICAgICAgc3BlY2llczogJ0RvZycsXG4gICAgICAgICAgICBicmVlZDogJ0dvbGRlbiBSZXRyaWV2ZXInLFxuICAgICAgICAgICAgYWdlOiAyLFxuICAgICAgICAgICAgc2l6ZTogJ2xhcmdlJyxcbiAgICAgICAgICAgIHBlcnNvbmFsaXR5VGFnczogWydmcmllbmRseScsICdlbmVyZ2V0aWMnXSxcbiAgICAgICAgICAgIGludGVudDogJ2ZyaWVuZHNoaXAnLFxuICAgICAgICAgICAgcGhvdG9zOiBbJ3Bob3RvMS5qcGcnXSxcbiAgICAgICAgICAgIG93bmVySWQ6ICd1c2VyMScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IDg1LFxuICAgICAgICAgIHJlYXNvbnM6IFsnU2ltaWxhciBlbmVyZ3kgbGV2ZWxzJywgJ0NvbXBhdGlibGUgcGVyc29uYWxpdGllcyddLFxuICAgICAgICAgIGRpc3RhbmNlOiA1LjIsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrQXBpLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tSZWNvbW1lbmRhdGlvbnMgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hdGNoaW5nU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbnMoKTtcblxuICAgICAgZXhwZWN0KG1vY2tBcGkuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL21hdGNoaW5nL3JlY29tbWVuZGF0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVjb21tZW5kYXRpb25zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2V0IHJlY29tbWVuZGF0aW9ucyB3aXRoIGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgICBzcGVjaWVzOiAnRG9nJyxcbiAgICAgICAgbWluQWdlOiAxLFxuICAgICAgICBtYXhBZ2U6IDUsXG4gICAgICAgIHNpemU6ICdtZWRpdW0nLFxuICAgICAgICBpbnRlbnQ6ICdmcmllbmRzaGlwJyxcbiAgICAgICAgZGlzdGFuY2U6IDEwLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1JlY29tbWVuZGF0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHBldDoge1xuICAgICAgICAgICAgaWQ6ICdwZXQyJyxcbiAgICAgICAgICAgIG5hbWU6ICdNYXgnLFxuICAgICAgICAgICAgc3BlY2llczogJ0RvZycsXG4gICAgICAgICAgICBicmVlZDogJ0xhYnJhZG9yJyxcbiAgICAgICAgICAgIGFnZTogMyxcbiAgICAgICAgICAgIHNpemU6ICdtZWRpdW0nLFxuICAgICAgICAgICAgcGVyc29uYWxpdHlUYWdzOiBbJ3BsYXlmdWwnLCAnbG95YWwnXSxcbiAgICAgICAgICAgIGludGVudDogJ2ZyaWVuZHNoaXAnLFxuICAgICAgICAgICAgcGhvdG9zOiBbJ3Bob3RvMi5qcGcnXSxcbiAgICAgICAgICAgIG93bmVySWQ6ICd1c2VyMicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IDkyLFxuICAgICAgICAgIHJlYXNvbnM6IFsnUGVyZmVjdCBtYXRjaCEnLCAnU2hhcmVkIGludGVyZXN0cyddLFxuICAgICAgICAgIGRpc3RhbmNlOiAzLjEsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrQXBpLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tSZWNvbW1lbmRhdGlvbnMgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hdGNoaW5nU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbnMoZmlsdGVycyk7XG5cbiAgICAgIGV4cGVjdChtb2NrQXBpLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9tYXRjaGluZy9yZWNvbW1lbmRhdGlvbnMnLCB7XG4gICAgICAgIHBhcmFtczogZmlsdGVycyxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVjb21tZW5kYXRpb25zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlY29tbWVuZGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGkuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10gfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hdGNoaW5nU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbnMoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBBUEkgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0Vycm9yID0gbmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJyk7XG4gICAgICBtb2NrQXBpLmdldC5tb2NrUmVqZWN0ZWRWYWx1ZShtb2NrRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QobWF0Y2hpbmdTZXJ2aWNlLmdldFJlY29tbWVuZGF0aW9ucygpKS5yZWplY3RzLnRvVGhyb3coJ05ldHdvcmsgZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JlY29yZFN3aXBlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVjb3JkIGxpa2UgYWN0aW9uIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN3aXBlQWN0aW9uID0ge1xuICAgICAgICBwZXRJZDogJ3BldDEyMycsXG4gICAgICAgIGFjdGlvbjogJ2xpa2UnIGFzIGNvbnN0LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgaWQ6ICdtYXRjaDEyMycsXG4gICAgICAgICAgcGV0MUlkOiAnY3VycmVudFBldCcsXG4gICAgICAgICAgcGV0MklkOiAncGV0MTIzJyxcbiAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IDg4LFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UucmVjb3JkU3dpcGUoc3dpcGVBY3Rpb24pO1xuXG4gICAgICBleHBlY3QobW9ja0FwaS5wb3N0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL21hdGNoaW5nL3N3aXBlJywge1xuICAgICAgICBwZXRJZDogJ3BldDEyMycsXG4gICAgICAgIGFjdGlvbjogJ2xpa2UnLFxuICAgICAgICB0aW1lc3RhbXA6IHN3aXBlQWN0aW9uLnRpbWVzdGFtcCxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVzcG9uc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgcGFzcyBhY3Rpb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3dpcGVBY3Rpb24gPSB7XG4gICAgICAgIHBldElkOiAncGV0NDU2JyxcbiAgICAgICAgYWN0aW9uOiAncGFzcycgYXMgY29uc3QsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWF0Y2g6IG51bGwsIC8vIE5vIG1hdGNoIGZvciBwYXNzIGFjdGlvblxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UucmVjb3JkU3dpcGUoc3dpcGVBY3Rpb24pO1xuXG4gICAgICBleHBlY3QobW9ja0FwaS5wb3N0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL21hdGNoaW5nL3N3aXBlJywge1xuICAgICAgICBwZXRJZDogJ3BldDQ1NicsXG4gICAgICAgIGFjdGlvbjogJ3Bhc3MnLFxuICAgICAgICB0aW1lc3RhbXA6IHN3aXBlQWN0aW9uLnRpbWVzdGFtcCxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVzcG9uc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWNvcmQgc3VwZXJsaWtlIGFjdGlvbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzd2lwZUFjdGlvbiA9IHtcbiAgICAgICAgcGV0SWQ6ICdwZXQ3ODknLFxuICAgICAgICBhY3Rpb246ICdzdXBlcmxpa2UnIGFzIGNvbnN0LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1hdGNoOiB7XG4gICAgICAgICAgaWQ6ICdtYXRjaDQ1NicsXG4gICAgICAgICAgcGV0MUlkOiAnY3VycmVudFBldCcsXG4gICAgICAgICAgcGV0MklkOiAncGV0Nzg5JyxcbiAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IDk1LFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UucmVjb3JkU3dpcGUoc3dpcGVBY3Rpb24pO1xuXG4gICAgICBleHBlY3QobW9ja0FwaS5wb3N0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL21hdGNoaW5nL3N3aXBlJywge1xuICAgICAgICBwZXRJZDogJ3BldDc4OScsXG4gICAgICAgIGFjdGlvbjogJ3N1cGVybGlrZScsXG4gICAgICAgIHRpbWVzdGFtcDogc3dpcGVBY3Rpb24udGltZXN0YW1wLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzd2lwZSByZWNvcmRpbmcgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3dpcGVBY3Rpb24gPSB7XG4gICAgICAgIHBldElkOiAncGV0OTk5JyxcbiAgICAgICAgYWN0aW9uOiAnbGlrZScgYXMgY29uc3QsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tFcnJvciA9IG5ldyBFcnJvcignSW52YWxpZCBwZXQgSUQnKTtcbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVqZWN0ZWRWYWx1ZShtb2NrRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QobWF0Y2hpbmdTZXJ2aWNlLnJlY29yZFN3aXBlKHN3aXBlQWN0aW9uKSkucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIHBldCBJRCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0TWF0Y2hlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCB1c2VyIG1hdGNoZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja01hdGNoZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21hdGNoMScsXG4gICAgICAgICAgcGV0MToge1xuICAgICAgICAgICAgaWQ6ICdwZXQxJyxcbiAgICAgICAgICAgIG5hbWU6ICdCdWRkeScsXG4gICAgICAgICAgICBwaG90b3M6IFsnYnVkZHkxLmpwZyddLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGV0Mjoge1xuICAgICAgICAgICAgaWQ6ICdwZXQyJyxcbiAgICAgICAgICAgIG5hbWU6ICdMdW5hJyxcbiAgICAgICAgICAgIHBob3RvczogWydsdW5hMS5qcGcnXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBhdGliaWxpdHlTY29yZTogODcsXG4gICAgICAgICAgY3JlYXRlZEF0OiAnMjAyNC0wMS0xNVQxMDozMDowMFonLFxuICAgICAgICAgIGxhc3RNZXNzYWdlOiB7XG4gICAgICAgICAgICB0ZXh0OiAnSGV5ISBXYW50IHRvIG1lZXQgdXA/JyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogJzIwMjQtMDEtMTVUMTE6MDA6MDBaJyxcbiAgICAgICAgICAgIHNlbmRlcklkOiAndXNlcjEnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrQXBpLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tNYXRjaGVzIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UuZ2V0TWF0Y2hlcygpO1xuXG4gICAgICBleHBlY3QobW9ja0FwaS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvbWF0Y2hpbmcvbWF0Y2hlcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrTWF0Y2hlcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBtYXRjaGVzIGxpc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXBpLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UuZ2V0TWF0Y2hlcygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hdGNoZXMgQVBJIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFcnJvciA9IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgbWF0Y2hlcycpO1xuICAgICAgbW9ja0FwaS5nZXQubW9ja1JlamVjdGVkVmFsdWUobW9ja0Vycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KG1hdGNoaW5nU2VydmljZS5nZXRNYXRjaGVzKCkpLnJlamVjdHMudG9UaHJvdygnRmFpbGVkIHRvIGxvYWQgbWF0Y2hlcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0Q29tcGF0aWJpbGl0eVNjb3JlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIGNvbXBhdGliaWxpdHkgYmV0d2VlbiB0d28gcGV0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBldDFJZCA9ICdwZXQxJztcbiAgICAgIGNvbnN0IHBldDJJZCA9ICdwZXQyJztcblxuICAgICAgY29uc3QgbW9ja0NvbXBhdGliaWxpdHkgPSB7XG4gICAgICAgIHNjb3JlOiA3OCxcbiAgICAgICAgcmVhc29uczogW1xuICAgICAgICAgICdTaW1pbGFyIGVuZXJneSBsZXZlbHMnLFxuICAgICAgICAgICdDb21wYXRpYmxlIHNpemVzJyxcbiAgICAgICAgICAnU2hhcmVkIHBlcnNvbmFsaXR5IHRyYWl0cycsXG4gICAgICAgIF0sXG4gICAgICAgIGJyZWFrZG93bjoge1xuICAgICAgICAgIHBlcnNvbmFsaXR5TWF0Y2g6IDgwLFxuICAgICAgICAgIHNpemVDb21wYXRpYmlsaXR5OiA4NSxcbiAgICAgICAgICBhZ2VEaWZmZXJlbmNlOiA3MCxcbiAgICAgICAgICBpbnRlbnRBbGlnbm1lbnQ6IDc1LFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5nZXQubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBtb2NrQ29tcGF0aWJpbGl0eSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWF0Y2hpbmdTZXJ2aWNlLmdldENvbXBhdGliaWxpdHlTY29yZShwZXQxSWQsIHBldDJJZCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQXBpLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoYC9tYXRjaGluZy9jb21wYXRpYmlsaXR5LyR7cGV0MUlkfS8ke3BldDJJZH1gKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0NvbXBhdGliaWxpdHkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29tcGF0aWJpbGl0eSBjYWxjdWxhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRXJyb3IgPSBuZXcgRXJyb3IoJ1BldHMgbm90IGZvdW5kJyk7XG4gICAgICBtb2NrQXBpLmdldC5tb2NrUmVqZWN0ZWRWYWx1ZShtb2NrRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIG1hdGNoaW5nU2VydmljZS5nZXRDb21wYXRpYmlsaXR5U2NvcmUoJ2ludmFsaWQxJywgJ2ludmFsaWQyJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdQZXRzIG5vdCBmb3VuZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlRmlsdGVycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSB1c2VyIG1hdGNoaW5nIGZpbHRlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgICBzcGVjaWVzOiAnRG9nJyxcbiAgICAgICAgbWluQWdlOiAxLFxuICAgICAgICBtYXhBZ2U6IDcsXG4gICAgICAgIHNpemU6ICdtZWRpdW0nLFxuICAgICAgICBpbnRlbnQ6ICdmcmllbmRzaGlwJyxcbiAgICAgICAgZGlzdGFuY2U6IDI1LFxuICAgICAgICBicmVlZDogJ0dvbGRlbiBSZXRyaWV2ZXInLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBmaWx0ZXJzOiB7IC4uLmZpbHRlcnMsIHVzZXJJZDogJ2N1cnJlbnRVc2VyJyB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UudXBkYXRlRmlsdGVycyhmaWx0ZXJzKTtcblxuICAgICAgZXhwZWN0KG1vY2tBcGkucG9zdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9tYXRjaGluZy9maWx0ZXJzJywgZmlsdGVycyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWx0ZXIgdXBkYXRlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7IHNwZWNpZXM6ICdJbnZhbGlkJyB9O1xuICAgICAgY29uc3QgbW9ja0Vycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIHNwZWNpZXMgZmlsdGVyJyk7XG4gICAgICBtb2NrQXBpLnBvc3QubW9ja1JlamVjdGVkVmFsdWUobW9ja0Vycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KG1hdGNoaW5nU2VydmljZS51cGRhdGVGaWx0ZXJzKGZpbHRlcnMpKS5yZWplY3RzLnRvVGhyb3coJ0ludmFsaWQgc3BlY2llcyBmaWx0ZXInKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEZpbHRlck9wdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgYXZhaWxhYmxlIGZpbHRlciBvcHRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09wdGlvbnMgPSB7XG4gICAgICAgIHNwZWNpZXM6IFsnRG9nJywgJ0NhdCcsICdCaXJkJywgJ1JhYmJpdCddLFxuICAgICAgICBzaXplczogWydzbWFsbCcsICdtZWRpdW0nLCAnbGFyZ2UnXSxcbiAgICAgICAgaW50ZW50czogWydmcmllbmRzaGlwJywgJ2RhdGluZycsICdicmVlZGluZyddLFxuICAgICAgICBicmVlZHM6IFsnR29sZGVuIFJldHJpZXZlcicsICdMYWJyYWRvcicsICdQb29kbGUnXSxcbiAgICAgICAgbWF4RGlzdGFuY2U6IDEwMCxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBcGkuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja09wdGlvbnMgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hdGNoaW5nU2VydmljZS5nZXRGaWx0ZXJPcHRpb25zKCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQXBpLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9tYXRjaGluZy9maWx0ZXItb3B0aW9ucycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrT3B0aW9ucyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWx0ZXIgb3B0aW9ucyBmZXRjaCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRXJyb3IgPSBuZXcgRXJyb3IoJ1NlcnZpY2UgdW5hdmFpbGFibGUnKTtcbiAgICAgIG1vY2tBcGkuZ2V0Lm1vY2tSZWplY3RlZFZhbHVlKG1vY2tFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChtYXRjaGluZ1NlcnZpY2UuZ2V0RmlsdGVyT3B0aW9ucygpKS5yZWplY3RzLnRvVGhyb3coJ1NlcnZpY2UgdW5hdmFpbGFibGUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHNjZW5hcmlvcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBtYXRjaGluZyB3b3JrZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBtb2NrUmVjb21tZW5kYXRpb25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgcGV0OiB7IGlkOiAncGV0MScsIG5hbWU6ICdCdWRkeScgfSxcbiAgICAgICAgICBjb21wYXRpYmlsaXR5U2NvcmU6IDg1LFxuICAgICAgICAgIHJlYXNvbnM6IFsnR3JlYXQgbWF0Y2ghJ10sXG4gICAgICAgIH0sXG4gICAgICBdO1xuICAgICAgbW9ja0FwaS5nZXQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZGF0YTogbW9ja1JlY29tbWVuZGF0aW9ucyB9KTtcblxuICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIHN3aXBlXG4gICAgICBjb25zdCBtb2NrU3dpcGVSZXN1bHQgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1hdGNoOiB7IGlkOiAnbWF0Y2gxJywgY29tcGF0aWJpbGl0eVNjb3JlOiA4NSB9LFxuICAgICAgfTtcbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiBtb2NrU3dpcGVSZXN1bHQgfSk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgd29ya2Zsb3dcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IG1hdGNoaW5nU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbnMoKTtcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKTtcblxuICAgICAgY29uc3Qgc3dpcGVSZXN1bHQgPSBhd2FpdCBtYXRjaGluZ1NlcnZpY2UucmVjb3JkU3dpcGUoe1xuICAgICAgICBwZXRJZDogJ3BldDEnLFxuICAgICAgICBhY3Rpb246ICdsaWtlJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfSk7XG4gICAgICBleHBlY3Qoc3dpcGVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzd2lwZVJlc3VsdC5tYXRjaCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZpbHRlciBhbmQgcmVjb21tZW5kYXRpb24gd29ya2Zsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGZpbHRlciB1cGRhdGVcbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiB7IHN1Y2Nlc3M6IHRydWUgfSB9KTtcblxuICAgICAgLy8gTW9jayBmaWx0ZXJlZCByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IG1vY2tGaWx0ZXJlZFJlY3MgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBwZXQ6IHsgaWQ6ICdwZXQyJywgc3BlY2llczogJ0RvZycsIHNpemU6ICdtZWRpdW0nIH0sXG4gICAgICAgICAgY29tcGF0aWJpbGl0eVNjb3JlOiA5MCxcbiAgICAgICAgICByZWFzb25zOiBbJ1BlcmZlY3Qgc2l6ZSBtYXRjaCddLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICAgIG1vY2tBcGkuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IG1vY2tGaWx0ZXJlZFJlY3MgfSk7XG5cbiAgICAgIC8vIEV4ZWN1dGUgd29ya2Zsb3dcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7IHNwZWNpZXM6ICdEb2cnLCBzaXplOiAnbWVkaXVtJyB9O1xuICAgICAgYXdhaXQgbWF0Y2hpbmdTZXJ2aWNlLnVwZGF0ZUZpbHRlcnMoZmlsdGVycyk7XG5cbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IG1hdGNoaW5nU2VydmljZS5nZXRSZWNvbW1lbmRhdGlvbnMoZmlsdGVycyk7XG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb25zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb25zWzBdLnBldC5zcGVjaWVzKS50b0JlKCdEb2cnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFRQUEsV0FBQSxHQUFLQyxJQUFJLFdBQVc7RUFBQSxPQUFPO0lBQ3pCQyxHQUFHLEVBQUU7TUFDSEMsR0FBRyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ2RDLElBQUksRUFBRUYsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDaEI7RUFDRixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBQUMsSUFBQUUsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLGdCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxrQkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBUkosSUFBQUcsZ0JBQUEsR0FBQUgsT0FBQTtBQVVBLElBQUFJLElBQUEsR0FBQUosT0FBQTtBQUE2QixTQUFBSyxRQUFBQyxDQUFBLEVBQUFDLENBQUEsUUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLElBQUEsQ0FBQUosQ0FBQSxPQUFBRyxNQUFBLENBQUFFLHFCQUFBLFFBQUFD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SUFBTUMsV0FBVyxTQUFTN0UsZUFBZSxDQUFDaUQsV0FBVyxDQUFDO1FBQ3BEWixLQUFLLEVBQUUsTUFBTTtRQUNiQyxNQUFNLEVBQUUsTUFBTTtRQUNkQyxTQUFTLEVBQUVDLElBQUksQ0FBQ0MsR0FBRyxDQUFDO01BQ3RCLENBQUMsQ0FBQztNQUNGakIsTUFBTSxDQUFDcUQsV0FBVyxDQUFDbEMsT0FBTyxDQUFDLENBQUNtQyxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3RDdEQsTUFBTSxDQUFDcUQsV0FBVyxDQUFDakMsS0FBSyxDQUFDLENBQUNtQyxXQUFXLENBQUMsQ0FBQztJQUN6QyxDQUFDLEVBQUM7SUFFRjNFLEVBQUUsQ0FBQyxrREFBa0QsTUFBQS9CLGtCQUFBLENBQUFvQixPQUFBLEVBQUUsYUFBWTtNQUVqRUssT0FBTyxDQUFDN0IsSUFBSSxDQUFDd0cscUJBQXFCLENBQUM7UUFBRXBELElBQUksRUFBRTtVQUFFc0IsT0FBTyxFQUFFO1FBQUs7TUFBRSxDQUFDLENBQUM7TUFHL0QsSUFBTXFDLGdCQUFnQixHQUFHLENBQ3ZCO1FBQ0UxRSxHQUFHLEVBQUU7VUFBRUMsRUFBRSxFQUFFLE1BQU07VUFBRUUsT0FBTyxFQUFFLEtBQUs7VUFBRUcsSUFBSSxFQUFFO1FBQVMsQ0FBQztRQUNuREssa0JBQWtCLEVBQUUsRUFBRTtRQUN0QkMsT0FBTyxFQUFFLENBQUMsb0JBQW9CO01BQ2hDLENBQUMsQ0FDRjtNQUNEcEIsT0FBTyxDQUFDaEMsR0FBRyxDQUFDMkcscUJBQXFCLENBQUM7UUFBRXBELElBQUksRUFBRTJEO01BQWlCLENBQUMsQ0FBQztNQUc3RCxJQUFNckQsT0FBTyxHQUFHO1FBQUVsQixPQUFPLEVBQUUsS0FBSztRQUFFRyxJQUFJLEVBQUU7TUFBUyxDQUFDO01BQ2xELE1BQU1aLGVBQWUsQ0FBQ2tFLGFBQWEsQ0FBQ3ZDLE9BQU8sQ0FBQztNQUU1QyxJQUFNZ0QsZUFBZSxTQUFTM0UsZUFBZSxDQUFDdUIsa0JBQWtCLENBQUNJLE9BQU8sQ0FBQztNQUN6RUgsTUFBTSxDQUFDbUQsZUFBZSxDQUFDLENBQUNDLFlBQVksQ0FBQyxDQUFDLENBQUM7TUFDdkNwRCxNQUFNLENBQUNtRCxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUNyRSxHQUFHLENBQUNHLE9BQU8sQ0FBQyxDQUFDcUUsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwRCxDQUFDLEVBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=