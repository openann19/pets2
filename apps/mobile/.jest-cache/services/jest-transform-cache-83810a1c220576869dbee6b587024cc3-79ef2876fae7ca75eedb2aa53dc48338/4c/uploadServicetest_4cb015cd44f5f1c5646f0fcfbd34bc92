4cdc6c0107029c9dc5787be06c0a194e
"use strict";

_getJestObj().mock("../api", function () {
  return {
    api: {
      post: jest.fn()
    }
  };
});
_getJestObj().mock('expo-image-picker', function () {
  return {
    launchImageLibraryAsync: jest.fn(),
    launchCameraAsync: jest.fn(),
    requestMediaLibraryPermissionsAsync: jest.fn(),
    requestCameraPermissionsAsync: jest.fn(),
    MediaTypeOptions: {
      Images: 'Images'
    }
  };
});
_getJestObj().mock('expo-file-system', function () {
  return {
    uploadAsync: jest.fn(),
    FileSystemUploadType: {
      BINARY_CONTENT: 'BINARY_CONTENT'
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _uploadService = require("../uploadService");
var _api = require("../api");
function _getJestObj() {
  var _require7 = require("@jest/globals"),
    jest = _require7.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockApi = _api.api;
describe('UploadService', function () {
  beforeEach(function () {
    jest.clearAllMocks();
  });
  describe('uploadPhoto', function () {
    it('should upload photo successfully', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['test'], 'test.jpg', {
        type: 'image/jpeg'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/photo.jpg',
        publicId: 'photo123'
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield _uploadService.uploadService.uploadPhoto(mockFile);
      expect(mockApi.post).toHaveBeenCalledWith('/upload/photo', expect.any(FormData));
      expect(result).toEqual(mockResponse);
    }));
    it('should handle upload failure', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['test'], 'test.jpg', {
        type: 'image/jpeg'
      });
      var mockError = new Error('Upload failed');
      mockApi.post.mockRejectedValue(mockError);
      yield expect(_uploadService.uploadService.uploadPhoto(mockFile)).rejects.toThrow('Upload failed');
    }));
  });
  describe('uploadVideo', function () {
    it('should upload video successfully', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['test'], 'test.mp4', {
        type: 'video/mp4'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/video.mp4',
        publicId: 'video123'
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield _uploadService.uploadService.uploadVideo(mockFile);
      expect(mockApi.post).toHaveBeenCalledWith('/upload/video', expect.any(FormData));
      expect(result).toEqual(mockResponse);
    }));
    it('should handle video upload failure', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['test'], 'test.mp4', {
        type: 'video/mp4'
      });
      var mockError = new Error('Video upload failed');
      mockApi.post.mockRejectedValue(mockError);
      yield expect(_uploadService.uploadService.uploadVideo(mockFile)).rejects.toThrow('Video upload failed');
    }));
  });
  describe('deletePhoto', function () {
    it('should delete photo successfully', (0, _asyncToGenerator2.default)(function* () {
      var mockResponse = {
        success: true,
        message: 'Photo deleted successfully'
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield _uploadService.uploadService.deletePhoto('photo123');
      expect(mockApi.post).toHaveBeenCalledWith('/upload/delete', {
        publicId: 'photo123'
      });
      expect(result).toEqual(mockResponse);
    }));
    it('should handle delete failure', (0, _asyncToGenerator2.default)(function* () {
      var mockError = new Error('Delete failed');
      mockApi.post.mockRejectedValue(mockError);
      yield expect(_uploadService.uploadService.deletePhoto('invalid123')).rejects.toThrow('Delete failed');
    }));
  });
  describe('getUploadUrl', function () {
    it('should get signed upload URL', (0, _asyncToGenerator2.default)(function* () {
      var mockResponse = {
        success: true,
        uploadUrl: 'https://example.com/upload',
        publicId: 'upload123'
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield _uploadService.uploadService.getUploadUrl('image', 'test.jpg');
      expect(mockApi.post).toHaveBeenCalledWith('/upload/presign', {
        type: 'image',
        filename: 'test.jpg'
      });
      expect(result).toEqual(mockResponse);
    }));
    it('should handle presign failure', (0, _asyncToGenerator2.default)(function* () {
      var mockError = new Error('Presign failed');
      mockApi.post.mockRejectedValue(mockError);
      yield expect(_uploadService.uploadService.getUploadUrl('image', 'test.jpg')).rejects.toThrow('Presign failed');
    }));
  });
  describe('ImagePicker integration', function () {
    beforeEach(function () {
      var _require = require('expo-image-picker'),
        requestMediaLibraryPermissionsAsync = _require.requestMediaLibraryPermissionsAsync;
      requestMediaLibraryPermissionsAsync.mockResolvedValue({
        granted: true
      });
    });
    it('should pick image from library', (0, _asyncToGenerator2.default)(function* () {
      var _require2 = require('expo-image-picker'),
        launchImageLibraryAsync = _require2.launchImageLibraryAsync;
      var mockAsset = {
        uri: 'file://test.jpg',
        width: 800,
        height: 600,
        type: 'image'
      };
      launchImageLibraryAsync.mockResolvedValue({
        canceled: false,
        assets: [mockAsset]
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/uploaded.jpg'
      };
      mockApi.post.mockResolvedValue({
        data: mockResponse
      });
      var result = yield _uploadService.uploadService.pickAndUploadPhoto();
      expect(launchImageLibraryAsync).toHaveBeenCalledWith({
        mediaTypes: 'Images',
        allowsEditing: true,
        quality: 0.8,
        allowsMultipleSelection: false
      });
      expect(result).toEqual(mockResponse);
    }));
    it('should handle image picker cancellation', (0, _asyncToGenerator2.default)(function* () {
      var _require3 = require('expo-image-picker'),
        launchImageLibraryAsync = _require3.launchImageLibraryAsync;
      launchImageLibraryAsync.mockResolvedValue({
        canceled: true,
        assets: []
      });
      var result = yield _uploadService.uploadService.pickAndUploadPhoto();
      expect(result).toBeNull();
    }));
    it('should handle permission denial', (0, _asyncToGenerator2.default)(function* () {
      var _require4 = require('expo-image-picker'),
        requestMediaLibraryPermissionsAsync = _require4.requestMediaLibraryPermissionsAsync,
        launchImageLibraryAsync = _require4.launchImageLibraryAsync;
      requestMediaLibraryPermissionsAsync.mockResolvedValue({
        granted: false
      });
      yield expect(_uploadService.uploadService.pickAndUploadPhoto()).rejects.toThrow('Photo library access denied');
      expect(launchImageLibraryAsync).not.toHaveBeenCalled();
    }));
  });
  describe('Native upload helpers', function () {
    it('should upload directly to S3 for native', (0, _asyncToGenerator2.default)(function* () {
      var _require5 = require('expo-file-system'),
        uploadAsync = _require5.uploadAsync;
      uploadAsync.mockResolvedValue({
        status: 200,
        body: 'OK'
      });
      mockApi.post.mockResolvedValueOnce({
        data: {
          url: 'presign-url',
          key: 'file-key'
        }
      });
      mockApi.post.mockResolvedValueOnce({
        data: {
          success: true
        }
      });
      var result = yield _uploadService.uploadService.uploadPhotoNative('file://test.jpg', 'photo123');
      expect(uploadAsync).toHaveBeenCalledWith('presign-url', 'file://test.jpg', {
        httpMethod: 'PUT',
        headers: {
          'Content-Type': 'image/jpeg'
        },
        uploadType: 'BINARY_CONTENT'
      });
      expect(result).toBeUndefined();
    }));
    it('should handle native upload failure', (0, _asyncToGenerator2.default)(function* () {
      var _require6 = require('expo-file-system'),
        uploadAsync = _require6.uploadAsync;
      uploadAsync.mockRejectedValue(new Error('Upload failed'));
      mockApi.post.mockResolvedValue({
        data: {
          url: 'presign-url',
          key: 'file-key'
        }
      });
      yield expect(_uploadService.uploadService.uploadPhotoNative('file://test.jpg', 'photo123')).rejects.toThrow('Upload failed');
    }));
  });
  describe('File validation', function () {
    it('should validate image file types', function () {
      var validFiles = [new File(['test'], 'test.jpg', {
        type: 'image/jpeg'
      }), new File(['test'], 'test.png', {
        type: 'image/png'
      }), new File(['test'], 'test.webp', {
        type: 'image/webp'
      })];
      validFiles.forEach(function (file) {
        expect(function () {
          return _uploadService.uploadService.validateImageFile(file);
        }).not.toThrow();
      });
    });
    it('should reject invalid file types', function () {
      var invalidFile = new File(['test'], 'test.txt', {
        type: 'text/plain'
      });
      expect(function () {
        return _uploadService.uploadService.validateImageFile(invalidFile);
      }).toThrow('Invalid file type. Only images are allowed.');
    });
    it('should validate file size', function () {
      var largeFile = new File(['x'.repeat(11 * 1024 * 1024)], 'large.jpg', {
        type: 'image/jpeg'
      });
      expect(function () {
        return _uploadService.uploadService.validateFileSize(largeFile);
      }).toThrow('File size too large. Maximum size is 10MB.');
    });
    it('should accept valid file sizes', function () {
      var validFile = new File(['test'], 'small.jpg', {
        type: 'image/jpeg'
      });
      expect(function () {
        return _uploadService.uploadService.validateFileSize(validFile);
      }).not.toThrow();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhcGkiLCJwb3N0IiwiamVzdCIsImZuIiwibGF1bmNoSW1hZ2VMaWJyYXJ5QXN5bmMiLCJsYXVuY2hDYW1lcmFBc3luYyIsInJlcXVlc3RNZWRpYUxpYnJhcnlQZXJtaXNzaW9uc0FzeW5jIiwicmVxdWVzdENhbWVyYVBlcm1pc3Npb25zQXN5bmMiLCJNZWRpYVR5cGVPcHRpb25zIiwiSW1hZ2VzIiwidXBsb2FkQXN5bmMiLCJGaWxlU3lzdGVtVXBsb2FkVHlwZSIsIkJJTkFSWV9DT05URU5UIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfdXBsb2FkU2VydmljZSIsIl9hcGkiLCJfcmVxdWlyZTciLCJtb2NrQXBpIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiZGVmYXVsdCIsIm1vY2tGaWxlIiwiRmlsZSIsInR5cGUiLCJtb2NrUmVzcG9uc2UiLCJzdWNjZXNzIiwidXJsIiwicHVibGljSWQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJyZXN1bHQiLCJ1cGxvYWRTZXJ2aWNlIiwidXBsb2FkUGhvdG8iLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImFueSIsIkZvcm1EYXRhIiwidG9FcXVhbCIsIm1vY2tFcnJvciIsIkVycm9yIiwibW9ja1JlamVjdGVkVmFsdWUiLCJyZWplY3RzIiwidG9UaHJvdyIsInVwbG9hZFZpZGVvIiwibWVzc2FnZSIsImRlbGV0ZVBob3RvIiwidXBsb2FkVXJsIiwiZ2V0VXBsb2FkVXJsIiwiZmlsZW5hbWUiLCJfcmVxdWlyZSIsImdyYW50ZWQiLCJfcmVxdWlyZTIiLCJtb2NrQXNzZXQiLCJ1cmkiLCJ3aWR0aCIsImhlaWdodCIsImNhbmNlbGVkIiwiYXNzZXRzIiwicGlja0FuZFVwbG9hZFBob3RvIiwibWVkaWFUeXBlcyIsImFsbG93c0VkaXRpbmciLCJxdWFsaXR5IiwiYWxsb3dzTXVsdGlwbGVTZWxlY3Rpb24iLCJfcmVxdWlyZTMiLCJ0b0JlTnVsbCIsIl9yZXF1aXJlNCIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJfcmVxdWlyZTUiLCJzdGF0dXMiLCJib2R5IiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwia2V5IiwidXBsb2FkUGhvdG9OYXRpdmUiLCJodHRwTWV0aG9kIiwiaGVhZGVycyIsInVwbG9hZFR5cGUiLCJ0b0JlVW5kZWZpbmVkIiwiX3JlcXVpcmU2IiwidmFsaWRGaWxlcyIsImZvckVhY2giLCJmaWxlIiwidmFsaWRhdGVJbWFnZUZpbGUiLCJpbnZhbGlkRmlsZSIsImxhcmdlRmlsZSIsInJlcGVhdCIsInZhbGlkYXRlRmlsZVNpemUiLCJ2YWxpZEZpbGUiXSwic291cmNlcyI6WyJ1cGxvYWRTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVcGxvYWQgU2VydmljZSBUZXN0c1xuICogVGVzdHMgZmlsZSB1cGxvYWQgZnVuY3Rpb25hbGl0eSBhbmQgcGhvdG8gbWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IHVwbG9hZFNlcnZpY2UgfSBmcm9tICcuLi91cGxvYWRTZXJ2aWNlJztcblxuLy8gTW9jayB0aGUgQVBJXG5qZXN0Lm1vY2soJy4uL2FwaScsICgpID0+ICh7XG4gIGFwaToge1xuICAgIHBvc3Q6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuaW1wb3J0IHsgYXBpIH0gZnJvbSAnLi4vYXBpJztcblxuY29uc3QgbW9ja0FwaSA9IGFwaSBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgYXBpPjtcblxuLy8gTW9jayBJbWFnZVBpY2tlclxuamVzdC5tb2NrKCdleHBvLWltYWdlLXBpY2tlcicsICgpID0+ICh7XG4gIGxhdW5jaEltYWdlTGlicmFyeUFzeW5jOiBqZXN0LmZuKCksXG4gIGxhdW5jaENhbWVyYUFzeW5jOiBqZXN0LmZuKCksXG4gIHJlcXVlc3RNZWRpYUxpYnJhcnlQZXJtaXNzaW9uc0FzeW5jOiBqZXN0LmZuKCksXG4gIHJlcXVlc3RDYW1lcmFQZXJtaXNzaW9uc0FzeW5jOiBqZXN0LmZuKCksXG4gIE1lZGlhVHlwZU9wdGlvbnM6IHtcbiAgICBJbWFnZXM6ICdJbWFnZXMnLFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIEZpbGVTeXN0ZW0gZm9yIG5hdGl2ZSB1cGxvYWRzXG5qZXN0Lm1vY2soJ2V4cG8tZmlsZS1zeXN0ZW0nLCAoKSA9PiAoe1xuICB1cGxvYWRBc3luYzogamVzdC5mbigpLFxuICBGaWxlU3lzdGVtVXBsb2FkVHlwZToge1xuICAgIEJJTkFSWV9DT05URU5UOiAnQklOQVJZX0NPTlRFTlQnLFxuICB9LFxufSkpO1xuXG5kZXNjcmliZSgnVXBsb2FkU2VydmljZScsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGxvYWRQaG90bycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwbG9hZCBwaG90byBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsndGVzdCddLCAndGVzdC5qcGcnLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KTtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90by5qcGcnLFxuICAgICAgICBwdWJsaWNJZDogJ3Bob3RvMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tSZXNwb25zZSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBsb2FkU2VydmljZS51cGxvYWRQaG90byhtb2NrRmlsZSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQXBpLnBvc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvdXBsb2FkL3Bob3RvJywgZXhwZWN0LmFueShGb3JtRGF0YSkpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVzcG9uc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdXBsb2FkIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsndGVzdCddLCAndGVzdC5qcGcnLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KTtcbiAgICAgIGNvbnN0IG1vY2tFcnJvciA9IG5ldyBFcnJvcignVXBsb2FkIGZhaWxlZCcpO1xuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZWplY3RlZFZhbHVlKG1vY2tFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdCh1cGxvYWRTZXJ2aWNlLnVwbG9hZFBob3RvKG1vY2tGaWxlKSkucmVqZWN0cy50b1Rocm93KCdVcGxvYWQgZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGxvYWRWaWRlbycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwbG9hZCB2aWRlbyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsndGVzdCddLCAndGVzdC5tcDQnLCB7IHR5cGU6ICd2aWRlby9tcDQnIH0pO1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3ZpZGVvLm1wNCcsXG4gICAgICAgIHB1YmxpY0lkOiAndmlkZW8xMjMnLFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGxvYWRTZXJ2aWNlLnVwbG9hZFZpZGVvKG1vY2tGaWxlKTtcblxuICAgICAgZXhwZWN0KG1vY2tBcGkucG9zdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy91cGxvYWQvdmlkZW8nLCBleHBlY3QuYW55KEZvcm1EYXRhKSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2aWRlbyB1cGxvYWQgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IEZpbGUoWyd0ZXN0J10sICd0ZXN0Lm1wNCcsIHsgdHlwZTogJ3ZpZGVvL21wNCcgfSk7XG4gICAgICBjb25zdCBtb2NrRXJyb3IgPSBuZXcgRXJyb3IoJ1ZpZGVvIHVwbG9hZCBmYWlsZWQnKTtcbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVqZWN0ZWRWYWx1ZShtb2NrRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QodXBsb2FkU2VydmljZS51cGxvYWRWaWRlbyhtb2NrRmlsZSkpLnJlamVjdHMudG9UaHJvdygnVmlkZW8gdXBsb2FkIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVsZXRlUGhvdG8nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgcGhvdG8gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGhvdG8gZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGxvYWRTZXJ2aWNlLmRlbGV0ZVBob3RvKCdwaG90bzEyMycpO1xuXG4gICAgICBleHBlY3QobW9ja0FwaS5wb3N0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL3VwbG9hZC9kZWxldGUnLCB7XG4gICAgICAgIHB1YmxpY0lkOiAncGhvdG8xMjMnLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkZWxldGUgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFcnJvciA9IG5ldyBFcnJvcignRGVsZXRlIGZhaWxlZCcpO1xuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZWplY3RlZFZhbHVlKG1vY2tFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdCh1cGxvYWRTZXJ2aWNlLmRlbGV0ZVBob3RvKCdpbnZhbGlkMTIzJykpLnJlamVjdHMudG9UaHJvdygnRGVsZXRlIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0VXBsb2FkVXJsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHNpZ25lZCB1cGxvYWQgVVJMJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB1cGxvYWRVcmw6ICdodHRwczovL2V4YW1wbGUuY29tL3VwbG9hZCcsXG4gICAgICAgIHB1YmxpY0lkOiAndXBsb2FkMTIzJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IG1vY2tSZXNwb25zZSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBsb2FkU2VydmljZS5nZXRVcGxvYWRVcmwoJ2ltYWdlJywgJ3Rlc3QuanBnJyk7XG5cbiAgICAgIGV4cGVjdChtb2NrQXBpLnBvc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvdXBsb2FkL3ByZXNpZ24nLCB7XG4gICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgIGZpbGVuYW1lOiAndGVzdC5qcGcnLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwcmVzaWduIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRXJyb3IgPSBuZXcgRXJyb3IoJ1ByZXNpZ24gZmFpbGVkJyk7XG4gICAgICBtb2NrQXBpLnBvc3QubW9ja1JlamVjdGVkVmFsdWUobW9ja0Vycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICB1cGxvYWRTZXJ2aWNlLmdldFVwbG9hZFVybCgnaW1hZ2UnLCAndGVzdC5qcGcnKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1ByZXNpZ24gZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbWFnZVBpY2tlciBpbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIE1vY2sgcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IHsgcmVxdWVzdE1lZGlhTGlicmFyeVBlcm1pc3Npb25zQXN5bmMgfSA9IHJlcXVpcmUoJ2V4cG8taW1hZ2UtcGlja2VyJyk7XG4gICAgICByZXF1ZXN0TWVkaWFMaWJyYXJ5UGVybWlzc2lvbnNBc3luYy5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGdyYW50ZWQ6IHRydWUgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBpY2sgaW1hZ2UgZnJvbSBsaWJyYXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBsYXVuY2hJbWFnZUxpYnJhcnlBc3luYyB9ID0gcmVxdWlyZSgnZXhwby1pbWFnZS1waWNrZXInKTtcblxuICAgICAgY29uc3QgbW9ja0Fzc2V0ID0ge1xuICAgICAgICB1cmk6ICdmaWxlOi8vdGVzdC5qcGcnLFxuICAgICAgICB3aWR0aDogODAwLFxuICAgICAgICBoZWlnaHQ6IDYwMCxcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgIH07XG5cbiAgICAgIGxhdW5jaEltYWdlTGlicmFyeUFzeW5jLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgY2FuY2VsZWQ6IGZhbHNlLFxuICAgICAgICBhc3NldHM6IFttb2NrQXNzZXRdLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS91cGxvYWRlZC5qcGcnLFxuICAgICAgfTtcblxuICAgICAgbW9ja0FwaS5wb3N0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogbW9ja1Jlc3BvbnNlIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGxvYWRTZXJ2aWNlLnBpY2tBbmRVcGxvYWRQaG90bygpO1xuXG4gICAgICBleHBlY3QobGF1bmNoSW1hZ2VMaWJyYXJ5QXN5bmMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgbWVkaWFUeXBlczogJ0ltYWdlcycsXG4gICAgICAgIGFsbG93c0VkaXRpbmc6IHRydWUsXG4gICAgICAgIHF1YWxpdHk6IDAuOCxcbiAgICAgICAgYWxsb3dzTXVsdGlwbGVTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXNwb25zZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbWFnZSBwaWNrZXIgY2FuY2VsbGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBsYXVuY2hJbWFnZUxpYnJhcnlBc3luYyB9ID0gcmVxdWlyZSgnZXhwby1pbWFnZS1waWNrZXInKTtcblxuICAgICAgbGF1bmNoSW1hZ2VMaWJyYXJ5QXN5bmMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBjYW5jZWxlZDogdHJ1ZSxcbiAgICAgICAgYXNzZXRzOiBbXSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGxvYWRTZXJ2aWNlLnBpY2tBbmRVcGxvYWRQaG90bygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGVybWlzc2lvbiBkZW5pYWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlcXVlc3RNZWRpYUxpYnJhcnlQZXJtaXNzaW9uc0FzeW5jLCBsYXVuY2hJbWFnZUxpYnJhcnlBc3luYyB9ID0gcmVxdWlyZSgnZXhwby1pbWFnZS1waWNrZXInKTtcblxuICAgICAgcmVxdWVzdE1lZGlhTGlicmFyeVBlcm1pc3Npb25zQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUoeyBncmFudGVkOiBmYWxzZSB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHVwbG9hZFNlcnZpY2UucGlja0FuZFVwbG9hZFBob3RvKCkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ1Bob3RvIGxpYnJhcnkgYWNjZXNzIGRlbmllZCdcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChsYXVuY2hJbWFnZUxpYnJhcnlBc3luYykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ05hdGl2ZSB1cGxvYWQgaGVscGVycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwbG9hZCBkaXJlY3RseSB0byBTMyBmb3IgbmF0aXZlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyB1cGxvYWRBc3luYyB9ID0gcmVxdWlyZSgnZXhwby1maWxlLXN5c3RlbScpO1xuXG4gICAgICB1cGxvYWRBc3luYy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBib2R5OiAnT0snLFxuICAgICAgfSk7XG5cbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiB7IHVybDogJ3ByZXNpZ24tdXJsJywga2V5OiAnZmlsZS1rZXknIH0gfSk7XG4gICAgICBtb2NrQXBpLnBvc3QubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZGF0YTogeyBzdWNjZXNzOiB0cnVlIH0gfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwbG9hZFNlcnZpY2UudXBsb2FkUGhvdG9OYXRpdmUoJ2ZpbGU6Ly90ZXN0LmpwZycsICdwaG90bzEyMycpO1xuXG4gICAgICBleHBlY3QodXBsb2FkQXN5bmMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwcmVzaWduLXVybCcsICdmaWxlOi8vdGVzdC5qcGcnLCB7XG4gICAgICAgIGh0dHBNZXRob2Q6ICdQVVQnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnaW1hZ2UvanBlZycgfSxcbiAgICAgICAgdXBsb2FkVHlwZTogJ0JJTkFSWV9DT05URU5UJyxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmF0aXZlIHVwbG9hZCBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyB1cGxvYWRBc3luYyB9ID0gcmVxdWlyZSgnZXhwby1maWxlLXN5c3RlbScpO1xuXG4gICAgICB1cGxvYWRBc3luYy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1VwbG9hZCBmYWlsZWQnKSk7XG5cbiAgICAgIG1vY2tBcGkucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgdXJsOiAncHJlc2lnbi11cmwnLCBrZXk6ICdmaWxlLWtleScgfSB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICB1cGxvYWRTZXJ2aWNlLnVwbG9hZFBob3RvTmF0aXZlKCdmaWxlOi8vdGVzdC5qcGcnLCAncGhvdG8xMjMnKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1VwbG9hZCBmYWlsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpbGUgdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGltYWdlIGZpbGUgdHlwZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZEZpbGVzID0gW1xuICAgICAgICBuZXcgRmlsZShbJ3Rlc3QnXSwgJ3Rlc3QuanBnJywgeyB0eXBlOiAnaW1hZ2UvanBlZycgfSksXG4gICAgICAgIG5ldyBGaWxlKFsndGVzdCddLCAndGVzdC5wbmcnLCB7IHR5cGU6ICdpbWFnZS9wbmcnIH0pLFxuICAgICAgICBuZXcgRmlsZShbJ3Rlc3QnXSwgJ3Rlc3Qud2VicCcsIHsgdHlwZTogJ2ltYWdlL3dlYnAnIH0pLFxuICAgICAgXTtcblxuICAgICAgdmFsaWRGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICBleHBlY3QoKCkgPT4gdXBsb2FkU2VydmljZS52YWxpZGF0ZUltYWdlRmlsZShmaWxlKSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBmaWxlIHR5cGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZEZpbGUgPSBuZXcgRmlsZShbJ3Rlc3QnXSwgJ3Rlc3QudHh0JywgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB1cGxvYWRTZXJ2aWNlLnZhbGlkYXRlSW1hZ2VGaWxlKGludmFsaWRGaWxlKSkudG9UaHJvdyhcbiAgICAgICAgJ0ludmFsaWQgZmlsZSB0eXBlLiBPbmx5IGltYWdlcyBhcmUgYWxsb3dlZC4nXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBmaWxlIHNpemUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZUZpbGUgPSBuZXcgRmlsZShbJ3gnLnJlcGVhdCgxMSAqIDEwMjQgKiAxMDI0KV0sICdsYXJnZS5qcGcnLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KTtcblxuICAgICAgZXhwZWN0KCgpID0+IHVwbG9hZFNlcnZpY2UudmFsaWRhdGVGaWxlU2l6ZShsYXJnZUZpbGUpKS50b1Rocm93KFxuICAgICAgICAnRmlsZSBzaXplIHRvbyBsYXJnZS4gTWF4aW11bSBzaXplIGlzIDEwTUIuJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIGZpbGUgc2l6ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZEZpbGUgPSBuZXcgRmlsZShbJ3Rlc3QnXSwgJ3NtYWxsLmpwZycsIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pO1xuXG4gICAgICBleHBlY3QoKCkgPT4gdXBsb2FkU2VydmljZS52YWxpZGF0ZUZpbGVTaXplKHZhbGlkRmlsZSkpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBUUFBLFdBQUEsR0FBS0MsSUFBSSxXQUFXO0VBQUEsT0FBTztJQUN6QkMsR0FBRyxFQUFFO01BQ0hDLElBQUksRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDaEI7RUFDRixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBT0hMLFdBQUEsR0FBS0MsSUFBSSxDQUFDLG1CQUFtQixFQUFFO0VBQUEsT0FBTztJQUNwQ0ssdUJBQXVCLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDbENFLGlCQUFpQixFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBQzVCRyxtQ0FBbUMsRUFBRUosSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUM5Q0ksNkJBQTZCLEVBQUVMLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDeENLLGdCQUFnQixFQUFFO01BQ2hCQyxNQUFNLEVBQUU7SUFDVjtFQUNGLENBQUM7QUFBQSxDQUFDLENBQUM7QUFHSFgsV0FBQSxHQUFLQyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7RUFBQSxPQUFPO0lBQ25DVyxXQUFXLEVBQUVSLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7SUFDdEJRLG9CQUFvQixFQUFFO01BQ3BCQyxj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