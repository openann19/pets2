5630f2b3f2df5dd1d0da2876b06d955e
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.performAdminUserAction = exports.invalidateAdminUsersCache = exports.fetchAdminUsers = exports.default = exports.adminUsersService = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _core = require("@pawfectmatch/core");
var _adminAPI = require("./adminAPI");
var CACHE_TTL_MS = 30000;
var cache = new Map();
var createCacheKey = function createCacheKey() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var normalized = {};
  if (query.page !== undefined) normalized["page"] = query.page.toString();
  if (query.limit !== undefined) normalized["limit"] = query.limit.toString();
  if (query.search !== undefined && query.search !== "") normalized["search"] = query.search.toLowerCase();
  if (query.status !== undefined && query.status !== "all") normalized["status"] = query.status;
  if (query.role !== undefined && query.role !== "") normalized["role"] = query.role;
  if (query.verified !== undefined) normalized["verified"] = query.verified ? "true" : "false";
  return JSON.stringify(normalized);
};
var mapUser = function mapUser(user) {
  var _user$isVerified, _user$petsCount, _user$matchesCount, _user$messagesCount;
  return {
    id: typeof user["_id"] === "string" ? user["_id"] : "",
    firstName: typeof user["firstName"] === "string" ? user["firstName"] : "Unknown",
    lastName: typeof user["lastName"] === "string" ? user["lastName"] : "User",
    email: typeof user["email"] === "string" ? user["email"] : "unknown@example.com",
    role: typeof user["role"] === "string" ? user["role"] : "user",
    status: ["active", "suspended", "banned", "pending"].includes(user["status"]) ? user["status"] : "pending",
    verified: Boolean((_user$isVerified = user["isVerified"]) != null ? _user$isVerified : user["verified"]),
    createdAt: typeof user["createdAt"] === "string" ? user["createdAt"] : new Date().toISOString(),
    lastLoginAt: typeof user["lastLoginAt"] === "string" ? user["lastLoginAt"] : undefined,
    petsCount: Array.isArray(user["pets"]) ? user["pets"].length : Number((_user$petsCount = user["petsCount"]) != null ? _user$petsCount : 0),
    matchesCount: Number((_user$matchesCount = user["matchesCount"]) != null ? _user$matchesCount : 0),
    messagesCount: Number((_user$messagesCount = user["messagesCount"]) != null ? _user$messagesCount : 0)
  };
};
var mapResponse = function mapResponse(response) {
  var _paginationData$page, _paginationData$limit, _paginationData$total, _paginationData$pages;
  var data = response["data"];
  var users = Array.isArray(data == null ? void 0 : data["users"]) ? data["users"].map(mapUser) : [];
  var pagination = data == null ? void 0 : data["pagination"];
  var paginationData = pagination != null ? pagination : {};
  return {
    users: users,
    pagination: {
      page: Number((_paginationData$page = paginationData["page"]) != null ? _paginationData$page : 1),
      limit: Number((_paginationData$limit = paginationData["limit"]) != null ? _paginationData$limit : users.length),
      total: Number((_paginationData$total = paginationData["total"]) != null ? _paginationData$total : users.length),
      pages: Number((_paginationData$pages = paginationData["pages"]) != null ? _paginationData$pages : 1)
    }
  };
};
var isCacheValid = function isCacheValid(entry) {
  if (entry === undefined) return false;
  return Date.now() - entry.timestamp < CACHE_TTL_MS;
};
var invalidateAdminUsersCache = exports.invalidateAdminUsersCache = function invalidateAdminUsersCache() {
  cache.clear();
};
var fetchAdminUsers = exports.fetchAdminUsers = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* () {
    var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var cacheKey = createCacheKey(query);
    var cached = cache.get(cacheKey);
    if (isCacheValid(cached) && cached !== undefined) {
      return cached.data;
    }
    try {
      var params = {};
      if (query.page !== undefined) params.page = query.page;
      if (query.limit !== undefined) params.limit = query.limit;
      if (query.search !== undefined && query.search !== "") params.search = query.search;
      if (query.status !== undefined && query.status !== "all") params.status = query.status;
      if (query.role !== undefined && query.role !== "") params.role = query.role;
      if (query.verified !== undefined) params.verified = query.verified ? "true" : "false";
      var response = yield _adminAPI._adminAPI.getUsers(params);
      var mapped = mapResponse(response);
      cache.set(cacheKey, {
        timestamp: Date.now(),
        data: mapped
      });
      return mapped;
    } catch (error) {
      cache.delete(cacheKey);
      var err = error instanceof Error ? error : new Error("Failed to fetch admin users");
      _core.logger.error("Failed to fetch admin users", {
        error: err
      });
      throw err;
    }
  });
  return function fetchAdminUsers() {
    return _ref.apply(this, arguments);
  };
}();
var getDefaultReason = function getDefaultReason(action) {
  switch (action) {
    case "suspend":
      return "User suspended via mobile admin controls";
    case "activate":
      return "User reactivated via mobile admin controls";
    case "ban":
      return "User banned via mobile admin controls";
    case "unban":
      return "User reinstated via mobile admin controls";
  }
};
var performAdminUserAction = exports.performAdminUserAction = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (userId, action, options) {
    var _options$reason;
    var payloadReason = (_options$reason = options == null ? void 0 : options.reason) != null ? _options$reason : getDefaultReason(action);
    try {
      if (action === "suspend") {
        yield _adminAPI._adminAPI.suspendUser(userId, payloadReason, options == null ? void 0 : options.durationDays);
      } else if (action === "activate" || action === "unban") {
        yield _adminAPI._adminAPI.activateUser(userId, payloadReason);
      } else {
        yield _adminAPI._adminAPI.banUser(userId, payloadReason);
      }
      invalidateAdminUsersCache();
    } catch (error) {
      var err = error instanceof Error ? error : new Error(`Failed to ${action} user`);
      _core.logger.error("Admin user action failed", {
        action: action,
        userId: userId,
        error: err
      });
      throw err;
    }
  });
  return function performAdminUserAction(_x, _x2, _x3) {
    return _ref2.apply(this, arguments);
  };
}();
var adminUsersService = exports.adminUsersService = {
  fetchAdminUsers: fetchAdminUsers,
  performAdminUserAction: performAdminUserAction,
  invalidate: invalidateAdminUsersCache
};
var _default = exports.default = adminUsersService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29yZSIsInJlcXVpcmUiLCJfYWRtaW5BUEkiLCJDQUNIRV9UVExfTVMiLCJjYWNoZSIsIk1hcCIsImNyZWF0ZUNhY2hlS2V5IiwicXVlcnkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJub3JtYWxpemVkIiwicGFnZSIsInRvU3RyaW5nIiwibGltaXQiLCJzZWFyY2giLCJ0b0xvd2VyQ2FzZSIsInN0YXR1cyIsInJvbGUiLCJ2ZXJpZmllZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYXBVc2VyIiwidXNlciIsIl91c2VyJGlzVmVyaWZpZWQiLCJfdXNlciRwZXRzQ291bnQiLCJfdXNlciRtYXRjaGVzQ291bnQiLCJfdXNlciRtZXNzYWdlc0NvdW50IiwiaWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwiaW5jbHVkZXMiLCJCb29sZWFuIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibGFzdExvZ2luQXQiLCJwZXRzQ291bnQiLCJBcnJheSIsImlzQXJyYXkiLCJOdW1iZXIiLCJtYXRjaGVzQ291bnQiLCJtZXNzYWdlc0NvdW50IiwibWFwUmVzcG9uc2UiLCJyZXNwb25zZSIsIl9wYWdpbmF0aW9uRGF0YSRwYWdlIiwiX3BhZ2luYXRpb25EYXRhJGxpbWl0IiwiX3BhZ2luYXRpb25EYXRhJHRvdGFsIiwiX3BhZ2luYXRpb25EYXRhJHBhZ2VzIiwiZGF0YSIsInVzZXJzIiwibWFwIiwicGFnaW5hdGlvbiIsInBhZ2luYXRpb25EYXRhIiwidG90YWwiLCJwYWdlcyIsImlzQ2FjaGVWYWxpZCIsImVudHJ5Iiwibm93IiwidGltZXN0YW1wIiwiaW52YWxpZGF0ZUFkbWluVXNlcnNDYWNoZSIsImV4cG9ydHMiLCJjbGVhciIsImZldGNoQWRtaW5Vc2VycyIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0IiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJnZXQiLCJwYXJhbXMiLCJhZG1pbkFQSSIsImdldFVzZXJzIiwibWFwcGVkIiwic2V0IiwiZXJyb3IiLCJkZWxldGUiLCJlcnIiLCJFcnJvciIsImxvZ2dlciIsImFwcGx5IiwiZ2V0RGVmYXVsdFJlYXNvbiIsImFjdGlvbiIsInBlcmZvcm1BZG1pblVzZXJBY3Rpb24iLCJfcmVmMiIsInVzZXJJZCIsIm9wdGlvbnMiLCJfb3B0aW9ucyRyZWFzb24iLCJwYXlsb2FkUmVhc29uIiwicmVhc29uIiwic3VzcGVuZFVzZXIiLCJkdXJhdGlvbkRheXMiLCJhY3RpdmF0ZVVzZXIiLCJiYW5Vc2VyIiwiX3giLCJfeDIiLCJfeDMiLCJhZG1pblVzZXJzU2VydmljZSIsImludmFsaWRhdGUiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbImFkbWluVXNlcnNTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAcGF3ZmVjdG1hdGNoL2NvcmVcIjtcbmltcG9ydCB7IF9hZG1pbkFQSSBhcyBhZG1pbkFQSSB9IGZyb20gXCIuL2FkbWluQVBJXCI7XG5cbmV4cG9ydCB0eXBlIEFkbWluVXNlclN0YXR1cyA9IFwiYWN0aXZlXCIgfCBcInN1c3BlbmRlZFwiIHwgXCJiYW5uZWRcIiB8IFwicGVuZGluZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkbWluVXNlclN1bW1hcnkge1xuICBpZDogc3RyaW5nO1xuICBmaXJzdE5hbWU6IHN0cmluZztcbiAgbGFzdE5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xuICBzdGF0dXM6IEFkbWluVXNlclN0YXR1cztcbiAgdmVyaWZpZWQ6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBsYXN0TG9naW5BdD86IHN0cmluZztcbiAgcGV0c0NvdW50OiBudW1iZXI7XG4gIG1hdGNoZXNDb3VudDogbnVtYmVyO1xuICBtZXNzYWdlc0NvdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRtaW5Vc2Vyc1F1ZXJ5IHtcbiAgcGFnZT86IG51bWJlcjtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIHNlYXJjaD86IHN0cmluZztcbiAgc3RhdHVzPzogQWRtaW5Vc2VyU3RhdHVzIHwgXCJhbGxcIjtcbiAgcm9sZT86IHN0cmluZztcbiAgdmVyaWZpZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkbWluVXNlcnNSZXN1bHQge1xuICB1c2VyczogQWRtaW5Vc2VyU3VtbWFyeVtdO1xuICBwYWdpbmF0aW9uOiB7XG4gICAgcGFnZTogbnVtYmVyO1xuICAgIGxpbWl0OiBudW1iZXI7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICBwYWdlczogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgdHlwZSBBZG1pblVzZXJBY3Rpb24gPSBcInN1c3BlbmRcIiB8IFwiYWN0aXZhdGVcIiB8IFwiYmFuXCIgfCBcInVuYmFuXCI7XG5cbmNvbnN0IENBQ0hFX1RUTF9NUyA9IDMwXzAwMDtcbmNvbnN0IGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHsgdGltZXN0YW1wOiBudW1iZXI7IGRhdGE6IEFkbWluVXNlcnNSZXN1bHQgfT4oKTtcblxuY29uc3QgY3JlYXRlQ2FjaGVLZXkgPSAocXVlcnk6IEFkbWluVXNlcnNRdWVyeSA9IHt9KTogc3RyaW5nID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBpZiAocXVlcnkucGFnZSAhPT0gdW5kZWZpbmVkKSBub3JtYWxpemVkW1wicGFnZVwiXSA9IHF1ZXJ5LnBhZ2UudG9TdHJpbmcoKTtcbiAgaWYgKHF1ZXJ5LmxpbWl0ICE9PSB1bmRlZmluZWQpIG5vcm1hbGl6ZWRbXCJsaW1pdFwiXSA9IHF1ZXJ5LmxpbWl0LnRvU3RyaW5nKCk7XG4gIGlmIChxdWVyeS5zZWFyY2ggIT09IHVuZGVmaW5lZCAmJiBxdWVyeS5zZWFyY2ggIT09IFwiXCIpXG4gICAgbm9ybWFsaXplZFtcInNlYXJjaFwiXSA9IHF1ZXJ5LnNlYXJjaC50b0xvd2VyQ2FzZSgpO1xuICBpZiAocXVlcnkuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgcXVlcnkuc3RhdHVzICE9PSBcImFsbFwiKVxuICAgIG5vcm1hbGl6ZWRbXCJzdGF0dXNcIl0gPSBxdWVyeS5zdGF0dXM7XG4gIGlmIChxdWVyeS5yb2xlICE9PSB1bmRlZmluZWQgJiYgcXVlcnkucm9sZSAhPT0gXCJcIilcbiAgICBub3JtYWxpemVkW1wicm9sZVwiXSA9IHF1ZXJ5LnJvbGU7XG4gIGlmIChxdWVyeS52ZXJpZmllZCAhPT0gdW5kZWZpbmVkKVxuICAgIG5vcm1hbGl6ZWRbXCJ2ZXJpZmllZFwiXSA9IHF1ZXJ5LnZlcmlmaWVkID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShub3JtYWxpemVkKTtcbn07XG5cbmNvbnN0IG1hcFVzZXIgPSAodXNlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBBZG1pblVzZXJTdW1tYXJ5ID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogdHlwZW9mIHVzZXJbXCJfaWRcIl0gPT09IFwic3RyaW5nXCIgPyB1c2VyW1wiX2lkXCJdIDogXCJcIixcbiAgICBmaXJzdE5hbWU6XG4gICAgICB0eXBlb2YgdXNlcltcImZpcnN0TmFtZVwiXSA9PT0gXCJzdHJpbmdcIiA/IHVzZXJbXCJmaXJzdE5hbWVcIl0gOiBcIlVua25vd25cIixcbiAgICBsYXN0TmFtZTogdHlwZW9mIHVzZXJbXCJsYXN0TmFtZVwiXSA9PT0gXCJzdHJpbmdcIiA/IHVzZXJbXCJsYXN0TmFtZVwiXSA6IFwiVXNlclwiLFxuICAgIGVtYWlsOlxuICAgICAgdHlwZW9mIHVzZXJbXCJlbWFpbFwiXSA9PT0gXCJzdHJpbmdcIiA/IHVzZXJbXCJlbWFpbFwiXSA6IFwidW5rbm93bkBleGFtcGxlLmNvbVwiLFxuICAgIHJvbGU6IHR5cGVvZiB1c2VyW1wicm9sZVwiXSA9PT0gXCJzdHJpbmdcIiA/IHVzZXJbXCJyb2xlXCJdIDogXCJ1c2VyXCIsXG4gICAgc3RhdHVzOiAoW1wiYWN0aXZlXCIsIFwic3VzcGVuZGVkXCIsIFwiYmFubmVkXCIsIFwicGVuZGluZ1wiXSBhcyBjb25zdCkuaW5jbHVkZXMoXG4gICAgICB1c2VyW1wic3RhdHVzXCJdIGFzIEFkbWluVXNlclN0YXR1cyxcbiAgICApXG4gICAgICA/ICh1c2VyW1wic3RhdHVzXCJdIGFzIEFkbWluVXNlclN0YXR1cylcbiAgICAgIDogXCJwZW5kaW5nXCIsXG4gICAgdmVyaWZpZWQ6IEJvb2xlYW4odXNlcltcImlzVmVyaWZpZWRcIl0gPz8gdXNlcltcInZlcmlmaWVkXCJdKSxcbiAgICBjcmVhdGVkQXQ6XG4gICAgICB0eXBlb2YgdXNlcltcImNyZWF0ZWRBdFwiXSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IHVzZXJbXCJjcmVhdGVkQXRcIl1cbiAgICAgICAgOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgbGFzdExvZ2luQXQ6XG4gICAgICB0eXBlb2YgdXNlcltcImxhc3RMb2dpbkF0XCJdID09PSBcInN0cmluZ1wiID8gdXNlcltcImxhc3RMb2dpbkF0XCJdIDogdW5kZWZpbmVkLFxuICAgIHBldHNDb3VudDogQXJyYXkuaXNBcnJheSh1c2VyW1wicGV0c1wiXSlcbiAgICAgID8gdXNlcltcInBldHNcIl0ubGVuZ3RoXG4gICAgICA6IE51bWJlcih1c2VyW1wicGV0c0NvdW50XCJdID8/IDApLFxuICAgIG1hdGNoZXNDb3VudDogTnVtYmVyKHVzZXJbXCJtYXRjaGVzQ291bnRcIl0gPz8gMCksXG4gICAgbWVzc2FnZXNDb3VudDogTnVtYmVyKHVzZXJbXCJtZXNzYWdlc0NvdW50XCJdID8/IDApLFxuICB9O1xufTtcblxuY29uc3QgbWFwUmVzcG9uc2UgPSAocmVzcG9uc2U6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogQWRtaW5Vc2Vyc1Jlc3VsdCA9PiB7XG4gIGNvbnN0IGRhdGEgPSByZXNwb25zZVtcImRhdGFcIl0gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCB1bmRlZmluZWQ7XG4gIGNvbnN0IHVzZXJzID0gQXJyYXkuaXNBcnJheShkYXRhPy5bXCJ1c2Vyc1wiXSlcbiAgICA/IChkYXRhW1widXNlcnNcIl0gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5bXSkubWFwKG1hcFVzZXIpXG4gICAgOiBbXTtcbiAgY29uc3QgcGFnaW5hdGlvbiA9IGRhdGE/LltcInBhZ2luYXRpb25cIl0gYXNcbiAgICB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gICAgfCB1bmRlZmluZWQ7XG4gIGNvbnN0IHBhZ2luYXRpb25EYXRhID0gcGFnaW5hdGlvbiA/PyB7fTtcbiAgcmV0dXJuIHtcbiAgICB1c2VycyxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlOiBOdW1iZXIocGFnaW5hdGlvbkRhdGFbXCJwYWdlXCJdID8/IDEpLFxuICAgICAgbGltaXQ6IE51bWJlcihwYWdpbmF0aW9uRGF0YVtcImxpbWl0XCJdID8/IHVzZXJzLmxlbmd0aCksXG4gICAgICB0b3RhbDogTnVtYmVyKHBhZ2luYXRpb25EYXRhW1widG90YWxcIl0gPz8gdXNlcnMubGVuZ3RoKSxcbiAgICAgIHBhZ2VzOiBOdW1iZXIocGFnaW5hdGlvbkRhdGFbXCJwYWdlc1wiXSA/PyAxKSxcbiAgICB9LFxuICB9O1xufTtcblxuY29uc3QgaXNDYWNoZVZhbGlkID0gKGVudHJ5PzogeyB0aW1lc3RhbXA6IG51bWJlciB9KTogYm9vbGVhbiA9PiB7XG4gIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBEYXRlLm5vdygpIC0gZW50cnkudGltZXN0YW1wIDwgQ0FDSEVfVFRMX01TO1xufTtcblxuZXhwb3J0IGNvbnN0IGludmFsaWRhdGVBZG1pblVzZXJzQ2FjaGUgPSAoKTogdm9pZCA9PiB7XG4gIGNhY2hlLmNsZWFyKCk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hBZG1pblVzZXJzID0gYXN5bmMgKFxuICBxdWVyeTogQWRtaW5Vc2Vyc1F1ZXJ5ID0ge30sXG4pOiBQcm9taXNlPEFkbWluVXNlcnNSZXN1bHQ+ID0+IHtcbiAgY29uc3QgY2FjaGVLZXkgPSBjcmVhdGVDYWNoZUtleShxdWVyeSk7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChpc0NhY2hlVmFsaWQoY2FjaGVkKSAmJiBjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBjYWNoZWQuZGF0YTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGFyYW1zOiB7XG4gICAgICBwYWdlPzogbnVtYmVyO1xuICAgICAgbGltaXQ/OiBudW1iZXI7XG4gICAgICBzZWFyY2g/OiBzdHJpbmc7XG4gICAgICBzdGF0dXM/OiBzdHJpbmc7XG4gICAgICByb2xlPzogc3RyaW5nO1xuICAgICAgdmVyaWZpZWQ/OiBzdHJpbmc7XG4gICAgfSA9IHt9O1xuXG4gICAgaWYgKHF1ZXJ5LnBhZ2UgIT09IHVuZGVmaW5lZCkgcGFyYW1zLnBhZ2UgPSBxdWVyeS5wYWdlO1xuICAgIGlmIChxdWVyeS5saW1pdCAhPT0gdW5kZWZpbmVkKSBwYXJhbXMubGltaXQgPSBxdWVyeS5saW1pdDtcbiAgICBpZiAocXVlcnkuc2VhcmNoICE9PSB1bmRlZmluZWQgJiYgcXVlcnkuc2VhcmNoICE9PSBcIlwiKVxuICAgICAgcGFyYW1zLnNlYXJjaCA9IHF1ZXJ5LnNlYXJjaDtcbiAgICBpZiAocXVlcnkuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgcXVlcnkuc3RhdHVzICE9PSBcImFsbFwiKVxuICAgICAgcGFyYW1zLnN0YXR1cyA9IHF1ZXJ5LnN0YXR1cztcbiAgICBpZiAocXVlcnkucm9sZSAhPT0gdW5kZWZpbmVkICYmIHF1ZXJ5LnJvbGUgIT09IFwiXCIpIHBhcmFtcy5yb2xlID0gcXVlcnkucm9sZTtcbiAgICBpZiAocXVlcnkudmVyaWZpZWQgIT09IHVuZGVmaW5lZClcbiAgICAgIHBhcmFtcy52ZXJpZmllZCA9IHF1ZXJ5LnZlcmlmaWVkID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFkbWluQVBJLmdldFVzZXJzKHBhcmFtcyk7XG5cbiAgICBjb25zdCBtYXBwZWQgPSBtYXBSZXNwb25zZShyZXNwb25zZSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KTtcbiAgICBjYWNoZS5zZXQoY2FjaGVLZXksIHsgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBkYXRhOiBtYXBwZWQgfSk7XG4gICAgcmV0dXJuIG1hcHBlZDtcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjYWNoZS5kZWxldGUoY2FjaGVLZXkpO1xuICAgIGNvbnN0IGVyciA9XG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggYWRtaW4gdXNlcnNcIik7XG4gICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGFkbWluIHVzZXJzXCIsIHsgZXJyb3I6IGVyciB9KTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn07XG5cbmNvbnN0IGdldERlZmF1bHRSZWFzb24gPSAoYWN0aW9uOiBBZG1pblVzZXJBY3Rpb24pOiBzdHJpbmcgPT4ge1xuICBzd2l0Y2ggKGFjdGlvbikge1xuICAgIGNhc2UgXCJzdXNwZW5kXCI6XG4gICAgICByZXR1cm4gXCJVc2VyIHN1c3BlbmRlZCB2aWEgbW9iaWxlIGFkbWluIGNvbnRyb2xzXCI7XG4gICAgY2FzZSBcImFjdGl2YXRlXCI6XG4gICAgICByZXR1cm4gXCJVc2VyIHJlYWN0aXZhdGVkIHZpYSBtb2JpbGUgYWRtaW4gY29udHJvbHNcIjtcbiAgICBjYXNlIFwiYmFuXCI6XG4gICAgICByZXR1cm4gXCJVc2VyIGJhbm5lZCB2aWEgbW9iaWxlIGFkbWluIGNvbnRyb2xzXCI7XG4gICAgY2FzZSBcInVuYmFuXCI6XG4gICAgICByZXR1cm4gXCJVc2VyIHJlaW5zdGF0ZWQgdmlhIG1vYmlsZSBhZG1pbiBjb250cm9sc1wiO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGVyZm9ybUFkbWluVXNlckFjdGlvbiA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGFjdGlvbjogQWRtaW5Vc2VyQWN0aW9uLFxuICBvcHRpb25zPzogeyByZWFzb24/OiBzdHJpbmc7IGR1cmF0aW9uRGF5cz86IG51bWJlciB9LFxuKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGNvbnN0IHBheWxvYWRSZWFzb24gPSBvcHRpb25zPy5yZWFzb24gPz8gZ2V0RGVmYXVsdFJlYXNvbihhY3Rpb24pO1xuXG4gIHRyeSB7XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJzdXNwZW5kXCIpIHtcbiAgICAgIGF3YWl0IGFkbWluQVBJLnN1c3BlbmRVc2VyKHVzZXJJZCwgcGF5bG9hZFJlYXNvbiwgb3B0aW9ucz8uZHVyYXRpb25EYXlzKTtcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJhY3RpdmF0ZVwiIHx8IGFjdGlvbiA9PT0gXCJ1bmJhblwiKSB7XG4gICAgICBhd2FpdCBhZG1pbkFQSS5hY3RpdmF0ZVVzZXIodXNlcklkLCBwYXlsb2FkUmVhc29uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgYWRtaW5BUEkuYmFuVXNlcih1c2VySWQsIHBheWxvYWRSZWFzb24pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlQWRtaW5Vc2Vyc0NhY2hlKCk7XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc3QgZXJyID1cbiAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihgRmFpbGVkIHRvICR7YWN0aW9ufSB1c2VyYCk7XG4gICAgbG9nZ2VyLmVycm9yKFwiQWRtaW4gdXNlciBhY3Rpb24gZmFpbGVkXCIsIHsgYWN0aW9uLCB1c2VySWQsIGVycm9yOiBlcnIgfSk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgYWRtaW5Vc2Vyc1NlcnZpY2UgPSB7XG4gIGZldGNoQWRtaW5Vc2VycyxcbiAgcGVyZm9ybUFkbWluVXNlckFjdGlvbixcbiAgaW52YWxpZGF0ZTogaW52YWxpZGF0ZUFkbWluVXNlcnNDYWNoZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFkbWluVXNlcnNTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUQsT0FBQTtBQXdDQSxJQUFNRSxZQUFZLEdBQUcsS0FBTTtBQUMzQixJQUFNQyxLQUFLLEdBQUcsSUFBSUMsR0FBRyxDQUF3RCxDQUFDO0FBRTlFLElBQU1DLGNBQWMsR0FBRyxTQUFqQkEsY0FBY0EsQ0FBQSxFQUE0QztFQUFBLElBQXhDQyxLQUFzQixHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxDQUFDLENBQUM7RUFDakQsSUFBTUcsVUFBa0MsR0FBRyxDQUFDLENBQUM7RUFDN0MsSUFBSUosS0FBSyxDQUFDSyxJQUFJLEtBQUtGLFNBQVMsRUFBRUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxHQUFHSixLQUFLLENBQUNLLElBQUksQ0FBQ0MsUUFBUSxDQUFDLENBQUM7RUFDeEUsSUFBSU4sS0FBSyxDQUFDTyxLQUFLLEtBQUtKLFNBQVMsRUFBRUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHSixLQUFLLENBQUNPLEtBQUssQ0FBQ0QsUUFBUSxDQUFDLENBQUM7RUFDM0UsSUFBSU4sS0FBSyxDQUFDUSxNQUFNLEtBQUtMLFNBQVMsSUFBSUgsS0FBSyxDQUFDUSxNQUFNLEtBQUssRUFBRSxFQUNuREosVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHSixLQUFLLENBQUNRLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDLENBQUM7RUFDbkQsSUFBSVQsS0FBSyxDQUFDVSxNQUFNLEtBQUtQLFNBQVMsSUFBSUgsS0FBSyxDQUFDVSxNQUFNLEtBQUssS0FBSyxFQUN0RE4sVUFBVSxDQUFDLFFBQVEsQ0FBQyxHQUFHSixLQUFLLENBQUNVLE1BQU07RUFDckMs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