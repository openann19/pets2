{"version":3,"names":["_api","require","_core","cov_2nzowx2kyv","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","_coverageSchema","coverage","actualCoverage","deleteAccount","exports","_ref","_asyncToGenerator2","default","data","response","request","method","body","password","reason","feedback","error","errorMessage","Error","message","logger","String","success","_x","apply","arguments","cancelDeletion","_ref2","getAccountStatus","_ref3","status","exportUserData","_ref4","dataRequest","length","format","includeMessages","includeMatches","includeProfileData","includePreferences","downloadExport","_ref5","exportId","exportStatus","fetch","url","ok","blob","_x2","_default"],"sources":["gdprService.ts"],"sourcesContent":["/**\n * GDPR Service\n * Handles GDPR compliance operations: account deletion, data export, grace period management\n */\n\nimport { request } from './api';\nimport { logger } from '@pawfectmatch/core';\n\nexport interface GDPRError {\n  code: 'INVALID_PASSWORD' | 'ALREADY_DELETING' | 'RATE_LIMIT' | 'SERVER_ERROR';\n  message: string;\n}\n\nexport interface DeleteAccountRequest {\n  password: string;\n  reason?: string;\n  feedback?: string;\n}\n\nexport interface DeleteAccountResponse {\n  success: boolean;\n  message: string;\n  deletionId?: string;\n  gracePeriodEndsAt?: string;\n  canCancel?: boolean;\n  error?: string;\n}\n\nexport interface AccountStatusResponse {\n  success: boolean;\n  status: 'not-found' | 'pending' | 'processing' | 'completed';\n  scheduledDeletionDate?: string;\n  daysRemaining?: number;\n  canCancel?: boolean;\n  requestId?: string;\n}\n\nexport interface DataExportRequest {\n  format?: 'json' | 'csv';\n  includeMessages?: boolean;\n  includeMatches?: boolean;\n  includeProfileData?: boolean;\n  includePreferences?: boolean;\n}\n\nexport interface DataExportResponse {\n  success: boolean;\n  exportId?: string;\n  url?: string;\n  estimatedTime?: string;\n  estimatedCompletion?: string;\n  message?: string;\n  format?: string;\n  expiresAt?: string;\n  exportData?: {\n    profile?: unknown;\n    pets?: unknown[];\n    matches?: unknown[];\n    messages?: unknown[];\n    preferences?: unknown;\n  };\n  error?: string;\n}\n\n/**\n * Delete user account\n * GDPR Article 17 - Right to Erasure\n */\nexport const deleteAccount = async (\n  data: DeleteAccountRequest\n): Promise<DeleteAccountResponse> => {\n  try {\n    const response = await request<DeleteAccountResponse>(\n      '/api/users/delete-account',\n      {\n        method: 'DELETE',\n        body: {\n          password: data.password,\n          reason: data.reason,\n          feedback: data.feedback,\n        },\n      }\n    );\n\n    return response;\n  } catch (error: unknown) {\n    const errorMessage = error instanceof Error ? error.message : 'SERVER_ERROR';\n    logger.error('Delete account error:', error instanceof Error ? error : new Error(String(error)));\n    \n    return {\n      success: false,\n      message: 'Failed to delete account',\n      error: errorMessage,\n    };\n  }\n};\n\n/**\n * Cancel account deletion within grace period\n */\nexport const cancelDeletion = async (): Promise<{\n  success: boolean;\n  message?: string;\n}> => {\n  try {\n    const response = await request<{ success: boolean; message?: string }>(\n      '/api/users/cancel-deletion',\n      { method: 'POST' }\n    );\n\n    return response;\n  } catch (error: unknown) {\n    const errorMessage = error instanceof Error ? error.message : 'Failed to cancel deletion';\n    logger.error('Cancel deletion error:', error instanceof Error ? error : new Error(String(error)));\n    \n    return {\n      success: false,\n      message: errorMessage,\n    };\n  }\n};\n\n/**\n * Get account deletion status\n */\nexport const getAccountStatus = async (): Promise<AccountStatusResponse> => {\n  try {\n    const response = await request<AccountStatusResponse>(\n      '/api/account/status',\n      { method: 'GET' }\n    );\n\n    return response;\n  } catch (error: unknown) {\n    logger.error('Get account status error:', error instanceof Error ? error : new Error(String(error)));\n    \n    return {\n      success: false,\n      status: 'not-found',\n    };\n  }\n};\n\n/**\n * Export user data\n * GDPR Article 20 - Right to Data Portability\n */\nexport const exportUserData = async (\n  dataRequest: DataExportRequest = {}\n): Promise<DataExportResponse> => {\n  try {\n    const response = await request<DataExportResponse>(\n      '/api/users/request-export',\n      {\n        method: 'POST',\n        body: {\n          format: dataRequest.format || 'json',\n          includeMessages: dataRequest.includeMessages !== false,\n          includeMatches: dataRequest.includeMatches !== false,\n          includeProfileData: dataRequest.includeProfileData !== false,\n          includePreferences: dataRequest.includePreferences !== false,\n        },\n      }\n    );\n\n    return response;\n  } catch (error: unknown) {\n    logger.error('Export user data error:', error instanceof Error ? error : new Error(String(error)));\n    \n    return {\n      success: false,\n      message: 'Failed to export data',\n      error: 'SERVER_ERROR',\n    };\n  }\n};\n\n/**\n * Download exported data\n */\nexport const downloadExport = async (exportId: string): Promise<Blob> => {\n  try {\n    // First get the export URL from the status\n    const exportStatus = await request<{ url: string }>(\n      `/api/users/export-data?exportId=${exportId}`,\n      {\n        method: 'GET',\n      }\n    );\n\n    // Download the actual file from the URL\n    const response = await fetch(exportStatus.url);\n    if (!response.ok) {\n      throw new Error('Failed to download export');\n    }\n    \n    return await response.blob();\n  } catch (error: unknown) {\n    logger.error('Download export error:', error instanceof Error ? error : new Error(String(error)));\n    throw error instanceof Error ? error : new Error(String(error));\n  }\n};\n\nexport default {\n  deleteAccount,\n  cancelDeletion,\n  getAccountStatus,\n  exportUserData,\n  downloadExport,\n};\n"],"mappings":"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","ignoreList":[]}