9f571187763350568150e6bd3b7fb6b3
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.authService = exports.AuthError = void 0;
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var SecureStore = _interopRequireWildcard(require("expo-secure-store"));
var LocalAuthentication = _interopRequireWildcard(require("expo-local-authentication"));
var Keychain = _interopRequireWildcard(require("react-native-keychain"));
var _core = require("@pawfectmatch/core");
var _api = require("./api");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t2 in e) "default" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]); return f; })(e, t); }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var AuthService = function () {
  function AuthService() {
    (0, _classCallCheck2.default)(this, AuthService);
    this.sessionCheckInterval = null;
    this.useKeychain = true;
    this.startSessionMonitoring();
  }
  return (0, _createClass2.default)(AuthService, [{
    key: "startSessionMonitoring",
    value: function startSessionMonitoring() {
      var _this = this;
      if (this.sessionCheckInterval) {
        clearInterval(this.sessionCheckInterval);
      }
      this.sessionCheckInterval = setInterval(function () {
        void _this.checkSessionValidity();
      }, 60000);
    }
  }, {
    key: "checkSessionValidity",
    value: (function () {
      var _checkSessionValidity = (0, _asyncToGenerator2.default)(function* () {
        try {
          var isAuthenticated = yield this.isAuthenticated();
          if (!isAuthenticated) {
            this.stopSessionMonitoring();
            return;
          }
          var sessionStart = yield this.getSessionStartTime();
          var lastActivity = yield this.getLastActivityTime();
          var now = Date.now();
          if (sessionStart && now - sessionStart > AuthService.SESSION_TIMEOUT) {
            _core.logger.info("Session expired due to timeout");
            yield this.logout();
            return;
          }
          if (lastActivity && now - lastActivity > AuthService.ACTIVITY_TIMEOUT) {
            _core.logger.info("Session expired due to inactivity");
            yield this.logout();
            return;
          }
          yield this.updateLastActivityTime();
        } catch (error) {
          _core.logger.error("Session validity check failed", {
            error: error
          });
        }
      });
      function checkSessionValidity() {
        return _checkSessionValidity.apply(this, arguments);
      }
      return checkSessionValidity;
    }())
  }, {
    key: "stopSessionMonitoring",
    value: function stopSessionMonitoring() {
      if (this.sessionCheckInterval) {
        clearInterval(this.sessionCheckInterval);
        this.sessionCheckInterval = null;
      }
    }
  }, {
    key: "getSessionStartTime",
    value: (function () {
      var _getSessionStartTime = (0, _asyncToGenerator2.default)(function* () {
        try {
          var startTime = yield this.secureGetItemAsync(AuthService.SESSION_START_KEY);
          return startTime ? parseInt(startTime) : null;
        } catch (error) {
          _core.logger.error("Failed to get session start time", {
            error: error
          });
          return null;
        }
      });
      function getSessionStartTime() {
        return _getSessionStartTime.apply(this, arguments);
      }
      return getSessionStartTime;
    }())
  }, {
    key: "getLastActivityTime",
    value: (function () {
      var _getLastActivityTime = (0, _asyncToGenerator2.default)(function* () {
        try {
          var lastActivity = yield this.secureGetItemAsync(AuthService.LAST_ACTIVITY_KEY);
          return lastActivity ? parseInt(lastActivity) : null;
        } catch (error) {
          _core.logger.error("Failed to get last activity time", {
            error: error
          });
          return null;
        }
      });
      function getLastActivityTime() {
        return _getLastActivityTime.apply(this, arguments);
      }
      return getLastActivityTime;
    }())
  }, {
    key: "updateLastActivityTime",
    value: (function () {
      var _updateLastActivityTime = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield this.secureSetItemAsync(AuthService.LAST_ACTIVITY_KEY, Date.now().toString());
        } catch (error) {
          _core.logger.error("Failed to update last activity time", {
            error: error
          });
        }
      });
      function updateLastActivityTime() {
        return _updateLastActivityTime.apply(this, arguments);
      }
      return updateLastActivityTime;
    }())
  }, {
    key: "recordUserActivity",
    value: (function () {
      var _recordUserActivity = (0, _asyncToGenerator2.default)(function* () {
        yield this.updateLastActivityTime();
      });
      function recordUserActivity() {
        return _recordUserActivity.apply(this, arguments);
      }
      return recordUserActivity;
    }())
  }, {
    key: "rotateTokens",
    value: (function () {
      var _rotateTokens = (0, _asyncToGenerator2.default)(function* () {
        try {
          var refreshToken = yield this.getRefreshToken();
          if (!refreshToken) {
            return false;
          }
          var response = yield _api.api.request("/auth/refresh-token", {
            method: "POST",
            body: JSON.stringify({
              refreshToken: refreshToken
            })
          });
          yield this.storeAuthData(response);
          yield this.secureSetItemAsync(AuthService.SESSION_START_KEY, Date.now().toString());
          _core.logger.info("Tokens rotated successfully");
          return true;
        } catch (error) {
          _core.logger.error("Token rotation failed", {
            error: error
          });
          yield this.logout();
          return false;
        }
      });
      function rotateTokens() {
        return _rotateTokens.apply(this, arguments);
      }
      return rotateTokens;
    }())
  }, {
    key: "isBiometricAvailable",
    value: (function () {
      var _isBiometricAvailable = (0, _asyncToGenerator2.default)(function* () {
        try {
          var hasHardware = yield LocalAuthentication.hasHardwareAsync();
          var isEnrolled = yield LocalAuthentication.isEnrolledAsync();
          var supportedTypes = yield LocalAuthentication.supportedAuthenticationTypesAsync();
          return {
            available: hasHardware && isEnrolled,
            types: supportedTypes
          };
        } catch (error) {
          _core.logger.error("Failed to check biometric availability", {
            error: error
          });
          return {
            available: false,
            types: []
          };
        }
      });
      function isBiometricAvailable() {
        return _isBiometricAvailable.apply(this, arguments);
      }
      return isBiometricAvailable;
    }())
  }, {
    key: "enableBiometricAuthentication",
    value: (function () {
      var _enableBiometricAuthentication = (0, _asyncToGenerator2.default)(function* () {
        try {
          var _yield$this$isBiometr = yield this.isBiometricAvailable(),
            available = _yield$this$isBiometr.available;
          if (!available) {
            throw new AuthError("Biometric authentication is not available on this device");
          }
          var biometricAuth = yield LocalAuthentication.authenticateAsync({
            promptMessage: "Authenticate to enable biometric login",
            fallbackLabel: "Use PIN",
            cancelLabel: "Cancel",
            disableDeviceFallback: false
          });
          if (!biometricAuth.success) {
            throw new AuthError("Biometric authentication failed");
          }
          yield this.secureSetItemAsync(AuthService.BIOMETRIC_ENABLED_KEY, "true");
          var currentUser = yield this.getCurrentUser();
          if (currentUser) {
            var biometricCredentials = {
              email: currentUser.email,
              biometricToken: Date.now().toString() + Math.random().toString(36)
            };
            yield this.secureSetItemAsync(AuthService.BIOMETRIC_CREDENTIALS_KEY, JSON.stringify(biometricCredentials));
          }
          _core.logger.info("Biometric authentication enabled");
          return true;
        } catch (error) {
          _core.logger.error("Failed to enable biometric authentication", {
            error: error
          });
          throw new AuthError("Failed to enable biometric authentication", error);
        }
      });
      function enableBiometricAuthentication() {
        return _enableBiometricAuthentication.apply(this, arguments);
      }
      return enableBiometricAuthentication;
    }())
  }, {
    key: "disableBiometricAuthentication",
    value: (function () {
      var _disableBiometricAuthentication = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield this.secureDeleteItemAsync(AuthService.BIOMETRIC_ENABLED_KEY);
          yield this.secureDeleteItemAsync(AuthService.BIOMETRIC_CREDENTIALS_KEY);
          _core.logger.info("Biometric authentication disabled");
        } catch (error) {
          _core.logger.error("Failed to disable biometric authentication", {
            error: error
          });
          throw new AuthError("Failed to disable biometric authentication", error);
        }
      });
      function disableBiometricAuthentication() {
        return _disableBiometricAuthentication.apply(this, arguments);
      }
      return disableBiometricAuthentication;
    }())
  }, {
    key: "isBiometricEnabled",
    value: (function () {
      var _isBiometricEnabled = (0, _asyncToGenerator2.default)(function* () {
        try {
          var enabled = yield this.secureGetItemAsync(AuthService.BIOMETRIC_ENABLED_KEY);
          return enabled === "true";
        } catch (error) {
          _core.logger.error("Failed to check biometric status", {
            error: error
          });
          return false;
        }
      });
      function isBiometricEnabled() {
        return _isBiometricEnabled.apply(this, arguments);
      }
      return isBiometricEnabled;
    }())
  }, {
    key: "loginWithBiometrics",
    value: (function () {
      var _loginWithBiometrics = (0, _asyncToGenerator2.default)(function* () {
        try {
          var isEnabled = yield this.isBiometricEnabled();
          if (!isEnabled) {
            throw new AuthError("Biometric authentication is not enabled");
          }
          var _yield$this$isBiometr2 = yield this.isBiometricAvailable(),
            available = _yield$this$isBiometr2.available;
          if (!available) {
            throw new AuthError("Biometric authentication is not available");
          }
          var biometricAuth = yield LocalAuthentication.authenticateAsync({
            promptMessage: "Authenticate to login",
            fallbackLabel: "Use PIN",
            cancelLabel: "Cancel",
            disableDeviceFallback: false
          });
          if (!biometricAuth.success) {
            throw new AuthError("Biometric authentication failed");
          }
          var storedCredentials = yield this.secureGetItemAsync(AuthService.BIOMETRIC_CREDENTIALS_KEY);
          if (!storedCredentials) {
            throw new AuthError("No biometric credentials found");
          }
          var credentials = JSON.parse(storedCredentials);
          var response = yield _api.api.request("/auth/biometric-login", {
            method: "POST",
            body: JSON.stringify({
              email: credentials.email,
              biometricToken: credentials.biometricToken
            })
          });
          yield this.storeAuthData(response);
          _core.logger.info("User logged in with biometrics", {
            userId: response.user.id
          });
          return response;
        } catch (error) {
          _core.logger.error("Biometric login failed", {
            error: error
          });
          throw new AuthError("Biometric login failed. Please use email and password.", error);
        }
      });
      function loginWithBiometrics() {
        return _loginWithBiometrics.apply(this, arguments);
      }
      return loginWithBiometrics;
    }())
  }, {
    key: "login",
    value: (function () {
      var _login = (0, _asyncToGenerator2.default)(function* (credentials) {
        try {
          var response = yield _api.api.request("/auth/login", {
            method: "POST",
            body: JSON.stringify(credentials)
          });
          yield this.storeAuthData(response);
          _core.logger.info("User logged in successfully", {
            userId: response.user.id
          });
          return response;
        } catch (error) {
          _core.logger.error("Login failed", {
            error: error,
            email: credentials.email
          });
          throw new AuthError("Login failed. Please check your credentials and try again.", error);
        }
      });
      function login(_x) {
        return _login.apply(this, arguments);
      }
      return login;
    }())
  }, {
    key: "register",
    value: (function () {
      var _register = (0, _asyncToGenerator2.default)(function* (data) {
        try {
          if (data.password !== data.confirmPassword) {
            throw new AuthError("Passwords do not match");
          }
          var registerData = {
            email: data.email,
            password: data.password,
            name: data.name
          };
          var response = yield _api.api.request("/auth/register", {
            method: "POST",
            body: JSON.stringify(registerData)
          });
          yield this.storeAuthData(response);
          _core.logger.info("User registered successfully", {
            userId: response.user.id
          });
          return response;
        } catch (error) {
          _core.logger.error("Registration failed", {
            error: error,
            email: data.email
          });
          throw new AuthError("Registration failed. Please try again.", error);
        }
      });
      function register(_x2) {
        return _register.apply(this, arguments);
      }
      return register;
    }())
  }, {
    key: "logout",
    value: (function () {
      var _logout = (0, _asyncToGenerator2.default)(function* () {
        try {
          var refreshToken = yield this.getRefreshToken();
          if (refreshToken) {
            try {
              yield _api.api.request("/auth/logout", {
                method: "POST",
                body: JSON.stringify({
                  refreshToken: refreshToken
                })
              });
            } catch (error) {
              _core.logger.warn("Server logout failed, continuing with local logout", {
                error: error
              });
            }
          }
          yield this.clearAuthData();
          _core.logger.info("User logged out successfully");
        } catch (error) {
          _core.logger.error("Logout failed", {
            error: error
          });
          yield this.clearAuthData();
        }
      });
      function logout() {
        return _logout.apply(this, arguments);
      }
      return logout;
    }())
  }, {
    key: "refreshToken",
    value: (function () {
      var _refreshToken = (0, _asyncToGenerator2.default)(function* () {
        try {
          var _refreshToken2 = yield this.getRefreshToken();
          if (!_refreshToken2) {
            return null;
          }
          var response = yield _api.api.request("/auth/refresh", {
            method: "POST",
            body: JSON.stringify({
              refreshToken: _refreshToken2
            })
          });
          yield this.storeAuthData(response);
          return response;
        } catch (error) {
          _core.logger.error("Token refresh failed", {
            error: error
          });
          yield this.clearAuthData();
          return null;
        }
      });
      function refreshToken() {
        return _refreshToken.apply(this, arguments);
      }
      return refreshToken;
    }())
  }, {
    key: "forgotPassword",
    value: (function () {
      var _forgotPassword = (0, _asyncToGenerator2.default)(function* (email) {
        try {
          var response = yield _api.api.request("/auth/forgot-password", {
            method: "POST",
            body: JSON.stringify({
              email: email
            })
          });
          _core.logger.info("Password reset requested", {
            email: email
          });
          return response;
        } catch (error) {
          _core.logger.error("Forgot password failed", {
            error: error,
            email: email
          });
          throw new AuthError("Failed to send password reset email. Please try again.", error);
        }
      });
      function forgotPassword(_x3) {
        return _forgotPassword.apply(this, arguments);
      }
      return forgotPassword;
    }())
  }, {
    key: "resetPassword",
    value: (function () {
      var _resetPassword = (0, _asyncToGenerator2.default)(function* (data) {
        try {
          if (data.password !== data.confirmPassword) {
            throw new AuthError("Passwords do not match");
          }
          var resetData = {
            token: data.token,
            password: data.password
          };
          var response = yield _api.api.request("/auth/reset-password", {
            method: "POST",
            body: JSON.stringify(resetData)
          });
          _core.logger.info("Password reset successful");
          return response;
        } catch (error) {
          _core.logger.error("Password reset failed", {
            error: error
          });
          throw new AuthError("Failed to reset password. Please try again.", error);
        }
      });
      function resetPassword(_x4) {
        return _resetPassword.apply(this, arguments);
      }
      return resetPassword;
    }())
  }, {
    key: "getCurrentUser",
    value: (function () {
      var _getCurrentUser = (0, _asyncToGenerator2.default)(function* () {
        try {
          var userData = yield this.secureGetItemAsync(AuthService.USER_KEY);
          return userData ? JSON.parse(userData) : null;
        } catch (error) {
          _core.logger.error("Failed to get current user", {
            error: error
          });
          return null;
        }
      });
      function getCurrentUser() {
        return _getCurrentUser.apply(this, arguments);
      }
      return getCurrentUser;
    }())
  }, {
    key: "getAccessToken",
    value: (function () {
      var _getAccessToken = (0, _asyncToGenerator2.default)(function* () {
        try {
          return yield this.secureGetItemAsync(AuthService.ACCESS_TOKEN_KEY);
        } catch (error) {
          _core.logger.error("Failed to get access token", {
            error: error
          });
          return null;
        }
      });
      function getAccessToken() {
        return _getAccessToken.apply(this, arguments);
      }
      return getAccessToken;
    }())
  }, {
    key: "isAuthenticated",
    value: (function () {
      var _isAuthenticated = (0, _asyncToGenerator2.default)(function* () {
        try {
          var token = yield this.getAccessToken();
          var user = yield this.getCurrentUser();
          return !!(token && user);
        } catch (error) {
          _core.logger.error("Authentication check failed", {
            error: error
          });
          return false;
        }
      });
      function isAuthenticated() {
        return _isAuthenticated.apply(this, arguments);
      }
      return isAuthenticated;
    }())
  }, {
    key: "updateUser",
    value: (function () {
      var _updateUser = (0, _asyncToGenerator2.default)(function* (userData) {
        try {
          var currentUser = yield this.getCurrentUser();
          if (!currentUser) {
            throw new AuthError("No authenticated user found");
          }
          var updatedUser = _objectSpread(_objectSpread({}, currentUser), userData);
          yield this.secureSetItemAsync(AuthService.USER_KEY, JSON.stringify(updatedUser));
          _core.logger.info("User data updated", {
            userId: updatedUser.id
          });
        } catch (error) {
          _core.logger.error("Failed to update user data", {
            error: error
          });
          throw new AuthError("Failed to update user data", error);
        }
      });
      function updateUser(_x5) {
        return _updateUser.apply(this, arguments);
      }
      return updateUser;
    }())
  }, {
    key: "secureSetItemAsync",
    value: function () {
      var _secureSetItemAsync = (0, _asyncToGenerator2.default)(function* (key, value) {
        try {
          if (key.includes('token') || key.includes('user')) {
            try {
              var result = yield Keychain.setGenericPassword('pawfectmatch', value, {
                service: 'pawfectmatch-auth',
                accessControl: Keychain.ACCESS_CONTROL.BIOMETRY_ANY_OR_DEVICE_PASSCODE,
                accessible: Keychain.ACCESSIBLE.WHEN_UNLOCKED_THIS_DEVICE_ONLY
              });
              if (result === false) {
                throw new Error('Failed to store in Keychain');
              }
              yield SecureStore.setItemAsync(`${key}_ref`, 'keychain', {
                keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
              });
              return;
            } catch (keychainError) {
              _core.logger.warn(`Keychain failed, falling back to SecureStore for ${key}`, {
                error: keychainError
              });
              yield SecureStore.setItemAsync(key, value, {
                keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
              });
              yield SecureStore.setItemAsync(`${key}_ref`, 'securestore', {
                keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
              });
            }
          } else {
            yield SecureStore.setItemAsync(key, value, {
              keychainAccessible: SecureStore.AFTER_FIRST_UNLOCK_THIS_DEVICE_ONLY
            });
          }
        } catch (error) {
          _core.logger.error(`Failed to securely store ${key}`, {
            error: error
          });
          throw new AuthError(`Failed to securely store authentication data`, error);
        }
      });
      function secureSetItemAsync(_x6, _x7) {
        return _secureSetItemAsync.apply(this, arguments);
      }
      return secureSetItemAsync;
    }()
  }, {
    key: "secureGetItemAsync",
    value: function () {
      var _secureGetItemAsync = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          var refKey = `${key}_ref`;
          var storageLocation = yield SecureStore.getItemAsync(refKey);
          if (storageLocation === 'keychain') {
            try {
              var credentials = yield Keychain.getGenericPassword({
                service: 'pawfectmatch-auth'
              });
              if (credentials) {
                return credentials.password;
              }
              return null;
            } catch (keychainError) {
              _core.logger.warn(`Keychain retrieval failed, trying SecureStore fallback for ${key}`, {
                error: keychainError
              });
              return yield SecureStore.getItemAsync(key);
            }
          } else if (storageLocation === 'securestore') {
            return yield SecureStore.getItemAsync(key);
          } else {
            return yield SecureStore.getItemAsync(key);
          }
        } catch (error) {
          _core.logger.error(`Failed to securely retrieve ${key}`, {
            error: error
          });
          return null;
        }
      });
      function secureGetItemAsync(_x8) {
        return _secureGetItemAsync.apply(this, arguments);
      }
      return secureGetItemAsync;
    }()
  }, {
    key: "secureDeleteItemAsync",
    value: function () {
      var _secureDeleteItemAsync = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          var refKey = `${key}_ref`;
          var storageLocation = yield SecureStore.getItemAsync(refKey);
          if (storageLocation === 'keychain') {
            try {
              yield Keychain.resetGenericPassword({
                service: 'pawfectmatch-auth'
              });
            } catch (keychainError) {
              _core.logger.warn(`Keychain deletion failed, continuing with cleanup`, {
                error: keychainError
              });
            }
            yield SecureStore.deleteItemAsync(refKey);
          } else if (storageLocation === 'securestore') {
            yield SecureStore.deleteItemAsync(key);
            yield SecureStore.deleteItemAsync(refKey);
          } else {
            try {
              yield SecureStore.deleteItemAsync(key);
            } catch (error) {}
          }
        } catch (error) {
          _core.logger.error(`Failed to securely delete ${key}`, {
            error: error
          });
        }
      });
      function secureDeleteItemAsync(_x9) {
        return _secureDeleteItemAsync.apply(this, arguments);
      }
      return secureDeleteItemAsync;
    }()
  }, {
    key: "storeAuthData",
    value: function () {
      var _storeAuthData = (0, _asyncToGenerator2.default)(function* (response) {
        try {
          yield Promise.all([this.secureSetItemAsync(AuthService.ACCESS_TOKEN_KEY, response.accessToken), this.secureSetItemAsync(AuthService.REFRESH_TOKEN_KEY, response.refreshToken), this.secureSetItemAsync(AuthService.USER_KEY, JSON.stringify(response.user)), this.secureSetItemAsync(AuthService.SESSION_START_KEY, Date.now().toString()), this.secureSetItemAsync(AuthService.LAST_ACTIVITY_KEY, Date.now().toString())]);
          this.startSessionMonitoring();
        } catch (error) {
          _core.logger.error("Failed to store auth data", {
            error: error
          });
          throw new AuthError("Failed to save authentication data", error);
        }
      });
      function storeAuthData(_x0) {
        return _storeAuthData.apply(this, arguments);
      }
      return storeAuthData;
    }()
  }, {
    key: "clearAuthData",
    value: function () {
      var _clearAuthData = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield Promise.all([this.secureDeleteItemAsync(AuthService.ACCESS_TOKEN_KEY), this.secureDeleteItemAsync(AuthService.REFRESH_TOKEN_KEY), this.secureDeleteItemAsync(AuthService.USER_KEY), this.secureDeleteItemAsync(AuthService.SESSION_START_KEY), this.secureDeleteItemAsync(AuthService.LAST_ACTIVITY_KEY)]);
          this.stopSessionMonitoring();
        } catch (error) {
          _core.logger.error("Failed to clear auth data", {
            error: error
          });
        }
      });
      function clearAuthData() {
        return _clearAuthData.apply(this, arguments);
      }
      return clearAuthData;
    }()
  }, {
    key: "getRefreshToken",
    value: function () {
      var _getRefreshToken = (0, _asyncToGenerator2.default)(function* () {
        try {
          return yield this.secureGetItemAsync(AuthService.REFRESH_TOKEN_KEY);
        } catch (error) {
          _core.logger.error("Failed to get refresh token", {
            error: error
          });
          return null;
        }
      });
      function getRefreshToken() {
        return _getRefreshToken.apply(this, arguments);
      }
      return getRefreshToken;
    }()
  }]);
}();
AuthService.ACCESS_TOKEN_KEY = "auth_access_token";
AuthService.REFRESH_TOKEN_KEY = "auth_refresh_token";
AuthService.USER_KEY = "auth_user";
AuthService.BIOMETRIC_ENABLED_KEY = "biometric_enabled";
AuthService.BIOMETRIC_CREDENTIALS_KEY = "biometric_credentials";
AuthService.SESSION_START_KEY = "session_start_time";
AuthService.LAST_ACTIVITY_KEY = "last_activity_time";
AuthService.SERVICE_NAME = "com.pawfectmatch.mobile";
AuthService.SESSION_TIMEOUT = 24 * 60 * 60 * 1000;
AuthService.ACTIVITY_TIMEOUT = 30 * 60 * 1000;
var AuthError = exports.AuthError = function (_Error) {
  function AuthError(message, originalError) {
    var _this2;
    (0, _classCallCheck2.default)(this, AuthError);
    _this2 = _callSuper(this, AuthError, [message]);
    _this2.originalError = originalError;
    _this2.name = "AuthError";
    return _this2;
  }
  (0, _inherits2.default)(AuthError, _Error);
  return (0, _createClass2.default)(AuthError);
}((0, _wrapNativeSuper2.default)(Error));
var authService = exports.authService = new AuthService();
var _default = exports.default = authService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZWN1cmVTdG9yZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIkxvY2FsQXV0aGVudGljYXRpb24iLCJLZXljaGFpbiIsIl9jb3JlIiwiX2FwaSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdDIiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9jYWxsU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsImFwcGx5IiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJBdXRoU2VydmljZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJzZXNzaW9uQ2hlY2tJbnRlcnZhbCIsInVzZUtleWNoYWluIiwic3RhcnRTZXNzaW9uTW9uaXRvcmluZyIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsIl90aGlzIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiY2hlY2tTZXNzaW9uVmFsaWRpdHkiLCJfY2hlY2tTZXNzaW9uVmFsaWRpdHkiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzdG9wU2Vzc2lvbk1vbml0b3JpbmciLCJzZXNzaW9uU3RhcnQiLCJnZXRTZXNzaW9uU3RhcnRUaW1lIiwibGFzdEFjdGl2aXR5IiwiZ2V0TGFzdEFjdGl2aXR5VGltZSIsIm5vdyIsIkRhdGUiLCJTRVNTSU9OX1RJTUVPVVQiLCJsb2dnZXIiLCJpbmZvIiwibG9nb3V0IiwiQUNUSVZJVFlfVElNRU9VVCIsInVwZGF0ZUxhc3RBY3Rpdml0eVRpbWUiLCJlcnJvciIsIl9nZXRTZXNzaW9uU3RhcnRUaW1lIiwic3RhcnRUaW1lIiwic2VjdXJlR2V0SXRlbUFzeW5jIiwiU0VTU0lPTl9TVEFSVF9LRVkiLCJwYXJzZUludCIsIl9nZXRMYXN0QWN0aXZpdHlUaW1lIiwiTEFTVF9BQ1RJVklUWV9LRVkiLCJfdXBkYXRlTGFzdEFjdGl2aXR5VGltZSIsInNlY3VyZVNldEl0ZW1Bc3luYyIsInRvU3RyaW5nIiwiX3JlY29yZFVzZXJBY3Rpdml0eSIsInJlY29yZFVzZXJBY3Rpdml0eSIsIl9yb3RhdGVUb2tlbnMiLCJyZWZyZXNoVG9rZW4iLCJnZXRSZWZyZXNoVG9rZW4iLCJyZXNwb25zZSIsImFwaSIsInJlcXVlc3QiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInN0b3JlQXV0aERhdGEiLCJyb3RhdGVUb2tlbnMiLCJfaXNCaW9tZXRyaWNBdmFpbGFibGUiLCJoYXNIYXJkd2FyZSIsImhhc0hhcmR3YXJlQXN5bmMiLCJpc0Vucm9sbGVkIiwiaXNFbnJvbGxlZEFzeW5jIiwic3VwcG9ydGVkVHlwZXMiLCJzdXBwb3J0ZWRBdXRoZW50aWNhdGlvblR5cGVzQXN5bmMiLCJhdmFpbGFibGUiLCJ0eXBlcyIsImlzQmlvbWV0cmljQXZhaWxhYmxlIiwiX2VuYWJsZUJpb21ldHJpY0F1dGhlbnRpY2F0aW9uIiwiX3lpZWxkJHRoaXMkaXNCaW9tZXRyIiwiQXV0aEVycm9yIiwiYmlvbWV0cmljQXV0aCIsImF1dGhlbnRpY2F0ZUFzeW5jIiwicHJvbXB0TWVzc2FnZSIsImZhbGxiYWNrTGFiZWwiLCJjYW5jZWxMYWJlbCIsImRpc2FibGVEZXZpY2VGYWxsYmFjayIsInN1Y2Nlc3MiLCJCSU9NRVRSSUNfRU5BQkxFRF9LRVkiLCJjdXJyZW50VXNlciIsImdldEN1cnJlbnRVc2VyIiwiYmlvbWV0cmljQ3JlZGVudGlhbHMiLCJlbWFpbCIsImJpb21ldHJpY1Rva2VuIiwiTWF0aCIsInJhbmRvbSIsIkJJT01FVFJJQ19DUkVERU5USUFMU19LRVkiLCJlbmFibGVCaW9tZXRyaWNBdXRoZW50aWNhdGlvbiIsIl9kaXNhYmxlQmlvbWV0cmljQXV0aGVudGljYXRpb24iLCJzZWN1cmVEZWxldGVJdGVtQXN5bmMiLCJkaXNhYmxlQmlvbWV0cmljQXV0aGVudGljYXRpb24iLCJfaXNCaW9tZXRyaWNFbmFibGVkIiwiZW5hYmxlZCIsImlzQmlvbWV0cmljRW5hYmxlZCIsIl9sb2dpbldpdGhCaW9tZXRyaWNzIiwiaXNFbmFibGVkIiwiX3lpZWxkJHRoaXMkaXNCaW9tZXRyMiIsInN0b3JlZENyZWRlbnRpYWxzIiwiY3JlZGVudGlhbHMiLCJwYXJzZSIsInVzZXJJZCIsInVzZXIiLCJpZCIsImxvZ2luV2l0aEJpb21ldHJpY3MiLCJfbG9naW4iLCJsb2dpbiIsIl94IiwiX3JlZ2lzdGVyIiwiZGF0YSIsInBhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwicmVnaXN0ZXJEYXRhIiwibmFtZSIsInJlZ2lzdGVyIiwiX3gyIiwiX2xvZ291dCIsIndhcm4iLCJjbGVhckF1dGhEYXRhIiwiX3JlZnJlc2hUb2tlbiIsIl9mb3Jnb3RQYXNzd29yZCIsImZvcmdvdFBhc3N3b3JkIiwiX3gzIiwiX3Jlc2V0UGFzc3dvcmQiLCJyZXNldERhdGEiLCJ0b2tlbiIsInJlc2V0UGFzc3dvcmQiLCJfeDQiLCJfZ2V0Q3VycmVudFVzZXIiLCJ1c2VyRGF0YSIsIlVTRVJfS0VZIiwiX2dldEFjY2Vzc1Rva2VuIiwiQUNDRVNTX1RPS0VOX0tFWSIsImdldEFjY2Vzc1Rva2VuIiwiX2lzQXV0aGVudGljYXRlZCIsIl91cGRhdGVVc2VyIiwidXBkYXRlZFVzZXIiLCJ1cGRhdGVVc2VyIiwiX3g1IiwiX3NlY3VyZVNldEl0ZW1Bc3luYyIsImluY2x1ZGVzIiwicmVzdWx0Iiwic2V0R2VuZXJpY1Bhc3N3b3JkIiwic2VydmljZSIsImFjY2Vzc0NvbnRyb2wiLCJBQ0NFU1NfQ09OVFJPTCIsIkJJT01FVFJZX0FOWV9PUl9ERVZJQ0VfUEFTU0NPREUiLCJhY2Nlc3NpYmxlIiwiQUNDRVNTSUJMRSIsIldIRU5fVU5MT0NLRURfVEhJU19ERVZJQ0VfT05MWSIsIkVycm9yIiwic2V0SXRlbUFzeW5jIiwia2V5Y2hhaW5BY2Nlc3NpYmxlIiwiQUZURVJfRklSU1RfVU5MT0NLX1RISVNfREVWSUNFX09OTFkiLCJrZXljaGFpbkVycm9yIiwiX3g2IiwiX3g3IiwiX3NlY3VyZUdldEl0ZW1Bc3luYyIsInJlZktleSIsInN0b3JhZ2VMb2NhdGlvbiIsImdldEl0ZW1Bc3luYyIsImdldEdlbmVyaWNQYXNzd29yZCIsIl94OCIsIl9zZWN1cmVEZWxldGVJdGVtQXN5bmMiLCJyZXNldEdlbmVyaWNQYXNzd29yZCIsImRlbGV0ZUl0ZW1Bc3luYyIsIl94OSIsIl9zdG9yZUF1dGhEYXRhIiwiUHJvbWlzZSIsImFsbCIsImFjY2Vzc1Rva2VuIiwiUkVGUkVTSF9UT0tFTl9LRVkiLCJfeDAiLCJfY2xlYXJBdXRoRGF0YSIsIl9nZXRSZWZyZXNoVG9rZW4iLCJTRVJWSUNFX05BTUUiLCJleHBvcnRzIiwiX0Vycm9yIiwibWVzc2FnZSIsIm9yaWdpbmFsRXJyb3IiLCJfdGhpczIiLCJfaW5oZXJpdHMyIiwiX3dyYXBOYXRpdmVTdXBlcjIiLCJhdXRoU2VydmljZSIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiQXV0aFNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdXRoZW50aWNhdGlvbiBTZXJ2aWNlIGZvciBQYXdmZWN0TWF0Y2ggTW9iaWxlIEFwcFxuICogSGFuZGxlcyB1c2VyIGF1dGhlbnRpY2F0aW9uLCB0b2tlbiBtYW5hZ2VtZW50LCBhbmQgc2VjdXJlIHN0b3JhZ2VcbiAqIFVzZXMgcmVhY3QtbmF0aXZlLWtleWNoYWluIGZvciBwcm9kdWN0aW9uLWdyYWRlIHNlY3VyaXR5XG4gKi9cbmltcG9ydCAqIGFzIFNlY3VyZVN0b3JlIGZyb20gXCJleHBvLXNlY3VyZS1zdG9yZVwiO1xuaW1wb3J0ICogYXMgTG9jYWxBdXRoZW50aWNhdGlvbiBmcm9tIFwiZXhwby1sb2NhbC1hdXRoZW50aWNhdGlvblwiO1xuaW1wb3J0ICogYXMgS2V5Y2hhaW4gZnJvbSBcInJlYWN0LW5hdGl2ZS1rZXljaGFpblwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBwYXdmZWN0bWF0Y2gvY29yZVwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4vYXBpXCI7XG5cbi8vIFR5cGVzIGZvciBhdXRoZW50aWNhdGlvblxuZXhwb3J0IGludGVyZmFjZSBMb2dpbkNyZWRlbnRpYWxzIHtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoUmVzcG9uc2Uge1xuICB1c2VyOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBwcm9maWxlQ29tcGxldGU6IGJvb2xlYW47XG4gICAgc3Vic2NyaXB0aW9uU3RhdHVzOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIH07XG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIHJlZnJlc2hUb2tlbjogc3RyaW5nO1xuICBleHBpcmVzSW46IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWdpc3RlckRhdGEge1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNvbmZpcm1QYXNzd29yZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2V0UGFzc3dvcmREYXRhIHtcbiAgdG9rZW46IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgY29uZmlybVBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgcHJvZmlsZUNvbXBsZXRlOiBib29sZWFuO1xuICBzdWJzY3JpcHRpb25TdGF0dXM6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlvbWV0cmljQ3JlZGVudGlhbHMge1xuICBlbWFpbDogc3RyaW5nO1xuICBiaW9tZXRyaWNUb2tlbjogc3RyaW5nO1xufVxuXG5jbGFzcyBBdXRoU2VydmljZSB7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEFDQ0VTU19UT0tFTl9LRVkgPSBcImF1dGhfYWNjZXNzX3Rva2VuXCI7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJFRlJFU0hfVE9LRU5fS0VZID0gXCJhdXRoX3JlZnJlc2hfdG9rZW5cIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgVVNFUl9LRVkgPSBcImF1dGhfdXNlclwiO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBCSU9NRVRSSUNfRU5BQkxFRF9LRVkgPSBcImJpb21ldHJpY19lbmFibGVkXCI7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEJJT01FVFJJQ19DUkVERU5USUFMU19LRVkgPSBcImJpb21ldHJpY19jcmVkZW50aWFsc1wiO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTRVNTSU9OX1NUQVJUX0tFWSA9IFwic2Vzc2lvbl9zdGFydF90aW1lXCI7XG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IExBU1RfQUNUSVZJVFlfS0VZID0gXCJsYXN0X2FjdGl2aXR5X3RpbWVcIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU0VSVklDRV9OQU1FID0gXCJjb20ucGF3ZmVjdG1hdGNoLm1vYmlsZVwiO1xuXG4gIC8vIFNlc3Npb24gY29uZmlndXJhdGlvblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTRVNTSU9OX1RJTUVPVVQgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBBQ1RJVklUWV9USU1FT1VUID0gMzAgKiA2MCAqIDEwMDA7IC8vIDMwIG1pbnV0ZXMgb2YgaW5hY3Rpdml0eVxuICBwcml2YXRlIHNlc3Npb25DaGVja0ludGVydmFsOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB1c2VLZXljaGFpbjogYm9vbGVhbiA9IHRydWU7IC8vIFVzZSBLZXljaGFpbiBieSBkZWZhdWx0IGZvciBwcm9kdWN0aW9uIHNlY3VyaXR5XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdGFydFNlc3Npb25Nb25pdG9yaW5nKCk7XG4gIH1cblxuICAvLyA9PT09PSBTZXNzaW9uIE1hbmFnZW1lbnQgPT09PT1cblxuICAvKipcbiAgICogU3RhcnQgc2Vzc2lvbiBtb25pdG9yaW5nIGZvciBhdXRvLWxvZ291dFxuICAgKi9cbiAgcHJpdmF0ZSBzdGFydFNlc3Npb25Nb25pdG9yaW5nKCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLnNlc3Npb25DaGVja0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc2Vzc2lvbkNoZWNrSW50ZXJ2YWwpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHNlc3Npb24gZXZlcnkgbWludXRlXG4gICAgdGhpcy5zZXNzaW9uQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHZvaWQgdGhpcy5jaGVja1Nlc3Npb25WYWxpZGl0eSgpO1xuICAgIH0sIDYwMDAwKTsgLy8gQ2hlY2sgZXZlcnkgbWludXRlXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY3VycmVudCBzZXNzaW9uIGlzIHN0aWxsIHZhbGlkXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNoZWNrU2Vzc2lvblZhbGlkaXR5KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpc0F1dGhlbnRpY2F0ZWQgPSBhd2FpdCB0aGlzLmlzQXV0aGVudGljYXRlZCgpO1xuICAgICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgdGhpcy5zdG9wU2Vzc2lvbk1vbml0b3JpbmcoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzZXNzaW9uU3RhcnQgPSBhd2FpdCB0aGlzLmdldFNlc3Npb25TdGFydFRpbWUoKTtcbiAgICAgIGNvbnN0IGxhc3RBY3Rpdml0eSA9IGF3YWl0IHRoaXMuZ2V0TGFzdEFjdGl2aXR5VGltZSgpO1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gQ2hlY2sgc2Vzc2lvbiB0aW1lb3V0ICgyNCBob3VycylcbiAgICAgIGlmIChzZXNzaW9uU3RhcnQgJiYgbm93IC0gc2Vzc2lvblN0YXJ0ID4gQXV0aFNlcnZpY2UuU0VTU0lPTl9USU1FT1VUKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiU2Vzc2lvbiBleHBpcmVkIGR1ZSB0byB0aW1lb3V0XCIpO1xuICAgICAgICBhd2FpdCB0aGlzLmxvZ291dCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGFjdGl2aXR5IHRpbWVvdXQgKDMwIG1pbnV0ZXMpXG4gICAgICBpZiAobGFzdEFjdGl2aXR5ICYmIG5vdyAtIGxhc3RBY3Rpdml0eSA+IEF1dGhTZXJ2aWNlLkFDVElWSVRZX1RJTUVPVVQpIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJTZXNzaW9uIGV4cGlyZWQgZHVlIHRvIGluYWN0aXZpdHlcIik7XG4gICAgICAgIGF3YWl0IHRoaXMubG9nb3V0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGxhc3QgYWN0aXZpdHkgdGltZVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMYXN0QWN0aXZpdHlUaW1lKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlNlc3Npb24gdmFsaWRpdHkgY2hlY2sgZmFpbGVkXCIsIHsgZXJyb3IgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3Agc2Vzc2lvbiBtb25pdG9yaW5nXG4gICAqL1xuICBwcml2YXRlIHN0b3BTZXNzaW9uTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZXNzaW9uQ2hlY2tJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNlc3Npb25DaGVja0ludGVydmFsKTtcbiAgICAgIHRoaXMuc2Vzc2lvbkNoZWNrSW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2Vzc2lvbiBzdGFydCB0aW1lXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdldFNlc3Npb25TdGFydFRpbWUoKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IGF3YWl0IHRoaXMuc2VjdXJlR2V0SXRlbUFzeW5jKFxuICAgICAgICBBdXRoU2VydmljZS5TRVNTSU9OX1NUQVJUX0tFWSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gc3RhcnRUaW1lID8gcGFyc2VJbnQoc3RhcnRUaW1lKSA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgc2Vzc2lvbiBzdGFydCB0aW1lXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxhc3QgYWN0aXZpdHkgdGltZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXRMYXN0QWN0aXZpdHlUaW1lKCk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBsYXN0QWN0aXZpdHkgPSBhd2FpdCB0aGlzLnNlY3VyZUdldEl0ZW1Bc3luYyhcbiAgICAgICAgQXV0aFNlcnZpY2UuTEFTVF9BQ1RJVklUWV9LRVksXG4gICAgICApO1xuICAgICAgcmV0dXJuIGxhc3RBY3Rpdml0eSA/IHBhcnNlSW50KGxhc3RBY3Rpdml0eSkgOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGxhc3QgYWN0aXZpdHkgdGltZVwiLCB7IGVycm9yIH0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsYXN0IGFjdGl2aXR5IHRpbWVcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlTGFzdEFjdGl2aXR5VGltZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoXG4gICAgICAgIEF1dGhTZXJ2aWNlLkxBU1RfQUNUSVZJVFlfS0VZLFxuICAgICAgICBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIGxhc3QgYWN0aXZpdHkgdGltZVwiLCB7IGVycm9yIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvcmQgdXNlciBhY3Rpdml0eSB0byBwcmV2ZW50IGF1dG8tbG9nb3V0XG4gICAqL1xuICBhc3luYyByZWNvcmRVc2VyQWN0aXZpdHkoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGVMYXN0QWN0aXZpdHlUaW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yY2UgcmVmcmVzaCB0b2tlbiByb3RhdGlvblxuICAgKi9cbiAgYXN5bmMgcm90YXRlVG9rZW5zKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCB0aGlzLmdldFJlZnJlc2hUb2tlbigpO1xuICAgICAgaWYgKCFyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWxsIHJlZnJlc2ggZW5kcG9pbnQgdG8gZ2V0IG5ldyB0b2tlbnNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnJlcXVlc3Q8QXV0aFJlc3BvbnNlPihcIi9hdXRoL3JlZnJlc2gtdG9rZW5cIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHJlZnJlc2hUb2tlbiB9KSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdG9yZSBuZXcgdG9rZW5zXG4gICAgICBhd2FpdCB0aGlzLnN0b3JlQXV0aERhdGEocmVzcG9uc2UpO1xuXG4gICAgICAvLyBVcGRhdGUgc2Vzc2lvbiBzdGFydCB0aW1lIGZvciBuZXcgc2Vzc2lvblxuICAgICAgYXdhaXQgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoXG4gICAgICAgIEF1dGhTZXJ2aWNlLlNFU1NJT05fU1RBUlRfS0VZLFxuICAgICAgICBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICApO1xuXG4gICAgICBsb2dnZXIuaW5mbyhcIlRva2VucyByb3RhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJUb2tlbiByb3RhdGlvbiBmYWlsZWRcIiwgeyBlcnJvciB9KTtcbiAgICAgIC8vIElmIHJvdGF0aW9uIGZhaWxzLCBsb2dvdXQgdXNlclxuICAgICAgYXdhaXQgdGhpcy5sb2dvdXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGlzIGF2YWlsYWJsZSBvbiBkZXZpY2VcbiAgICovXG4gIGFzeW5jIGlzQmlvbWV0cmljQXZhaWxhYmxlKCk6IFByb21pc2U8e1xuICAgIGF2YWlsYWJsZTogYm9vbGVhbjtcbiAgICB0eXBlczogTG9jYWxBdXRoZW50aWNhdGlvbi5BdXRoZW50aWNhdGlvblR5cGVbXTtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBoYXNIYXJkd2FyZSA9IGF3YWl0IExvY2FsQXV0aGVudGljYXRpb24uaGFzSGFyZHdhcmVBc3luYygpO1xuICAgICAgY29uc3QgaXNFbnJvbGxlZCA9IGF3YWl0IExvY2FsQXV0aGVudGljYXRpb24uaXNFbnJvbGxlZEFzeW5jKCk7XG4gICAgICBjb25zdCBzdXBwb3J0ZWRUeXBlcyA9XG4gICAgICAgIGF3YWl0IExvY2FsQXV0aGVudGljYXRpb24uc3VwcG9ydGVkQXV0aGVudGljYXRpb25UeXBlc0FzeW5jKCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGF2YWlsYWJsZTogaGFzSGFyZHdhcmUgJiYgaXNFbnJvbGxlZCxcbiAgICAgICAgdHlwZXM6IHN1cHBvcnRlZFR5cGVzLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGNoZWNrIGJpb21ldHJpYyBhdmFpbGFiaWxpdHlcIiwgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiB7IGF2YWlsYWJsZTogZmFsc2UsIHR5cGVzOiBbXSB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgYmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGZvciBjdXJyZW50IHVzZXJcbiAgICovXG4gIGFzeW5jIGVuYWJsZUJpb21ldHJpY0F1dGhlbnRpY2F0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGF2YWlsYWJsZSB9ID0gYXdhaXQgdGhpcy5pc0Jpb21ldHJpY0F2YWlsYWJsZSgpO1xuICAgICAgaWYgKCFhdmFpbGFibGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcbiAgICAgICAgICBcIkJpb21ldHJpYyBhdXRoZW50aWNhdGlvbiBpcyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgZGV2aWNlXCIsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIEF1dGhlbnRpY2F0ZSB1c2VyIHdpdGggYmlvbWV0cmljcyB0byBlbmFibGUgZmVhdHVyZVxuICAgICAgY29uc3QgYmlvbWV0cmljQXV0aCA9IGF3YWl0IExvY2FsQXV0aGVudGljYXRpb24uYXV0aGVudGljYXRlQXN5bmMoe1xuICAgICAgICBwcm9tcHRNZXNzYWdlOiBcIkF1dGhlbnRpY2F0ZSB0byBlbmFibGUgYmlvbWV0cmljIGxvZ2luXCIsXG4gICAgICAgIGZhbGxiYWNrTGFiZWw6IFwiVXNlIFBJTlwiLFxuICAgICAgICBjYW5jZWxMYWJlbDogXCJDYW5jZWxcIixcbiAgICAgICAgZGlzYWJsZURldmljZUZhbGxiYWNrOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWJpb21ldHJpY0F1dGguc3VjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiQmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcmUgYmlvbWV0cmljIHByZWZlcmVuY2VcbiAgICAgIGF3YWl0IHRoaXMuc2VjdXJlU2V0SXRlbUFzeW5jKEF1dGhTZXJ2aWNlLkJJT01FVFJJQ19FTkFCTEVEX0tFWSwgXCJ0cnVlXCIpO1xuXG4gICAgICAvLyBHZXQgY3VycmVudCB1c2VyIGNyZWRlbnRpYWxzIGZvciBiaW9tZXRyaWMgc3RvcmFnZVxuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgY29uc3QgYmlvbWV0cmljQ3JlZGVudGlhbHM6IEJpb21ldHJpY0NyZWRlbnRpYWxzID0ge1xuICAgICAgICAgIGVtYWlsOiBjdXJyZW50VXNlci5lbWFpbCxcbiAgICAgICAgICBiaW9tZXRyaWNUb2tlbjogRGF0ZS5ub3coKS50b1N0cmluZygpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNiksXG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoXG4gICAgICAgICAgQXV0aFNlcnZpY2UuQklPTUVUUklDX0NSRURFTlRJQUxTX0tFWSxcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShiaW9tZXRyaWNDcmVkZW50aWFscyksXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGxvZ2dlci5pbmZvKFwiQmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGVuYWJsZWRcIik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGVuYWJsZSBiaW9tZXRyaWMgYXV0aGVudGljYXRpb25cIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJGYWlsZWQgdG8gZW5hYmxlIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvblwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGUgYmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uXG4gICAqL1xuICBhc3luYyBkaXNhYmxlQmlvbWV0cmljQXV0aGVudGljYXRpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuc2VjdXJlRGVsZXRlSXRlbUFzeW5jKEF1dGhTZXJ2aWNlLkJJT01FVFJJQ19FTkFCTEVEX0tFWSk7XG4gICAgICBhd2FpdCB0aGlzLnNlY3VyZURlbGV0ZUl0ZW1Bc3luYyhBdXRoU2VydmljZS5CSU9NRVRSSUNfQ1JFREVOVElBTFNfS0VZKTtcbiAgICAgIGxvZ2dlci5pbmZvKFwiQmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGRpc2FibGVkXCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZGlzYWJsZSBiaW9tZXRyaWMgYXV0aGVudGljYXRpb25cIiwgeyBlcnJvciB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJGYWlsZWQgdG8gZGlzYWJsZSBiaW9tZXRyaWMgYXV0aGVudGljYXRpb25cIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBiaW9tZXRyaWMgYXV0aGVudGljYXRpb24gaXMgZW5hYmxlZFxuICAgKi9cbiAgYXN5bmMgaXNCaW9tZXRyaWNFbmFibGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbmFibGVkID0gYXdhaXQgdGhpcy5zZWN1cmVHZXRJdGVtQXN5bmMoXG4gICAgICAgIEF1dGhTZXJ2aWNlLkJJT01FVFJJQ19FTkFCTEVEX0tFWSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gZW5hYmxlZCA9PT0gXCJ0cnVlXCI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjaGVjayBiaW9tZXRyaWMgc3RhdHVzXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ2luIHdpdGggYmlvbWV0cmljcyAoaWYgZW5hYmxlZClcbiAgICovXG4gIGFzeW5jIGxvZ2luV2l0aEJpb21ldHJpY3MoKTogUHJvbWlzZTxBdXRoUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaXNFbmFibGVkID0gYXdhaXQgdGhpcy5pc0Jpb21ldHJpY0VuYWJsZWQoKTtcbiAgICAgIGlmICghaXNFbmFibGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJCaW9tZXRyaWMgYXV0aGVudGljYXRpb24gaXMgbm90IGVuYWJsZWRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgYXZhaWxhYmxlIH0gPSBhd2FpdCB0aGlzLmlzQmlvbWV0cmljQXZhaWxhYmxlKCk7XG4gICAgICBpZiAoIWF2YWlsYWJsZSkge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiQmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIFBlcmZvcm0gYmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uXG4gICAgICBjb25zdCBiaW9tZXRyaWNBdXRoID0gYXdhaXQgTG9jYWxBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGVBc3luYyh7XG4gICAgICAgIHByb21wdE1lc3NhZ2U6IFwiQXV0aGVudGljYXRlIHRvIGxvZ2luXCIsXG4gICAgICAgIGZhbGxiYWNrTGFiZWw6IFwiVXNlIFBJTlwiLFxuICAgICAgICBjYW5jZWxMYWJlbDogXCJDYW5jZWxcIixcbiAgICAgICAgZGlzYWJsZURldmljZUZhbGxiYWNrOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWJpb21ldHJpY0F1dGguc3VjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiQmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHN0b3JlZCBiaW9tZXRyaWMgY3JlZGVudGlhbHNcbiAgICAgIGNvbnN0IHN0b3JlZENyZWRlbnRpYWxzID0gYXdhaXQgdGhpcy5zZWN1cmVHZXRJdGVtQXN5bmMoXG4gICAgICAgIEF1dGhTZXJ2aWNlLkJJT01FVFJJQ19DUkVERU5USUFMU19LRVksXG4gICAgICApO1xuICAgICAgaWYgKCFzdG9yZWRDcmVkZW50aWFscykge1xuICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiTm8gYmlvbWV0cmljIGNyZWRlbnRpYWxzIGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjcmVkZW50aWFscyA9IEpTT04ucGFyc2Uoc3RvcmVkQ3JlZGVudGlhbHMpIGFzIEJpb21ldHJpY0NyZWRlbnRpYWxzO1xuXG4gICAgICAvLyBQZXJmb3JtIGxvZ2luIHdpdGggc3RvcmVkIGVtYWlsIGFuZCBhIHNwZWNpYWwgYmlvbWV0cmljIGZsYWdcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnJlcXVlc3Q8QXV0aFJlc3BvbnNlPihcbiAgICAgICAgXCIvYXV0aC9iaW9tZXRyaWMtbG9naW5cIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLFxuICAgICAgICAgICAgYmlvbWV0cmljVG9rZW46IGNyZWRlbnRpYWxzLmJpb21ldHJpY1Rva2VuLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgLy8gU3RvcmUgYXV0aGVudGljYXRpb24gZGF0YSBzZWN1cmVseVxuICAgICAgYXdhaXQgdGhpcy5zdG9yZUF1dGhEYXRhKHJlc3BvbnNlKTtcblxuICAgICAgbG9nZ2VyLmluZm8oXCJVc2VyIGxvZ2dlZCBpbiB3aXRoIGJpb21ldHJpY3NcIiwge1xuICAgICAgICB1c2VySWQ6IHJlc3BvbnNlLnVzZXIuaWQsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiQmlvbWV0cmljIGxvZ2luIGZhaWxlZFwiLCB7IGVycm9yIH0pO1xuICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcbiAgICAgICAgXCJCaW9tZXRyaWMgbG9naW4gZmFpbGVkLiBQbGVhc2UgdXNlIGVtYWlsIGFuZCBwYXNzd29yZC5cIixcbiAgICAgICAgZXJyb3IsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dpbiB1c2VyIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXG4gICAqL1xuICBhc3luYyBsb2dpbihjcmVkZW50aWFsczogTG9naW5DcmVkZW50aWFscyk6IFByb21pc2U8QXV0aFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnJlcXVlc3Q8QXV0aFJlc3BvbnNlPihcIi9hdXRoL2xvZ2luXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbHMpLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0b3JlIGF1dGhlbnRpY2F0aW9uIGRhdGEgc2VjdXJlbHlcbiAgICAgIGF3YWl0IHRoaXMuc3RvcmVBdXRoRGF0YShyZXNwb25zZSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKFwiVXNlciBsb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5XCIsIHsgdXNlcklkOiByZXNwb25zZS51c2VyLmlkIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJMb2dpbiBmYWlsZWRcIiwgeyBlcnJvciwgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH0pO1xuICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcbiAgICAgICAgXCJMb2dpbiBmYWlsZWQuIFBsZWFzZSBjaGVjayB5b3VyIGNyZWRlbnRpYWxzIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgICAgIGVycm9yLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgbmV3IHVzZXIgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgcmVnaXN0ZXIoZGF0YTogUmVnaXN0ZXJEYXRhKTogUHJvbWlzZTxBdXRoUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVmFsaWRhdGUgcGFzc3dvcmQgY29uZmlybWF0aW9uXG4gICAgICBpZiAoZGF0YS5wYXNzd29yZCAhPT0gZGF0YS5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIlBhc3N3b3JkcyBkbyBub3QgbWF0Y2hcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlZ2lzdGVyRGF0YSA9IHtcbiAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICAgIHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkLFxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVxdWVzdDxBdXRoUmVzcG9uc2U+KFwiL2F1dGgvcmVnaXN0ZXJcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZWdpc3RlckRhdGEpLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0b3JlIGF1dGhlbnRpY2F0aW9uIGRhdGEgc2VjdXJlbHlcbiAgICAgIGF3YWl0IHRoaXMuc3RvcmVBdXRoRGF0YShyZXNwb25zZSk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKFwiVXNlciByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVwiLCB7IHVzZXJJZDogcmVzcG9uc2UudXNlci5pZCB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiUmVnaXN0cmF0aW9uIGZhaWxlZFwiLCB7IGVycm9yLCBlbWFpbDogZGF0YS5lbWFpbCB9KTtcbiAgICAgIHRocm93IG5ldyBBdXRoRXJyb3IoXCJSZWdpc3RyYXRpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZ291dCB1c2VyIGFuZCBjbGVhciBzdG9yZWQgZGF0YVxuICAgKi9cbiAgYXN5bmMgbG9nb3V0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCB0aGlzLmdldFJlZnJlc2hUb2tlbigpO1xuICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgICAgICAvLyBOb3RpZnkgc2VydmVyIGFib3V0IGxvZ291dCAob3B0aW9uYWwpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgYXBpLnJlcXVlc3QoXCIvYXV0aC9sb2dvdXRcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcmVmcmVzaFRva2VuIH0pLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIElnbm9yZSBzZXJ2ZXIgbG9nb3V0IGVycm9yc1xuICAgICAgICAgIGxvZ2dlci53YXJuKFwiU2VydmVyIGxvZ291dCBmYWlsZWQsIGNvbnRpbnVpbmcgd2l0aCBsb2NhbCBsb2dvdXRcIiwge1xuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgYWxsIHN0b3JlZCBhdXRoIGRhdGFcbiAgICAgIGF3YWl0IHRoaXMuY2xlYXJBdXRoRGF0YSgpO1xuICAgICAgbG9nZ2VyLmluZm8oXCJVc2VyIGxvZ2dlZCBvdXQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJMb2dvdXQgZmFpbGVkXCIsIHsgZXJyb3IgfSk7XG4gICAgICAvLyBFdmVuIGlmIGxvZ291dCBmYWlscywgY2xlYXIgbG9jYWwgZGF0YVxuICAgICAgYXdhaXQgdGhpcy5jbGVhckF1dGhEYXRhKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2ggYWNjZXNzIHRva2VuIHVzaW5nIHJlZnJlc2ggdG9rZW5cbiAgICovXG4gIGFzeW5jIHJlZnJlc2hUb2tlbigpOiBQcm9taXNlPEF1dGhSZXNwb25zZSB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gYXdhaXQgdGhpcy5nZXRSZWZyZXNoVG9rZW4oKTtcbiAgICAgIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5yZXF1ZXN0PEF1dGhSZXNwb25zZT4oXCIvYXV0aC9yZWZyZXNoXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByZWZyZXNoVG9rZW4gfSksXG4gICAgICB9KTtcblxuICAgICAgLy8gU3RvcmUgbmV3IHRva2Vuc1xuICAgICAgYXdhaXQgdGhpcy5zdG9yZUF1dGhEYXRhKHJlc3BvbnNlKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiVG9rZW4gcmVmcmVzaCBmYWlsZWRcIiwgeyBlcnJvciB9KTtcbiAgICAgIC8vIENsZWFyIGludmFsaWQgdG9rZW5zXG4gICAgICBhd2FpdCB0aGlzLmNsZWFyQXV0aERhdGEoKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHBhc3N3b3JkIHJlc2V0XG4gICAqL1xuICBhc3luYyBmb3Jnb3RQYXNzd29yZChcbiAgICBlbWFpbDogc3RyaW5nLFxuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucmVxdWVzdDx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PihcbiAgICAgICAgXCIvYXV0aC9mb3Jnb3QtcGFzc3dvcmRcIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBlbWFpbCB9KSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKFwiUGFzc3dvcmQgcmVzZXQgcmVxdWVzdGVkXCIsIHsgZW1haWwgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZvcmdvdCBwYXNzd29yZCBmYWlsZWRcIiwgeyBlcnJvciwgZW1haWwgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFxuICAgICAgICBcIkZhaWxlZCB0byBzZW5kIHBhc3N3b3JkIHJlc2V0IGVtYWlsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgICBlcnJvcixcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHBhc3N3b3JkIHdpdGggdG9rZW5cbiAgICovXG4gIGFzeW5jIHJlc2V0UGFzc3dvcmQoXG4gICAgZGF0YTogUmVzZXRQYXNzd29yZERhdGEsXG4gICk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoZGF0YS5wYXNzd29yZCAhPT0gZGF0YS5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIlBhc3N3b3JkcyBkbyBub3QgbWF0Y2hcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc2V0RGF0YSA9IHtcbiAgICAgICAgdG9rZW46IGRhdGEudG9rZW4sXG4gICAgICAgIHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnJlcXVlc3Q8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4oXG4gICAgICAgIFwiL2F1dGgvcmVzZXQtcGFzc3dvcmRcIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVzZXREYXRhKSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGxvZ2dlci5pbmZvKFwiUGFzc3dvcmQgcmVzZXQgc3VjY2Vzc2Z1bFwiKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgcmVzZXQgZmFpbGVkXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiRmFpbGVkIHRvIHJlc2V0IHBhc3N3b3JkLiBQbGVhc2UgdHJ5IGFnYWluLlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgKi9cbiAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHRoaXMuc2VjdXJlR2V0SXRlbUFzeW5jKEF1dGhTZXJ2aWNlLlVTRVJfS0VZKTtcbiAgICAgIHJldHVybiB1c2VyRGF0YSA/IChKU09OLnBhcnNlKHVzZXJEYXRhKSBhcyBVc2VyKSA6IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgY3VycmVudCB1c2VyXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0b3JlZCBhY2Nlc3MgdG9rZW5cbiAgICovXG4gIGFzeW5jIGdldEFjY2Vzc1Rva2VuKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZWN1cmVHZXRJdGVtQXN5bmMoQXV0aFNlcnZpY2UuQUNDRVNTX1RPS0VOX0tFWSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgYWNjZXNzIHRva2VuXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gICAqL1xuICBhc3luYyBpc0F1dGhlbnRpY2F0ZWQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcbiAgICAgIHJldHVybiAhISh0b2tlbiAmJiB1c2VyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiQXV0aGVudGljYXRpb24gY2hlY2sgZmFpbGVkXCIsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB1c2VyIHByb2ZpbGUgZGF0YVxuICAgKi9cbiAgYXN5bmMgdXBkYXRlVXNlcih1c2VyRGF0YTogUGFydGlhbDxVc2VyPik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhFcnJvcihcIk5vIGF1dGhlbnRpY2F0ZWQgdXNlciBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSB7IC4uLmN1cnJlbnRVc2VyLCAuLi51c2VyRGF0YSB9O1xuICAgICAgYXdhaXQgdGhpcy5zZWN1cmVTZXRJdGVtQXN5bmMoXG4gICAgICAgIEF1dGhTZXJ2aWNlLlVTRVJfS0VZLFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh1cGRhdGVkVXNlciksXG4gICAgICApO1xuICAgICAgbG9nZ2VyLmluZm8oXCJVc2VyIGRhdGEgdXBkYXRlZFwiLCB7IHVzZXJJZDogdXBkYXRlZFVzZXIuaWQgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgdXNlciBkYXRhXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIGRhdGFcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNlY3VyZSBzdG9yYWdlIG1ldGhvZHMgLSBLZXljaGFpbiBmb3Igc2Vuc2l0aXZlIGRhdGEsIFNlY3VyZVN0b3JlIGZvciBzZXNzaW9uIGRhdGFcbiAgLy8gRmFsbGJhY2sgdG8gU2VjdXJlU3RvcmUgaWYgS2V5Y2hhaW4gZmFpbHMgZm9yIHJvYnVzdG5lc3NcbiAgcHJpdmF0ZSBhc3luYyBzZWN1cmVTZXRJdGVtQXN5bmMoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXNlIEtleWNoYWluIGZvciBzZW5zaXRpdmUgYXV0aGVudGljYXRpb24gZGF0YVxuICAgICAgaWYgKGtleS5pbmNsdWRlcygndG9rZW4nKSB8fCBrZXkuaW5jbHVkZXMoJ3VzZXInKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEtleWNoYWluLnNldEdlbmVyaWNQYXNzd29yZCgncGF3ZmVjdG1hdGNoJywgdmFsdWUsIHtcbiAgICAgICAgICAgIHNlcnZpY2U6ICdwYXdmZWN0bWF0Y2gtYXV0aCcsXG4gICAgICAgICAgICBhY2Nlc3NDb250cm9sOiBLZXljaGFpbi5BQ0NFU1NfQ09OVFJPTC5CSU9NRVRSWV9BTllfT1JfREVWSUNFX1BBU1NDT0RFLFxuICAgICAgICAgICAgYWNjZXNzaWJsZTogS2V5Y2hhaW4uQUNDRVNTSUJMRS5XSEVOX1VOTE9DS0VEX1RISVNfREVWSUNFX09OTFksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHN0b3JlIGluIEtleWNoYWluJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIGtleSBpbiBTZWN1cmVTdG9yZSBmb3IgcmV0cmlldmFsXG4gICAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuc2V0SXRlbUFzeW5jKGAke2tleX1fcmVmYCwgJ2tleWNoYWluJywge1xuICAgICAgICAgICAga2V5Y2hhaW5BY2Nlc3NpYmxlOiBTZWN1cmVTdG9yZS5BRlRFUl9GSVJTVF9VTkxPQ0tfVEhJU19ERVZJQ0VfT05MWSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBTdWNjZXNzZnVsbHkgc3RvcmVkIGluIEtleWNoYWluXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGNhdGNoIChrZXljaGFpbkVycm9yKSB7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gU2VjdXJlU3RvcmUgaWYgS2V5Y2hhaW4gZmFpbHNcbiAgICAgICAgICBsb2dnZXIud2FybihgS2V5Y2hhaW4gZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gU2VjdXJlU3RvcmUgZm9yICR7a2V5fWAsIHsgZXJyb3I6IGtleWNoYWluRXJyb3IgfSk7XG4gICAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuc2V0SXRlbUFzeW5jKGtleSwgdmFsdWUsIHtcbiAgICAgICAgICAgIGtleWNoYWluQWNjZXNzaWJsZTogU2VjdXJlU3RvcmUuQUZURVJfRklSU1RfVU5MT0NLX1RISVNfREVWSUNFX09OTFksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gU3RvcmUgYSByZWZlcmVuY2UgaW5kaWNhdGluZyBmYWxsYmFjayB0byBTZWN1cmVTdG9yZVxuICAgICAgICAgIGF3YWl0IFNlY3VyZVN0b3JlLnNldEl0ZW1Bc3luYyhgJHtrZXl9X3JlZmAsICdzZWN1cmVzdG9yZScsIHtcbiAgICAgICAgICAgIGtleWNoYWluQWNjZXNzaWJsZTogU2VjdXJlU3RvcmUuQUZURVJfRklSU1RfVU5MT0NLX1RISVNfREVWSUNFX09OTFksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFVzZSBTZWN1cmVTdG9yZSBmb3IgbGVzcyBzZW5zaXRpdmUgc2Vzc2lvbiBkYXRhXG4gICAgICAgIGF3YWl0IFNlY3VyZVN0b3JlLnNldEl0ZW1Bc3luYyhrZXksIHZhbHVlLCB7XG4gICAgICAgICAga2V5Y2hhaW5BY2Nlc3NpYmxlOiBTZWN1cmVTdG9yZS5BRlRFUl9GSVJTVF9VTkxPQ0tfVEhJU19ERVZJQ0VfT05MWSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHNlY3VyZWx5IHN0b3JlICR7a2V5fWAsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKGBGYWlsZWQgdG8gc2VjdXJlbHkgc3RvcmUgYXV0aGVudGljYXRpb24gZGF0YWAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlY3VyZUdldEl0ZW1Bc3luYyhrZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiBkYXRhIGlzIHN0b3JlZCBpbiBLZXljaGFpbiBvciBTZWN1cmVTdG9yZSAoZmFsbGJhY2spXG4gICAgICBjb25zdCByZWZLZXkgPSBgJHtrZXl9X3JlZmA7XG4gICAgICBjb25zdCBzdG9yYWdlTG9jYXRpb24gPSBhd2FpdCBTZWN1cmVTdG9yZS5nZXRJdGVtQXN5bmMocmVmS2V5KTtcblxuICAgICAgaWYgKHN0b3JhZ2VMb2NhdGlvbiA9PT0gJ2tleWNoYWluJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXdhaXQgS2V5Y2hhaW4uZ2V0R2VuZXJpY1Bhc3N3b3JkKHtcbiAgICAgICAgICAgIHNlcnZpY2U6ICdwYXdmZWN0bWF0Y2gtYXV0aCcsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHBhc3N3b3JkICh3aGljaCBjb250YWlucyBvdXIgc3RvcmVkIHZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWxzLnBhc3N3b3JkO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBjYXRjaCAoa2V5Y2hhaW5FcnJvcikge1xuICAgICAgICAgIC8vIElmIEtleWNoYWluIHJldHJpZXZhbCBmYWlscywgdHJ5IFNlY3VyZVN0b3JlIGZhbGxiYWNrXG4gICAgICAgICAgbG9nZ2VyLndhcm4oYEtleWNoYWluIHJldHJpZXZhbCBmYWlsZWQsIHRyeWluZyBTZWN1cmVTdG9yZSBmYWxsYmFjayBmb3IgJHtrZXl9YCwgeyBlcnJvcjoga2V5Y2hhaW5FcnJvciB9KTtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgU2VjdXJlU3RvcmUuZ2V0SXRlbUFzeW5jKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZUxvY2F0aW9uID09PSAnc2VjdXJlc3RvcmUnKSB7XG4gICAgICAgIC8vIERhdGEgd2FzIHN0b3JlZCBpbiBTZWN1cmVTdG9yZSBkdWUgdG8gS2V5Y2hhaW4gZmFpbHVyZVxuICAgICAgICByZXR1cm4gYXdhaXQgU2VjdXJlU3RvcmUuZ2V0SXRlbUFzeW5jKGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyByZWZlcmVuY2UgZm91bmQsIHRyeSBTZWN1cmVTdG9yZSBkaXJlY3RseSAoZm9yIG5vbi1zZW5zaXRpdmUga2V5cylcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNlY3VyZVN0b3JlLmdldEl0ZW1Bc3luYyhrZXkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBzZWN1cmVseSByZXRyaWV2ZSAke2tleX1gLCB7IGVycm9yIH0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZWN1cmVEZWxldGVJdGVtQXN5bmMoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgZGF0YSBpcyBzdG9yZWQgaW4gS2V5Y2hhaW4gb3IgU2VjdXJlU3RvcmUgKGZhbGxiYWNrKVxuICAgICAgY29uc3QgcmVmS2V5ID0gYCR7a2V5fV9yZWZgO1xuICAgICAgY29uc3Qgc3RvcmFnZUxvY2F0aW9uID0gYXdhaXQgU2VjdXJlU3RvcmUuZ2V0SXRlbUFzeW5jKHJlZktleSk7XG5cbiAgICAgIGlmIChzdG9yYWdlTG9jYXRpb24gPT09ICdrZXljaGFpbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBSZXNldCBLZXljaGFpbiBjcmVkZW50aWFsc1xuICAgICAgICAgIGF3YWl0IEtleWNoYWluLnJlc2V0R2VuZXJpY1Bhc3N3b3JkKHtcbiAgICAgICAgICAgIHNlcnZpY2U6ICdwYXdmZWN0bWF0Y2gtYXV0aCcsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGtleWNoYWluRXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIud2FybihgS2V5Y2hhaW4gZGVsZXRpb24gZmFpbGVkLCBjb250aW51aW5nIHdpdGggY2xlYW51cGAsIHsgZXJyb3I6IGtleWNoYWluRXJyb3IgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VcbiAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuZGVsZXRlSXRlbUFzeW5jKHJlZktleSk7XG4gICAgICB9IGVsc2UgaWYgKHN0b3JhZ2VMb2NhdGlvbiA9PT0gJ3NlY3VyZXN0b3JlJykge1xuICAgICAgICAvLyBEYXRhIHdhcyBzdG9yZWQgaW4gU2VjdXJlU3RvcmVcbiAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuZGVsZXRlSXRlbUFzeW5jKGtleSk7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlXG4gICAgICAgIGF3YWl0IFNlY3VyZVN0b3JlLmRlbGV0ZUl0ZW1Bc3luYyhyZWZLZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVHJ5IHRvIGRlbGV0ZSBmcm9tIFNlY3VyZVN0b3JlIChmb3Igbm9uLXNlbnNpdGl2ZSBrZXlzIG9yIGNsZWFudXApXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgU2VjdXJlU3RvcmUuZGVsZXRlSXRlbUFzeW5jKGtleSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gU2lsZW50bHkgaWdub3JlIGRlbGV0aW9uIGVycm9yc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHNlY3VyZWx5IGRlbGV0ZSAke2tleX1gLCB7IGVycm9yIH0pO1xuICAgICAgLy8gRG9uJ3QgdGhyb3cgaGVyZSBhcyB0aGlzIGlzIGNsZWFudXBcbiAgICB9XG4gIH1cblxuICAvLyBQcml2YXRlIGhlbHBlciBtZXRob2RzXG5cbiAgcHJpdmF0ZSBhc3luYyBzdG9yZUF1dGhEYXRhKHJlc3BvbnNlOiBBdXRoUmVzcG9uc2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgICBBdXRoU2VydmljZS5BQ0NFU1NfVE9LRU5fS0VZLFxuICAgICAgICAgIHJlc3BvbnNlLmFjY2Vzc1Rva2VuLFxuICAgICAgICApLFxuICAgICAgICB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgICBBdXRoU2VydmljZS5SRUZSRVNIX1RPS0VOX0tFWSxcbiAgICAgICAgICByZXNwb25zZS5yZWZyZXNoVG9rZW4sXG4gICAgICAgICksXG4gICAgICAgIHRoaXMuc2VjdXJlU2V0SXRlbUFzeW5jKFxuICAgICAgICAgIEF1dGhTZXJ2aWNlLlVTRVJfS0VZLFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLnVzZXIpLFxuICAgICAgICApLFxuICAgICAgICB0aGlzLnNlY3VyZVNldEl0ZW1Bc3luYyhcbiAgICAgICAgICBBdXRoU2VydmljZS5TRVNTSU9OX1NUQVJUX0tFWSxcbiAgICAgICAgICBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICksXG4gICAgICAgIHRoaXMuc2VjdXJlU2V0SXRlbUFzeW5jKFxuICAgICAgICAgIEF1dGhTZXJ2aWNlLkxBU1RfQUNUSVZJVFlfS0VZLFxuICAgICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgKSxcbiAgICAgIF0pO1xuXG4gICAgICAvLyBTdGFydCBzZXNzaW9uIG1vbml0b3JpbmdcbiAgICAgIHRoaXMuc3RhcnRTZXNzaW9uTW9uaXRvcmluZygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gc3RvcmUgYXV0aCBkYXRhXCIsIHsgZXJyb3IgfSk7XG4gICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKFwiRmFpbGVkIHRvIHNhdmUgYXV0aGVudGljYXRpb24gZGF0YVwiLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjbGVhckF1dGhEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuc2VjdXJlRGVsZXRlSXRlbUFzeW5jKEF1dGhTZXJ2aWNlLkFDQ0VTU19UT0tFTl9LRVkpLFxuICAgICAgICB0aGlzLnNlY3VyZURlbGV0ZUl0ZW1Bc3luYyhBdXRoU2VydmljZS5SRUZSRVNIX1RPS0VOX0tFWSksXG4gICAgICAgIHRoaXMuc2VjdXJlRGVsZXRlSXRlbUFzeW5jKEF1dGhTZXJ2aWNlLlVTRVJfS0VZKSxcbiAgICAgICAgdGhpcy5zZWN1cmVEZWxldGVJdGVtQXN5bmMoQXV0aFNlcnZpY2UuU0VTU0lPTl9TVEFSVF9LRVkpLFxuICAgICAgICB0aGlzLnNlY3VyZURlbGV0ZUl0ZW1Bc3luYyhBdXRoU2VydmljZS5MQVNUX0FDVElWSVRZX0tFWSksXG4gICAgICBdKTtcblxuICAgICAgLy8gU3RvcCBzZXNzaW9uIG1vbml0b3JpbmdcbiAgICAgIHRoaXMuc3RvcFNlc3Npb25Nb25pdG9yaW5nKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjbGVhciBhdXRoIGRhdGFcIiwgeyBlcnJvciB9KTtcbiAgICAgIC8vIERvbid0IHRocm93IGhlcmUgYXMgdGhpcyBpcyBjbGVhbnVwXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRSZWZyZXNoVG9rZW4oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlY3VyZUdldEl0ZW1Bc3luYyhBdXRoU2VydmljZS5SRUZSRVNIX1RPS0VOX0tFWSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgcmVmcmVzaCB0b2tlblwiLCB7IGVycm9yIH0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbi8vIEN1c3RvbSBlcnJvciBjbGFzcyBmb3IgYXV0aGVudGljYXRpb24gZXJyb3JzXG5leHBvcnQgY2xhc3MgQXV0aEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcHVibGljIG9yaWdpbmFsRXJyb3I/OiB1bmtub3duLFxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIkF1dGhFcnJvclwiO1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBhdXRoU2VydmljZSA9IG5ldyBBdXRoU2VydmljZSgpO1xuZXhwb3J0IGRlZmF1bHQgYXV0aFNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUtBLElBQUFBLFdBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLG1CQUFBLEdBQUFGLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxRQUFBLEdBQUFILHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxJQUFBLEdBQUFKLE9BQUE7QUFBNEIsU0FBQUQsd0JBQUFNLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFSLHVCQUFBLFlBQUFBLHdCQUFBTSxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFBLE1BQUFNLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLEtBQUFDLFNBQUEsUUFBQUMsT0FBQSxFQUFBVixDQUFBLGlCQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFNBQUFRLENBQUEsTUFBQUYsQ0FBQSxHQUFBTCxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxRQUFBRyxDQUFBLENBQUFLLEdBQUEsQ0FBQVgsQ0FBQSxVQUFBTSxDQUFBLENBQUFNLEdBQUEsQ0FBQVosQ0FBQSxHQUFBTSxDQUFBLENBQUFPLEdBQUEsQ0FBQWIsQ0FBQSxFQUFBUSxDQUFBLGNBQUFNLEdBQUEsSUFBQWQsQ0FBQSxnQkFBQWMsR0FBQSxPQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWhCLENBQUEsRUFBQWMsR0FB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