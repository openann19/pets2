{"version":3,"names":["_getJestObj","mock","__esModule","default","setSpeakerphoneOn","jest","fn","setKeepScreenOn","setForceSpeakerphoneOn","start","stop","displayIncomingCall","getSpeakerphoneOn","setMicrophoneMute","turnScreenOn","turnScreenOff","setWiredHeadsetHfpOn","setBluetoothScoOn","setBluetoothScoOff","RTCPeerConnection","RTCIceCandidate","RTCSessionDescription","mediaDevices","getUserMedia","_interopRequireDefault","require","_asyncToGenerator2","_reactNativeWebrtc","_WebRTCService","_require","InCallManager","webRTCService","WebRTCService","mockSocket","on","emit","connected","mockPeerConnection","addTrack","createOffer","createAnswer","setLocalDescription","setRemoteDescription","addIceCandidate","close","onicecandidate","ontrack","onconnectionstatechange","connectionState","mockMediaStream","getTracks","getAudioTracks","getVideoTracks","describe","beforeEach","clearAllMocks","mockImplementation","mockResolvedValue","endCall","it","initialize","expect","toHaveBeenCalledWith","any","Function","mockAudioTrack","enabled","mockReturnValue","result","startCall","toBe","audio","video","toHaveBeenCalled","objectContaining","matchId","callType","media","mockVideoTrack","width","min","ideal","height","frameRate","error","Error","mockRejectedValue","mockListener","isActive","isIncoming","_mockSocket$on$mock$c","callData","callId","callerId","callerName","timestamp","Date","now","incomingCallHandler","calls","find","call","answerCall","toggleMute","toggleVideo","_switchCamera","switchCamera","toggleSpeaker","mockTrack","Object","_mockSocket$on$mock$c2","rejectCall","initialState","getCallState","toEqual","isConnected","isMuted","isVideoEnabled","callDuration","isCallActive","state","_mockSocket$on$mock$c3","mockOffer","type","sdp","offerHandler","offer","_mockSocket$on$mock$c4","mockAnswer","answerHandler","answer","_mockSocket$on$mock$c5","mockCandidate","candidate","candidateHandler"],"sources":["WebRTCService.test.ts"],"sourcesContent":["// Mock InCallManager specifically for this test - MUST be first\njest.mock(\"react-native-incall-manager\", () => ({\n  __esModule: true,\n  default: {\n    setSpeakerphoneOn: jest.fn(),\n    setKeepScreenOn: jest.fn(),\n    setForceSpeakerphoneOn: jest.fn(),\n    start: jest.fn(),\n    stop: jest.fn(),\n    displayIncomingCall: jest.fn(),\n    getSpeakerphoneOn: jest.fn(() => false),\n    setMicrophoneMute: jest.fn(),\n    turnScreenOn: jest.fn(),\n    turnScreenOff: jest.fn(),\n    setWiredHeadsetHfpOn: jest.fn(),\n    setBluetoothScoOn: jest.fn(),\n    setBluetoothScoOff: jest.fn(),\n  },\n}));\n\nimport { mediaDevices, RTCPeerConnection } from \"react-native-webrtc\";\n\n// Get the mocked InCallManager\nconst InCallManager = require(\"react-native-incall-manager\").default;\n\n// Import WebRTCService after mocks are set up\nimport WebRTCService from \"../WebRTCService\";\n\n// Use the singleton instance for testing\nconst webRTCService = WebRTCService;\n\n// Mock interfaces\ninterface MockMediaStreamTrack {\n  enabled: boolean;\n  stop?: jest.Mock;\n  _switchCamera?: jest.Mock;\n}\n\ninterface MockMediaStream {\n  getTracks: jest.Mock;\n  getAudioTracks: jest.Mock;\n  getVideoTracks: jest.Mock;\n}\n\n// Mock dependencies\njest.mock(\"react-native-webrtc\", () => ({\n  RTCPeerConnection: jest.fn(),\n  RTCIceCandidate: jest.fn(),\n  RTCSessionDescription: jest.fn(),\n  mediaDevices: {\n    getUserMedia: jest.fn(),\n  },\n}));\n\njest.mock(\"react-native-incall-manager\", () => ({\n  default: {\n    setSpeakerphoneOn: jest.fn(),\n    setKeepScreenOn: jest.fn(),\n    setForceSpeakerphoneOn: jest.fn(),\n    start: jest.fn(),\n    stop: jest.fn(),\n    displayIncomingCall: jest.fn(),\n    getSpeakerphoneOn: jest.fn(),\n  },\n}));\n\nconst mockSocket = {\n  on: jest.fn(),\n  emit: jest.fn(),\n  connected: true,\n};\n\nconst mockPeerConnection = {\n  addTrack: jest.fn(),\n  createOffer: jest.fn(),\n  createAnswer: jest.fn(),\n  setLocalDescription: jest.fn(),\n  setRemoteDescription: jest.fn(),\n  addIceCandidate: jest.fn(),\n  close: jest.fn(),\n  onicecandidate: null,\n  ontrack: null,\n  onconnectionstatechange: null,\n  connectionState: \"new\",\n};\n\nconst mockMediaStream: MockMediaStream = {\n  getTracks: jest.fn(() => []),\n  getAudioTracks: jest.fn(() => []),\n  getVideoTracks: jest.fn(() => []),\n};\n\ndescribe(\"webRTCService\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    (RTCPeerConnection as jest.Mock).mockImplementation(\n      () => mockPeerConnection,\n    );\n    (mediaDevices.getUserMedia as jest.Mock).mockResolvedValue(mockMediaStream);\n\n    // Reset service state\n    webRTCService.endCall();\n  });\n\n  describe(\"Initialization\", () => {\n    it(\"should initialize with socket\", () => {\n      webRTCService.initialize(mockSocket);\n\n      expect(mockSocket.on).toHaveBeenCalledWith(\n        \"incoming-call\",\n        expect.any(Function),\n      );\n      expect(mockSocket.on).toHaveBeenCalledWith(\n        \"call-answered\",\n        expect.any(Function),\n      );\n      expect(mockSocket.on).toHaveBeenCalledWith(\n        \"call-ended\",\n        expect.any(Function),\n      );\n      expect(mockSocket.on).toHaveBeenCalledWith(\n        \"webrtc-offer\",\n        expect.any(Function),\n      );\n      expect(mockSocket.on).toHaveBeenCalledWith(\n        \"webrtc-answer\",\n        expect.any(Function),\n      );\n      expect(mockSocket.on).toHaveBeenCalledWith(\n        \"webrtc-ice-candidate\",\n        expect.any(Function),\n      );\n    });\n\n    it(\"should setup InCallManager correctly\", () => {\n      // Initialize the service to trigger InCallManager setup\n      webRTCService.initialize(mockSocket);\n\n      expect(InCallManager.setKeepScreenOn).toHaveBeenCalledWith(true);\n      expect(InCallManager.setForceSpeakerphoneOn).toHaveBeenCalledWith(false);\n    });\n  });\n\n  describe(\"Starting Calls\", () => {\n    beforeEach(() => {\n      webRTCService.initialize(mockSocket);\n    });\n\n    it(\"should start voice call successfully\", async () => {\n      const mockAudioTrack: MockMediaStreamTrack = { enabled: true };\n      mockMediaStream.getTracks.mockReturnValue([mockAudioTrack as any]);\n\n      const result = await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      expect(result).toBe(true);\n      expect(mediaDevices.getUserMedia).toHaveBeenCalledWith({\n        audio: true,\n        video: false,\n      });\n      expect(RTCPeerConnection).toHaveBeenCalled();\n      expect(mockSocket.emit).toHaveBeenCalledWith(\n        \"initiate-call\",\n        expect.objectContaining({\n          matchId: \"test-match-id\",\n          callType: \"voice\",\n        }),\n      );\n      expect(InCallManager.start).toHaveBeenCalledWith({ media: \"audio\" });\n    });\n\n    it(\"should start video call successfully\", async () => {\n      const mockVideoTrack: MockMediaStreamTrack = { enabled: true };\n      const mockAudioTrack: MockMediaStreamTrack = { enabled: true };\n      mockMediaStream.getTracks.mockReturnValue([\n        mockAudioTrack as any,\n        mockVideoTrack as any,\n      ]);\n\n      const result = await webRTCService.startCall(\"test-match-id\", \"video\");\n\n      expect(result).toBe(true);\n      expect(mediaDevices.getUserMedia).toHaveBeenCalledWith({\n        audio: true,\n        video: {\n          width: { min: 640, ideal: 1280 },\n          height: { min: 480, ideal: 720 },\n          frameRate: { min: 16, ideal: 30 },\n        },\n      });\n      expect(InCallManager.start).toHaveBeenCalledWith({ media: \"video\" });\n    });\n\n    it(\"should handle getUserMedia failure\", async () => {\n      const error = new Error(\"Permission denied\");\n      (mediaDevices.getUserMedia as jest.Mock).mockRejectedValue(error);\n\n      const result = await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      expect(result).toBe(false);\n    });\n\n    it(\"should emit call state changes\", async () => {\n      const mockListener = jest.fn();\n      webRTCService.on(\"callStateChanged\", mockListener);\n\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      expect(mockListener).toHaveBeenCalledWith(\n        expect.objectContaining({\n          isActive: true,\n          isIncoming: false,\n        }),\n      );\n    });\n  });\n\n  describe(\"Answering Calls\", () => {\n    beforeEach(() => {\n      webRTCService.initialize(mockSocket);\n    });\n\n    it(\"should answer incoming call successfully\", async () => {\n      // Simulate incoming call\n      const callData = {\n        callId: \"test-call-id\",\n        matchId: \"test-match-id\",\n        callerId: \"test-caller-id\",\n        callerName: \"Test Caller\",\n        callType: \"voice\" as const,\n        timestamp: Date.now(),\n      };\n\n      // Set up incoming call state\n      const incomingCallHandler = mockSocket.on.mock.calls.find(\n        (call) => call[0] === \"incoming-call\",\n      )?.[1];\n\n      if (incomingCallHandler) {\n        incomingCallHandler(callData);\n      }\n\n      const result = await webRTCService.answerCall();\n\n      expect(result).toBe(true);\n      expect(mockSocket.emit).toHaveBeenCalledWith(\n        \"answer-call\",\n        expect.objectContaining({\n          matchId: \"test-match-id\",\n        }),\n      );\n      expect(InCallManager.start).toHaveBeenCalled();\n    });\n\n    it(\"should handle answer call without call data\", async () => {\n      const result = await webRTCService.answerCall();\n\n      expect(result).toBe(false);\n    });\n  });\n\n  describe(\"Call Controls\", () => {\n    beforeEach(() => {\n      webRTCService.initialize(mockSocket);\n    });\n\n    it(\"should toggle mute\", async () => {\n      const mockAudioTrack: MockMediaStreamTrack = { enabled: true };\n      mockMediaStream.getAudioTracks.mockReturnValue([mockAudioTrack as any]);\n\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      webRTCService.toggleMute();\n\n      expect(mockAudioTrack.enabled).toBe(false);\n    });\n\n    it(\"should toggle video\", async () => {\n      const mockVideoTrack: MockMediaStreamTrack = { enabled: true };\n      mockMediaStream.getVideoTracks.mockReturnValue([mockVideoTrack as any]);\n\n      await webRTCService.startCall(\"test-match-id\", \"video\");\n\n      webRTCService.toggleVideo();\n\n      expect(mockVideoTrack.enabled).toBe(false);\n    });\n\n    it(\"should switch camera\", async () => {\n      const mockVideoTrack: MockMediaStreamTrack = {\n        enabled: true,\n        _switchCamera: jest.fn(),\n      };\n      mockMediaStream.getVideoTracks.mockReturnValue([mockVideoTrack as any]);\n\n      await webRTCService.startCall(\"test-match-id\", \"video\");\n\n      await webRTCService.switchCamera();\n\n      expect(mockVideoTrack._switchCamera).toHaveBeenCalled();\n    });\n\n    it(\"should toggle speaker\", () => {\n      webRTCService.toggleSpeaker();\n\n      expect(InCallManager.setForceSpeakerphoneOn).toHaveBeenCalledWith(true);\n    });\n  });\n\n  describe(\"Ending Calls\", () => {\n    beforeEach(() => {\n      webRTCService.initialize(mockSocket);\n    });\n\n    it(\"should end call and clean up resources\", async () => {\n      const mockTrack: MockMediaStreamTrack = {\n        enabled: true,\n        stop: jest.fn(),\n      };\n      mockMediaStream.getTracks.mockReturnValue([mockTrack as any]);\n\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      webRTCService.endCall();\n\n      expect(mockPeerConnection.close).toHaveBeenCalled();\n      expect(mockTrack.stop).toHaveBeenCalled();\n      expect(InCallManager.stop).toHaveBeenCalled();\n      expect(mockSocket.emit).toHaveBeenCalledWith(\n        \"end-call\",\n        expect.any(Object),\n      );\n    });\n\n    it(\"should reject incoming call\", () => {\n      const callData = {\n        callId: \"test-call-id\",\n        matchId: \"test-match-id\",\n        callerId: \"test-caller-id\",\n        callerName: \"Test Caller\",\n        callType: \"voice\" as const,\n        timestamp: Date.now(),\n      };\n\n      // Simulate incoming call\n      const incomingCallHandler = mockSocket.on.mock.calls.find(\n        (call) => call[0] === \"incoming-call\",\n      )?.[1];\n\n      if (incomingCallHandler) {\n        incomingCallHandler(callData);\n      }\n\n      webRTCService.rejectCall();\n\n      expect(mockSocket.emit).toHaveBeenCalledWith(\n        \"reject-call\",\n        expect.objectContaining({\n          callId: \"test-call-id\",\n          matchId: \"test-match-id\",\n        }),\n      );\n    });\n  });\n\n  describe(\"Call State Management\", () => {\n    it(\"should return correct call state\", () => {\n      const initialState = webRTCService.getCallState();\n\n      expect(initialState).toEqual({\n        isActive: false,\n        isConnected: false,\n        isIncoming: false,\n        isMuted: false,\n        isVideoEnabled: true,\n        callDuration: 0,\n      });\n    });\n\n    it(\"should return correct call active status\", () => {\n      expect(webRTCService.isCallActive()).toBe(false);\n    });\n\n    it(\"should update call state during call\", async () => {\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      expect(webRTCService.isCallActive()).toBe(true);\n\n      const state = webRTCService.getCallState();\n      expect(state.isActive).toBe(true);\n      expect(state.isIncoming).toBe(false);\n    });\n  });\n\n  describe(\"WebRTC Signaling\", () => {\n    beforeEach(() => {\n      webRTCService.initialize(mockSocket);\n    });\n\n    it(\"should handle WebRTC offer\", async () => {\n      const mockOffer = { type: \"offer\", sdp: \"mock-sdp\" };\n      mockPeerConnection.createAnswer.mockResolvedValue(mockOffer);\n\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      const offerHandler = mockSocket.on.mock.calls.find(\n        (call) => call[0] === \"webrtc-offer\",\n      )?.[1];\n\n      if (offerHandler) {\n        await offerHandler({ offer: mockOffer });\n      }\n\n      expect(mockPeerConnection.setRemoteDescription).toHaveBeenCalled();\n      expect(mockPeerConnection.createAnswer).toHaveBeenCalled();\n      expect(mockSocket.emit).toHaveBeenCalledWith(\n        \"webrtc-answer\",\n        expect.any(Object),\n      );\n    });\n\n    it(\"should handle WebRTC answer\", async () => {\n      const mockAnswer = { type: \"answer\", sdp: \"mock-sdp\" };\n\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      const answerHandler = mockSocket.on.mock.calls.find(\n        (call) => call[0] === \"webrtc-answer\",\n      )?.[1];\n\n      if (answerHandler) {\n        await answerHandler({ answer: mockAnswer });\n      }\n\n      expect(mockPeerConnection.setRemoteDescription).toHaveBeenCalled();\n    });\n\n    it(\"should handle ICE candidates\", async () => {\n      const mockCandidate = { candidate: \"mock-candidate\" };\n\n      await webRTCService.startCall(\"test-match-id\", \"voice\");\n\n      const candidateHandler = mockSocket.on.mock.calls.find(\n        (call) => call[0] === \"webrtc-ice-candidate\",\n      )?.[1];\n\n      if (candidateHandler) {\n        await candidateHandler({ candidate: mockCandidate });\n      }\n\n      expect(mockPeerConnection.addIceCandidate).toHaveBeenCalled();\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}