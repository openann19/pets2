2a7df15049749f1ad77b047cc5b343cb
"use strict";

_getJestObj().mock('@react-native-async-storage/async-storage');
_getJestObj().mock('@react-native-community/netinfo');
_getJestObj().mock("../api", function () {
  return {
    api: {
      getPets: _globals.jest.fn(),
      getMatches: _globals.jest.fn(),
      getMessages: _globals.jest.fn(),
      sendMessage: _globals.jest.fn(),
      updateUserProfile: _globals.jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _globals = require("@jest/globals");
var _offlineService = require("../offlineService");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _netinfo = _interopRequireDefault(require("@react-native-community/netinfo"));
var _api = require("../api");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var mockAsyncStorage = _asyncStorage.default;
var mockNetInfo = _netinfo.default;
var mockApi = _api.api;
(0, _globals.describe)('OfflineService - Core Tests', function () {
  (0, _globals.beforeEach)(function () {
    _globals.jest.clearAllMocks();
    mockAsyncStorage.getItem.mockResolvedValue(null);
    mockAsyncStorage.setItem.mockResolvedValue(undefined);
    mockAsyncStorage.removeItem.mockResolvedValue(undefined);
    mockAsyncStorage.getAllKeys.mockResolvedValue(['offline_data', 'other_key']);
    mockNetInfo.fetch.mockResolvedValue({
      isConnected: true,
      type: 'wifi',
      isInternetReachable: true
    });
    mockApi.getPets.mockResolvedValue([]);
    mockApi.getMatches.mockResolvedValue([]);
    mockApi.getMessages.mockResolvedValue([]);
    mockApi.sendMessage.mockResolvedValue(undefined);
    mockApi.updateUserProfile.mockResolvedValue(undefined);
  });
  (0, _globals.afterEach)(function () {
    _offlineService.offlineService.cleanup();
  });
  (0, _globals.describe)('Initialization', function () {
    (0, _globals.it)('should initialize with default offline data', function () {
      var offlineData = _offlineService.offlineService.offlineData;
      (0, _globals.expect)(offlineData.pets).toEqual([]);
      (0, _globals.expect)(offlineData.user).toBeNull();
      (0, _globals.expect)(offlineData.matches).toEqual([]);
      (0, _globals.expect)(offlineData.messages).toEqual([]);
      (0, _globals.expect)(offlineData.pendingActions).toEqual([]);
      (0, _globals.expect)(typeof offlineData.lastSync).toBe('string');
    });
    (0, _globals.it)('should load offline data from storage', (0, _asyncToGenerator2.default)(function* () {
      var storedData = {
        pets: [{
          id: 'pet1',
          name: 'Buddy'
        }],
        user: {
          id: 'user1',
          name: 'John'
        },
        matches: [{
          id: 'match1'
        }],
        messages: [{
          id: 'msg1'
        }],
        lastSync: '2024-01-01T00:00:00Z',
        pendingActions: [{
          id: 'action1',
          type: 'swipe',
          data: {},
          timestamp: '2024-01-01T00:00:00Z',
          retryCount: 0
        }]
      };
      mockAsyncStorage.getItem.mockResolvedValue(JSON.stringify(storedData));
      var newService = new _offlineService.OfflineService();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 10);
      });
      var offlineData = newService.offlineData;
      (0, _globals.expect)(offlineData.pets).toEqual(storedData.pets);
      (0, _globals.expect)(offlineData.user).toEqual(storedData.user);
      (0, _globals.expect)(offlineData.pendingActions).toEqual(storedData.pendingActions);
    }));
  });
  (0, _globals.describe)('Data Management', function () {
    (0, _globals.it)('should retrieve pets from offline storage', (0, _asyncToGenerator2.default)(function* () {
      var pets = [{
        id: 'pet1',
        name: 'Buddy'
      }];
      _offlineService.offlineService.offlineData.pets = pets;
      var result = yield _offlineService.offlineService.getPets();
      (0, _globals.expect)(result).toEqual(pets);
    }));
    (0, _globals.it)('should retrieve user from offline storage', (0, _asyncToGenerator2.default)(function* () {
      var user = {
        id: 'user1',
        name: 'John'
      };
      _offlineService.offlineService.offlineData.user = user;
      var result = _offlineService.offlineService.getUser();
      (0, _globals.expect)(result).toEqual(user);
    }));
    (0, _globals.it)('should fetch pets online when available', (0, _asyncToGenerator2.default)(function* () {
      var onlinePets = [{
        id: 'pet2',
        name: 'Luna'
      }];
      mockApi.getPets.mockResolvedValue(onlinePets);
      var result = yield _offlineService.offlineService.getPets();
      (0, _globals.expect)(result).toEqual(onlinePets);
      (0, _globals.expect)(mockApi.getPets).toHaveBeenCalled();
      (0, _globals.expect)(mockAsyncStorage.setItem).toHaveBeenCalled();
    }));
    (0, _globals.it)('should fetch user online when available', (0, _asyncToGenerator2.default)(function* () {
      var offlineUser = {
        id: 'user1',
        name: 'John'
      };
      _offlineService.offlineService.offlineData.user = offlineUser;
      var result = _offlineService.offlineService.getUser();
      (0, _globals.expect)(result).toEqual(offlineUser);
    }));
  });
  (0, _globals.describe)('Pending Actions', function () {
    (0, _globals.it)('should add pending actions', function () {
      _offlineService.offlineService.addPendingAction('swipe', {
        petId: 'pet1',
        direction: 'like'
      });
      var offlineData = _offlineService.offlineService.offlineData;
      (0, _globals.expect)(offlineData.pendingActions).toHaveLength(1);
      (0, _globals.expect)(offlineData.pendingActions[0].type).toBe('swipe');
      (0, _globals.expect)(offlineData.pendingActions[0].data).toEqual({
        petId: 'pet1',
        direction: 'like'
      });
    });
    (0, _globals.it)('should retrieve pending actions count', function () {
      _offlineService.offlineService.addPendingAction('swipe', {
        petId: 'pet1',
        direction: 'like'
      });
      _offlineService.offlineService.addPendingAction('message', {
        matchId: 'match1',
        text: 'Hi!'
      });
      var status = _offlineService.offlineService.getSyncStatus();
      (0, _globals.expect)(status.pendingActionsCount).toBe(2);
    });
    (0, _globals.it)('should add swipe action offline', function () {
      _offlineService.offlineService.swipePet('pet1', 'like');
      var offlineData = _offlineService.offlineService.offlineData;
      (0, _globals.expect)(offlineData.pendingActions).toHaveLength(1);
      (0, _globals.expect)(offlineData.pendingActions[0].type).toBe('swipe');
      (0, _globals.expect)(offlineData.pendingActions[0].data).toEqual({
        petId: 'pet1',
        direction: 'like'
      });
    });
  });
  (0, _globals.describe)('Network Monitoring', function () {
    (0, _globals.it)('should report online status when connected', (0, _asyncToGenerator2.default)(function* () {
      var status = _offlineService.offlineService.getSyncStatus();
      (0, _globals.expect)(status.isOnline).toBe(true);
    }));
  });
  (0, _globals.describe)('Sync Status', function () {
    (0, _globals.it)('should provide comprehensive sync status', (0, _asyncToGenerator2.default)(function* () {
      _offlineService.offlineService.addPendingAction('swipe', {
        petId: 'pet1'
      });
      _offlineService.offlineService.isSyncing = false;
      _offlineService.offlineService.offlineData.lastSync = '2024-01-01T00:00:00Z';
      var status = _offlineService.offlineService.getSyncStatus();
      (0, _globals.expect)(status.isOnline).toBe(true);
      (0, _globals.expect)(status.isSyncing).toBe(false);
      (0, _globals.expect)(status.pendingActionsCount).toBe(1);
      (0, _globals.expect)(status.lastSyncTime).toBe('2024-01-01T00:00:00Z');
    }));
  });
  (0, _globals.describe)('Data Persistence', function () {
    (0, _globals.it)('should clear offline data', (0, _asyncToGenerator2.default)(function* () {
      _offlineService.offlineService.offlineData.pets = [{
        id: 'pet1'
      }];
      _offlineService.offlineService.offlineData.user = {
        id: 'user1'
      };
      _offlineService.offlineService.addPendingAction('swipe', {
        petId: 'pet1'
      });
      yield _offlineService.offlineService.clearOfflineData();
      var offlineData = _offlineService.offlineService.offlineData;
      (0, _globals.expect)(offlineData.pets).toEqual([]);
      (0, _globals.expect)(offlineData.user).toBeNull();
      (0, _globals.expect)(offlineData.pendingActions).toEqual([]);
    }));
    (0, _globals.it)('should get storage size', (0, _asyncToGenerator2.default)(function* () {
      mockAsyncStorage.getAllKeys.mockResolvedValue(['offline_data', 'other_key']);
      mockAsyncStorage.getItem.mockImplementation(function (key) {
        if (key === 'offline_data') return Promise.resolve('{"pets":[]}');
        if (key === 'other_key') return Promise.resolve('test_data');
        return Promise.resolve(null);
      });
      var size = yield _offlineService.offlineService.getStorageSize();
      (0, _globals.expect)(size).toBeGreaterThan(0);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhcGkiLCJnZXRQZXRzIiwiamVzdCIsImZuIiwiZ2V0TWF0Y2hlcyIsImdldE1lc3NhZ2VzIiwic2VuZE1lc3NhZ2UiLCJ1cGRhdGVVc2VyUHJvZmlsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2dsb2JhbHMiLCJfb2ZmbGluZVNlcnZpY2UiLCJfYXN5bmNTdG9yYWdlIiwiX25ldGluZm8iLCJfYXBpIiwiX3JlcXVpcmUiLCJtb2NrQXN5bmNTdG9yYWdlIiwiQXN5bmNTdG9yYWdlIiwibW9ja05ldEluZm8iLCJOZXRJbmZvIiwibW9ja0FwaSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJnZXRJdGVtIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJzZXRJdGVtIiwidW5kZWZpbmVkIiwicmVtb3ZlSXRlbSIsImdldEFsbEtleXMiLCJmZXRjaCIsImlzQ29ubmVjdGVkIiwidHlwZSIsImlzSW50ZXJuZXRSZWFjaGFibGUiLCJhZnRlckVhY2giLCJvZmZsaW5lU2VydmljZSIsImNsZWFudXAiLCJpdCIsIm9mZmxpbmVEYXRhIiwiZXhwZWN0IiwicGV0cyIsInRvRXF1YWwiLCJ1c2VyIiwidG9CZU51bGwiLCJtYXRjaGVzIiwibWVzc2FnZXMiLCJwZW5kaW5nQWN0aW9ucyIsImxhc3RTeW5jIiwidG9CZSIsImRlZmF1bHQiLCJzdG9yZWREYXRhIiwiaWQiLCJuYW1lIiwiZGF0YSIsInRpbWVzdGFtcCIsInJldHJ5Q291bnQiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3U2VydmljZSIsIk9mZmxpbmVTZXJ2aWNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVzdWx0IiwiZ2V0VXNlciIsIm9ubGluZVBldHMiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwib2ZmbGluZVVzZXIiLCJhZGRQZW5kaW5nQWN0aW9uIiwicGV0SWQiLCJkaXJlY3Rpb24iLCJ0b0hhdmVMZW5ndGgiLCJtYXRjaElkIiwidGV4dCIsInN0YXR1cyIsImdldFN5bmNTdGF0dXMiLCJwZW5kaW5nQWN0aW9uc0NvdW50Iiwic3dpcGVQZXQiLCJpc09ubGluZSIsImlzU3luY2luZyIsImxhc3RTeW5jVGltZSIsImNsZWFyT2ZmbGluZURhdGEiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJrZXkiLCJzaXplIiwiZ2V0U3RvcmFnZVNpemUiLCJ0b0JlR3JlYXRlclRoYW4iXSwic291cmNlcyI6WyJvZmZsaW5lU2VydmljZS5zaW1wbGUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpbXBsaWZpZWQgT2ZmbGluZVNlcnZpY2UgVGVzdHMgLSBDb3JlIGZ1bmN0aW9uYWxpdHlcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgamVzdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBvZmZsaW5lU2VydmljZSwgT2ZmbGluZVNlcnZpY2UgfSBmcm9tICcuLi9vZmZsaW5lU2VydmljZSc7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJ0ByZWFjdC1uYXRpdmUtYXN5bmMtc3RvcmFnZS9hc3luYy1zdG9yYWdlJyk7XG5qZXN0Lm1vY2soJ0ByZWFjdC1uYXRpdmUtY29tbXVuaXR5L25ldGluZm8nKTtcbmplc3QubW9jaygnLi4vYXBpJywgKCkgPT4gKHtcbiAgYXBpOiB7XG4gICAgZ2V0UGV0czogamVzdC5mbigpLFxuICAgIGdldE1hdGNoZXM6IGplc3QuZm4oKSxcbiAgICBnZXRNZXNzYWdlczogamVzdC5mbigpLFxuICAgIHNlbmRNZXNzYWdlOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlVXNlclByb2ZpbGU6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuaW1wb3J0IEFzeW5jU3RvcmFnZSBmcm9tICdAcmVhY3QtbmF0aXZlLWFzeW5jLXN0b3JhZ2UvYXN5bmMtc3RvcmFnZSc7XG5pbXBvcnQgTmV0SW5mbyBmcm9tICdAcmVhY3QtbmF0aXZlLWNvbW11bml0eS9uZXRpbmZvJztcbmltcG9ydCB7IGFwaSB9IGZyb20gJy4uL2FwaSc7XG5cbmNvbnN0IG1vY2tBc3luY1N0b3JhZ2UgPSBBc3luY1N0b3JhZ2UgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIEFzeW5jU3RvcmFnZT47XG5jb25zdCBtb2NrTmV0SW5mbyA9IE5ldEluZm8gYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIE5ldEluZm8+O1xuY29uc3QgbW9ja0FwaSA9IGFwaSBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgYXBpPjtcblxuZGVzY3JpYmUoJ09mZmxpbmVTZXJ2aWNlIC0gQ29yZSBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICAvLyBTZXR1cCBkZWZhdWx0IG1vY2tzXG4gICAgbW9ja0FzeW5jU3RvcmFnZS5nZXRJdGVtLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgIG1vY2tBc3luY1N0b3JhZ2Uuc2V0SXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgIG1vY2tBc3luY1N0b3JhZ2UucmVtb3ZlSXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgIG1vY2tBc3luY1N0b3JhZ2UuZ2V0QWxsS2V5cy5tb2NrUmVzb2x2ZWRWYWx1ZShbJ29mZmxpbmVfZGF0YScsICdvdGhlcl9rZXknXSk7XG5cbiAgICBtb2NrTmV0SW5mby5mZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBpc0Nvbm5lY3RlZDogdHJ1ZSxcbiAgICAgIHR5cGU6ICd3aWZpJyxcbiAgICAgIGlzSW50ZXJuZXRSZWFjaGFibGU6IHRydWUsXG4gICAgfSBhcyBhbnkpO1xuXG4gICAgLy8gTW9jayBzdWNjZXNzZnVsIEFQSSBjYWxsc1xuICAgIG1vY2tBcGkuZ2V0UGV0cy5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG4gICAgbW9ja0FwaS5nZXRNYXRjaGVzLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcbiAgICBtb2NrQXBpLmdldE1lc3NhZ2VzLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcbiAgICBtb2NrQXBpLnNlbmRNZXNzYWdlLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgbW9ja0FwaS51cGRhdGVVc2VyUHJvZmlsZS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIC8vIENsZWFuIHVwIHNpbmdsZXRvblxuICAgIG9mZmxpbmVTZXJ2aWNlLmNsZWFudXAoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0luaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgb2ZmbGluZSBkYXRhJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2ZmbGluZURhdGEgPSAob2ZmbGluZVNlcnZpY2UgYXMgYW55KS5vZmZsaW5lRGF0YTtcblxuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnBldHMpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnVzZXIpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3Qob2ZmbGluZURhdGEubWF0Y2hlcykudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3Qob2ZmbGluZURhdGEubWVzc2FnZXMpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnBlbmRpbmdBY3Rpb25zKS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygb2ZmbGluZURhdGEubGFzdFN5bmMpLnRvQmUoJ3N0cmluZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2FkIG9mZmxpbmUgZGF0YSBmcm9tIHN0b3JhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdG9yZWREYXRhID0ge1xuICAgICAgICBwZXRzOiBbeyBpZDogJ3BldDEnLCBuYW1lOiAnQnVkZHknIH1dLFxuICAgICAgICB1c2VyOiB7IGlkOiAndXNlcjEnLCBuYW1lOiAnSm9obicgfSxcbiAgICAgICAgbWF0Y2hlczogW3sgaWQ6ICdtYXRjaDEnIH1dLFxuICAgICAgICBtZXNzYWdlczogW3sgaWQ6ICdtc2cxJyB9XSxcbiAgICAgICAgbGFzdFN5bmM6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgIHBlbmRpbmdBY3Rpb25zOiBbe1xuICAgICAgICAgIGlkOiAnYWN0aW9uMScsXG4gICAgICAgICAgdHlwZTogJ3N3aXBlJyBhcyBjb25zdCxcbiAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICB0aW1lc3RhbXA6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicsXG4gICAgICAgICAgcmV0cnlDb3VudDogMFxuICAgICAgICB9XSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrUmVzb2x2ZWRWYWx1ZShKU09OLnN0cmluZ2lmeShzdG9yZWREYXRhKSk7XG5cbiAgICAgIC8vIENyZWF0ZSBuZXcgaW5zdGFuY2UgdG8gdGVzdCBsb2FkaW5nXG4gICAgICBjb25zdCBuZXdTZXJ2aWNlID0gbmV3IE9mZmxpbmVTZXJ2aWNlKCk7XG4gICAgICAvLyBXYWl0IGZvciBpbml0aWFsaXphdGlvblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG5cbiAgICAgIGNvbnN0IG9mZmxpbmVEYXRhID0gKG5ld1NlcnZpY2UgYXMgYW55KS5vZmZsaW5lRGF0YTtcbiAgICAgIGV4cGVjdChvZmZsaW5lRGF0YS5wZXRzKS50b0VxdWFsKHN0b3JlZERhdGEucGV0cyk7XG4gICAgICBleHBlY3Qob2ZmbGluZURhdGEudXNlcikudG9FcXVhbChzdG9yZWREYXRhLnVzZXIpO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnBlbmRpbmdBY3Rpb25zKS50b0VxdWFsKHN0b3JlZERhdGEucGVuZGluZ0FjdGlvbnMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGF0YSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcGV0cyBmcm9tIG9mZmxpbmUgc3RvcmFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBldHMgPSBbeyBpZDogJ3BldDEnLCBuYW1lOiAnQnVkZHknIH1dO1xuICAgICAgKG9mZmxpbmVTZXJ2aWNlIGFzIGFueSkub2ZmbGluZURhdGEucGV0cyA9IHBldHM7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9mZmxpbmVTZXJ2aWNlLmdldFBldHMoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwocGV0cyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIHVzZXIgZnJvbSBvZmZsaW5lIHN0b3JhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0geyBpZDogJ3VzZXIxJywgbmFtZTogJ0pvaG4nIH07XG4gICAgICAob2ZmbGluZVNlcnZpY2UgYXMgYW55KS5vZmZsaW5lRGF0YS51c2VyID0gdXNlcjtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gb2ZmbGluZVNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh1c2VyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmV0Y2ggcGV0cyBvbmxpbmUgd2hlbiBhdmFpbGFibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvbmxpbmVQZXRzID0gW3sgaWQ6ICdwZXQyJywgbmFtZTogJ0x1bmEnIH1dO1xuICAgICAgbW9ja0FwaS5nZXRQZXRzLm1vY2tSZXNvbHZlZFZhbHVlKG9ubGluZVBldHMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lU2VydmljZS5nZXRQZXRzKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwob25saW5lUGV0cyk7XG4gICAgICBleHBlY3QobW9ja0FwaS5nZXRQZXRzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0FzeW5jU3RvcmFnZS5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZldGNoIHVzZXIgb25saW5lIHdoZW4gYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTm90ZTogZ2V0VXNlciBjdXJyZW50bHkgZG9lc24ndCBmZXRjaCBvbmxpbmUgZHVlIHRvIGNvbW1lbnRlZCBjb2RlXG4gICAgICBjb25zdCBvZmZsaW5lVXNlciA9IHsgaWQ6ICd1c2VyMScsIG5hbWU6ICdKb2huJyB9O1xuICAgICAgKG9mZmxpbmVTZXJ2aWNlIGFzIGFueSkub2ZmbGluZURhdGEudXNlciA9IG9mZmxpbmVVc2VyO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBvZmZsaW5lU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG9mZmxpbmVVc2VyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlbmRpbmcgQWN0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFkZCBwZW5kaW5nIGFjdGlvbnMnLCAoKSA9PiB7XG4gICAgICBvZmZsaW5lU2VydmljZS5hZGRQZW5kaW5nQWN0aW9uKCdzd2lwZScsIHsgcGV0SWQ6ICdwZXQxJywgZGlyZWN0aW9uOiAnbGlrZScgfSk7XG5cbiAgICAgIGNvbnN0IG9mZmxpbmVEYXRhID0gKG9mZmxpbmVTZXJ2aWNlIGFzIGFueSkub2ZmbGluZURhdGE7XG4gICAgICBleHBlY3Qob2ZmbGluZURhdGEucGVuZGluZ0FjdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChvZmZsaW5lRGF0YS5wZW5kaW5nQWN0aW9uc1swXS50eXBlKS50b0JlKCdzd2lwZScpO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnBlbmRpbmdBY3Rpb25zWzBdLmRhdGEpLnRvRXF1YWwoeyBwZXRJZDogJ3BldDEnLCBkaXJlY3Rpb246ICdsaWtlJyB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcGVuZGluZyBhY3Rpb25zIGNvdW50JywgKCkgPT4ge1xuICAgICAgb2ZmbGluZVNlcnZpY2UuYWRkUGVuZGluZ0FjdGlvbignc3dpcGUnLCB7IHBldElkOiAncGV0MScsIGRpcmVjdGlvbjogJ2xpa2UnIH0pO1xuICAgICAgb2ZmbGluZVNlcnZpY2UuYWRkUGVuZGluZ0FjdGlvbignbWVzc2FnZScsIHsgbWF0Y2hJZDogJ21hdGNoMScsIHRleHQ6ICdIaSEnIH0pO1xuXG4gICAgICBjb25zdCBzdGF0dXMgPSBvZmZsaW5lU2VydmljZS5nZXRTeW5jU3RhdHVzKCk7XG4gICAgICBleHBlY3Qoc3RhdHVzLnBlbmRpbmdBY3Rpb25zQ291bnQpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFkZCBzd2lwZSBhY3Rpb24gb2ZmbGluZScsICgpID0+IHtcbiAgICAgIG9mZmxpbmVTZXJ2aWNlLnN3aXBlUGV0KCdwZXQxJywgJ2xpa2UnKTtcblxuICAgICAgY29uc3Qgb2ZmbGluZURhdGEgPSAob2ZmbGluZVNlcnZpY2UgYXMgYW55KS5vZmZsaW5lRGF0YTtcbiAgICAgIGV4cGVjdChvZmZsaW5lRGF0YS5wZW5kaW5nQWN0aW9ucykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnBlbmRpbmdBY3Rpb25zWzBdLnR5cGUpLnRvQmUoJ3N3aXBlJyk7XG4gICAgICBleHBlY3Qob2ZmbGluZURhdGEucGVuZGluZ0FjdGlvbnNbMF0uZGF0YSkudG9FcXVhbCh7IHBldElkOiAncGV0MScsIGRpcmVjdGlvbjogJ2xpa2UnIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTmV0d29yayBNb25pdG9yaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVwb3J0IG9ubGluZSBzdGF0dXMgd2hlbiBjb25uZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0dXMgPSBvZmZsaW5lU2VydmljZS5nZXRTeW5jU3RhdHVzKCk7XG4gICAgICBleHBlY3Qoc3RhdHVzLmlzT25saW5lKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3luYyBTdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGNvbXByZWhlbnNpdmUgc3luYyBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBZGQgc29tZSBkYXRhXG4gICAgICBvZmZsaW5lU2VydmljZS5hZGRQZW5kaW5nQWN0aW9uKCdzd2lwZScsIHsgcGV0SWQ6ICdwZXQxJyB9KTtcbiAgICAgIChvZmZsaW5lU2VydmljZSBhcyBhbnkpLmlzU3luY2luZyA9IGZhbHNlO1xuICAgICAgKG9mZmxpbmVTZXJ2aWNlIGFzIGFueSkub2ZmbGluZURhdGEubGFzdFN5bmMgPSAnMjAyNC0wMS0wMVQwMDowMDowMFonO1xuXG4gICAgICBjb25zdCBzdGF0dXMgPSBvZmZsaW5lU2VydmljZS5nZXRTeW5jU3RhdHVzKCk7XG5cbiAgICAgIGV4cGVjdChzdGF0dXMuaXNPbmxpbmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc3RhdHVzLmlzU3luY2luZykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3Qoc3RhdHVzLnBlbmRpbmdBY3Rpb25zQ291bnQpLnRvQmUoMSk7XG4gICAgICBleHBlY3Qoc3RhdHVzLmxhc3RTeW5jVGltZSkudG9CZSgnMjAyNC0wMS0wMVQwMDowMDowMFonKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhdGEgUGVyc2lzdGVuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjbGVhciBvZmZsaW5lIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBZGQgc29tZSBkYXRhIGZpcnN0XG4gICAgICAob2ZmbGluZVNlcnZpY2UgYXMgYW55KS5vZmZsaW5lRGF0YS5wZXRzID0gW3sgaWQ6ICdwZXQxJyB9XTtcbiAgICAgIChvZmZsaW5lU2VydmljZSBhcyBhbnkpLm9mZmxpbmVEYXRhLnVzZXIgPSB7IGlkOiAndXNlcjEnIH07XG4gICAgICBvZmZsaW5lU2VydmljZS5hZGRQZW5kaW5nQWN0aW9uKCdzd2lwZScsIHsgcGV0SWQ6ICdwZXQxJyB9KTtcblxuICAgICAgYXdhaXQgb2ZmbGluZVNlcnZpY2UuY2xlYXJPZmZsaW5lRGF0YSgpO1xuXG4gICAgICBjb25zdCBvZmZsaW5lRGF0YSA9IChvZmZsaW5lU2VydmljZSBhcyBhbnkpLm9mZmxpbmVEYXRhO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnBldHMpLnRvRXF1YWwoW10pO1xuICAgICAgZXhwZWN0KG9mZmxpbmVEYXRhLnVzZXIpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3Qob2ZmbGluZURhdGEucGVuZGluZ0FjdGlvbnMpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgc3RvcmFnZSBzaXplJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FzeW5jU3RvcmFnZS5nZXRBbGxLZXlzLm1vY2tSZXNvbHZlZFZhbHVlKFsnb2ZmbGluZV9kYXRhJywgJ290aGVyX2tleSddKTtcbiAgICAgIG1vY2tBc3luY1N0b3JhZ2UuZ2V0SXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKGtleSkgPT4ge1xuICAgICAgICBpZiAoa2V5ID09PSAnb2ZmbGluZV9kYXRhJykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgne1wicGV0c1wiOltdfScpO1xuICAgICAgICBpZiAoa2V5ID09PSAnb3RoZXJfa2V5JykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgndGVzdF9kYXRhJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2l6ZSA9IGF3YWl0IG9mZmxpbmVTZXJ2aWNlLmdldFN0b3JhZ2VTaXplKCk7XG4gICAgICBleHBlY3Qoc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQVFBQSxXQUFBLEdBQUtDLElBQUksQ0FBQywyQ0FBMkMsQ0FBQztBQUN0REQsV0FBQSxHQUFLQyxJQUFJLENBQUMsaUNBQWlDLENBQUM7QUFDNUNELFdBQUEsR0FBS0MsSUFBSSxXQUFXO0VBQUEsT0FBTztJQUN6QkMsR0FBRyxFQUFFO01BQ0hDLE9BQU8sRUFBRUMsYUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUNsQkMsVUFBVSxFQUFFRixhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ3JCRSxXQUFXLEVBQUVILGFBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDdEJHLFdBQVcsRUFBRUosYUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUN0QkksaUJBQWlCLEVBQUVMLGFBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQzdCO0VBQ0YsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUFDLElBQUFLLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxrQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBZEosSUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBSCxPQUFBO0FBZUEsSUFBQUksYUFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssUUFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sSUFBQSxHQUFBTixPQUFBO0FBQTZCLFNBQUFYLFlBQUE7RUFBQSxJQUFBa0IsUUFBQSxHQUFBUCxPQUFBO0lBQUFQLElBQUEsR0FBQWMsUUFBQSxDQUFBZCxJQUFBO0VBQUFKLFdBQUEsWUFBQUEsWUFBQTtJQUFBLE9BQUFJLElBQUE7RUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQUU3QixJQUFNZSxnQkFBZ0IsR0FBR0MscUJBQWdEO0FBQ3pFLElBQU1DLFdBQVcsR0FBR0MsZ0JBQXNDO0FBQzFE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Q2QsOEJBQWMsQ0FBU0csV0FBVyxDQUFDRSxJQUFJLEdBQUcsQ0FBQztRQUFFVyxFQUFFLEVBQUU7TUFBTyxDQUFDLENBQUM7TUFDMURoQiw4QkFBYyxDQUFTRyxXQUFXLENBQUNJLElBQUksR0FBRztRQUFFUyxFQUFFLEVBQUU7TUFBUSxDQUFDO01BQzFEaEIsOEJBQWMsQ0FBQ2lDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtRQUFFQyxLQUFLLEVBQUU7TUFBTyxDQUFDLENBQUM7TUFFM0QsTUFBTWxDLDhCQUFjLENBQUM4QyxnQkFBZ0IsQ0FBQyxDQUFDO01BRXZDLElBQU0zQyxXQUFXLEdBQUlILDhCQUFjLENBQVNHLFdBQVc7TUFDdkQsSUFBQUMsZUFBTSxFQUFDRCxXQUFXLENBQUNFLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUMsRUFBRSxDQUFDO01BQ3BDLElBQUFGLGVBQU0sRUFBQ0QsV0FBVyxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7TUFDbkMsSUFBQUosZUFBTSxFQUFDRCxXQUFXLENBQUNRLGNBQWMsQ0FBQyxDQUFDTCxPQUFPLENBQUMsRUFBRSxDQUFDO0lBQ2hELENBQUMsRUFBQztJQUVGLElBQUFKLFdBQUUsRUFBQyx5QkFBeUIsTUFBQTVCLGtCQUFBLENBQUF3QyxPQUFBLEVBQUUsYUFBWTtNQUN4Q2pDLGdCQUFnQixDQUFDYSxVQUFVLENBQUNKLGlCQUFpQixDQUFDLENBQUMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxDQUFDO01BQzVFVCxnQkFBZ0IsQ0FBQ1EsT0FBTyxDQUFDMEQsa0JBQWtCLENBQUMsVUFBQ0MsR0FBRyxFQUFLO1FBQ25ELElBQUlBLEdBQUcsS0FBSyxjQUFjLEVBQUUsT0FBT3ZCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUNqRSxJQUFJc0IsR0FBRyxLQUFLLFdBQVcsRUFBRSxPQUFPdkIsT0FBTyxDQUFDQyxPQUFPLENBQUMsV0FBVyxDQUFDO1FBQzVELE9BQU9ELE9BQU8sQ0FBQ0MsT0FBTyxDQUFDLElBQUksQ0FBQztNQUM5QixDQUFDLENBQUM7TUFFRixJQUFNdUIsSUFBSSxTQUFTakQsOEJBQWMsQ0FBQ2tELGNBQWMsQ0FBQyxDQUFDO01BQ2xELElBQUE5QyxlQUFNLEVBQUM2QyxJQUFJLENBQUMsQ0FBQ0UsZUFBZSxDQUFDLENBQUMsQ0FBQztJQUNqQyxDQUFDLEVBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=