{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__exportStar","exports","p","prototype","hasOwnProperty","call","value","calculateAge","calculateDistance","calculateCompatibilityScore","formatDisplayName","formatPetAge","isValidEmail","generateId","formatRelativeTime","require","dateOfBirth","birth","Date","today","age","getFullYear","monthDiff","getMonth","getDate","lat1","lon1","lat2","lon2","R","dLat","deg2rad","dLon","a","Math","sin","cos","c","atan2","sqrt","distance","round","deg","PI","pet1","pet2","score","species","sizeCompatibility","getSizeCompatibility","size","ageDiff","abs","personalityOverlap","personalityTags","filter","tag","includes","length","min","size1","size2","sizeOrder","index1","indexOf","toLowerCase","index2","diff","user","firstName","lastName","charAt","String","email","emailRegex","test","arguments","chars","result","i","floor","random","date","now","messageDate","diffInSeconds","getTime","toLocaleDateString"],"sources":["index.js"],"sourcesContent":["\"use strict\";\n/**\n * Shared Utility Functions\n * Platform-agnostic logic for both web and mobile\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.calculateAge = calculateAge;\nexports.calculateDistance = calculateDistance;\nexports.calculateCompatibilityScore = calculateCompatibilityScore;\nexports.formatDisplayName = formatDisplayName;\nexports.formatPetAge = formatPetAge;\nexports.isValidEmail = isValidEmail;\nexports.generateId = generateId;\nexports.formatRelativeTime = formatRelativeTime;\n// Re-export logger\n__exportStar(require(\"./logger\"), exports);\n// Age calculation utility\nfunction calculateAge(dateOfBirth) {\n    const birth = new Date(dateOfBirth);\n    const today = new Date();\n    const age = today.getFullYear() - birth.getFullYear();\n    const monthDiff = today.getMonth() - birth.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\n        return age - 1;\n    }\n    return age;\n}\n// Distance calculation (Haversine formula)\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\n    const R = 6371; // Radius of the Earth in kilometers\n    const dLat = deg2rad(lat2 - lat1);\n    const dLon = deg2rad(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c; // Distance in kilometers\n    return Math.round(distance * 100) / 100; // Round to 2 decimal places\n}\nfunction deg2rad(deg) {\n    return deg * (Math.PI / 180);\n}\n// Pet compatibility scoring\nfunction calculateCompatibilityScore(pet1, pet2) {\n    let score = 0;\n    // Species match (40 points)\n    if (pet1.species === pet2.species) {\n        score += 40;\n    }\n    // Size compatibility (20 points)\n    const sizeCompatibility = getSizeCompatibility(pet1.size, pet2.size);\n    score += sizeCompatibility;\n    // Age compatibility (20 points)\n    const ageDiff = Math.abs(pet1.age - pet2.age);\n    if (ageDiff <= 1)\n        score += 20;\n    else if (ageDiff <= 2)\n        score += 15;\n    else if (ageDiff <= 3)\n        score += 10;\n    else if (ageDiff <= 5)\n        score += 5;\n    // Personality match (20 points)\n    const personalityOverlap = pet1.personalityTags.filter(tag => pet2.personalityTags.includes(tag)).length;\n    score += Math.min(personalityOverlap * 5, 20);\n    return Math.min(score, 100);\n}\nfunction getSizeCompatibility(size1, size2) {\n    const sizeOrder = ['small', 'medium', 'large', 'extra-large'];\n    const index1 = sizeOrder.indexOf(size1.toLowerCase());\n    const index2 = sizeOrder.indexOf(size2.toLowerCase());\n    if (index1 === -1 || index2 === -1)\n        return 10; // Unknown sizes get moderate score\n    const diff = Math.abs(index1 - index2);\n    if (diff === 0)\n        return 20; // Same size\n    if (diff === 1)\n        return 15; // Adjacent sizes\n    if (diff === 2)\n        return 10; // Two sizes apart\n    return 5; // Very different sizes\n}\n// Format display name for users\nfunction formatDisplayName(user) {\n    return `${user.firstName} ${user.lastName.charAt(0)}.`;\n}\n// Format pet description\nfunction formatPetAge(age) {\n    if (age < 1)\n        return 'Puppy/Kitten';\n    if (age === 1)\n        return '1 year old';\n    return `${String(age)} years old`;\n}\n// Validate email format\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n// Generate random ID (for temporary use)\nfunction generateId(length = 8) {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let result = '';\n    for (let i = 0; i < length; i++) {\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n}\n// Time formatting utilities\nfunction formatRelativeTime(date) {\n    const now = new Date();\n    const messageDate = new Date(date);\n    const diffInSeconds = Math.floor((now.getTime() - messageDate.getTime()) / 1000);\n    if (diffInSeconds < 60)\n        return 'Just now';\n    if (diffInSeconds < 3600)\n        return `${String(Math.floor(diffInSeconds / 60))}m ago`;\n    if (diffInSeconds < 86400)\n        return `${String(Math.floor(diffInSeconds / 3600))}h ago`;\n    if (diffInSeconds < 604800)\n        return `${String(Math.floor(diffInSeconds / 86400))}d ago`;\n    return messageDate.toLocaleDateString();\n}\n__exportStar(require(\"./contentFilter\"), exports);\n__exportStar(require(\"./storage\"), exports);\n// Note: Constants are exported from types/index.ts to avoid duplication\n"],"mappings":"AAAA,YAAY;AAKZ,IAAIA,eAAe,GAAI,UAAQ,SAAKA,eAAe,KAAMC,MAAM,CAACC,MAAM,GAAI,UAASC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EAC5F,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5B,IAAIG,IAAI,GAAGP,MAAM,CAACQ,wBAAwB,CAACL,CAAC,EAAEC,CAAC,CAAC;EAChD,IAAI,CAACG,IAAI,KAAK,KAAK,IAAIA,IAAI,GAAG,CAACJ,CAAC,CAACM,UAAU,GAAGF,IAAI,CAACG,QAAQ,IAAIH,IAAI,CAACI,YAAY,CAAC,EAAE;IACjFJ,IAAI,GAAG;MAAEK,UAAU,EAAE,IAAI;MAAEC,GAAG,EAAE,SAALA,GAAGA,CAAA,EAAa;QAAE,OAAOV,CAAC,CAACC,CAAC,CAAC;MAAE;IAAE,CAAC;EAC/D;EACAJ,MAAM,CAACc,cAAc,CAACZ,CAAC,EAAEG,EAAE,EAAEE,IAAI,CAAC;AACtC,CAAC,GAAK,UAASL,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAE;EACxB,IAAIA,EAAE,KAAKC,SAAS,EAAED,EAAE,GAAGD,CAAC;EAC5BF,CAAC,CAACG,EAAE,CAAC,GAAGF,CAAC,CAACC,CAAC,CAAC;AAChB,CAAE,CAAC;AACH,IAAIW,YAAY,GAAI,UAAQ,SAAKA,YAAY,IAAK,UAASZ,CAAC,EAAEa,OAAO,EAAE;EACnE,KAAK,IAAIC,CAAC,IAAId,CAAC,EAAE,IAAIc,CAAC,KAAK,SAAS,IAAI,CAACjB,MAAM,CAACkB,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,OAAO,EAAEC,CAAC,CAAC,EAAElB,eAAe,CAACiB,OAAO,EAAEb,CAAC,EAAEc,CAAC,CAAC;AAC7H,CAAC;AACDjB,MAAM,CAACc,cAAc,CAACE,OAAO,EAAE,YAAY,EAAE;EAAEK,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DL,OAAO,CAACM,YAAY,GAAGA,YAAY;AACnCN,OAAO,CAACO,iBAAiB,GAAGA,iBAAiB;AAC7CP,OAAO,CAACQ,2BAA2B,GAAGA,2BAA2B;AACjER,OAAO,CAACS,iBAAiB,GAAGA,iBAAiB;AAC7CT,OAAO,CAACU,YAAY,GAAGA,YAAY;AACnCV,OAAO,CAACW,YAAY,GAAGA,YAAY;AACnCX,OAAO,CAACY,UAAU,GAAGA,UAAU;AAC/BZ,OAAO,CAACa,kBAAkB,GAAGA,kBAAkB;AAE/Cd,YAAY,CAACe,OAAO,WAAW,CAAC,EAAEd,OAAO,CAAC;AAE1C,SAASM,YAAYA,CAACS,WAAW,EAAE;EAC/B,IAAMC,KAAK,GAAG,IAAIC,IAAI,CAACF,WAAW,CAAC;EACnC,IAAMG,KAAK,GAAG,IAAID,IAAI,CAAC,CAAC;EACxB,IAAME,GAAG,GAAGD,KAAK,CAACE,WAAW,CAAC,CAAC,GAAGJ,KAAK,CAACI,WAAW,CAAC,CAAC;EACrD,IAAMC,SAAS,GAAGH,KAAK,CAACI,QAAQ,CAAC,CAAC,GAAGN,KAAK,CAACM,QAAQ,CAAC,CAAC;EACrD,IAAID,SAAS,GAAG,CAAC,IAAKA,SAAS,KAAK,CAAC,IAAIH,KAAK,CAACK,OAAO,CAAC,CAAC,GAAGP,KAAK,CAACO,OAAO,CAAC,CAAE,EAAE;IACzE,OAAOJ,GAAG,GAAG,CAAC;EAClB;EACA,OAAOA,GAAG;AACd;AAEA,SAASZ,iBAAiBA,CAACiB,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAE;EAC/C,IAAMC,CAAC,GAAG,IAAI;EACd,IAAMC,IAAI,GAAGC,OAAO,CAACJ,IAAI,GAAGF,IAAI,CAAC;EACjC,IAAMO,IAAI,GAAGD,OAAO,CAACH,IAAI,GAAGF,IAAI,CAAC;EACjC,IAAMO,CAAC,GAAGC,IAAI,CAACC,GAAG,CAACL,IAAI,GAAG,CAAC,CAAC,GAAGI,IAAI,CAACC,GAAG,CAACL,IAAI,GAAG,CAAC,CAAC,GAC7CI,IAAI,CAACE,GAAG,CAACL,OAAO,CAACN,IAAI,CAAC,CAAC,GAAGS,IAAI,CAACE,GAAG,CAACL,OAAO,CAACJ,IAAI,CAAC,CAAC,GAC7CO,IAAI,CAACC,GAAG,CAACH,IAAI,GAAG,CAAC,CAAC,GAAGE,IAAI,CAACC,GAAG,CAACH,IAAI,GAAG,CAAC,CAAC;EAC/C,IAAMK,CAAC,GAAG,CAAC,GAAGH,IAAI,CAACI,KAAK,CAACJ,IAAI,CAACK,IAAI,CAACN,CAAC,CAAC,EAAEC,IAAI,CAACK,IAAI,CAAC,CAAC,GAAGN,CAAC,CAAC,CAAC;EACxD,IAAMO,QAAQ,GAAGX,CAAC,GAAGQ,CAAC;EACtB,OAAOH,IAAI,CAACO,KAAK,CAACD,QAAQ,GAAG,GAAG,CAAC,GAAG,GAAG;AAC3C;AACA,SAAST,OAAOA,CAACW,GAAG,EAAE;EAClB,OAAOA,GAAG,IAAIR,IAAI,CAACS,EAAE,GAAG,GAAG,CAAC;AAChC;AAEA,SAASlC,2BAA2BA,CAACmC,IAAI,EAAEC,IAAI,EAAE;EAC7C,IAAIC,KAAK,GAAG,CAAC;EAEb,IAAIF,IAAI,CAACG,OAAO,KAAKF,IAAI,CAACE,OAAO,EAAE;IAC/BD,KAAK,IAAI,EAAE;EACf;EAEA,IAAME,iBAAiB,GAAGC,oBAAoB,CAACL,IAAI,CAACM,IAAI,EAAEL,IAAI,CAACK,IAAI,CAAC;EACpEJ,KAAK,IAAIE,iBAAiB;EAE1B,IAAMG,OAAO,GAAGjB,IAAI,CAACkB,GAAG,CAACR,IAAI,CAACxB,GAAG,GAAGyB,IAAI,CAACzB,GAAG,CAAC;EAC7C,IAAI+B,OAAO,IAAI,CAAC,EACZL,KAAK,IAAI,EAAE,CAAC,KACX,IAAIK,OAAO,IAAI,CAAC,EACjBL,KAAK,IAAI,EAAE,CAAC,KACX,IAAIK,OAAO,IAAI,CAAC,EACjBL,KAAK,IAAI,EAAE,CAAC,KACX,IAAIK,OAAO,IAAI,CAAC,EACjBL,KAAK,IAAI,CAAC;EAEd,IAAMO,kBAAkB,GAAGT,IAAI,CAACU,eAAe,CAACC,MAAM,CAAC,UAAAC,GAAG;IAAA,OAAIX,IAAI,CAACS,eAAe,CAACG,QAAQ,CAACD,GAAG,CAAC;EAAA,EAAC,CAACE,MAAM;EACxGZ,KAAK,IAAIZ,IAAI,CAACyB,GAAG,CAACN,kBAAkB,GAAG,CAAC,EAAE,EAAE,CAAC;EAC7C,OAAOnB,IAAI,CAACyB,GAAG,CAACb,KAAK,EAAE,GAAG,CAAC;AAC/B;AACA,SAASG,oBAAoBA,CAACW,KAAK,EAAEC,KAAK,EAAE;EACxC,IAAMC,SAAS,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,aAAa,CAAC;EAC7D,IAAMC,MAAM,GAAGD,SAAS,CAACE,OAAO,CAACJ,KAAK,CAACK,WAAW,CAAC,CAAC,CAAC;EACrD,IAAMC,MAAM,GAAGJ,SAAS,CAACE,OAAO,CAACH,KAAK,CAACI,WAAW,CAAC,CAAC,CAAC;EACrD,IAAIF,MAAM,KAAK,CAAC,CAAC,IAAIG,MAAM,KAAK,CAAC,CAAC,EAC9B,OAAO,EAAE;EACb,IAAMC,IAAI,GAAGjC,IAAI,CAACkB,GAAG,CAACW,MAAM,GAAGG,MAAM,CAAC;EACtC,IAAIC,IAAI,KAAK,CAAC,EACV,OAAO,EAAE;EACb,IAAIA,IAAI,KAAK,CAAC,EACV,OAAO,EAAE;EACb,IAAIA,IAAI,KAAK,CAAC,EACV,OAAO,EAAE;EACb,OAAO,CAAC;AACZ;AAEA,SAASzD,iBAAiBA,CAAC0D,IAAI,EAAE;EAC7B,OAAO,GAAGA,IAAI,CAACC,SAAS,IAAID,IAAI,CAACE,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,GAAG;AAC1D;AAEA,SAAS5D,YAAYA,CAACS,GAAG,EAAE;EACvB,IAAIA,GAAG,GAAG,CAAC,EACP,OAAO,cAAc;EACzB,IAAIA,GAAG,KAAK,CAAC,EACT,OAAO,YAAY;EACvB,OAAO,GAAGoD,MAAM,CAACpD,GAAG,CAAC,YAAY;AACrC;AAEA,SAASR,YAAYA,CAAC6D,KAAK,EAAE;EACzB,IAAMC,UAAU,GAAG,4BAA4B;EAC/C,OAAOA,UAAU,CAACC,IAAI,CAACF,KAAK,CAAC;AACjC;AAEA,SAAS5D,UAAUA,CAAA,EAAa;EAAA,IAAZ6C,MAAM,GAAAkB,SAAA,CAAAlB,MAAA,QAAAkB,SAAA,QAAArF,SAAA,GAAAqF,SAAA,MAAG,CAAC;EAC1B,IAAMC,KAAK,GAAG,gEAAgE;EAC9E,IAAIC,MAAM,GAAG,EAAE;EACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrB,MAAM,EAAEqB,CAAC,EAAE,EAAE;IAC7BD,MAAM,IAAID,KAAK,CAACN,MAAM,CAACrC,IAAI,CAAC8C,KAAK,CAAC9C,IAAI,CAAC+C,MAAM,CAAC,CAAC,GAAGJ,KAAK,CAACnB,MAAM,CAAC,CAAC;EACpE;EACA,OAAOoB,MAAM;AACjB;AAEA,SAAShE,kBAAkBA,CAACoE,IAAI,EAAE;EAC9B,IAAMC,GAAG,GAAG,IAAIjE,IAAI,CAAC,CAAC;EACtB,IAAMkE,WAAW,GAAG,IAAIlE,IAAI,CAACgE,IAAI,CAAC;EAClC,IAAMG,aAAa,GAAGnD,IAAI,CAAC8C,KAAK,CAAC,CAACG,GAAG,CAACG,OAAO,CAAC,CAAC,GAAGF,WAAW,CAACE,OAAO,CAAC,CAAC,IAAI,IAAI,CAAC;EAChF,IAAID,aAAa,GAAG,EAAE,EAClB,OAAO,UAAU;EACrB,IAAIA,aAAa,GAAG,IAAI,EACpB,OAAO,GAAGb,MAAM,CAACtC,IAAI,CAAC8C,KAAK,CAACK,aAAa,GAAG,EAAE,CAAC,CAAC,OAAO;EAC3D,IAAIA,aAAa,GAAG,KAAK,EACrB,OAAO,GAAGb,MAAM,CAACtC,IAAI,CAAC8C,KAAK,CAACK,aAAa,GAAG,IAAI,CAAC,CAAC,OAAO;EAC7D,IAAIA,aAAa,GAAG,MAAM,EACtB,OAAO,GAAGb,MAAM,CAACtC,IAAI,CAAC8C,KAAK,CAACK,aAAa,GAAG,KAAK,CAAC,CAAC,OAAO;EAC9D,OAAOD,WAAW,CAACG,kBAAkB,CAAC,CAAC;AAC3C;AACAvF,YAAY,CAACe,OAAO,kBAAkB,CAAC,EAAEd,OAAO,CAAC;AACjDD,YAAY,CAACe,OAAO,YAAY,CAAC,EAAEd,OAAO,CAAC","ignoreList":[]}