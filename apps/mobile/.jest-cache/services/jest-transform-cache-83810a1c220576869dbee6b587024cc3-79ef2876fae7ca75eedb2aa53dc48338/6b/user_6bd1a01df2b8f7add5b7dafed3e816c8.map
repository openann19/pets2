{"version":3,"names":["_interopRequireDefault","require","_defineProperty2","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","default","getOwnPropertyDescriptors","defineProperties","defineProperty","exports","value","toCoreUser","splitName","name","trimmed","trim","firstName","lastName","parts","split","slice","join","legacy","_legacy$isPremium","_splitName","now","Date","toISOString","_id","id","email","dateOfBirth","age","avatar","bio","phone","location","type","coordinates","preferences","maxDistance","ageRange","min","max","species","intents","notifications","matches","messages","premium","isActive","isPremium","plan","features","unlimitedLikes","boostProfile","seeWhoLiked","advancedFilters","pets","analytics","totalSwipes","totalLikes","totalMatches","profileViews","lastActive","isEmailVerified","createdAt","updatedAt"],"sources":["user.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toCoreUser = toCoreUser;\nfunction splitName(name) {\n    const trimmed = name.trim();\n    if (trimmed.length === 0)\n        return { firstName: '', lastName: '' };\n    const parts = trimmed.split(/\\s+/);\n    const firstName = parts[0] != null ? parts[0] : '';\n    const lastName = parts.slice(1).join(' ').length > 0 ? parts.slice(1).join(' ') : '';\n    return { firstName, lastName };\n}\nfunction toCoreUser(legacy) {\n    const { firstName, lastName } = splitName(legacy.name);\n    const now = new Date().toISOString();\n    return {\n        _id: legacy.id,\n        id: legacy.id, // Alias for _id\n        email: legacy.email,\n        firstName,\n        lastName,\n        dateOfBirth: '', // unknown from legacy; keep empty string\n        age: 0, // unknown from legacy\n        ...(legacy.avatar != null && legacy.avatar.length > 0 ? { avatar: legacy.avatar } : {}),\n        bio: '',\n        phone: '',\n        location: {\n            type: 'Point',\n            coordinates: [0, 0],\n        },\n        preferences: {\n            maxDistance: 50,\n            ageRange: { min: 18, max: 100 },\n            species: [],\n            intents: [],\n            notifications: {\n                email: true,\n                push: true,\n                matches: true,\n                messages: true,\n            },\n        },\n        premium: {\n            isActive: legacy.isPremium ?? false,\n            plan: 'basic',\n            features: {\n                unlimitedLikes: false,\n                boostProfile: false,\n                seeWhoLiked: false,\n                advancedFilters: false,\n            },\n        },\n        pets: [],\n        analytics: {\n            totalSwipes: 0,\n            totalLikes: 0,\n            totalMatches: 0,\n            profileViews: 0,\n            lastActive: now,\n        },\n        isEmailVerified: false,\n        isActive: true,\n        createdAt: now,\n        updatedAt: now,\n    };\n}\n"],"mappings":"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","ignoreList":[]}