{"version":3,"names":["API_URL","process","env","EXPO_PUBLIC_API_URL","uploadImageAsync","_x","_uploadImageAsync","apply","arguments","_asyncToGenerator2","default","localUri","contentType","length","undefined","presignRes","fetch","method","headers","body","JSON","stringify","ok","Error","presign","json","blob","putRes","url","publicUrl"],"sources":["uploadService.ts"],"sourcesContent":["const API_URL = process.env.EXPO_PUBLIC_API_URL || process.env.API_URL || \"\";\n\nexport async function uploadImageAsync(localUri: string, contentType = \"image/jpeg\"): Promise<string> {\n  // Get presigned URL from server\n  const presignRes = await fetch(`${API_URL}/api/upload/presign`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ contentType }),\n  });\n  \n  if (!presignRes.ok) throw new Error(\"Failed to get presigned URL\");\n  const presign = await presignRes.json();\n  \n  // Read the file as blob\n  const blob = await (await fetch(localUri)).blob();\n  \n  // Upload to S3 using presigned URL\n  const putRes = await fetch(presign.url, {\n    method: \"PUT\",\n    headers: { \"Content-Type\": contentType },\n    body: blob,\n  });\n  \n  if (!putRes.ok) throw new Error(\"upload failed\");\n  return presign.publicUrl as string;\n}\n\n"],"mappings":";;;;;;;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,mBAAmB,IAAIF,OAAO,CAACC,GAAG,CAACF,OAAO,IAAI,EAAE;AAAC,SAEvDI,gBAAgBA,CAAAC,EAAA;EAAA,OAAAC,iBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,kBAAA;EAAAA,iBAAA,OAAAG,kBAAA,CAAAC,OAAA,EAA/B,WAAgCC,QAAgB,EAA+C;IAAA,IAA7CC,WAAW,GAAAJ,SAAA,CAAAK,MAAA,QAAAL,SAAA,QAAAM,SAAA,GAAAN,SAAA,MAAG,YAAY;IAEjF,IAAMO,UAAU,SAASC,KAAK,CAAC,GAAGhB,OAAO,qBAAqB,EAAE;MAC9DiB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAET,WAAW,EAAXA;MAAY,CAAC;IACtC,CAAC,CAAC;IAEF,IAAI,CAACG,UAAU,CAACO,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;IAClE,IAAMC,OAAO,SAAST,UAAU,CAACU,IAAI,CAAC,CAAC;IAGvC,IAAMC,IAAI,SAAS,OAAOV,KAAK,CAACL,QAAQ,CAAC,EAAEe,IAAI,CAAC,CAAC;IAGjD,IAAMC,MAAM,SAASX,KAAK,CAACQ,OAAO,CAACI,GAAG,EAAE;MACtCX,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QAAE,cAAc,EAAEN;MAAY,CAAC;MACxCO,IAAI,EAAEO;IACR,CAAC,CAAC;IAEF,IAAI,CAACC,MAAM,CAACL,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;IAChD,OAAOC,OAAO,CAACK,SAAS;EAC1B,CAAC;EAAA,OAAAvB,iBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA","ignoreList":[]}