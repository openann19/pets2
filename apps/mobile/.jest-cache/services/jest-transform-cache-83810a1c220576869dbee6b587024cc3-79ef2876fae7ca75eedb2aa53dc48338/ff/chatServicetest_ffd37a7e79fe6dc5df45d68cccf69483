cd9c052c61d1967c91229d185526a3f8
"use strict";

_getJestObj().mock("../api", function () {
  return {
    request: jest.fn()
  };
});
_getJestObj().mock('expo-file-system', function () {
  return {
    uploadAsync: jest.fn()
  };
});
_getJestObj().mock('@pawfectmatch/core', function () {
  return {
    logger: {
      info: jest.fn(),
      warn: jest.fn(),
      error: jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _chatService = require("../chatService");
var _api = require("../api");
var FileSystem = _interopRequireWildcard(require("expo-file-system"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t2 in e) "default" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]); return f; })(e, t); }
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('Chat Service', function () {
  beforeEach(function () {
    jest.clearAllMocks();
  });
  describe('sendReaction', function () {
    it('should send reaction successfully', (0, _asyncToGenerator2.default)(function* () {
      var mockResponse = {
        success: true,
        messageId: 'msg-123',
        reactions: [{
          emoji: 'üòç',
          userId: 'user-1',
          timestamp: '2024-01-01T00:00:00Z'
        }]
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendReaction('match-123', 'msg-123', 'üòç');
      expect(response).toEqual(mockResponse);
      expect(_api.request).toHaveBeenCalledWith('/chat/reactions', {
        method: 'POST',
        body: {
          matchId: 'match-123',
          messageId: 'msg-123',
          reaction: 'üòç'
        }
      });
    }));
    it('should throw error on failed reaction', (0, _asyncToGenerator2.default)(function* () {
      _api.request.mockRejectedValueOnce(new Error('Failed to send reaction'));
      yield expect(_chatService.chatService.sendReaction('match-123', 'msg-123', 'üòç')).rejects.toThrow('Failed to send reaction');
    }));
    it('should handle multiple reactions', (0, _asyncToGenerator2.default)(function* () {
      var mockResponse = {
        success: true,
        messageId: 'msg-123',
        reactions: [{
          emoji: 'üòç',
          userId: 'user-1',
          timestamp: '2024-01-01T00:00:00Z'
        }, {
          emoji: '‚ù§Ô∏è',
          userId: 'user-2',
          timestamp: '2024-01-01T00:01:00Z'
        }]
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendReaction('match-123', 'msg-123', '‚ù§Ô∏è');
      expect(response.reactions).toHaveLength(2);
    }));
  });
  describe('sendAttachment', function () {
    it('should send image attachment', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['image data'], 'photo.jpg', {
        type: 'image/jpeg'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/photo.jpg',
        type: 'image'
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendAttachment({
        matchId: 'match-123',
        attachmentType: 'image',
        file: mockFile,
        name: 'photo.jpg'
      });
      expect(response).toEqual(mockResponse);
      expect(_api.request).toHaveBeenCalledWith('/chat/attachments', {
        method: 'POST',
        body: expect.any(FormData)
      });
    }));
    it('should send video attachment', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['video data'], 'video.mp4', {
        type: 'video/mp4'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/video.mp4',
        type: 'video'
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendAttachment({
        matchId: 'match-123',
        attachmentType: 'video',
        file: mockFile,
        name: 'video.mp4'
      });
      expect(response.type).toBe('video');
    }));
    it('should send file attachment', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['file data'], 'document.pdf', {
        type: 'application/pdf'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/document.pdf',
        type: 'file'
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendAttachment({
        matchId: 'match-123',
        attachmentType: 'file',
        file: mockFile,
        name: 'document.pdf'
      });
      expect(response.type).toBe('file');
    }));
    it('should handle attachment errors', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['data'], 'file.pdf', {
        type: 'application/pdf'
      });
      _api.request.mockRejectedValueOnce(new Error('Upload failed'));
      yield expect(_chatService.chatService.sendAttachment({
        matchId: 'match-123',
        attachmentType: 'file',
        file: mockFile
      })).rejects.toThrow('Upload failed');
    }));
  });
  describe('sendVoiceNote', function () {
    it('should send voice note with FormData (native)', (0, _asyncToGenerator2.default)(function* () {
      var formData = new FormData();
      formData.append('audio', new Blob(['audio data'], {
        type: 'audio/webm'
      }), {
        type: 'audio/webm'
      });
      _api.request.mockResolvedValueOnce(undefined);
      yield _chatService.chatService.sendVoiceNote('match-123', formData, 5);
      expect(_api.request).toHaveBeenCalledWith('/api/chat/voice', {
        method: 'POST',
        body: expect.any(FormData),
        headers: {}
      });
    }));
    it('should send voice note with Blob (web)', (0, _asyncToGenerator2.default)(function* () {
      var audioBlob = new Blob(['audio data'], {
        type: 'audio/webm'
      });
      _api.request.mockResolvedValueOnce(undefined);
      yield _chatService.chatService.sendVoiceNote('match-123', audioBlob, 5);
      expect(_api.request).toHaveBeenCalledWith('/api/chat/voice', {
        method: 'POST',
        body: expect.any(FormData),
        headers: {}
      });
    }));
    it('should send voice note with legacy signature', (0, _asyncToGenerator2.default)(function* () {
      var audioBlob = new Blob(['audio data'], {
        type: 'audio/m4a'
      });
      _api.request.mockResolvedValueOnce({
        success: true,
        url: 'https://example.com/voice.m4a',
        duration: 5
      });
      yield _chatService.chatService.sendVoiceNote({
        matchId: 'match-123',
        audioBlob: audioBlob,
        duration: 5
      });
      expect(_api.request).toHaveBeenCalledWith('/api/chat/voice', {
        method: 'POST',
        body: expect.any(FormData),
        headers: {}
      });
    }));
    it('should throw error for invalid file type', (0, _asyncToGenerator2.default)(function* () {
      yield expect(_chatService.chatService.sendVoiceNote('match-123', {}, 5)).rejects.toThrow('Invalid file type');
    }));
    it('should handle voice note upload errors', (0, _asyncToGenerator2.default)(function* () {
      var formData = new FormData();
      _api.request.mockRejectedValueOnce(new Error('Upload failed'));
      yield expect(_chatService.chatService.sendVoiceNote('match-123', formData, 5)).rejects.toThrow('Upload failed');
    }));
  });
  describe('sendVoiceNoteNative', function () {
    it('should upload voice note to S3 and register message', (0, _asyncToGenerator2.default)(function* () {
      var presignResponse = {
        url: 'https://s3.example.com/upload',
        key: 'voice-notes/abc123.webm'
      };
      _api.request.mockResolvedValueOnce(presignResponse).mockResolvedValueOnce({
        status: 200
      }).mockResolvedValueOnce({
        success: true
      });
      FileSystem.uploadAsync.mockResolvedValueOnce({
        status: 200,
        body: 'Uploaded'
      });
      yield (0, _chatService.sendVoiceNoteNative)('match-123', {
        fileUri: 'file://voice.webm',
        duration: 10
      });
      expect(_api.request).toHaveBeenCalledWith('/uploads/voice/presign', {
        method: 'POST',
        body: {
          contentType: 'audio/webm'
        }
      });
      expect(FileSystem.uploadAsync).toHaveBeenCalledWith(presignResponse.url, 'file://voice.webm', {
        httpMethod: 'PUT',
        headers: {
          'Content-Type': 'audio/webm'
        },
        uploadType: FileSystem.FileSystemUploadType.BINARY_CONTENT
      });
      expect(_api.request).toHaveBeenCalledWith('/chat/match-123/voice-note', {
        method: 'POST',
        body: {
          key: presignResponse.key,
          duration: 10,
          waveform: []
        }
      });
    }));
    it('should handle S3 upload errors', (0, _asyncToGenerator2.default)(function* () {
      _api.request.mockResolvedValueOnce({
        url: 'https://s3.example.com/upload',
        key: 'voice-notes/abc123.webm'
      });
      FileSystem.uploadAsync.mockRejectedValueOnce(new Error('S3 upload failed'));
      yield expect((0, _chatService.sendVoiceNoteNative)('match-123', {
        fileUri: 'file://voice.webm',
        duration: 10
      })).rejects.toThrow('S3 upload failed');
    }));
    it('should handle presign errors', (0, _asyncToGenerator2.default)(function* () {
      _api.request.mockRejectedValueOnce(new Error('Presign failed'));
      yield expect((0, _chatService.sendVoiceNoteNative)('match-123', {
        fileUri: 'file://voice.webm',
        duration: 10
      })).rejects.toThrow('Presign failed');
    }));
  });
  describe('Edge Cases', function () {
    it('should handle large file uploads', (0, _asyncToGenerator2.default)(function* () {
      var largeFile = new File(['x'.repeat(10 * 1024 * 1024)], 'large.jpg', {
        type: 'image/jpeg'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/large.jpg',
        type: 'image'
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendAttachment({
        matchId: 'match-123',
        attachmentType: 'image',
        file: largeFile
      });
      expect(response.success).toBe(true);
    }));
    it('should handle network errors during reaction', (0, _asyncToGenerator2.default)(function* () {
      _api.request.mockRejectedValueOnce(new Error('Network error'));
      yield expect(_chatService.chatService.sendReaction('match-123', 'msg-123', '‚ù§Ô∏è')).rejects.toThrow('Network error');
    }));
    it('should handle invalid match ID', (0, _asyncToGenerator2.default)(function* () {
      _api.request.mockRejectedValueOnce(new Error('Match not found'));
      yield expect(_chatService.chatService.sendReaction('invalid-match', 'msg-123', 'üòç')).rejects.toThrow('Match not found');
    }));
    it('should handle concurrent reactions', (0, _asyncToGenerator2.default)(function* () {
      var _reactions$;
      var mockResponse = {
        success: true,
        messageId: 'msg-123',
        reactions: []
      };
      _api.request.mockResolvedValue(mockResponse);
      var reactions = yield Promise.all([_chatService.chatService.sendReaction('match-123', 'msg-123', 'üòç'), _chatService.chatService.sendReaction('match-123', 'msg-123', '‚ù§Ô∏è'), _chatService.chatService.sendReaction('match-123', 'msg-123', 'üëç')]);
      expect(reactions).toHaveLength(3);
      expect((_reactions$ = reactions[0]) == null ? void 0 : _reactions$.success).toBe(true);
    }));
    it('should handle missing attachment name', (0, _asyncToGenerator2.default)(function* () {
      var mockFile = new File(['data'], '', {
        type: 'image/jpeg'
      });
      var mockResponse = {
        success: true,
        url: 'https://example.com/file',
        type: 'image'
      };
      _api.request.mockResolvedValueOnce(mockResponse);
      var response = yield _chatService.chatService.sendAttachment({
        matchId: 'match-123',
        attachmentType: 'image',
        file: mockFile
      });
      expect(response.success).toBe(true);
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJyZXF1ZXN0IiwiamVzdCIsImZuIiwidXBsb2FkQXN5bmMiLCJsb2dnZXIiLCJpbmZvIiwid2FybiIsImVycm9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfY2hhdFNlcnZpY2UiLCJfYXBpIiwiRmlsZVN5c3RlbSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90MiIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX3JlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJtb2NrUmVzcG9uc2UiLCJzdWNjZXNzIiwibWVzc2FnZUlkIiwicmVhY3Rpb25zIiwiZW1vamkiLCJ1c2VySWQiLCJ0aW1lc3RhbXAiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJyZXNwb25zZSIsImNoYXRTZXJ2aWNlIiwic2VuZFJlYWN0aW9uIiwiZXhwZWN0IiwidG9FcXVhbCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibWV0aG9kIiwiYm9keSIsIm1hdGNoSWQiLCJyZWFjdGlvbiIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsIkVycm9yIiwicmVqZWN0cyIsInRvVGhyb3ciLCJ0b0hhdmVMZW5ndGgiLCJtb2NrRmlsZSIsIkZpbGUiLCJ0eXBlIiwidXJsIiwic2VuZEF0dGFjaG1lbnQiLCJhdHRhY2htZW50VHlwZSIsImZpbGUiLCJuYW1lIiwiYW55IiwiRm9ybURhdGEiLCJ0b0JlIiwiZm9ybURhdGEiLCJhcHBlbmQiLCJCbG9iIiwidW5kZWZpbmVkIiwic2VuZFZvaWNlTm90ZSIsImhlYWRlcnMiLCJhdWRpb0Jsb2IiLCJkdXJhdGlvbiIsInByZXNpZ25SZXNwb25zZSIsImtleSIsInN0YXR1cyIsInNlbmRWb2ljZU5vdGVOYXRpdmUiLCJmaWxlVXJpIiwiY29udGVudFR5cGUiLCJodHRwTWV0aG9kIiwidXBsb2FkVHlwZSIsIkZpbGVTeXN0ZW1VcGxvYWRUeXBlIiwiQklOQVJZX0NPTlRFTlQiLCJ3YXZlZm9ybSIsImxhcmdlRmlsZSIsInJlcGVhdCIsIl9yZWFjdGlvbnMkIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJQcm9taXNlIiwiYWxsIl0sInNvdXJjZXMiOlsiY2hhdFNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENoYXQgU2VydmljZSBUZXN0IFN1aXRlXG4gKiBUZXN0cyByZWFjdGlvbnMsIGF0dGFjaG1lbnRzLCB2b2ljZSBub3RlcywgYW5kIG1lc3NhZ2luZyBmZWF0dXJlc1xuICovXG5cbmltcG9ydCB7IGNoYXRTZXJ2aWNlLCBzZW5kVm9pY2VOb3RlTmF0aXZlIH0gZnJvbSAnLi4vY2hhdFNlcnZpY2UnO1xuaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJy4uL2FwaSc7XG5pbXBvcnQgKiBhcyBGaWxlU3lzdGVtIGZyb20gJ2V4cG8tZmlsZS1zeXN0ZW0nO1xuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCcuLi9hcGknLCAoKSA9PiAoe1xuICByZXF1ZXN0OiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jaygnZXhwby1maWxlLXN5c3RlbScsICgpID0+ICh7XG4gIHVwbG9hZEFzeW5jOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jaygnQHBhd2ZlY3RtYXRjaC9jb3JlJywgKCkgPT4gKHtcbiAgbG9nZ2VyOiB7XG4gICAgaW5mbzogamVzdC5mbigpLFxuICAgIHdhcm46IGplc3QuZm4oKSxcbiAgICBlcnJvcjogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG5kZXNjcmliZSgnQ2hhdCBTZXJ2aWNlJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRSZWFjdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlbmQgcmVhY3Rpb24gc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlSWQ6ICdtc2ctMTIzJyxcbiAgICAgICAgcmVhY3Rpb25zOiBbXG4gICAgICAgICAgeyBlbW9qaTogJ/CfmI0nLCB1c2VySWQ6ICd1c2VyLTEnLCB0aW1lc3RhbXA6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIChyZXF1ZXN0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhdFNlcnZpY2Uuc2VuZFJlYWN0aW9uKCdtYXRjaC0xMjMnLCAnbXNnLTEyMycsICfwn5iNJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbChtb2NrUmVzcG9uc2UpO1xuICAgICAgZXhwZWN0KHJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvY2hhdC9yZWFjdGlvbnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAgbWF0Y2hJZDogJ21hdGNoLTEyMycsXG4gICAgICAgICAgbWVzc2FnZUlkOiAnbXNnLTEyMycsXG4gICAgICAgICAgcmVhY3Rpb246ICfwn5iNJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBvbiBmYWlsZWQgcmVhY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzZW5kIHJlYWN0aW9uJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNoYXRTZXJ2aWNlLnNlbmRSZWFjdGlvbignbWF0Y2gtMTIzJywgJ21zZy0xMjMnLCAn8J+YjScpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnRmFpbGVkIHRvIHNlbmQgcmVhY3Rpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIHJlYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZUlkOiAnbXNnLTEyMycsXG4gICAgICAgIHJlYWN0aW9uczogW1xuICAgICAgICAgIHsgZW1vamk6ICfwn5iNJywgdXNlcklkOiAndXNlci0xJywgdGltZXN0YW1wOiAnMjAyNC0wMS0wMVQwMDowMDowMFonIH0sXG4gICAgICAgICAgeyBlbW9qaTogJ+KdpO+4jycsIHVzZXJJZDogJ3VzZXItMicsIHRpbWVzdGFtcDogJzIwMjQtMDEtMDFUMDA6MDE6MDBaJyB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgKHJlcXVlc3QgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjaGF0U2VydmljZS5zZW5kUmVhY3Rpb24oJ21hdGNoLTEyMycsICdtc2ctMTIzJywgJ+KdpO+4jycpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UucmVhY3Rpb25zKS50b0hhdmVMZW5ndGgoMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZW5kQXR0YWNobWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlbmQgaW1hZ2UgYXR0YWNobWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IEZpbGUoWydpbWFnZSBkYXRhJ10sICdwaG90by5qcGcnLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KTtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90by5qcGcnLFxuICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgfTtcblxuICAgICAgKHJlcXVlc3QgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3BvbnNlKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjaGF0U2VydmljZS5zZW5kQXR0YWNobWVudCh7XG4gICAgICAgIG1hdGNoSWQ6ICdtYXRjaC0xMjMnLFxuICAgICAgICBhdHRhY2htZW50VHlwZTogJ2ltYWdlJyxcbiAgICAgICAgZmlsZTogbW9ja0ZpbGUsXG4gICAgICAgIG5hbWU6ICdwaG90by5qcGcnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbChtb2NrUmVzcG9uc2UpO1xuICAgICAgZXhwZWN0KHJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvY2hhdC9hdHRhY2htZW50cycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGV4cGVjdC5hbnkoRm9ybURhdGEpLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgdmlkZW8gYXR0YWNobWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IEZpbGUoWyd2aWRlbyBkYXRhJ10sICd2aWRlby5tcDQnLCB7IHR5cGU6ICd2aWRlby9tcDQnIH0pO1xuICAgICAgY29uc3QgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3ZpZGVvLm1wNCcsXG4gICAgICAgIHR5cGU6ICd2aWRlbycsXG4gICAgICB9O1xuXG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoYXRTZXJ2aWNlLnNlbmRBdHRhY2htZW50KHtcbiAgICAgICAgbWF0Y2hJZDogJ21hdGNoLTEyMycsXG4gICAgICAgIGF0dGFjaG1lbnRUeXBlOiAndmlkZW8nLFxuICAgICAgICBmaWxlOiBtb2NrRmlsZSxcbiAgICAgICAgbmFtZTogJ3ZpZGVvLm1wNCcsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnR5cGUpLnRvQmUoJ3ZpZGVvJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgZmlsZSBhdHRhY2htZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBuZXcgRmlsZShbJ2ZpbGUgZGF0YSddLCAnZG9jdW1lbnQucGRmJywgeyB0eXBlOiAnYXBwbGljYXRpb24vcGRmJyB9KTtcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9kb2N1bWVudC5wZGYnLFxuICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICB9O1xuXG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoYXRTZXJ2aWNlLnNlbmRBdHRhY2htZW50KHtcbiAgICAgICAgbWF0Y2hJZDogJ21hdGNoLTEyMycsXG4gICAgICAgIGF0dGFjaG1lbnRUeXBlOiAnZmlsZScsXG4gICAgICAgIGZpbGU6IG1vY2tGaWxlLFxuICAgICAgICBuYW1lOiAnZG9jdW1lbnQucGRmJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UudHlwZSkudG9CZSgnZmlsZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXR0YWNobWVudCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsnZGF0YSddLCAnZmlsZS5wZGYnLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnIH0pO1xuXG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ1VwbG9hZCBmYWlsZWQnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY2hhdFNlcnZpY2Uuc2VuZEF0dGFjaG1lbnQoe1xuICAgICAgICAgIG1hdGNoSWQ6ICdtYXRjaC0xMjMnLFxuICAgICAgICAgIGF0dGFjaG1lbnRUeXBlOiAnZmlsZScsXG4gICAgICAgICAgZmlsZTogbW9ja0ZpbGUsXG4gICAgICAgIH0pXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnVXBsb2FkIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZFZvaWNlTm90ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlbmQgdm9pY2Ugbm90ZSB3aXRoIEZvcm1EYXRhIChuYXRpdmUpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYXVkaW8nLCBuZXcgQmxvYihbJ2F1ZGlvIGRhdGEnXSwgeyB0eXBlOiAnYXVkaW8vd2VibScgfSksIHtcbiAgICAgICAgdHlwZTogJ2F1ZGlvL3dlYm0nLFxuICAgICAgfSk7XG5cbiAgICAgIChyZXF1ZXN0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGF3YWl0IGNoYXRTZXJ2aWNlLnNlbmRWb2ljZU5vdGUoJ21hdGNoLTEyMycsIGZvcm1EYXRhLCA1KTtcblxuICAgICAgZXhwZWN0KHJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL2NoYXQvdm9pY2UnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBleHBlY3QuYW55KEZvcm1EYXRhKSxcbiAgICAgICAgaGVhZGVyczoge30sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCB2b2ljZSBub3RlIHdpdGggQmxvYiAod2ViKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IG5ldyBCbG9iKFsnYXVkaW8gZGF0YSddLCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KTtcblxuICAgICAgKHJlcXVlc3QgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UodW5kZWZpbmVkKTtcblxuICAgICAgYXdhaXQgY2hhdFNlcnZpY2Uuc2VuZFZvaWNlTm90ZSgnbWF0Y2gtMTIzJywgYXVkaW9CbG9iLCA1KTtcblxuICAgICAgZXhwZWN0KHJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL2NoYXQvdm9pY2UnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBleHBlY3QuYW55KEZvcm1EYXRhKSxcbiAgICAgICAgaGVhZGVyczoge30sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCB2b2ljZSBub3RlIHdpdGggbGVnYWN5IHNpZ25hdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IG5ldyBCbG9iKFsnYXVkaW8gZGF0YSddLCB7IHR5cGU6ICdhdWRpby9tNGEnIH0pO1xuXG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vdm9pY2UubTRhJyxcbiAgICAgICAgZHVyYXRpb246IDUsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgY2hhdFNlcnZpY2Uuc2VuZFZvaWNlTm90ZSh7XG4gICAgICAgIG1hdGNoSWQ6ICdtYXRjaC0xMjMnLFxuICAgICAgICBhdWRpb0Jsb2IsXG4gICAgICAgIGR1cmF0aW9uOiA1LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9jaGF0L3ZvaWNlJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogZXhwZWN0LmFueShGb3JtRGF0YSksXG4gICAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBpbnZhbGlkIGZpbGUgdHlwZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgY2hhdFNlcnZpY2Uuc2VuZFZvaWNlTm90ZSgnbWF0Y2gtMTIzJywge30gYXMgRm9ybURhdGEsIDUpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnSW52YWxpZCBmaWxlIHR5cGUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHZvaWNlIG5vdGUgdXBsb2FkIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgIChyZXF1ZXN0IGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignVXBsb2FkIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjaGF0U2VydmljZS5zZW5kVm9pY2VOb3RlKCdtYXRjaC0xMjMnLCBmb3JtRGF0YSwgNSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdVcGxvYWQgZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZW5kVm9pY2VOb3RlTmF0aXZlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXBsb2FkIHZvaWNlIG5vdGUgdG8gUzMgYW5kIHJlZ2lzdGVyIG1lc3NhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVzaWduUmVzcG9uc2UgPSB7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vczMuZXhhbXBsZS5jb20vdXBsb2FkJyxcbiAgICAgICAga2V5OiAndm9pY2Utbm90ZXMvYWJjMTIzLndlYm0nLFxuICAgICAgfTtcblxuICAgICAgKHJlcXVlc3QgYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHByZXNpZ25SZXNwb25zZSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHN0YXR1czogMjAwIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBzdWNjZXNzOiB0cnVlIH0pO1xuXG4gICAgICAoRmlsZVN5c3RlbS51cGxvYWRBc3luYyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBib2R5OiAnVXBsb2FkZWQnLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHNlbmRWb2ljZU5vdGVOYXRpdmUoJ21hdGNoLTEyMycsIHtcbiAgICAgICAgZmlsZVVyaTogJ2ZpbGU6Ly92b2ljZS53ZWJtJyxcbiAgICAgICAgZHVyYXRpb246IDEwLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL3VwbG9hZHMvdm9pY2UvcHJlc2lnbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IHsgY29udGVudFR5cGU6ICdhdWRpby93ZWJtJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChGaWxlU3lzdGVtLnVwbG9hZEFzeW5jKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgcHJlc2lnblJlc3BvbnNlLnVybCxcbiAgICAgICAgJ2ZpbGU6Ly92b2ljZS53ZWJtJyxcbiAgICAgICAge1xuICAgICAgICAgIGh0dHBNZXRob2Q6ICdQVVQnLFxuICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhdWRpby93ZWJtJyB9LFxuICAgICAgICAgIHVwbG9hZFR5cGU6IEZpbGVTeXN0ZW0uRmlsZVN5c3RlbVVwbG9hZFR5cGUuQklOQVJZX0NPTlRFTlQsXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2NoYXQvbWF0Y2gtMTIzL3ZvaWNlLW5vdGUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiB7XG4gICAgICAgICAga2V5OiBwcmVzaWduUmVzcG9uc2Uua2V5LFxuICAgICAgICAgIGR1cmF0aW9uOiAxMCxcbiAgICAgICAgICB3YXZlZm9ybTogW10sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIFMzIHVwbG9hZCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vczMuZXhhbXBsZS5jb20vdXBsb2FkJyxcbiAgICAgICAga2V5OiAndm9pY2Utbm90ZXMvYWJjMTIzLndlYm0nLFxuICAgICAgfSk7XG5cbiAgICAgIChGaWxlU3lzdGVtLnVwbG9hZEFzeW5jIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignUzMgdXBsb2FkIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZW5kVm9pY2VOb3RlTmF0aXZlKCdtYXRjaC0xMjMnLCB7XG4gICAgICAgICAgZmlsZVVyaTogJ2ZpbGU6Ly92b2ljZS53ZWJtJyxcbiAgICAgICAgICBkdXJhdGlvbjogMTAsXG4gICAgICAgIH0pXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnUzMgdXBsb2FkIGZhaWxlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcHJlc2lnbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ1ByZXNpZ24gZmFpbGVkJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlbmRWb2ljZU5vdGVOYXRpdmUoJ21hdGNoLTEyMycsIHtcbiAgICAgICAgICBmaWxlVXJpOiAnZmlsZTovL3ZvaWNlLndlYm0nLFxuICAgICAgICAgIGR1cmF0aW9uOiAxMCxcbiAgICAgICAgfSlcbiAgICAgICkucmVqZWN0cy50b1Rocm93KCdQcmVzaWduIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBmaWxlIHVwbG9hZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZUZpbGUgPSBuZXcgRmlsZShbJ3gnLnJlcGVhdCgxMCAqIDEwMjQgKiAxMDI0KV0sICdsYXJnZS5qcGcnLCB7XG4gICAgICAgIHR5cGU6ICdpbWFnZS9qcGVnJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vbGFyZ2UuanBnJyxcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgIH07XG5cbiAgICAgIChyZXF1ZXN0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXNwb25zZSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhdFNlcnZpY2Uuc2VuZEF0dGFjaG1lbnQoe1xuICAgICAgICBtYXRjaElkOiAnbWF0Y2gtMTIzJyxcbiAgICAgICAgYXR0YWNobWVudFR5cGU6ICdpbWFnZScsXG4gICAgICAgIGZpbGU6IGxhcmdlRmlsZSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGR1cmluZyByZWFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIChyZXF1ZXN0IGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBjaGF0U2VydmljZS5zZW5kUmVhY3Rpb24oJ21hdGNoLTEyMycsICdtc2ctMTIzJywgJ+KdpO+4jycpXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnTmV0d29yayBlcnJvcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBtYXRjaCBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChyZXF1ZXN0IGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTWF0Y2ggbm90IGZvdW5kJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNoYXRTZXJ2aWNlLnNlbmRSZWFjdGlvbignaW52YWxpZC1tYXRjaCcsICdtc2ctMTIzJywgJ/CfmI0nKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ01hdGNoIG5vdCBmb3VuZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCByZWFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2VJZDogJ21zZy0xMjMnLFxuICAgICAgICByZWFjdGlvbnM6IFtdLFxuICAgICAgfTtcblxuICAgICAgKHJlcXVlc3QgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZWFjdGlvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGNoYXRTZXJ2aWNlLnNlbmRSZWFjdGlvbignbWF0Y2gtMTIzJywgJ21zZy0xMjMnLCAn8J+YjScpLFxuICAgICAgICBjaGF0U2VydmljZS5zZW5kUmVhY3Rpb24oJ21hdGNoLTEyMycsICdtc2ctMTIzJywgJ+KdpO+4jycpLFxuICAgICAgICBjaGF0U2VydmljZS5zZW5kUmVhY3Rpb24oJ21hdGNoLTEyMycsICdtc2ctMTIzJywgJ/CfkY0nKSxcbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVhY3Rpb25zKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QocmVhY3Rpb25zWzBdPy5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBhdHRhY2htZW50IG5hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBGaWxlKFsnZGF0YSddLCAnJywgeyB0eXBlOiAnaW1hZ2UvanBlZycgfSk7XG4gICAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vZmlsZScsXG4gICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICB9O1xuXG4gICAgICAocmVxdWVzdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzcG9uc2UpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoYXRTZXJ2aWNlLnNlbmRBdHRhY2htZW50KHtcbiAgICAgICAgbWF0Y2hJZDogJ21hdGNoLTEyMycsXG4gICAgICAgIGF0dGFjaG1lbnRUeXBlOiAnaW1hZ2UnLFxuICAgICAgICBmaWxlOiBtb2NrRmlsZSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFVQUEsV0FBQSxHQUFLQyxJQUFJLFdBQVc7RUFBQSxPQUFPO0lBQ3pCQyxPQUFPLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0VBQ25CLENBQUM7QUFBQSxDQUFDLENBQUM7QUFFSEosV0FBQSxHQUFLQyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7RUFBQSxPQUFPO0lBQ25DSSxXQUFXLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0VBQ3ZCLENBQUM7QUFBQSxDQUFDLENBQUM7QUFFSEosV0FBQSxHQUFLQyxJQUFJLENBQUMsb0JBQW9CLEVBQUU7RUFBQSxPQUFPO0lBQ3JDSyxNQUFNLEVBQUU7TUFDTkMsSUFBSSxFQUFFSixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ2ZJLElBQUksRUFBRUwsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUNmSyxLQUFLLEVBQUVOLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2pCO0VBQ0YsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUFDLElBQUFNLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxrQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBbkJKLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLElBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFVBQUEsR0FBQUMsdUJBQUEsQ0FBQUwsT0FBQTtBQUErQyxTQUFBSyx3QkFBQUMsQ0FBQSxFQUFBQyxDQUFBLDZCQUFBQyxPQUFBLE1BQUFDLENBQUEsT0FBQUQsT0FBQSxJQUFBRSxDQUFBLE9BQUFGLE9BQUEsWUFBQUgsdUJBQUEsWUFBQUEsd0JBQUFDLENBQUEsRUFBQUMsQ0FBQSxTQUFB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