{"version":3,"names":["_reactNative","require","_logger","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","ErrorHandler","_classCallCheck2","_createClass2","key","value","logError","error","context","logger","message","stack","timestamp","Date","toISOString","showUserNotification","title","Alert","alert","text","getUserFriendlyMessage","toLowerCase","includes","handleError","options","undefined","_options$showNotifica","showNotification","_options$logToService","logToService","userMessage","handleApiError","apiContext","enhancedContext","handleNetworkError","networkOptions","fallbackMessage","handleValidationError","validationOptions","handleAuthError","authOptions","handlePermissionError","permissionOptions","createError","code","Error","_wrapAsync","_asyncToGenerator2","asyncFn","String","wrapAsync","_x","_x2","errorHandler","exports","_default"],"sources":["errorHandler.ts"],"sourcesContent":["/**\n * Centralized Error Handler for Mobile App\n * Production-ready error handling with user notifications and logging\n */\n\nimport { Alert } from \"react-native\";\n\nimport { logger } from \"./logger\";\n\ninterface ErrorContext {\n  component: string;\n  action: string;\n  userId?: string;\n  metadata?: Record<string, unknown>;\n}\n\ninterface ApiErrorContext extends ErrorContext {\n  endpoint?: string;\n  method?: string;\n  statusCode?: number;\n}\n\ninterface ErrorHandlerOptions {\n  showNotification?: boolean;\n  logToService?: boolean;\n  fallbackMessage?: string;\n}\n\nclass ErrorHandler {\n  private logError(error: Error, context: ErrorContext): void {\n    // In production, this would send to a logging service like Sentry\n    logger.error(\"Error occurred\", {\n      message: error.message,\n      stack: error.stack,\n      context,\n      timestamp: new Date().toISOString(),\n    });\n  }\n\n  private showUserNotification(title: string, message: string): void {\n    Alert.alert(title, message, [{ text: \"OK\" }]);\n  }\n\n  private getUserFriendlyMessage(error: Error): string {\n    const message = error.message.toLowerCase();\n\n    if (message.includes(\"network\") || message.includes(\"fetch\")) {\n      return \"Please check your internet connection and try again.\";\n    }\n\n    if (message.includes(\"unauthorized\") || message.includes(\"401\")) {\n      return \"Your session has expired. Please log in again.\";\n    }\n\n    if (message.includes(\"forbidden\") || message.includes(\"403\")) {\n      return \"You don't have permission to perform this action.\";\n    }\n\n    if (message.includes(\"not found\") || message.includes(\"404\")) {\n      return \"The requested resource was not found.\";\n    }\n\n    if (message.includes(\"server\") || message.includes(\"500\")) {\n      return \"Server error occurred. Please try again later.\";\n    }\n\n    // Return the original message if it's already user-friendly\n    if (error.message.length < 100 && !error.message.includes(\"Error:\")) {\n      return error.message;\n    }\n\n    return \"An unexpected error occurred. Please try again.\";\n  }\n\n  /**\n   * Handle general errors\n   */\n  handleError(\n    error: Error,\n    context: ErrorContext,\n    options: ErrorHandlerOptions = {},\n  ): void {\n    const { showNotification = true, logToService = true } = options;\n\n    if (logToService) {\n      this.logError(error, context);\n    }\n\n    if (showNotification) {\n      const userMessage = this.getUserFriendlyMessage(error);\n      this.showUserNotification(\"Error\", userMessage);\n    }\n  }\n\n  /**\n   * Handle API-specific errors\n   */\n  handleApiError(\n    error: Error,\n    context: ErrorContext,\n    apiContext: {\n      endpoint?: string;\n      method?: string;\n      statusCode?: number;\n    },\n    options: ErrorHandlerOptions = {},\n  ): void {\n    const enhancedContext: ApiErrorContext = {\n      ...context,\n      ...apiContext,\n    };\n\n    this.handleError(error, enhancedContext, options);\n  }\n\n  /**\n   * Handle network errors\n   */\n  handleNetworkError(\n    error: Error,\n    context: ErrorContext,\n    options: ErrorHandlerOptions = {},\n  ): void {\n    const networkOptions: ErrorHandlerOptions = {\n      ...options,\n      fallbackMessage:\n        \"Network error. Please check your connection and try again.\",\n    };\n\n    this.handleError(error, context, networkOptions);\n  }\n\n  /**\n   * Handle validation errors\n   */\n  handleValidationError(\n    error: Error,\n    context: ErrorContext,\n    options: ErrorHandlerOptions = {},\n  ): void {\n    const validationOptions: ErrorHandlerOptions = {\n      ...options,\n      fallbackMessage: \"Please check your input and try again.\",\n    };\n\n    this.handleError(error, context, validationOptions);\n  }\n\n  /**\n   * Handle authentication errors\n   */\n  handleAuthError(\n    error: Error,\n    context: ErrorContext,\n    options: ErrorHandlerOptions = {},\n  ): void {\n    const authOptions: ErrorHandlerOptions = {\n      ...options,\n      fallbackMessage: \"Authentication failed. Please log in again.\",\n    };\n\n    this.handleError(error, context, authOptions);\n  }\n\n  /**\n   * Handle permission errors\n   */\n  handlePermissionError(\n    error: Error,\n    context: ErrorContext,\n    options: ErrorHandlerOptions = {},\n  ): void {\n    const permissionOptions: ErrorHandlerOptions = {\n      ...options,\n      fallbackMessage: \"You don't have permission to perform this action.\",\n    };\n\n    this.handleError(error, context, permissionOptions);\n  }\n\n  /**\n   * Create a typed error with context\n   */\n  createError(message: string, code?: string): Error {\n    const error = new Error(message);\n    if (code !== undefined && code !== \"\") {\n      (error as Error & { code?: string }).code = code;\n    }\n    return error;\n  }\n\n  /**\n   * Wrap async functions with error handling\n   */\n  async wrapAsync<T>(\n    asyncFn: () => Promise<T>,\n    context: ErrorContext,\n    options: ErrorHandlerOptions = {},\n  ): Promise<T | null> {\n    try {\n      return await asyncFn();\n    } catch (error) {\n      this.handleError(\n        error instanceof Error ? error : new Error(String(error)),\n        context,\n        options,\n      );\n      return null;\n    }\n  }\n}\n\n// Export singleton instance\nexport const errorHandler = new ErrorHandler();\nexport default errorHandler;\n"],"mappings":"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","ignoreList":[]}