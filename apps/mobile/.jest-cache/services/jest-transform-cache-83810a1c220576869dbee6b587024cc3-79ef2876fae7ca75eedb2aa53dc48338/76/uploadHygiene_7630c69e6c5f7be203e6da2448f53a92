92fd32629d0197e1bf6c81d55d80ab42
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DEFAULT_OPTIONS = void 0;
exports.captureAndProcessImage = captureAndProcessImage;
exports.checkUploadQuota = checkUploadQuota;
exports.pickAndProcessImage = pickAndProcessImage;
exports.processImageForUpload = processImageForUpload;
exports.uploadWithRetry = uploadWithRetry;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var ImagePicker = _interopRequireWildcard(require("expo-image-picker"));
var ImageManipulator = _interopRequireWildcard(require("expo-image-manipulator"));
var FileSystem = _interopRequireWildcard(require("expo-file-system"));
var _logger = require("./logger");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t2 in e) "default" !== _t2 && {}.hasOwnProperty.call(e, _t2) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t2)) && (i.get || i.set) ? o(f, _t2, i) : f[_t2] = e[_t2]); return f; })(e, t); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var DEFAULT_OPTIONS = exports.DEFAULT_OPTIONS = {
  maxDimension: 2048,
  quality: 0.9,
  aspectRatio: [4, 3],
  stripExif: true,
  cropToAspect: true
};
function validateMimeType(_x) {
  return _validateMimeType.apply(this, arguments);
}
function _validateMimeType() {
  _validateMimeType = (0, _asyncToGenerator2.default)(function* (uri) {
    try {
      var fileInfo = yield FileSystem.getInfoAsync(uri);
      var isFile = fileInfo.exists && !fileInfo.isDirectory;
      if (isFile) {
        var ext = uri.split('.').pop();
        var validExtensions = ['jpg', 'jpeg', 'png', 'webp'];
        var mimeTypes = {
          jpg: 'image/jpeg',
          jpeg: 'image/jpeg',
          png: 'image/png',
          webp: 'image/webp'
        };
        if (typeof ext === 'string') {
          var normalizedExt = ext.toLowerCase();
          if (validExtensions.includes(normalizedExt)) {
            return {
              valid: true,
              mimeType: mimeTypes[normalizedExt]
            };
          }
        }
      }
      return {
        valid: false,
        mimeType: 'unknown'
      };
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('MIME validation error', {
        error: err
      });
      return {
        valid: false,
        mimeType: 'unknown'
      };
    }
  });
  return _validateMimeType.apply(this, arguments);
}
function fixOrientation(_x2) {
  return _fixOrientation.apply(this, arguments);
}
function _fixOrientation() {
  _fixOrientation = (0, _asyncToGenerator2.default)(function* (imageUri) {
    try {
      var result = yield ImageManipulator.manipulateAsync(imageUri, [], {
        compress: 1,
        format: ImageManipulator.SaveFormat.JPEG
      });
      return result.uri;
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Orientation fix error', {
        error: err
      });
      return imageUri;
    }
  });
  return _fixOrientation.apply(this, arguments);
}
function resizeImage(_x3, _x4) {
  return _resizeImage.apply(this, arguments);
}
function _resizeImage() {
  _resizeImage = (0, _asyncToGenerator2.default)(function* (imageUri, maxDimension) {
    try {
      var manipulateResult = yield ImageManipulator.manipulateAsync(imageUri, [], {
        compress: 1,
        format: ImageManipulator.SaveFormat.JPEG
      });
      var width = manipulateResult.width,
        height = manipulateResult.height;
      var newWidth = width;
      var newHeight = height;
      if (width > maxDimension || height > maxDimension) {
        if (width > height) {
          newWidth = maxDimension;
          newHeight = Math.round(height / width * maxDimension);
        } else {
          newHeight = maxDimension;
          newWidth = Math.round(width / height * maxDimension);
        }
      }
      if (newWidth < width || newHeight < height) {
        return yield ImageManipulator.manipulateAsync(imageUri, [{
          resize: {
            width: newWidth,
            height: newHeight
          }
        }], {
          compress: 1,
          format: ImageManipulator.SaveFormat.JPEG
        });
      }
      return manipulateResult;
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Resize error', {
        error: err
      });
      throw err;
    }
  });
  return _resizeImage.apply(this, arguments);
}
function cropToAspectRatio(_x5, _x6, _x7, _x8) {
  return _cropToAspectRatio.apply(this, arguments);
}
function _cropToAspectRatio() {
  _cropToAspectRatio = (0, _asyncToGenerator2.default)(function* (imageUri, aspectRatio, width, height) {
    try {
      var _aspectRatio = (0, _slicedToArray2.default)(aspectRatio, 2),
        targetWidth = _aspectRatio[0],
        targetHeight = _aspectRatio[1];
      var targetAspect = targetWidth / targetHeight;
      var imageAspect = width / height;
      var cropRegion = {
        crop: {
          originX: 0,
          originY: 0,
          width: width,
          height: height
        }
      };
      if (Math.abs(imageAspect - targetAspect) > 0.01) {
        if (imageAspect > targetAspect) {
          var newWidth = height * targetAspect;
          var originX = (width - newWidth) / 2;
          cropRegion = {
            crop: {
              originX: originX,
              originY: 0,
              width: newWidth,
              height: height
            }
          };
        } else {
          var newHeight = width / targetAspect;
          var originY = (height - newHeight) / 2;
          cropRegion = {
            crop: {
              originX: 0,
              originY: originY,
              width: width,
              height: newHeight
            }
          };
        }
      }
      return yield ImageManipulator.manipulateAsync(imageUri, [cropRegion], {
        compress: 1,
        format: ImageManipulator.SaveFormat.JPEG
      });
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Crop error', {
        error: err
      });
      throw err;
    }
  });
  return _cropToAspectRatio.apply(this, arguments);
}
function compressImage(_x9, _x0) {
  return _compressImage.apply(this, arguments);
}
function _compressImage() {
  _compressImage = (0, _asyncToGenerator2.default)(function* (imageUri, quality) {
    try {
      return yield ImageManipulator.manipulateAsync(imageUri, [], {
        compress: quality,
        format: ImageManipulator.SaveFormat.JPEG
      });
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Compress error', {
        error: err
      });
      throw err;
    }
  });
  return _compressImage.apply(this, arguments);
}
function getFileInfo(_x1) {
  return _getFileInfo.apply(this, arguments);
}
function _getFileInfo() {
  _getFileInfo = (0, _asyncToGenerator2.default)(function* (uri) {
    try {
      var info = yield FileSystem.getInfoAsync(uri);
      if (info.exists && 'size' in info) {
        return {
          size: info.size,
          exists: info.exists
        };
      }
      return {
        size: 0,
        exists: false
      };
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('File info error', {
        error: err
      });
      return {
        size: 0,
        exists: false
      };
    }
  });
  return _getFileInfo.apply(this, arguments);
}
function processImageForUpload(_x10) {
  return _processImageForUpload.apply(this, arguments);
}
function _processImageForUpload() {
  _processImageForUpload = (0, _asyncToGenerator2.default)(function* (imageUri) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var opts = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options);
    try {
      _logger.logger.info('Starting upload hygiene processing', {
        uri: imageUri
      });
      var mimeValidation = yield validateMimeType(imageUri);
      if (!mimeValidation.valid) {
        throw new Error(`Invalid file type: ${mimeValidation.mimeType}`);
      }
      _logger.logger.debug('MIME type validated', {
        mimeType: mimeValidation.mimeType
      });
      var orientationFixed = yield fixOrientation(imageUri);
      _logger.logger.debug('Orientation fixed');
      var initialManipulate = yield ImageManipulator.manipulateAsync(orientationFixed, [], {
        compress: 1,
        format: ImageManipulator.SaveFormat.JPEG
      });
      var originalWidth = initialManipulate.width;
      var originalHeight = initialManipulate.height;
      _logger.logger.debug('Original dimensions', {
        width: originalWidth,
        height: originalHeight
      });
      var resized = yield resizeImage(orientationFixed, opts.maxDimension);
      _logger.logger.debug('Image resized', {
        width: resized.width,
        height: resized.height
      });
      var cropped = resized;
      if (opts.cropToAspect) {
        cropped = yield cropToAspectRatio(resized.uri, opts.aspectRatio, resized.width, resized.height);
        _logger.logger.debug('Image cropped', {
          aspectRatio: opts.aspectRatio
        });
      }
      var compressed = yield compressImage(cropped.uri, opts.quality);
      _logger.logger.debug('Image compressed', {
        quality: opts.quality
      });
      var fileInfo = yield getFileInfo(compressed.uri);
      var result = {
        uri: compressed.uri,
        width: compressed.width,
        height: compressed.height,
        fileSize: fileInfo.size,
        mimeType: 'image/jpeg',
        metadata: {
          originalWidth: originalWidth,
          originalHeight: originalHeight,
          orientationFixed: true,
          exifStripped: opts.stripExif ? true : false
        }
      };
      _logger.logger.info('Upload hygiene complete', {
        finalSize: `${result.width}x${result.height}`,
        fileSize: `${(result.fileSize / 1024).toFixed(2)} KB`,
        mimeType: result.mimeType,
        metadata: result.metadata
      });
      return result;
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Upload hygiene processing failed', {
        error: err
      });
      throw err;
    }
  });
  return _processImageForUpload.apply(this, arguments);
}
function pickAndProcessImage() {
  return _pickAndProcessImage.apply(this, arguments);
}
function _pickAndProcessImage() {
  _pickAndProcessImage = (0, _asyncToGenerator2.default)(function* () {
    var allowEditing = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    try {
      var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),
        status = _yield$ImagePicker$re.status;
      if (status !== 'granted') {
        throw new Error('Camera roll permissions not granted');
      }
      var result = yield ImagePicker.launchImageLibraryAsync({
        mediaTypes: ImagePicker.MediaTypeOptions.Images,
        allowsEditing: allowEditing,
        quality: 1,
        allowsMultipleSelection: false
      });
      if (result.canceled || !result.assets[0]) {
        return null;
      }
      var asset = result.assets[0];
      return yield processImageForUpload(asset.uri, options);
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Pick and process error', {
        error: err
      });
      throw err;
    }
  });
  return _pickAndProcessImage.apply(this, arguments);
}
function captureAndProcessImage() {
  return _captureAndProcessImage.apply(this, arguments);
}
function _captureAndProcessImage() {
  _captureAndProcessImage = (0, _asyncToGenerator2.default)(function* () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    try {
      var _yield$ImagePicker$re2 = yield ImagePicker.requestCameraPermissionsAsync(),
        status = _yield$ImagePicker$re2.status;
      if (status !== 'granted') {
        throw new Error('Camera permissions not granted');
      }
      var result = yield ImagePicker.launchCameraAsync({
        mediaTypes: ImagePicker.MediaTypeOptions.Images,
        allowsEditing: false,
        quality: 1
      });
      if (result.canceled || !result.assets[0]) {
        return null;
      }
      var asset = result.assets[0];
      return yield processImageForUpload(asset.uri, options);
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Capture and process error', {
        error: err
      });
      throw err;
    }
  });
  return _captureAndProcessImage.apply(this, arguments);
}
function checkUploadQuota(_x11) {
  return _checkUploadQuota.apply(this, arguments);
}
function _checkUploadQuota() {
  _checkUploadQuota = (0, _asyncToGenerator2.default)(function* (userId) {
    try {
      return {
        allowed: true,
        remaining: 10,
        resetAt: new Date(Date.now() + 24 * 60 * 60 * 1000),
        limit: 10
      };
    } catch (error) {
      var err = error instanceof Error ? error : new Error(String(error));
      _logger.logger.error('Quota check error', {
        error: err,
        userId: userId
      });
      throw err;
    }
  });
  return _checkUploadQuota.apply(this, arguments);
}
function uploadWithRetry(_x12) {
  return _uploadWithRetry.apply(this, arguments);
}
function _uploadWithRetry() {
  _uploadWithRetry = (0, _asyncToGenerator2.default)(function* (uploadFn) {
    var maxRetries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;
    var backoffMs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;
    var lastError = null;
    var _loop = function* _loop() {
        try {
          return {
            v: yield uploadFn()
          };
        } catch (error) {
          lastError = error instanceof Error ? error : new Error(String(error));
          if (attempt < maxRetries) {
            var delay = backoffMs * Math.pow(2, attempt - 1);
            _logger.logger.warn('Upload failed, retrying', {
              delay: delay,
              attempt: attempt,
              maxRetries: maxRetries,
              error: lastError
            });
            yield new Promise(function (resolve) {
              return setTimeout(resolve, delay);
            });
          }
        }
      },
      _ret;
    for (var attempt = 1; attempt <= maxRetries; attempt++) {
      _ret = yield* _loop();
      if (_ret) return _ret.v;
    }
    throw lastError || new Error('Upload failed after retries');
  });
  return _uploadWithRetry.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbWFnZVBpY2tlciIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIkltYWdlTWFuaXB1bGF0b3IiLCJGaWxlU3lzdGVtIiwiX2xvZ2dlciIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdDIiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiREVGQVVMVF9PUFRJT05TIiwiZXhwb3J0cyIsIm1heERpbWVuc2lvbiIsInF1YWxpdHkiLCJhc3BlY3RSYXRpbyIsInN0cmlwRXhpZiIsImNyb3BUb0FzcGVjdCIsInZhbGlkYXRlTWltZVR5cGUiLCJfeCIsIl92YWxpZGF0ZU1pbWVUeXBlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwidXJpIiwiZmlsZUluZm8iLCJnZXRJbmZvQXN5bmMiLCJpc0ZpbGUiLCJleGlzdHMiLCJpc0RpcmVjdG9yeSIsImV4dCIsInNwbGl0IiwicG9wIiwidmFsaWRFeHRlbnNpb25zIiwibWltZVR5cGVzIiwianBnIiwianBlZyIsInBuZyIsIndlYnAiLCJub3JtYWxpemVkRXh0IiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInZhbGlkIiwibWltZVR5cGUiLCJlcnJvciIsImVyciIsIkVycm9yIiwiU3RyaW5nIiwibG9nZ2VyIiwiZml4T3JpZW50YXRpb24iLCJfeDIiLCJfZml4T3JpZW50YXRpb24iLCJpbWFnZVVyaSIsInJlc3VsdCIsIm1hbmlwdWxhdGVBc3luYyIsImNvbXByZXNzIiwiZm9ybWF0IiwiU2F2ZUZvcm1hdCIsIkpQRUciLCJyZXNpemVJbWFnZSIsIl94MyIsIl94NCIsIl9yZXNpemVJbWFnZSIsIm1hbmlwdWxhdGVSZXN1bHQiLCJ3aWR0aCIsImhlaWdodCIsIm5ld1dpZHRoIiwibmV3SGVpZ2h0IiwiTWF0aCIsInJvdW5kIiwicmVzaXplIiwiY3JvcFRvQXNwZWN0UmF0aW8iLCJfeDUiLCJfeDYiLCJfeDciLCJfeDgiLCJfY3JvcFRvQXNwZWN0UmF0aW8iLCJfYXNwZWN0UmF0aW8iLCJfc2xpY2VkVG9BcnJheTIiLCJ0YXJnZXRXaWR0aCIsInRhcmdldEhlaWdodCIsInRhcmdldEFzcGVjdCIsImltYWdlQXNwZWN0IiwiY3JvcFJlZ2lvbiIsImNyb3AiLCJvcmlnaW5YIiwib3JpZ2luWSIsImFicyIsImNvbXByZXNzSW1hZ2UiLCJfeDkiLCJfeDAiLCJfY29tcHJlc3NJbWFnZSIsImdldEZpbGVJbmZvIiwiX3gxIiwiX2dldEZpbGVJbmZvIiwiaW5mbyIsInNpemUiLCJwcm9jZXNzSW1hZ2VGb3JVcGxvYWQiLCJfeDEwIiwiX3Byb2Nlc3NJbWFnZUZvclVwbG9hZCIsIm9wdGlvbnMiLCJ1bmRlZmluZWQiLCJvcHRzIiwibWltZVZhbGlkYXRpb24iLCJkZWJ1ZyIsIm9yaWVudGF0aW9uRml4ZWQiLCJpbml0aWFsTWFuaXB1bGF0ZSIsIm9yaWdpbmFsV2lkdGgiLCJvcmlnaW5hbEhlaWdodCIsInJlc2l6ZWQiLCJjcm9wcGVkIiwiY29tcHJlc3NlZCIsImZpbGVTaXplIiwibWV0YWRhdGEiLCJleGlmU3RyaXBwZWQiLCJmaW5hbFNpemUiLCJ0b0ZpeGVkIiwicGlja0FuZFByb2Nlc3NJbWFnZSIsIl9waWNrQW5kUHJvY2Vzc0ltYWdlIiwiYWxsb3dFZGl0aW5nIiwiX3lpZWxkJEltYWdlUGlja2VyJHJlIiwicmVxdWVzdE1lZGlhTGlicmFyeVBlcm1pc3Npb25zQXN5bmMiLCJzdGF0dXMiLCJsYXVuY2hJbWFnZUxpYnJhcnlBc3luYyIsIm1lZGlhVHlwZXMiLCJNZWRpYVR5cGVPcHRpb25zIiwiSW1hZ2VzIiwiYWxsb3dzRWRpdGluZyIsImFsbG93c011bHRpcGxlU2VsZWN0aW9uIiwiY2FuY2VsZWQiLCJhc3NldHMiLCJhc3NldCIsImNhcHR1cmVBbmRQcm9jZXNzSW1hZ2UiLCJfY2FwdHVyZUFuZFByb2Nlc3NJbWFnZSIsIl95aWVsZCRJbWFnZVBpY2tlciRyZTIiLCJyZXF1ZXN0Q2FtZXJhUGVybWlzc2lvbnNBc3luYyIsImxhdW5jaENhbWVyYUFzeW5jIiwiY2hlY2tVcGxvYWRRdW90YSIsIl94MTEiLCJfY2hlY2tVcGxvYWRRdW90YSIsInVzZXJJZCIsImFsbG93ZWQiLCJyZW1haW5pbmciLCJyZXNldEF0IiwiRGF0ZSIsIm5vdyIsImxpbWl0IiwidXBsb2FkV2l0aFJldHJ5IiwiX3gxMiIsIl91cGxvYWRXaXRoUmV0cnkiLCJ1cGxvYWRGbiIsIm1heFJldHJpZXMiLCJiYWNrb2ZmTXMiLCJsYXN0RXJyb3IiLCJfbG9vcCIsInYiLCJhdHRlbXB0IiwiZGVsYXkiLCJwb3ciLCJ3YXJuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiX3JldCJdLCJzb3VyY2VzIjpbInVwbG9hZEh5Z2llbmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVcGxvYWQgSHlnaWVuZSBTZXJ2aWNlIC0gQ2xpZW50LVNpZGUgUHJlLVVwbG9hZCBQcm9jZXNzaW5nXG4gKiBcbiAqIEltcGxlbWVudHMgcHJvZmVzc2lvbmFsLWdyYWRlIHVwbG9hZCBoeWdpZW5lIGFzIHBlciBibHVlcHJpbnQ6XG4gKiAtIEZpbGUgdHlwZSB2YWxpZGF0aW9uIChNSU1FIHNuaWZmaW5nKVxuICogLSBFWElGIG9yaWVudGF0aW9uIGZpeFxuICogLSBNYXggZGltZW5zaW9ucyAoMjA0OHB4IGxvbmcgZWRnZSlcbiAqIC0gSlBFRyByZS1lbmNvZGUgQCA4NS05MCBxdWFsaXR5XG4gKiAtIEVuZm9yY2UgNDozIGNyb3AgZm9yIHByaW1hcmllc1xuICogLSBTdHJpcCBFWElGIG1ldGFkYXRhIChHUFMsIGV0Yy4pXG4gKiAtIFByaXZhY3ktZmlyc3QgcGVybWlzc2lvbiBwcm9tcHRzXG4gKi9cblxuaW1wb3J0ICogYXMgSW1hZ2VQaWNrZXIgZnJvbSAnZXhwby1pbWFnZS1waWNrZXInO1xuaW1wb3J0ICogYXMgSW1hZ2VNYW5pcHVsYXRvciBmcm9tICdleHBvLWltYWdlLW1hbmlwdWxhdG9yJztcbmltcG9ydCAqIGFzIEZpbGVTeXN0ZW0gZnJvbSAnZXhwby1maWxlLXN5c3RlbSc7XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkSHlnaWVuZU9wdGlvbnMge1xuICBtYXhEaW1lbnNpb24/OiBudW1iZXI7XG4gIHF1YWxpdHk/OiBudW1iZXI7XG4gIGFzcGVjdFJhdGlvPzogW251bWJlciwgbnVtYmVyXTtcbiAgc3RyaXBFeGlmPzogYm9vbGVhbjtcbiAgY3JvcFRvQXNwZWN0PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9jZXNzZWRJbWFnZSB7XG4gIHVyaTogc3RyaW5nO1xuICBiYXNlNjQ/OiBzdHJpbmc7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuICBmaWxlU2l6ZTogbnVtYmVyO1xuICBtaW1lVHlwZTogc3RyaW5nO1xuICBtZXRhZGF0YToge1xuICAgIG9yaWdpbmFsV2lkdGg6IG51bWJlcjtcbiAgICBvcmlnaW5hbEhlaWdodDogbnVtYmVyO1xuICAgIG9yaWVudGF0aW9uPzogbnVtYmVyO1xuICAgIG9yaWVudGF0aW9uRml4ZWQ6IGJvb2xlYW47XG4gICAgZXhpZlN0cmlwcGVkOiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUFRJT05TOiBVcGxvYWRIeWdpZW5lT3B0aW9ucyA9IHtcbiAgbWF4RGltZW5zaW9uOiAyMDQ4LFxuICBxdWFsaXR5OiAwLjksXG4gIGFzcGVjdFJhdGlvOiBbNCwgM10sXG4gIHN0cmlwRXhpZjogdHJ1ZSxcbiAgY3JvcFRvQXNwZWN0OiB0cnVlLFxufTtcblxuLyoqXG4gKiBWYWxpZGF0ZSBNSU1FIHR5cGUgdmlhIGZpbGUgc2lnbmF0dXJlIHNuaWZmaW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlTWltZVR5cGUodXJpOiBzdHJpbmcpOiBQcm9taXNlPHsgdmFsaWQ6IGJvb2xlYW47IG1pbWVUeXBlOiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIC8vIFJlYWQgZmlyc3QgYnl0ZXMgZm9yIHNpZ25hdHVyZSBkZXRlY3Rpb25cbiAgICBjb25zdCBmaWxlSW5mbyA9IGF3YWl0IEZpbGVTeXN0ZW0uZ2V0SW5mb0FzeW5jKHVyaSk7XG4gICAgY29uc3QgaXNGaWxlID0gZmlsZUluZm8uZXhpc3RzICYmICFmaWxlSW5mby5pc0RpcmVjdG9yeTtcblxuICAgIGlmIChpc0ZpbGUpIHtcbiAgICAgIC8vIEJhc2ljIEpQRUcsIFBORyB2YWxpZGF0aW9uIGJhc2VkIG9uIGZpbGUgZXh0ZW5zaW9uXG4gICAgICBjb25zdCBleHQgPSB1cmkuc3BsaXQoJy4nKS5wb3AoKTtcblxuICAgICAgY29uc3QgdmFsaWRFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCAnd2VicCddIGFzIGNvbnN0O1xuICAgICAgY29uc3QgbWltZVR5cGVzOiBSZWNvcmQ8KHR5cGVvZiB2YWxpZEV4dGVuc2lvbnMpW251bWJlcl0sIHN0cmluZz4gPSB7XG4gICAgICAgIGpwZzogJ2ltYWdlL2pwZWcnLFxuICAgICAgICBqcGVnOiAnaW1hZ2UvanBlZycsXG4gICAgICAgIHBuZzogJ2ltYWdlL3BuZycsXG4gICAgICAgIHdlYnA6ICdpbWFnZS93ZWJwJyxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0eXBlb2YgZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkRXh0ID0gZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICgodmFsaWRFeHRlbnNpb25zIGFzIHJlYWRvbmx5IHN0cmluZ1tdKS5pbmNsdWRlcyhub3JtYWxpemVkRXh0KSkge1xuICAgICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBtaW1lVHlwZTogbWltZVR5cGVzW25vcm1hbGl6ZWRFeHQgYXMgKHR5cGVvZiB2YWxpZEV4dGVuc2lvbnMpW251bWJlcl1dIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtaW1lVHlwZTogJ3Vua25vd24nIH07XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc3QgZXJyID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgIGxvZ2dlci5lcnJvcignTUlNRSB2YWxpZGF0aW9uIGVycm9yJywgeyBlcnJvcjogZXJyIH0pO1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWltZVR5cGU6ICd1bmtub3duJyB9O1xuICB9XG59XG5cbi8qKlxuICogRml4IEVYSUYgb3JpZW50YXRpb24gaXNzdWVzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZpeE9yaWVudGF0aW9uKGltYWdlVXJpOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIEdldCBpbWFnZSBtZXRhZGF0YSB0byBjaGVjayBvcmllbnRhdGlvblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEltYWdlTWFuaXB1bGF0b3IubWFuaXB1bGF0ZUFzeW5jKFxuICAgICAgaW1hZ2VVcmksXG4gICAgICBbXSxcbiAgICAgIHsgY29tcHJlc3M6IDEsIGZvcm1hdDogSW1hZ2VNYW5pcHVsYXRvci5TYXZlRm9ybWF0LkpQRUcgfVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzdWx0LnVyaTtcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zdCBlcnIgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG4gICAgbG9nZ2VyLmVycm9yKCdPcmllbnRhdGlvbiBmaXggZXJyb3InLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgcmV0dXJuIGltYWdlVXJpO1xuICB9XG59XG5cbi8qKlxuICogUmVzaXplIGltYWdlIHRvIG1heCBkaW1lbnNpb25zIHdoaWxlIHByZXNlcnZpbmcgYXNwZWN0IHJhdGlvXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlc2l6ZUltYWdlKFxuICBpbWFnZVVyaTogc3RyaW5nLFxuICBtYXhEaW1lbnNpb246IG51bWJlclxuKTogUHJvbWlzZTxJbWFnZU1hbmlwdWxhdG9yLkltYWdlUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IG9yaWdpbmFsIGRpbWVuc2lvbnNcbiAgICBjb25zdCBtYW5pcHVsYXRlUmVzdWx0ID0gYXdhaXQgSW1hZ2VNYW5pcHVsYXRvci5tYW5pcHVsYXRlQXN5bmMoXG4gICAgICBpbWFnZVVyaSxcbiAgICAgIFtdLFxuICAgICAgeyBjb21wcmVzczogMSwgZm9ybWF0OiBJbWFnZU1hbmlwdWxhdG9yLlNhdmVGb3JtYXQuSlBFRyB9XG4gICAgKTtcblxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gbWFuaXB1bGF0ZVJlc3VsdDtcblxuICAgIC8vIENhbGN1bGF0ZSBuZXcgZGltZW5zaW9uc1xuICAgIGxldCBuZXdXaWR0aCA9IHdpZHRoO1xuICAgIGxldCBuZXdIZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICBpZiAod2lkdGggPiBtYXhEaW1lbnNpb24gfHwgaGVpZ2h0ID4gbWF4RGltZW5zaW9uKSB7XG4gICAgICBpZiAod2lkdGggPiBoZWlnaHQpIHtcbiAgICAgICAgbmV3V2lkdGggPSBtYXhEaW1lbnNpb247XG4gICAgICAgIG5ld0hlaWdodCA9IE1hdGgucm91bmQoKGhlaWdodCAvIHdpZHRoKSAqIG1heERpbWVuc2lvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdIZWlnaHQgPSBtYXhEaW1lbnNpb247XG4gICAgICAgIG5ld1dpZHRoID0gTWF0aC5yb3VuZCgod2lkdGggLyBoZWlnaHQpICogbWF4RGltZW5zaW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPbmx5IHJlc2l6ZSBpZiBuZWNlc3NhcnlcbiAgICBpZiAobmV3V2lkdGggPCB3aWR0aCB8fCBuZXdIZWlnaHQgPCBoZWlnaHQpIHtcbiAgICAgIHJldHVybiBhd2FpdCBJbWFnZU1hbmlwdWxhdG9yLm1hbmlwdWxhdGVBc3luYyhcbiAgICAgICAgaW1hZ2VVcmksXG4gICAgICAgIFt7IHJlc2l6ZTogeyB3aWR0aDogbmV3V2lkdGgsIGhlaWdodDogbmV3SGVpZ2h0IH0gfV0sXG4gICAgICAgIHsgY29tcHJlc3M6IDEsIGZvcm1hdDogSW1hZ2VNYW5pcHVsYXRvci5TYXZlRm9ybWF0LkpQRUcgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFuaXB1bGF0ZVJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zdCBlcnIgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG4gICAgbG9nZ2VyLmVycm9yKCdSZXNpemUgZXJyb3InLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qKlxuICogQ3JvcCB0byBhc3BlY3QgcmF0aW9cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JvcFRvQXNwZWN0UmF0aW8oXG4gIGltYWdlVXJpOiBzdHJpbmcsXG4gIGFzcGVjdFJhdGlvOiBbbnVtYmVyLCBudW1iZXJdLFxuICB3aWR0aDogbnVtYmVyLFxuICBoZWlnaHQ6IG51bWJlclxuKTogUHJvbWlzZTxJbWFnZU1hbmlwdWxhdG9yLkltYWdlUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgW3RhcmdldFdpZHRoLCB0YXJnZXRIZWlnaHRdID0gYXNwZWN0UmF0aW87XG4gICAgY29uc3QgdGFyZ2V0QXNwZWN0ID0gdGFyZ2V0V2lkdGggLyB0YXJnZXRIZWlnaHQ7XG4gICAgY29uc3QgaW1hZ2VBc3BlY3QgPSB3aWR0aCAvIGhlaWdodDtcblxuICAgIGxldCBjcm9wUmVnaW9uOiBJbWFnZU1hbmlwdWxhdG9yLkFjdGlvbkNyb3AgPSB7IGNyb3A6IHsgb3JpZ2luWDogMCwgb3JpZ2luWTogMCwgd2lkdGgsIGhlaWdodCB9IH07XG5cbiAgICBpZiAoTWF0aC5hYnMoaW1hZ2VBc3BlY3QgLSB0YXJnZXRBc3BlY3QpID4gMC4wMSkge1xuICAgICAgLy8gTmVlZHMgY3JvcHBpbmdcbiAgICAgIGlmIChpbWFnZUFzcGVjdCA+IHRhcmdldEFzcGVjdCkge1xuICAgICAgICAvLyBJbWFnZSBpcyB3aWRlciwgY3JvcCBzaWRlc1xuICAgICAgICBjb25zdCBuZXdXaWR0aCA9IGhlaWdodCAqIHRhcmdldEFzcGVjdDtcbiAgICAgICAgY29uc3Qgb3JpZ2luWCA9ICh3aWR0aCAtIG5ld1dpZHRoKSAvIDI7XG4gICAgICAgIGNyb3BSZWdpb24gPSB7XG4gICAgICAgICAgY3JvcDogeyBvcmlnaW5YLCBvcmlnaW5ZOiAwLCB3aWR0aDogbmV3V2lkdGgsIGhlaWdodCB9LFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSW1hZ2UgaXMgdGFsbGVyLCBjcm9wIHRvcC9ib3R0b21cbiAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gd2lkdGggLyB0YXJnZXRBc3BlY3Q7XG4gICAgICAgIGNvbnN0IG9yaWdpblkgPSAoaGVpZ2h0IC0gbmV3SGVpZ2h0KSAvIDI7XG4gICAgICAgIGNyb3BSZWdpb24gPSB7XG4gICAgICAgICAgY3JvcDogeyBvcmlnaW5YOiAwLCBvcmlnaW5ZLCB3aWR0aCwgaGVpZ2h0OiBuZXdIZWlnaHQgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgSW1hZ2VNYW5pcHVsYXRvci5tYW5pcHVsYXRlQXN5bmMoXG4gICAgICBpbWFnZVVyaSxcbiAgICAgIFtjcm9wUmVnaW9uXSxcbiAgICAgIHsgY29tcHJlc3M6IDEsIGZvcm1hdDogSW1hZ2VNYW5pcHVsYXRvci5TYXZlRm9ybWF0LkpQRUcgfVxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc3QgZXJyID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgIGxvZ2dlci5lcnJvcignQ3JvcCBlcnJvcicsIHsgZXJyb3I6IGVyciB9KTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21wcmVzcyBhbmQgb3B0aW1pemUgaW1hZ2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29tcHJlc3NJbWFnZShcbiAgaW1hZ2VVcmk6IHN0cmluZyxcbiAgcXVhbGl0eTogbnVtYmVyXG4pOiBQcm9taXNlPEltYWdlTWFuaXB1bGF0b3IuSW1hZ2VSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgSW1hZ2VNYW5pcHVsYXRvci5tYW5pcHVsYXRlQXN5bmMoXG4gICAgICBpbWFnZVVyaSxcbiAgICAgIFtdLFxuICAgICAge1xuICAgICAgICBjb21wcmVzczogcXVhbGl0eSxcbiAgICAgICAgZm9ybWF0OiBJbWFnZU1hbmlwdWxhdG9yLlNhdmVGb3JtYXQuSlBFRyxcbiAgICAgICAgLy8gTk9URTogZXhwby1pbWFnZS1tYW5pcHVsYXRvciBkb2Vzbid0IGZ1bGx5IHN0cmlwIEVYSUZcbiAgICAgICAgLy8gRm9yIGNvbXBsZXRlIEVYSUYgc3RyaXBwaW5nLCB5b3UnZCBuZWVkIGEgbmF0aXZlIG1vZHVsZSBvciBiYWNrZW5kIHByb2Nlc3NpbmdcbiAgICAgIH1cbiAgICApO1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGVyciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcbiAgICBsb2dnZXIuZXJyb3IoJ0NvbXByZXNzIGVycm9yJywgeyBlcnJvcjogZXJyIH0pO1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBmaWxlIGluZm8gaW5jbHVkaW5nIHNpemVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RmlsZUluZm8odXJpOiBzdHJpbmcpOiBQcm9taXNlPHsgc2l6ZTogbnVtYmVyOyBleGlzdHM6IGJvb2xlYW4gfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBGaWxlU3lzdGVtLmdldEluZm9Bc3luYyh1cmkpO1xuICAgIGlmIChpbmZvLmV4aXN0cyAmJiAnc2l6ZScgaW4gaW5mbykge1xuICAgICAgcmV0dXJuIHsgc2l6ZTogaW5mby5zaXplLCBleGlzdHM6IGluZm8uZXhpc3RzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHNpemU6IDAsIGV4aXN0czogZmFsc2UgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zdCBlcnIgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSk7XG4gICAgbG9nZ2VyLmVycm9yKCdGaWxlIGluZm8gZXJyb3InLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgcmV0dXJuIHsgc2l6ZTogMCwgZXhpc3RzOiBmYWxzZSB9O1xuICB9XG59XG5cbi8qKlxuICogUHJvY2VzcyBpbWFnZSB3aXRoIGZ1bGwgdXBsb2FkIGh5Z2llbmUgcGlwZWxpbmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NJbWFnZUZvclVwbG9hZChcbiAgaW1hZ2VVcmk6IHN0cmluZyxcbiAgb3B0aW9uczogVXBsb2FkSHlnaWVuZU9wdGlvbnMgPSB7fVxuKTogUHJvbWlzZTxQcm9jZXNzZWRJbWFnZT4ge1xuICBjb25zdCBvcHRzID0geyAuLi5ERUZBVUxUX09QVElPTlMsIC4uLm9wdGlvbnMgfTtcbiAgXG4gIHRyeSB7XG4gICAgbG9nZ2VyLmluZm8oJ1N0YXJ0aW5nIHVwbG9hZCBoeWdpZW5lIHByb2Nlc3NpbmcnLCB7IHVyaTogaW1hZ2VVcmkgfSk7XG5cbiAgICAvLyAxLiBWYWxpZGF0ZSBNSU1FIHR5cGVcbiAgICBjb25zdCBtaW1lVmFsaWRhdGlvbiA9IGF3YWl0IHZhbGlkYXRlTWltZVR5cGUoaW1hZ2VVcmkpO1xuICAgIGlmICghbWltZVZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBmaWxlIHR5cGU6ICR7bWltZVZhbGlkYXRpb24ubWltZVR5cGV9YCk7XG4gICAgfVxuICAgIGxvZ2dlci5kZWJ1ZygnTUlNRSB0eXBlIHZhbGlkYXRlZCcsIHsgbWltZVR5cGU6IG1pbWVWYWxpZGF0aW9uLm1pbWVUeXBlIH0pO1xuXG4gICAgLy8gMi4gRml4IG9yaWVudGF0aW9uXG4gICAgY29uc3Qgb3JpZW50YXRpb25GaXhlZCA9IGF3YWl0IGZpeE9yaWVudGF0aW9uKGltYWdlVXJpKTtcbiAgICBsb2dnZXIuZGVidWcoJ09yaWVudGF0aW9uIGZpeGVkJyk7XG5cbiAgICAvLyAzLiBHZXQgaW5pdGlhbCBkaW1lbnNpb25zXG4gICAgY29uc3QgaW5pdGlhbE1hbmlwdWxhdGUgPSBhd2FpdCBJbWFnZU1hbmlwdWxhdG9yLm1hbmlwdWxhdGVBc3luYyhcbiAgICAgIG9yaWVudGF0aW9uRml4ZWQsXG4gICAgICBbXSxcbiAgICAgIHsgY29tcHJlc3M6IDEsIGZvcm1hdDogSW1hZ2VNYW5pcHVsYXRvci5TYXZlRm9ybWF0LkpQRUcgfVxuICAgICk7XG4gICAgXG4gICAgY29uc3Qgb3JpZ2luYWxXaWR0aCA9IGluaXRpYWxNYW5pcHVsYXRlLndpZHRoO1xuICAgIGNvbnN0IG9yaWdpbmFsSGVpZ2h0ID0gaW5pdGlhbE1hbmlwdWxhdGUuaGVpZ2h0O1xuICAgIGxvZ2dlci5kZWJ1ZygnT3JpZ2luYWwgZGltZW5zaW9ucycsIHsgd2lkdGg6IG9yaWdpbmFsV2lkdGgsIGhlaWdodDogb3JpZ2luYWxIZWlnaHQgfSk7XG5cbiAgICAvLyA0LiBSZXNpemUgdG8gbWF4IGRpbWVuc2lvbnNcbiAgICBjb25zdCByZXNpemVkID0gYXdhaXQgcmVzaXplSW1hZ2Uob3JpZW50YXRpb25GaXhlZCwgb3B0cy5tYXhEaW1lbnNpb24hKTtcbiAgICBsb2dnZXIuZGVidWcoJ0ltYWdlIHJlc2l6ZWQnLCB7IHdpZHRoOiByZXNpemVkLndpZHRoLCBoZWlnaHQ6IHJlc2l6ZWQuaGVpZ2h0IH0pO1xuXG4gICAgLy8gNS4gQ3JvcCB0byBhc3BlY3QgcmF0aW8gaWYgcmVxdWlyZWRcbiAgICBsZXQgY3JvcHBlZCA9IHJlc2l6ZWQ7XG4gICAgaWYgKG9wdHMuY3JvcFRvQXNwZWN0KSB7XG4gICAgICBjcm9wcGVkID0gYXdhaXQgY3JvcFRvQXNwZWN0UmF0aW8oXG4gICAgICAgIHJlc2l6ZWQudXJpLFxuICAgICAgICBvcHRzLmFzcGVjdFJhdGlvISxcbiAgICAgICAgcmVzaXplZC53aWR0aCxcbiAgICAgICAgcmVzaXplZC5oZWlnaHRcbiAgICAgICk7XG4gICAgICBsb2dnZXIuZGVidWcoJ0ltYWdlIGNyb3BwZWQnLCB7IGFzcGVjdFJhdGlvOiBvcHRzLmFzcGVjdFJhdGlvIH0pO1xuICAgIH1cblxuICAgIC8vIDYuIENvbXByZXNzIHdpdGggcXVhbGl0eSBzZXR0aW5nXG4gICAgY29uc3QgY29tcHJlc3NlZCA9IGF3YWl0IGNvbXByZXNzSW1hZ2UoY3JvcHBlZC51cmksIG9wdHMucXVhbGl0eSEpO1xuICAgIGxvZ2dlci5kZWJ1ZygnSW1hZ2UgY29tcHJlc3NlZCcsIHsgcXVhbGl0eTogb3B0cy5xdWFsaXR5IH0pO1xuXG4gICAgLy8gNy4gR2V0IGZpbmFsIGZpbGUgaW5mb1xuICAgIGNvbnN0IGZpbGVJbmZvID0gYXdhaXQgZ2V0RmlsZUluZm8oY29tcHJlc3NlZC51cmkpO1xuXG4gICAgY29uc3QgcmVzdWx0OiBQcm9jZXNzZWRJbWFnZSA9IHtcbiAgICAgIHVyaTogY29tcHJlc3NlZC51cmksXG4gICAgICB3aWR0aDogY29tcHJlc3NlZC53aWR0aCxcbiAgICAgIGhlaWdodDogY29tcHJlc3NlZC5oZWlnaHQsXG4gICAgICBmaWxlU2l6ZTogZmlsZUluZm8uc2l6ZSxcbiAgICAgIG1pbWVUeXBlOiAnaW1hZ2UvanBlZycsIC8vIEFsd2F5cyBKUEVHIG91dHB1dFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgb3JpZ2luYWxXaWR0aCxcbiAgICAgICAgb3JpZ2luYWxIZWlnaHQsXG4gICAgICAgIG9yaWVudGF0aW9uRml4ZWQ6IHRydWUsXG4gICAgICAgIGV4aWZTdHJpcHBlZDogb3B0cy5zdHJpcEV4aWYhID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgbG9nZ2VyLmluZm8oJ1VwbG9hZCBoeWdpZW5lIGNvbXBsZXRlJywge1xuICAgICAgZmluYWxTaXplOiBgJHtyZXN1bHQud2lkdGh9eCR7cmVzdWx0LmhlaWdodH1gLFxuICAgICAgZmlsZVNpemU6IGAkeyhyZXN1bHQuZmlsZVNpemUgLyAxMDI0KS50b0ZpeGVkKDIpfSBLQmAsXG4gICAgICBtaW1lVHlwZTogcmVzdWx0Lm1pbWVUeXBlLFxuICAgICAgbWV0YWRhdGE6IHJlc3VsdC5tZXRhZGF0YSxcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc3QgZXJyID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgIGxvZ2dlci5lcnJvcignVXBsb2FkIGh5Z2llbmUgcHJvY2Vzc2luZyBmYWlsZWQnLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qKlxuICogUGljayBpbWFnZSB3aXRoIHBlcm1pc3Npb25zIGFuZCBoeWdpZW5lIHByb2Nlc3NpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBpY2tBbmRQcm9jZXNzSW1hZ2UoXG4gIGFsbG93RWRpdGluZyA9IHRydWUsXG4gIG9wdGlvbnM6IFVwbG9hZEh5Z2llbmVPcHRpb25zID0ge31cbik6IFByb21pc2U8UHJvY2Vzc2VkSW1hZ2UgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gUmVxdWVzdCBjYW1lcmEgcm9sbCBwZXJtaXNzaW9uc1xuICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCBJbWFnZVBpY2tlci5yZXF1ZXN0TWVkaWFMaWJyYXJ5UGVybWlzc2lvbnNBc3luYygpO1xuICAgIGlmIChzdGF0dXMgIT09ICdncmFudGVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW1lcmEgcm9sbCBwZXJtaXNzaW9ucyBub3QgZ3JhbnRlZCcpO1xuICAgIH1cblxuICAgIC8vIExhdW5jaCBwaWNrZXJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBJbWFnZVBpY2tlci5sYXVuY2hJbWFnZUxpYnJhcnlBc3luYyh7XG4gICAgICBtZWRpYVR5cGVzOiBJbWFnZVBpY2tlci5NZWRpYVR5cGVPcHRpb25zLkltYWdlcyxcbiAgICAgIGFsbG93c0VkaXRpbmc6IGFsbG93RWRpdGluZyxcbiAgICAgIHF1YWxpdHk6IDEsIC8vIEdldCBmdWxsIHF1YWxpdHkgZmlyc3QsIHdlJ2xsIHByb2Nlc3MgaXRcbiAgICAgIGFsbG93c011bHRpcGxlU2VsZWN0aW9uOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIGlmIChyZXN1bHQuY2FuY2VsZWQgfHwgIXJlc3VsdC5hc3NldHNbMF0pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2V0ID0gcmVzdWx0LmFzc2V0c1swXTtcbiAgICBcbiAgICAvLyBQcm9jZXNzIHdpdGggdXBsb2FkIGh5Z2llbmVcbiAgICByZXR1cm4gYXdhaXQgcHJvY2Vzc0ltYWdlRm9yVXBsb2FkKGFzc2V0LnVyaSwgb3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc3QgZXJyID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgIGxvZ2dlci5lcnJvcignUGljayBhbmQgcHJvY2VzcyBlcnJvcicsIHsgZXJyb3I6IGVyciB9KTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cblxuLyoqXG4gKiBDYW1lcmEgY2FwdHVyZSB3aXRoIGh5Z2llbmUgcHJvY2Vzc2luZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FwdHVyZUFuZFByb2Nlc3NJbWFnZShcbiAgb3B0aW9uczogVXBsb2FkSHlnaWVuZU9wdGlvbnMgPSB7fVxuKTogUHJvbWlzZTxQcm9jZXNzZWRJbWFnZSB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBSZXF1ZXN0IGNhbWVyYSBwZXJtaXNzaW9uc1xuICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCBJbWFnZVBpY2tlci5yZXF1ZXN0Q2FtZXJhUGVybWlzc2lvbnNBc3luYygpO1xuICAgIGlmIChzdGF0dXMgIT09ICdncmFudGVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW1lcmEgcGVybWlzc2lvbnMgbm90IGdyYW50ZWQnKTtcbiAgICB9XG5cbiAgICAvLyBMYXVuY2ggY2FtZXJhXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSW1hZ2VQaWNrZXIubGF1bmNoQ2FtZXJhQXN5bmMoe1xuICAgICAgbWVkaWFUeXBlczogSW1hZ2VQaWNrZXIuTWVkaWFUeXBlT3B0aW9ucy5JbWFnZXMsXG4gICAgICBhbGxvd3NFZGl0aW5nOiBmYWxzZSxcbiAgICAgIHF1YWxpdHk6IDEsXG4gICAgfSk7XG5cbiAgICBpZiAocmVzdWx0LmNhbmNlbGVkIHx8ICFyZXN1bHQuYXNzZXRzWzBdKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBhc3NldCA9IHJlc3VsdC5hc3NldHNbMF07XG4gICAgXG4gICAgLy8gUHJvY2VzcyB3aXRoIHVwbG9hZCBoeWdpZW5lXG4gICAgcmV0dXJuIGF3YWl0IHByb2Nlc3NJbWFnZUZvclVwbG9hZChhc3NldC51cmksIG9wdGlvbnMpO1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGVyciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcbiAgICBsb2dnZXIuZXJyb3IoJ0NhcHR1cmUgYW5kIHByb2Nlc3MgZXJyb3InLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdXBsb2FkIGFnYWluc3QgcmF0ZSBsaW1pdHMgYW5kIHF1b3Rhc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1b3RhQ2hlY2sge1xuICBhbGxvd2VkOiBib29sZWFuO1xuICByZW1haW5pbmc6IG51bWJlcjtcbiAgcmVzZXRBdDogRGF0ZTtcbiAgbGltaXQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrVXBsb2FkUXVvdGEodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFF1b3RhQ2hlY2s+IHtcbiAgLy8gVGhpcyB3b3VsZCBjYWxsIHlvdXIgYmFja2VuZCBBUEkgdG8gY2hlY2sgdXNlciBxdW90YXNcbiAgLy8gSW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiB5b3VyIHJhdGUgbGltaXRpbmcgc3RyYXRlZ3lcbiAgXG4gIHRyeSB7XG4gICAgLy8gVE9ETzogSW50ZWdyYXRlIHdpdGggYWN0dWFsIHJhdGUgbGltaXQgQVBJXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIGEgbW9jayByZXNwb25zZVxuICAgIHJldHVybiB7XG4gICAgICBhbGxvd2VkOiB0cnVlLFxuICAgICAgcmVtYWluaW5nOiAxMCxcbiAgICAgIHJlc2V0QXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMjQgaG91cnNcbiAgICAgIGxpbWl0OiAxMCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGVyciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcbiAgICBsb2dnZXIuZXJyb3IoJ1F1b3RhIGNoZWNrIGVycm9yJywgeyBlcnJvcjogZXJyLCB1c2VySWQgfSk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qKlxuICogUHJvZ3Jlc3NpdmUgYmFja29mZiBvbiBmYWlsdXJlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkV2l0aFJldHJ5PFQ+KFxuICB1cGxvYWRGbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgbWF4UmV0cmllcyA9IDMsXG4gIGJhY2tvZmZNcyA9IDEwMDBcbik6IFByb21pc2U8VD4ge1xuICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsO1xuXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdXBsb2FkRm4oKTtcbiAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgbGFzdEVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKFN0cmluZyhlcnJvcikpO1xuICAgICAgXG4gICAgICBpZiAoYXR0ZW1wdCA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBiYWNrb2ZmTXMgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSk7XG4gICAgICAgIGxvZ2dlci53YXJuKCdVcGxvYWQgZmFpbGVkLCByZXRyeWluZycsIHsgZGVsYXksIGF0dGVtcHQsIG1heFJldHJpZXMsIGVycm9yOiBsYXN0RXJyb3IgfSk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRocm93IGxhc3RFcnJvciB8fCBuZXcgRXJyb3IoJ1VwbG9hZCBmYWlsZWQgYWZ0ZXIgcmV0cmllcycpO1xufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQWFBLElBQUFBLFdBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGdCQUFBLEdBQUFGLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFILHVCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBRyxPQUFBLEdBQUFILE9BQUE7QUFBa0MsU0FBQUQsd0JBQUFLLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFQLHVCQUFBLFlBQUFBLHdCQUFBSyxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFBLE1BQUFNLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLEtBQUFDLFNBQUEsUUFBQUMsT0FBQSxFQUFBVixDQUFBLGlCQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFNBQUFRLENBQUEsTUFBQUYsQ0FBQSxHQUFBTCxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxRQUFBRyxDQUFBLENBQUFLLEdBQUEsQ0FBQVgsQ0FBQSxVQUFBTSxDQUFBLENBQUFNLEdBQUEsQ0FBQVosQ0FBQSxHQUFBTSxDQUFBLENBQUFPLEdBQUEsQ0FBQWIsQ0FBQSxFQUFBUSxDQUFBLGNBQUFNLEdBQUEsSUFBQWQsQ0FBQSxnQkFBQWMsR0FBQSxPQUFBQyxjQUFBLENBQUFDLElBQUEsQ0FBQWhCLENBQUEsRUFBQWMsR0FBQSxPQUFBUCxDQUFBLElBQUFELENBQUEsR0FBQVcsTUFBQSxDQUFBQyxjQUFBLEtBQUFELE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQW5CLENBQUEs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